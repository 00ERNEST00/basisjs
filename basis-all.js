/*

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>

 @author
 Vladimir Ratsev
 Roman Dvornov

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>
*/
(function(){var Q=document.getElementsByTagName("script"),l=Q[Q.length-1].src.replace(/[^/]+.js$/,"");!function(e){function A(b,c){for(var g in c)b[g]=c[g];return b}function n(b,c){for(var g in c)!1==g in b&&(b[g]=c[g]);return b}function h(b){return null==b||void 0==b}function j(b){return b}function y(b,c){for(var g=b.split("."),i=e,f,u,z;g.length;)if(f=g.shift(),u=(u?u+".":"")+f,i[f]||(i[f]=function(b,c){var g={},C="function"==typeof c?c:null,i=function(){if(C)return C.apply(this,arguments)};i.path=
b;i.names=function(b){return Object.slice(g,"string"==typeof b?b.qw():b)};i.extend=function(b){n(g,b);A(this,b);return this};i.setWrapper=function(c){"function"==typeof c&&(C&&"undefined"!=typeof console&&console.warn("Wrapper for "+b+" is already set. Probably mistake here."),C=c)};return i}(u,!g.length?c:null),z&&(z.namespaces_[u]=i[f])),i=i[f],!z)z=i,z.namespaces_||(z.namespaces_={});return k[b]=i}function B(b){return b.replace(/[a-z0-9\-\_\.]+\.[a-z0-9]+$/i,"")}var s=e.document;A(Object,{extend:A,
complete:n,keys:function(b){var c=[],g;for(g in b)c.push(g);return c},values:function(b){var c=[],g;for(g in b)c.push(b[g]);return c},slice:function(b,c){var g={};if(!c)return A(g,b);for(var i=0,f;f=c[i++];)f in b&&(g[f]=b[f]);return g},splice:function(b,c){var g={};if(!c)return A(g,b);for(var i=0,f;f=c[i++];)f in b&&(g[f]=b[f],delete b[f]);return g},iterate:function(b,c,g){var i=[],f;for(f in b)i.push(c.call(g,f,b[f]));return i},coalesce:function(){for(var b=arguments,c=0;c<b.length;c++)if(null!=
b[c])return b[c]}});var v=function(){},t=function(){var b=1,c=[],g={},i={};return function(f,u){var z,a,o;if(!f||f===p)return p;"function"==typeof f?(o=f.basisGetterId_)?z=c[Math.abs(o)-1]:(z=function(b){return f(b)},z.base=f,z.__extend__=t,o=c.push(z),f.basisGetterId_=-o,z.basisGetterId_=o):(z=g[f])?o=z.basisGetterId_:(z=new Function("object","return object != null ? object."+f+" : object"),z.base=f,z.__extend__=t,o=c.push(z),z.basisGetterId_=o,g[f]=z);var d=null!=u&&typeof u;if(!d)return z;var k=
i[o],F;if("string"==d)F=d+u;else if("function"==d)F=u.basisModId_;else if("object"!=d)return z;if(F&&k&&k[F])return k[F];"function"==typeof z.base&&(z=z.base);switch(d){case "string":a=function(b){return u.format(z(b))};break;case "function":F||(F=d+b++,u.basisModId_=F);a=function(b){return u(z(b))};break;case "object":a=function(b){return u[z(b)]}}a.base=z.base||z;a.__extend__=t;F&&(k||(k={},i[o]=k),k[F]=a,a.mod=u,a.basisGetterId_=c.push(a));return a}}(),p=Function();p.__extend__=t;A(Function,{$undefined:function(b){return void 0==
b},$defined:function(b){return void 0!=b},$isNull:h,$isNotNull:function(b){return null!=b&&void 0!=b},$isSame:function(b){return b===this},$isNotSame:function(b){return b!==this},$self:j,$const:function(b){return function(){return b}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:v,getter:t,nullGetter:p,def:function(b,c,g){g=g||h;return function(i){i=b(i);return g(i)?c:i}},wrapper:function(b){return function(c){var g={};g[b]=c;return g}},lazyInit:function(b,
c){var g=0,i,f;return i=function(){g++||(i.inited=!0,i.data=f=b.apply(c||this,arguments));return f}},lazyInitAndRun:function(b,c,g){var i=0,f,u;return f=function(){i++||(f.inited=!0,f.data=u=b.call(g||this));c.apply(u,arguments);return u}},runOnce:function(b,c){var g=0;return function(){if(!g++)return b.apply(c||this,arguments)}}});n(Function.prototype,{bind:function(b){var c=this,g=Array.from(arguments,1);return g.length?function(){return c.apply(b,g.concat.apply(g,arguments))}:function(){return c.apply(b,
arguments)}},body:function(){return this.toString().replace(/^\s*\(?\s*function[^(]*\([^\)]*\)[^{]*\{|\}\s*\)?\s*$/g,"")}});n(Array,{isArray:function(b){return"[object Array]"===Object.prototype.toString.call(b)}});A(Array,{from:function(b,c){if(null!=b){var g=b.length;if("undefined"==typeof g)return[b];c||(c=0);if(0<g-c){for(var i=[],f=0,u=c;u<g;)i[f++]=b[u++];return i}}return[]},create:function(b,c,g){for(var i=[],f="function"==typeof c,u=0;u<b;u++)i[u]=f?c.call(g,u,i):c;return i}});n(Array.prototype,
{indexOf:function(b,c){c=parseInt(c)||0;if(0>c)return-1;for(;c<this.length;c++)if(this[c]===b)return c;return-1},lastIndexOf:function(b,c){for(var g=this.length,c=parseInt(c),c=isNaN(c)||c>=g?g-1:(c+g)%g;0<=c;c--)if(this[c]===b)return c;return-1},forEach:function(b,c){for(var g=0,i=this.length;g<i;g++)g in this&&b.call(c,this[g],g,this)},every:function(b,c){for(var g=0,i=this.length;g<i;g++)if(g in this&&!b.call(c,this[g],g,this))return!1;return!0},some:function(b,c){for(var g=0,i=this.length;g<i;g++)if(g in
this&&b.call(c,this[g],g,this))return!0;return!1},filter:function(b,c){for(var g=[],i=0,f=this.length;i<f;i++)i in this&&b.call(c,this[i],i,this)&&g.push(this[i]);return g},map:function(b,c){for(var g=[],i=0,f=this.length;i<f;i++)i in this&&(g[i]=b.call(c,this[i],i,this));return g},reduce:function(b,c){var g=this.length,i=arguments.length;if(0==g&&1==i)throw new TypeError;var f,u=0;1<i&&(f=c,u=1);for(i=0;i<g;i++)i in this&&(f=u++?b.call(null,f,this[i],i,this):this[i]);return f}});A(Array.prototype,
{flatten:function(){return this.concat.apply([],this)},repeat:function(b){return Array.create(parseInt(b)||0,this).flatten()},item:function(b){b=parseInt(b||0);return this[0<=b?b:this.length+b]},search:function(b,c,g){Array.lastSearchIndex=-1;for(var c=Function.getter(c||j),g=parseInt(g)||0,i=this.length;g<i;g++)if(c(this[g])===b)return this[Array.lastSearchIndex=g]},lastSearch:function(b,c,g){Array.lastSearchIndex=-1;for(var c=Function.getter(c||j),i=this.length,g=isNaN(g)||null==g?i:parseInt(g),
i=g>i?i:g;0<i--;)if(c(this[i])===b)return this[Array.lastSearchIndex=i]},binarySearchPos:function(b,c,g,i,f,u){if(!this.length)return i?-1:0;var c=Function.getter(c||j),g=!!g,z,f=isNaN(f)?0:f,a=isNaN(u)?this.length-1:u;do if(u=f+a>>1,z=c(this[u]),g?b>z:b<z)a=u-1;else if(g?b<z:b>z)f=u+1;else return b==z?u:i?-1:0;while(f<=a);return i?-1:u+(z<b^g)},binarySearch:function(b,c){return this.binarySearchPos(b,c,!1,!0)},add:function(b){return-1==this.indexOf(b)&&!!this.push(b)},remove:function(b){b=this.indexOf(b);
return-1!=b&&!!this.splice(b,1)},has:function(b){return-1!=this.indexOf(b)},merge:function(b){return this.reduce(A,b||{})},sortAsObject:function(b,c,g){b=Function.getter(b);g=g?-1:1;return this.map(function(c,g){return{i:g,v:b(c)}}).sort(c||function(b,c){return g*(b.v>c.v||-(b.v<c.v)||(b.i>c.i?1:-1))}).map(function(b){return this[b.i]},this)},set:function(b){this!==b&&(this.length=0,this.push.apply(this,b));return this},clear:function(){this.length=0;return this}});if(![1,2].splice(1).length){var d=
Array.prototype.splice;Array.prototype.splice=function(){var b=Array.from(arguments);2>b.length&&(b[1]=this.length);return d.apply(this,b)}}var r={"<":">","[":"]","(":")","{":"}","\u00ab":"\u00bb"},x=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,w=/\{([a-z\d\_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,m={};String.Entity={laquo:"\u00ab",raquo:"\u00bb",nbsp:"\u00a0",quot:'"',quote:'"',copy:"\u00a9",shy:"\u00ad",para:"\u00b6",sect:"\u00a7",deg:"\u00b0",mdash:"\u2014",hellip:"\u2026"};n(String,{toLowerCase:function(b){return(""+
b).toLowerCase()},toUpperCase:function(b){return(""+b).toUpperCase()},trim:function(b){return(""+b).trim()},trimLeft:function(b){return(""+b).trimLeft()},trimRight:function(b){return(""+b).trimRight()},isEmpty:function(b){return null==b||""==""+b},isNotEmpty:function(b){return null!=b&&""!=""+b}});n(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});A(String.prototype,{toObject:function(b){try{return Function("return 0,"+
this)()}catch(c){if(b)throw c;}},toArray:(new String("a"))[0]?function(){return Array.from(this)}:function(){for(var b=[],c=this.length,g=0;g<c;g++)b[g]=this.charAt(g);return b},repeat:function(b){return Array(parseInt(b)+1||0).join(this)},qw:function(){var b=this.trim();return b?b.split(/\s+/):[]},forRegExp:function(){return this.replace(x,"\\$1")},format:function(b){for(var c={},g=0;g<arguments.length;g++)c[g]=arguments[g];"object"==typeof b&&A(c,b);return this.replace(w,function(b,g,i,f,C){b=g in
c?c[g]:C?"":b;return i&&!isNaN(b)?(b=Number(b),"."==i?b.toFixed(f):b.lead(f)):b})},quote:function(b,c){var b=b||'"',c=c||r[b]||b,g=(1==b.length?b:"")+(1==c.length?c:"");return b+(g?this.replace(m[g]||(m[g]=RegExp("["+g.forRegExp()+"]","g"),"\\$&")):this)+c},capitalize:function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()},camelize:function(){return this.replace(/-(.)/g,function(b,c){return c.toUpperCase()})},dasherize:function(){return this.replace(/[A-Z]/g,function(b){return"-"+
b.toLowerCase()})}});String.format=String.prototype.format;11!="|||".split(/\|/).length+"|||".split(/(\|)/).length&&(String.prototype.split=function(b){if(""==b||b&&""==b.source)return this.toArray();var c=[],g=0,i;if(b instanceof RegExp)for(b.global||(b=RegExp(b.source,/\/([mi]*)$/.exec(b)[1]+"g"));i=b.exec(this);)i[0]=this.substring(g,i.index),c.push.apply(c,i),g=b.lastIndex;else for(;-1!=(i=this.indexOf(b,g));)c.push(this.substring(g,i)),g=i+b.length;c.push(this.substr(g));return c});if("2"!="12".substr(-1)){var a=
String.prototype.substr;String.prototype.substr=function(b,c){return a.call(this,b<0?Math.max(0,this.length+b):b,c)}}A(Number.prototype,{fit:function(b,c){return!isNaN(b)&&this<b?Number(b):!isNaN(c)&&this>c?Number(c):this},between:function(b,c){return!isNaN(this)&&this>=b&&this<=c},quote:function(b,c){return(this+"").quote(b,c)},toHex:function(){return parseInt(this).toString(16).toUpperCase()},sign:function(){return this<0?-1:+(this>0)},base:function(b){return!b||isNaN(b)?0:Math.floor(this/b)*b},
lead:function(b,c){return(this+"").replace(/\d+/,function(g){return(b=b-(g.length-1))>1?Array(b).join(c||0)+g:g})},group:function(b,c){return(this+"").replace(/\d+/,function(g){return g.replace(/\d/g,function(i,f){return!f+(g.length-f)%(b||3)?i:(c||" ")+i})})},format:function(b,c,g,i,f){b=this.toFixed(b);if(c||f)b=b.replace(/(\d+)(\.?)/,function(b,g,i){return(c?Number(g).group(3,c):g)+(i?f||i:"")});g&&(b=b.replace(/^-?/,"$&"+(g||"")));return b+(i||"")}});n(Date,{now:function(){return+new Date}});
1900>(new Date).getYear()&&A(Date.prototype,{getYear:function(){return this.getFullYear()-1900},setYear:function(b){return this.setFullYear(!isNaN(b)&&b<100?Number(b)+1900:b)}});var k={};Function();var q=function(){var b=Array.from(e.document?s.getElementsByTagName("SCRIPT"):null),c={basis:B(b&&b.length?b.item(-1).src:module.filename)},i={},f;if(typeof require=="function"){var a=module.filename.replace(/[^\/\\]+$/,"");f=function(b){return function(){var c=module.constructor.prototype.load;module.constructor.prototype.load=
function(g){this.exports=y(b);c.apply(this,arguments)};var g=require(a+b.replace(/\./g,"/"));module.constructor.prototype.load=c;return g}()}}else{f=function(b,z){if(/[^a-z0-9\_\.]/i.test(b))throw"Namespace `"+b+"` contains wrong chars.";var a=b.replace(/\./g,"/")+".js",o=b.split(".")[0];o==b&&(c[o]=z||B(location?location.href:""));o=c[o];if(!k[b]){if(!/^https?:/.test(o))throw"Path `"+b+"` ("+o+") can't be resolved";if(i[b])throw"Recursive require for "+b;i[b]=true;g(basis.namespace(b),o+a)();f.sequence.push(a)}};
f.sequence=[]}return f}(),E={},o=function(b){if(b in E==false){var c="",g=new XMLHttpRequest;g.open("GET",b,false);g.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString());g.send("");g.status>=200&&g.status<400?c=g.responseText:typeof console!="undefined"&&console.warn("basis.resource: Unable to load "+b);E[b]=c}return E[b]},f=function(){if(typeof require=="function"){var b=require("path");return function(c){return b.resolve(__dirname,c)}}var c=s.createElement("A");return function(b){c.href=
b;return c.href}}(),c={},b=function(b){b=f(b);if(!c[b]){var g=[],i=function(){return o(b)};i.url=b;i.toString=i;i.update=function(c){c=""+c;if(c!=E[b]){E[b]=c;for(var i=0,u;u=g[i];i++)u.handler.call(u.context,c)}};i.reload=function(){var c=E[b];delete E[b];var g=o(b);if(g!=c){delete E[b];this.update(g)}};i.bindingBridge={attach:function(b,c,i){for(var b=0,f;f=g[b];b++)if(f.handler==c&&f.context==i)return false;g.push({handler:c,context:i});return true},detach:function(b,c){for(var i=0,f;f=g[i];i++)if(f.handler==
b&&f.context==c){g.splice(i,1);return true}return false},get:function(){return o(b)}};c[b]=i}return c[b]},g=function(c,g){var i=B(g);return function(){var f=o(g);if(typeof c.exports!="object")c.exports={};try{Function("exports, module, basis, global, __filename, __dirname, resource",f+"//@ sourceURL="+g).call(c,c.exports,c,basis,e,g,i,function(c){return b(i+c)})}catch(a){throw a;}return c}};(function(){function b(c){return typeof c=="function"&&!!c.basisClassId_}function c(b){for(var g=this;g&&g!==
b;)g=g.superClass_;return g===b}var g=Function(),i=1,f=1,u=Function(),z={},a=function(){for(var b in{toString:1})return;return true}();A(g,{className:"basis.Class",extendConstructor_:false,prototype:{constructor:null,init:u,postInit:u,toString:function(){return"[object "+(this.constructor||this).className+"]"},destroy:function(){for(var b in this)this[b]=null;this.destroy=v}},create:function(u){typeof u!="function"&&(u=g);var a=Function();a.prototype=u.prototype;for(var a=new a,o=f++,o={className:u.className+
"._Class"+o,basisClassId_:o,superClass_:u,extendConstructor_:!!u.extendConstructor_,isSubclassOf:c,subclass:function(){return g.create.apply(null,[m].concat(Array.from(arguments)))},extend:g.extend,__extend__:function(c){return c&&c!==z&&(typeof c=="object"||typeof c=="function"&&!b(c))?g.create.call(null,m,c):c},prototype:a},N=1,d;d=arguments[N];N++)o.extend(typeof d=="function"&&!b(d)?d(u.prototype):d);var k={},m=o.extendConstructor_?function(b,c){this.eventObjectId=i++;var g,u;for(u in b){g=this[u];
this[u]=g&&g.__extend__?g.__extend__(b[u]):b[u]}this.init(c||k);this.postInit()}:function(){this.eventObjectId=i++;this.init.apply(this,arguments);this.postInit()};a.constructor=m;for(var E in a)a[E]===z&&(a[E]=m);A(m,o);return m},extend:function(b){var c=this.prototype;if(b.prototype)b=b.prototype;for(var g in b){var i=b[g],u=c[g];g=="className"||g=="extendConstructor_"?this[g]=i:c[g]=u&&u.__extend__?u.__extend__(i):i}if(a&&b[g="toString"]!==Object.prototype[g])c[g]=b[g];return this}});var o=function(b,
c){return{__extend__:function(b){if(!b||b&&b.__extend__)return b;var g=Function();g.prototype=this;g=new g;c(g,b);return g}}.__extend__(b||{})},d=function(b){return o(b,A)};return y("basis.Class",g.create).extend({SELF:z,BaseClass:g,create:g.create,isClass:b,customExtendProperty:o,extensibleProperty:d,nestedExtendProperty:function(b){return o(b,function(b,c){for(var g in c){var i=b[g];b[g]=i&&i.__extend__?i.__extend__(c[g]):d(c[g])}})},oneFunctionProperty:function(b,c){var g=function(c){var i;if(c){if(c.__extend__)return c;
i={__extend__:g};for(var u in c)c[u]&&(i[u]=b)}return i};return g(c||{})}})})();var i=function(){var b=[];return{add:function(c){c!=null&&b.push(c)},remove:function(c){b.remove(c)}}}();y("basis").extend({namespace:y,require:q,resource:b,wrapScript:g,platformFeature:{},Cleaner:i});e.basis.locale={}}(this);(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=global.document,A=basis.Cleaner,n=Function.getter;(function(){global.msSetImmediate&&global.msClearImmediate&&
(global.setImmediate=global.msSetImmediate,global.clearImmediate=global.msClearImmediate);if(!global.setImmediate){var h="setImmediate.basis",j=function(e){global.nativeSetTimeout_(function(){n(e)},0)},n=function(){var e={},h=1;global.setImmediate=function(){e[++h]={fn:arguments[0],args:Array.from(arguments,1)};j(h);return h};global.clearImmediate=function(p){delete e[p]};return function(p){var d=e[p];if(d)try{typeof d.fn=="function"?d.fn.apply(void 0,d.args):(global.execScript||function(d){global.eval.call(global,
d)})(""+d.fn)}finally{delete e[p]}}}();if(global.MessageChannel)j=function(e){var h=new global.MessageChannel;h.port1.onmessage=function(){n(e)};h.port2.postMessage("")};else{var A=global.postMessage&&!global.importScripts;if(A){var s=global.onmessage;global.onmessage=function(){A=false};global.postMessage("","*");global.onmessage=s}A?(s=function(e){if(e&&e.source==global)(e=(""+e.data).split(h)[1])&&n(e)},global.addEventListener?global.addEventListener("message",s,!0):global.attachEvent("onmessage",
s),j=function(e){postMessage(h+e,"*")}):e&&"onreadystatechange"in e.createElement("script")&&(j=function(h){var j=e.createElement("script");j.onreadystatechange=function(){n(h);j.onreadystatechange=null;j.parentNode.removeChild(j);j=null};e.documentElement.appendChild(j)})}}global.nativeSetTimeout_=global.setTimeout;global.nativeClearTimeout_=global.clearTimeout;global.setTimeout=function(e,j){return isNaN(j)||j<=0?h+global.setImmediate(e):global.nativeSetTimeout_(e,j)};global.clearTimeout=function(e){var j=
(""+e).split(h)[1];return j?global.clearImmediate(j):global.nativeClearTimeout_(e)}})();this.extend({TimeEventManager:function(){function e(){if(!r)if(v.length){var x=Date.now(),j=Math.max(v[0].eventTime,x);j<p&&(clearTimeout(d),d=setTimeout(y,(p=j)-x))}else d=clearTimeout(d),p=B}function j(d,r){var m=d.eventObjectId,a=t[r]&&t[r][m];a&&(v.remove(a),delete t[r][m],e())}function y(){var d=Date.now(),d=v.binarySearchPos(d+15,s);r=!0;v.splice(0,d).forEach(function(d){delete t[d.eventName][d.object.eventObjectId];
d.callback.call(d.object)});r=!1;p=B;e()}var B=2E12,s=n("eventTime"),v=[],t={},p=B,d=null,r=!1;A.add({destroy:function(){r=!0;clearTimeout(d);v.length=0;t=null}});return{add:function(d,r,m){var a=d.eventObjectId,k=t[r];k||(k=t[r]={});var q=k[a];if(q){if(isNaN(m))return j(d,r);if(q.eventTime==m)return;v.remove(q);q.eventTime=m}else{if(isNaN(m))return;q=k[a]={eventName:r,object:d,eventTime:m,callback:d[r]}}v.splice(v.binarySearchPos(m,s),0,q);e()},remove:j}}()})}.body()+"//@ sourceURL="+l+"src/basis/timer.js")).call(basis.namespace("basis.timer"),
basis.namespace("basis.timer"),basis.namespace("basis.timer").exports,this,l+"src/basis/timer.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(e){var A=j[e];A||(A=j[e]=function(){var j=this.handlers_,n,p;A.listen&&(p=this.listen[A.listenName])&&A.listen.call(this,p,arguments);if(j&&j.length)for(var j=h.call(j),d=j.length;0<d--;)n=j[d],(p=n.handler[e])&&"function"==typeof p&&
p.apply(n.thisObject,arguments),(p=n.handler["*"])&&"function"==typeof p&&p.call(n.thisObject,{sender:this,type:e,args:arguments})},y[e]&&n(A,y[e]));return A}var A=basis.Class,n=Object.extend,h=Array.prototype.slice,j={},y={},A=A(null,{className:this.name+".EventObject",handlers_:null,event_destroy:e("destroy","object"),listen:A.nestedExtendProperty(),extendConstructor_:!0,init:function(){this.handler&&(this.handlers_||(this.handlers_=[])).push({handler:this.handler,thisObject:this.handlerContext||
this})},addHandler:function(e,j){var h=this.handlers_;h||(h=this.handlers_=[]);j||(j=this);for(var n=h.length,p;0<n--;)if(p=h[n],p.handler===e&&p.thisObject===j)return!1;return!!h.push({handler:e,thisObject:j})},removeHandler:function(e,j){var h=this.handlers_;if(h){j||(j=this);for(var n=h.length,p;0<n--;)if(p=h[n],p.handler===e&&p.thisObject===j)return!!h.splice(n,1);return!1}},destroy:function(){this.handlers_&&(j.destroy.call(this,this),this.handlers_=null)}});this.extend({LISTEN:{add:function(e,
h,A,t){A||(A=e);y[h]={listenName:e,listen:t||function(e,d){var r;(r=d[1])&&r.removeHandler(e,this);(r=this[A])&&r.addHandler(e,this)}};(e=j[h])&&n(e,y[h])}},create:e,events:j,EventObject:A})}.body()+"//@ sourceURL="+l+"src/basis/event.js")).call(basis.namespace("basis.event"),basis.namespace("basis.event"),basis.namespace("basis.event").exports,this,l+"src/basis/event.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){function e(d){for(var e=1E6,d=(""+d).split("."),j=0,m=0;4>j&&j<d.length;j++,e/=100)m+=d[j]*e;return m}function A(){for(var d=0;d<arguments.length;d++){var j=arguments[d].toLowerCase();if(j in n){if(n[j])return!0}else{var p=j.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(p){n[j]=!1;var m=p[1].toLowerCase(),a=e(p[3]),p=p[4]||"=";if(m=h[m])return n[j]=!a||"="==p&&m==a||"+"==p&&m>=a||"-"==p&&m<a}}}return!1}var n={},h={},j=global.navigator&&global.navigator.userAgent||"",y="unknown",l={MSIE:["Internet Explorer",
"msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]},s;for(s in l)if(!("MSIE"==s&&global.opera)&&!("Safari"==s&&j.match(/chrome/i))&&!("AppleWebKit"==s&&j.match(/iphone/i))&&j.match(RegExp(s+".(\\d+(\\.\\d+)*)","i")))for(var v=l[s],t=global.opera&&
"function"==typeof global.opera.version?global.opera.version():RegExp.$1,p=e(t),y=v[0]+" "+t,t=0;t<v.length;t++)h[v[t].toLowerCase()]=p;basis.platformFeature.datauri=!1;j="undefined"!=typeof Image?new Image:{};j.onload=function(){basis.platformFeature.datauri=!0};j.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";l={set:function(d,e,j,m){document.cookie=d+"="+(null==e?"":escape(e))+";path="+(m||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)+(j?";expires="+
(new Date(Date.now()+1E3*j)).toGMTString():"")},get:function(d){return(d=document.cookie.match(RegExp("(^|;)\\s*"+d+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(d[2])},remove:function(d,e){document.cookie=d+"=;expires="+(new Date(0)).toGMTString()+";path="+(e||(0==location.pathname.indexOf("/")?"":"/")+location.pathname)}};if(A("IE7-"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}this.toString=function(){return y};this.extend({testImage:j,prettyName:y,test:A,is:function(d){return A(d)},
cookies:l,Cookies:l})}.body()+"//@ sourceURL="+l+"src/basis/ua.js")).call(basis.namespace("basis.ua"),basis.namespace("basis.ua"),basis.namespace("basis.ua").exports,this,l+"src/basis/ua.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(){document.addEventListener(h+"visibilitychange",A,!1);e=Function.$undef}function A(){for(var e=n(),j=0,d;d=y[j];j++)for(var r in d.handler)r==
e&&d.handler[r].call(d.thisObject)}function n(){return document[h?h+"VisibilityState":"visibilityState"]||"visible"}var h,j=!1,y=[],l=["webkit","moz","o","ms"];if(void 0!=document.visibilityState)h="";else for(var s=0,v;v=l[s];s++)document[v+"VisibilityState"]&&(h=v);j=void 0!==h;this.extend({addHandler:function(h,p){if(j){e();for(var d=y.length,r;0<d--;)if(r=y[d],r.handler===h&&r.thisObject===p)return!1;return!!y.push({handler:h,thisObject:p})}},removeHandler:function(e,p){if(j){for(var d=y.length,
r;0<d--;)if(r=y[d],r.handler===e&&r.thisObject===p)return!!y.splice(d,1);return!1}},getState:n})}.body()+"//@ sourceURL="+l+"src/basis/ua/visibility.js")).call(basis.namespace("basis.ua.visibility"),basis.namespace("basis.ua.visibility"),basis.namespace("basis.ua.visibility").exports,this,l+"src/basis/ua/visibility.js",l+"src/basis/ua/",basis,function(e){return basis.resource(l+"src/basis/ua/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(b,
c,i){if(null!=c)return b.insertBefore(k(c)?c:j(c),i||null)}function A(b,c){return b.outerHTML||l("",c?b:b.cloneNode(!0)).innerHTML}function n(b){return k(b)||b&&b.nodeType?b:"string"==typeof b?t.getElementById(b):null}function h(b,c,i){var f,a=[],i="string"==typeof i?getter(i):i||Function.$true;c&26&&i(b)&&a.push(b);switch(c){case 1:case 2:for(f=b;(f=f[r])&&f!==b.document;)i(f)&&a.push(f);break;case 64:for(f=b[x];f;)i(f)&&a.push(f),f=f[w];break;case 4:case 8:b[x]&&(c=new q(b),c.nodes(i,a));break;
case 128:c=new q(b,i);for(c.cursor_=b[w]||b[r];f=c.next();)a.push(f);break;case 256:for(f=b;f=f[w];)i(f)&&a.push(f);break;case 32:i(b[r])&&a.push(b[r]);break;case 512:c=new q(b,i,q.BACKWARD);for(c.cursor_=b[m]||b[r];f=c.next();)a.push(f);break;case 1024:for(f=b;f=f[m];)i(f)&&a.push(f)}return a}function j(b){return t.createTextNode(null!=b?b:"")}function y(){for(var b=t.createDocumentFragment(),c=arguments.length,i=y.array=[],f=0;f<c;f++)i.push(e(b,arguments[f]));return b}function l(b,g){var i=void 0!=
b&&"string"!=typeof b,a=(i?b.description:b)||"",d="div",k=a.match(/^([a-z0-9\_\-]+)(.*)$/i);k&&(d=k[1],a=k[2]);if(""!=a){for(var D=[],m={},u;k=c.exec(a);){if(k[8])throw Error("Create element error in basis.dom.createElement()\n\nDescription:\n> "+a+"\n\nProblem place:\n> "+a.substr(0,k.index)+"--\>"+a.substr(k.index)+"<--");u=k[1]||k[2]||k[3];k[1]?m.id=u:k[2]?D.push(u):"class"!=u&&(m[u]=k[4]?k[5]||k[6]||k[7]||"":u)}o&&m.name&&/^(input|textarea|select)$/i.test(d)&&(d="<"+d+" name="+m.name+">")}a=t.createElement(d);
if(m){m.style&&f&&(a.style.cssText=m.style);for(var z in m)a.setAttribute(z,m[z],0)}D&&D.length&&(a.className=D.join(" "));1<arguments.length&&e(a,y.apply(0,Array.from(arguments,1).flatten()));if(i&&(b.css&&basis.cssom&&basis.cssom.setStyle(a,b.css),basis.dom.event))for(var E in b)"function"==typeof b[E]?basis.dom.event.addHandler(a,E,b[E],a):b[E]instanceof basis.dom.event.Handler&&basis.dom.event.addHandler(a,E,b[E].handler,b[E].thisObject);return a}function s(b,c){return b[r]?b[r].replaceChild(c,
b):b}function v(b){if(t.selection){var c=t.selection.createRange();0!=c.compareEndPoints("StartToEnd",c)&&c.collapse(b);return c.getBookmark().charCodeAt(2)-2}}var t=global.document,p=basis.Class,d=t.createElement("div"),r="parentNode",x="firstChild",w="nextSibling",m="previousSibling",a;a="function"==typeof d.compareDocumentPosition?function(b,c){return b.compareDocumentPosition(c)}:function(b,c){return b==c?0:b.document!=c.document?33:b.sourceIndex>c.sourceIndex?2|8*c.contains(childA):4|16*b.contains(childB)};
var k;"undefined"!=typeof Node?(k=function(b){return b instanceof Node},Node.prototype.contains||(Node.prototype.contains=function(b){return!!(this.compareDocumentPosition(b)&16)})):k=function(b){return b&&b.ownerDocument===t};var q=p(null,{root_:null,cursor_:null,filter:Function.$true,init:function(b,c,i){this.setRoot(b);this.setDirection(i);if(typeof c=="function")this.filter=c},setDirection:function(b){Object.extend(this,b?{a:"lastChild",b:m,c:w,d:x}:{a:x,b:w,c:m,d:"lastChild"})},setRoot:function(b){this.root_=
b||t;this.reset()},reset:function(){this.cursor_=null},first:function(b){this.reset();return this.next(b)},last:function(b){this.reset();return this.prev(b)},nodes:function(b,c){var i;c||(c=[]);for(this.reset();i=this.next(b);)c.push(i);return c},next:function(b){var b=b||this.filter,c=this.cursor_||this.root_;do for(var i=c[this.a];!i;){if(c===this.root_)return this.cursor_=null;(i=c[this.b])||(c=c[r])}while(!b(c=i));return this.cursor_=c},prev:function(b){var b=b||this.filter,c=this.cursor_,i=this.c,
f=this.d;do{var a=c?c[i]:this.root_[f];if(a){for(;a[f];)a=a[f];c=a}else c&&(c=c[r]);if(!c||c===this.root_){c=null;break}}while(!b(c));return this.cursor_=c},destroy:function(){this.cursor_=this.root_=null}});q.BACKWARD=!0;var E="textContent innerText nodeValue".qw(),o=function(){var b=t.createElement("input");b.name="a";return!/name/.test(A(b))}(),f;d.setAttribute("style","color: red");f="red"!==d.style.color;var c=/#([a-z0-9\_\-\:]+)|\.([a-z0-9\_\-\:]+)|\[([a-z0-9\_\-:]+)(="((?:\\.|[^"])*)"|='((?:\\.|[^'])*)'|=((?:\\.|[^\]])*))?\s*\]|\s*(\S)/gi;
this.extend({ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_TYPE_NODE:10,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,AXIS_ANCESTOR:1,AXIS_ANCESTOR_OR_SELF:2,AXIS_DESCENDANT:4,AXIS_DESCENDANT_OR_SELF:8,AXIS_SELF:16,AXIS_PARENT:32,AXIS_CHILD:64,AXIS_FOLLOWING:128,AXIS_FOLLOWING_SIBLING:256,AXIS_PRESCENDING:512,AXIS_PRESCENDING_SIBLING:1024,INSERT_BEGIN:"begin",INSERT_END:"end",
INSERT_BEFORE:"before",INSERT_AFTER:"after",TreeWalker:q,outerHTML:A,textContent:function(b){for(var c=0,i;i=E[c++];)if(b[i]!=null)return b[i];return h(b,4,function(b){return b.nodeType==3}).map(getter("nodeValue")).join("")},get:n,tag:function(b,c){b=n(b)||t;return c=="*"&&b.all?Array.from(b.all):Array.from(b.getElementsByTagName(c||"*"))},axis:h,findAncestor:function(b,c,i){for(;b&&b!==i;){if(c(b))return b;b=b.parentNode}},createElement:l,createText:j,createFragment:y,insert:function(b,c,i,f){b=
n(b);if(!b)throw Error("basis.dom.insert: destination node can't be null");switch(i){case void 0:case "end":f=null;break;case "begin":f=b[x];break;case "before":break;case "after":f=f[w];break;default:f=Number(i).between(0,b.childNodes.length)?b.childNodes[i]:null}i=!k(b);if(!c||!Array.isArray(c))i=i?c&&b.insertBefore(c,f):e(b,c,f);else if(i)for(var i=[],a=0,o=c.length;a<o;a++)i[a]=b.insertBefore(c[a],f);else{b.insertBefore(y.apply(0,c),f);i=y.array}return i},remove:function(b){return b[r]?b[r].removeChild(b):
b},replace:s,swap:function(b,c){if(b===c||a(b,c)&25)return false;s(b,d);s(c,b);s(d,c);return true},clone:function(b,c){var i=b.cloneNode(!c);i.attachEvent&&h(i,8).forEach(Event.clearHandlers);return i},clear:function(b){for(b=n(b);b.lastChild;)b.removeChild(b.lastChild);return b},wrap:function(b,c,i){var f=[],i=Function.getter(i||Function.$self),a;for(a in c)for(var o=0;o<b.length;o++){var d=i(b[o]);f[o]=c[a](b[o],o,d)?l(a,d):b[o]}return f},setAttribute:function(b,c,i){i==null?b.removeAttribute(c):
b.setAttribute(c,i)},parentOf:function(b,c){return b.contains(c)},isInside:function(b,c){return b==c||c.contains(b)},focus:function(b,c){try{b=n(b);b.focus();c&&b.select&&b.select()}catch(i){}},setSelectionRange:function(b,c,i){arguments.length<3&&(i=c);if(b.setSelectionRange)b.setSelectionRange(c,i);else if(b.createTextRange){var f=b.createTextRange();f.collapse(true);f.moveStart("character",c);f.moveEnd("character",i-c);f.select()}},getSelectionStart:function(b){return typeof b.selectionStart!=
"undefined"?b.selectionStart:v(true)},getSelectionEnd:function(b){return typeof b.selectionEnd!="undefined"?b.selectionEnd:v(false)}})}.body()+"//@ sourceURL="+l+"src/basis/dom.js")).call(basis.namespace("basis.dom"),basis.namespace("basis.dom"),basis.namespace("basis.dom").exports,this,l+"src/basis/dom.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a){return a||global.event}
function A(a){return"string"==typeof a?p.get(a):a}function n(a){a=e(a);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function h(a){a=e(a);a.preventDefault?a.preventDefault():a.returnValue=!1}function j(a,o){(o=A(o))?l(o,a,j):(h(a),n(a))}function y(a){var o=Array.from(m[a.type]);if(o)for(var f=o.length;0<f--;){var c=o[f];c.handler.call(c.thisObject,a)}}function l(d,o,f,c){d=A(d);if(!d)throw"basis.event.addHandler: can't attach event listener to undefined";if("function"!=typeof f)throw"basis.event.addHandler: handler is not a function";
d[x]||(d[x]={});var b={handler:f,thisObject:c},g=d[x],i=g[o];if(i){for(d=0;g=i[d];d++)if(g.handler===f&&g.thisObject===c)return;i.push(b)}else i=g[o]=[b],i.fireEvent=function(b){b=e(b);if(a&&b&&m[o]&&"undefined"==typeof b.returnValue){y(b);if(!0===b.cancelBubble)return;"undefined"==typeof b.returnValue&&(b.returnValue=!0)}for(var c=0,g;g=i[c++];)g.handler.call(g.thisObject,b)},d.addEventListener?d.addEventListener(o,i.fireEvent,!1):d.attachEvent("on"+o,i.fireEvent)}function s(a,o,f,c){var a=A(a),
b=a[x];if(b&&(b=b[o]))for(var g=0,i;i=b[g];g++)if(i.handler===f&&i.thisObject===c){b.splice(g,1);b.length||v(a,o);break}}function v(a,o){var a=A(a),f=a[x];if(f)if("string"!=typeof o)for(o in f)v(a,o);else{var c=f[o];c&&(a.removeEventListener?a.removeEventListener(o,c.fireEvent,!1):a.detachEvent("on"+o,c.fireEvent),delete f[o])}}var t=global.document,p=basis.dom,d=Function.$null,r=!!t.addEventListener,x="__basisEvents",w={mousewheel:["mousewheel","DOMMouseScroll"]},m={},a=!t.addEventListener,k=function(){function a(){if(!f++)for(var b=
0;b<c.length;b++)c[b].callback.call(c[b].thisObject)}function o(){try{t.documentElement.doScroll("left"),a()}catch(b){setTimeout(o,1)}}var f=!1,c=[];if("undefined"!=typeof window){if(r)l(t,"DOMContentLoaded",a);else{l(t,"readystatechange",a);try{null==window.frameElement&&t.documentElement.doScroll&&o()}catch(b){}}l(global,"load",a)}return function(b,i){f||c.push({callback:b,thisObject:i})}}(),q={};this.setWrapper(e);this.extend({W3CSUPPORT:r,KEY:{BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,
CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},MOUSE_LEFT:{VALUE:1,BIT:1},MOUSE_RIGHT:{VALUE:3,BIT:2},MOUSE_MIDDLE:{VALUE:2,BIT:4},browserEvents:function(a){return w[a]||[a]},Handler:function(a,o){this.handler=a;this.thisObject=o},sender:function(a){a=e(a);return a.target||a.srcElement},cancelBubble:n,cancelDefault:h,kill:j,key:function(a){a=
e(a);return a.keyCode||a.which||0},charCode:function(a){a=e(a);return a.charCode||a.keyCode||0},mouseButton:function(a,o){a=e(a);return"number"==typeof a.which?a.which==o.VALUE:a.button&o.BIT},mouseX:function(a){a=e(a);return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:a.clientX+(t.documentElement.scrollLeft||t.body.scrollLeft)},mouseY:function(a){a=e(a);return a.changedTouches?a.changedTouches[0].pageY:"pageY"in a?a.pageY:a.clientY+(t.documentElement.scrollTop||t.body.scrollTop)},
wheelDelta:function(a){a=e(a);return"wheelDelta"in a?a.wheelDelta/120:"DOMMouseScroll"==a.type?-a.detail/3:0},addGlobalHandler:function(k,o,f){var c=m[k];if(c)for(k=c.length;0<k--;){var b=c[k];if(b.handler===o&&b.thisObject===f)return}else a?l(t,k,d):t.addEventListener(k,y,!0),c=m[k]=[];c.push({handler:o,thisObject:f})},removeGlobalHandler:function(k,o,f){var c=m[k];if(c)for(var b=0,g;g=c[b];b++)if(g.handler===o&&g.thisObject===f){c.splice(b,1);c.length||(delete m[k],a?s(t,k,d):t.removeEventListener(k,
y,!0));break}},addHandler:l,addHandlers:function(a,o,f){var a=A(a),c;for(c in o)l(a,c,o[c],f)},removeHandler:s,clearHandlers:v,fireEvent:function(a,o,f){a=A(a);(a=a[x])&&a[o]&&a[o].fireEvent(f)},onLoad:k,onUnload:function(a,o){l(global,"unload",a,o)},getEventInfo:function(a,o){o||(o="div");var f=o+"-"+a;if(q[f])return q[f];var c=!1,b=!1;if(!r){var g="on"+a,i=p.createElement(o);p.createElement("div",i)[g]=function(){b=!0};try{i.fireEvent(g),c=!0}catch(d){}}return q[f]={supported:c,bubble:b}}});basis.namespace("basis.dom").extend({ready:k})}.body()+
"//@ sourceURL="+l+"src/basis/dom/event.js")).call(basis.namespace("basis.dom.event"),basis.namespace("basis.dom.event"),basis.namespace("basis.dom.event").exports,this,l+"src/basis/dom/event.js",l+"src/basis/dom/",basis,function(e){return basis.resource(l+"src/basis/dom/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a,f,c){for(var b=1,g;f;)f&1&&(g=x[b],c&b?(a.addHandler(g.handler,g.context),g.action(g.context.add,a)):(a.removeHandler(g.handler,
g.context),g.action(g.context.remove,a))),f>>=1,b<<=1}function A(a){return Array.isArray(a)?a.map(A):{data:a}}var n=basis.Class,h=Object.values,j=Function.$self,y=basis.event.EventObject,l=basis.event.LISTEN,s=basis.event.create,v=basis.event.events,t={},p=[],d={},r={PRIORITY:[],add:function(a,f){var c=a.toUpperCase(),b=a.toLowerCase();this[c]=b;d[b]=c;f=f?this.PRIORITY.indexOf(f):-1;-1==f?this.PRIORITY.push(b):this.PRIORITY.splice(f,0,b)},getList:function(){return Object.values(d)}};r.add("READY");
r.add("DEPRECATED");r.add("UNDEFINED");r.add("ERROR");r.add("PROCESSING");var x={},w=1,m={NONE:0,ALL:0,add:function(a,f,c){x[w]={handler:f,action:c,context:{add:function(b,c){if(c){var i=m[a]+"_"+b.eventObjectId;c.subscribers_||(c.subscribers_={});if(!c.subscribers_[i]){var f=c.subscriberCount;c.subscribers_[i]=b;c.subscriberCount+=1;c.event_subscribersChanged(c,f)}}},remove:function(b,c){if(c){var i=m[a]+"_"+b.eventObjectId;if(c.subscribers_[i]){var f=c.subscriberCount;delete c.subscribers_[i];c.subscriberCount-=
1;c.event_subscribersChanged(c,f)}}}}};m[a]=w;m.ALL|=w;w<<=1}};m.add("DELEGATE",{delegateChanged:function(a,f){this.remove(a,f);this.add(a,a.delegate)}},function(a,f){a(f,f.delegate)});m.add("TARGET",{targetChanged:function(a,f){this.remove(a,f);this.add(a,a.target)}},function(a,f){a(f,f.target)});l.add("delegate","delegateChanged");l.add("target","targetChanged");var a=n(y,{state:r.READY,data:null,canHaveDelegate:!0,delegate:null,root:null,cascadeDestroy:!1,isTarget:!1,target:null,active:!1,subscribeTo:m.DELEGATE+
m.TARGET,subscriberCount:0,subscribers_:null,event_update:s("update","object","delta"),event_stateChanged:s("stateChanged","object","oldState"),event_delegateChanged:s("delegateChanged","object","oldDelegate"),event_rootChanged:s("rootChanged","object","oldRoot"),event_targetChanged:s("targetChanged","object","oldTarget"),event_subscribersChanged:s("subscribersChanged","object"),event_activeChanged:s("activeChanged","object"),listen:{delegate:{update:function(a,f){this.data=a.data;this.event_update(this,
f)},stateChanged:function(a,f){this.state=a.state;this.event_stateChanged(this,f)},targetChanged:function(a,f){this.target=a.target;this.event_targetChanged(this,f)},rootChanged:function(a,f){this.data=a.data;this.root=a.root;this.event_rootChanged(this,f)},destroy:function(){this.cascadeDestroy?this.destroy():this.setDelegate()}}},init:function(a){y.prototype.init.call(this,a);if(a=this.delegate)this.delegate=null,this.data=a.data,this.state=a.state,this.setDelegate(a);else if(this.root=this,this.data||
(this.data={}),this.isTarget)this.target=this;this.active&&e(this,this.subscribeTo,m.ALL)},isConnected:function(d){if(d instanceof a){for(;d&&d!==this&&d!==d.delegate;)d=d.delegate;return d===this}return!1},getRootDelegate:function(){for(var a=this;a.delegate&&a.delegate!==a;)a=a.delegate;return a},setDelegate:function(d){if(this.canHaveDelegate&&d&&d instanceof a){if(d.delegate&&this.isConnected(d))return!1}else d=null;if(this.delegate!==d){var f=this.state,c=this.data,b=this.delegate,g=this.target,
i=this.root,k={};if(d){this.delegate=d;this.root=d.root;this.data=d.data;this.state=d.state;this.target=d.target;for(var m in d.data)!1===m in c&&(k[m]=void 0);for(m in c)c[m]!==d.data[m]&&(k[m]=c[m]);for(m in k){this.event_update(this,k);break}f!==this.state&&(""+f!=this.state||f.data!==this.state.data)&&this.event_stateChanged(this,f)}else for(m in this.target=this.delegate=null,this.root=this,this.data={},c)this.data[m]=c[m];this.root!==i&&this.event_rootChanged(this,i);this.target!==g&&this.event_targetChanged(this,
g);this.event_delegateChanged(this,b);return!0}return!1},setState:function(a,f){var c=this.target||this.getRootDelegate();if(c!==this)return c.setState(a,f);c=""+a;if(!d[c])throw Error("Wrong state value");if(this.state!=c||this.state.data!=f){var b=this.state;this.state=Object(c);this.state.data=f;this.event_stateChanged(this,b);return!0}return!1},deprecate:function(){this.state!=r.PROCESSING&&this.setState(r.DEPRECATED)},update:function(a){var f=this.target||this.getRootDelegate();if(f!==this)return f.update(a);
if(a){var f={},c=0,b;for(b in a)this.data[b]!==a[b]&&(c++,f[b]=this.data[b],this.data[b]=a[b]);if(c)return this.event_update(this,f),f}return!1},setActive:function(a){a=!!a;return this.active!=a?(this.active=a,this.event_activeChanged(this),e(this,this.subscribeTo,m.ALL*a),!0):!1},setSubscription:function(a){var a=a&m.ALL,f=this.subscribeTo^a;return f?(this.subscribeTo=a,this.active&&e(this,f,a),!0):!1},destroy:function(){this.active&&e(this,this.subscribeTo,0);this.delegate&&this.setDelegate();y.prototype.destroy.call(this);
this.data=t;this.state=r.UNDEFINED;this.target=this.root=null}}),k={destroy:function(){delete this.map[this.itemId]}},j=n(null,{itemClass:a,keyGetter:j,map_:null,extendConstructor_:!0,init:function(){this.map_={};basis.Cleaner.add(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(d){var f={};d instanceof a?f.delegate=d:f.data={id:d,title:d};return new this.itemClass(f)},get:function(d,f){var c=d instanceof a?d.eventObjectId:d,b=this.map_[c];!b&&f&&(b=this.map_[c]=this.create(d,
f),b.addHandler(k,{map:this.map_,itemId:c}));return b},destroy:function(){basis.Cleaner.remove(this);for(var a=h(this.map_),f=0,c;c=a[f++];)c.destroy()}}),q=n(a,{state:r.UNDEFINED,itemCount:0,item_:null,memberMap_:null,cache_:null,event_datasetChanged:s("datasetChanged","dataset","delta")&&function(a,f){var c,b=0,g=0,i;if(c=f.inserted)for(;i=c[b];)this.item_[i.eventObjectId]=i,b++;if(c=f.deleted)for(;i=c[g];)delete this.item_[i.eventObjectId],g++;this.itemCount+=b-g;this.cache_=null;v.datasetChanged.call(this,
a,f)},init:function(d){a.prototype.init.call(this,d);this.memberMap_={};this.item_={}},has:function(a){return!(!a||!this.item_[a.eventObjectId])},getItems:function(){this.cache_||(this.cache_=h(this.item_));return this.cache_},pick:function(){for(var a in this.item_)return this.item_[a];return null},top:function(a){var f=[];if(a)for(var c in this.item_)if(f.push(this.item_[c])>=a)break;return f},add:function(){},remove:function(){},set:function(){},sync:function(){},clear:function(){},destroy:function(){this.clear();
a.prototype.destroy.call(this);this.cache_=p;this.itemCount=0;this.item_=this.memberMap_=null}}),E=n(q,{listen:{item:{destroy:function(a){this.remove([a])}}},init:function(a){q.prototype.init.call(this,a);if(a=this.items)this.items=null,this.set(a)},add:function(d){for(var f,c=this.memberMap_,b=[],g=this.listen.item,i=0;i<d.length;i++){var k=d[i];if(k instanceof a){var m=k.eventObjectId;c[m]||(c[m]=k,g&&k.addHandler(g,this),b.push(k))}}b.length&&this.event_datasetChanged(this,f={inserted:b});return f},
remove:function(d){for(var f,c=this.memberMap_,b=[],g=this.listen.item,i=0;i<d.length;i++){var k=d[i];if(k instanceof a){var m=k.eventObjectId;c[m]&&(g&&k.removeHandler(g,this),delete c[m],b.push(k))}}b.length&&this.event_datasetChanged(this,f={deleted:b});return f},set:function(d){if(!this.itemCount)return this.add(d);if(!d.length)return this.clear();for(var f=this.memberMap_,c={},b=[],g=[],i,k,m,e=this.listen.item,D=0;D<d.length;D++)i=d[D],i instanceof a&&(k=i.eventObjectId,c[k]=i,f[k]||(f[k]=i,
e&&i.addHandler(e,this),g.push(i)));for(k in f)c[k]||(i=f[k],e&&i.removeHandler(e,this),delete f[k],b.push(i));var I;var d={},u;g&&g.length&&(u=d.inserted=g);b&&b.length&&(u=d.deleted=b);u&&(I=d);(m=I)&&this.event_datasetChanged(this,m);return m},sync:function(d,f){if(d){E.setAccumulateState(!0);for(var c=this.memberMap_,b,g,i={},k=[],m,e=0;e<d.length;e++)b=d[e],b instanceof a&&(g=b.eventObjectId,i[g]=b,c[g]||k.push(b));for(g in this.item_)i[g]||this.item_[g].destroy();f&&k.length&&(m=this.add(k));
E.setAccumulateState(!1);return m}},clear:function(){var a,f=this.getItems(),c=this.listen.item;if(f.length){if(c)for(a=f.length;0<a--;)f[a].removeHandler(c,this);this.event_datasetChanged(this,a={deleted:f});this.memberMap_={}}return a}});E.setAccumulateState=function(){function a(b){var c=b.dataset;i.call(c,c,b)}function f(){var b=m;m={};for(var c in b)a(b[c])}function c(b,c){var g=b.eventObjectId,f=c.inserted,d=c.deleted,k=m[g];if(f&&d)return k&&(delete m[g],a(k)),i.call(b,b,c);if(k){var e=k[f?
"inserted":"deleted"];if(e)return e.push.apply(e,f||d);a(k)}m[g]=c;c.dataset=b}function b(){k=null;d&&(d=0,g.event_datasetChanged=i,f())}var g=q.prototype,i=g.event_datasetChanged,d=0,k,m={};return function(a){a?(0==d&&(g.event_datasetChanged=c,k||(k=setTimeout(b,0))),d++):(d-=0<d,0==d&&(g.event_datasetChanged=i,f()))}}();this.setWrapper(A);this.extend({STATE:r,SUBSCRIPTION:m,Object:a,DataObject:a,KeyObjectMap:j,AbstractDataset:q,Dataset:E})}.body()+"//@ sourceURL="+l+"src/basis/data.js")).call(basis.namespace("basis.data"),
basis.namespace("basis.data"),basis.namespace("basis.data").exports,this,l+"src/basis/data.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(b){return function(c){if(!c||!("click"==c.type&&3==c.which)){var a=s.sender(c),g,i;if(a){do if(g=a.getAttributeNode&&a.getAttributeNode(b))break;while(a=a.parentNode);if(a&&g){do if(i=a.basisObjectId)if((i=o[i])&&i.templateAction){a=
g.nodeValue.qw();g=0;for(var f;f=a[g++];)i.templateAction(f,s(c));break}while(a=a.parentNode)}}}}}function A(){this.instances_&&n.call(this)}function n(){var b=this.instances_,c=""+("function"==typeof this.source?this.source():this.source),c=this.isDecl?c.toObject():g(c),c=C(c),a=this.l10n_;if(a){this.l10n_=null;for(var i=0,f;f=a[i];i++)f.token.detach(f.handler,f)}this.createInstance=c.createInstance;this.getBinding=c.getBinding;this.instances_=c.map;var d=c.l10nProtoUpdate;if(b)for(var k in b)b[k].rebuild();
if(c.l10n){this.l10n_=a=[];var b=c.map,m;for(m in c.l10n)f={path:m,token:basis.l10n.getToken(m),handler:function(c){d(this.path,c);for(var a in b)b[a].set(this.path,c)}},f.token.attach(f.handler,f),a.push(f)}}function h(b){return function(){var c;var a=j.getElementById(b);if(a&&"SCRIPT"==a.tagName)switch(a.type){default:c=a.textContent||a.text}return c}}var j=global.document,y=basis.Class,l=basis.dom,s=basis.dom.event,v="undefined"!=typeof window&&1==l.createElement("","a","b").cloneNode(!0).childNodes.length,
t=/((?:.|[\r\n])*?)(\{(?:l10n:([a-z\_][a-z0-9\-\_]*(?:\.[a-z\_][a-z0-9\-\_]*)*)\})?|<(\/|!--(\s*\{)?)?|$)/g,p=/([a-z\_][a-z0-9\-\_]*)(\:|\{|\s*(\/?>)?)/ig,d=/([a-z\_][a-z0-9\-\_]*)(\:|\{|=|\s*)|(\/?>)/ig,r=/(.|[\r\n])*?--\>/g,x=/([a-z\_][a-z0-9\-\_]*(?:\:[a-z\_][a-z0-9\-\_]*)?)>/ig,w=/([a-z\_][a-z0-9\_]*)(\||\}\s*)/ig,m=/"((?:(\\")|[^"])*?)"\s*/g,a=/"/g,k=/\\"/g,q=/^event-(.+)+/,E={},o={seed:1},f={},c={svg:"http://www.w3.org/2000/svg"},b=function(b){var c=[],a=[],g={childs:c},i,f,o,e,F=!1,J=0,N,P=
{},j,C=t,q=0,h,b=b.trim();try{for(;q<b.length||C!=t;)if(e=C.lastIndex=q,h=C.exec(b),!h||h.index!==q){F&&(g=a.pop());f&&g.childs.pop();if(f=g.childs.pop())3==f.type&&!f.refs?J-="len"in f?f.len:f.value.length:g.childs.push(f);F=!1;C=t}else{q=C.lastIndex;switch(C){case t:N=e+h[1].length;J!=N&&(i=J==e?h[1]:b.substring(J,N),(f=i.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&g.childs.push({type:3,len:i.length,value:f}));J=N;h[3]?g.childs.push({type:3,refs:["l10n:"+h[3]],value:"{l10n:"+h[3]+"}"}):"{"==h[2]?(o=q-
1,g.childs.push(f={type:3}),C=w):h[4]?"/"==h[4]?(f=null,C=x):(g.childs.push(f={type:8}),h[5]?(o=q-h[5].length,C=w):(o=q,C=r)):h[2]&&(F=!0,a.push(g),g.childs.push(f={type:1,attrs:[],childs:[]}),g=f,C=p);break;case x:h[1]!==(g.prefix?g.prefix+":":"")+g.name?g.childs.push({type:3,value:"</"+h[0]}):g=a.pop();C=t;break;case p:case d:if(":"==h[2]){if(f.prefix)throw"Invalid or unsupported syntax";f.prefix=h[1];break}h[1]&&(f.name=h[1],2==f.type&&g.attrs.push(f));if("{"==h[2]){C=w;break}if(h[3]){"/>"==h[3]&&
(g=a.pop());F=!1;C=t;break}if("="==h[2]){C=m;break}f={type:2};C=d;break;case r:f.value=b.substring(o,q-3);C=t;break;case w:j=h[1];if(P[j]){var n=P[j];n.refs.splice(n.refs.indexOf(j),1);n.refs.length||delete n.refs}3!=f.type&&(P[j]=f);f.refs?f.refs.push(h[1]):f.refs=[h[1]];"|"!=h[2]&&(3==f.type?(q-=h[2].length-1,f.value=b.substring(o,q),C=t):8==f.type?C=r:2==f.type&&"="==b[q]?(q++,C=m):(f={type:2},C=d));break;case m:f.value=h[1].replace(k,'"');f={type:2};C=d;break;default:throw"Parser bug";}C==t&&
(J=q)}J!=q&&g.childs.push({type:3,value:b.substring(J,q)});c.length||c.push({type:3,value:""});!1=="element"in P&&(c[0].refs?c[0].refs.push("element"):c[0].refs=["element"]);if(1<a.length)throw"No close tag for "+a.pop().name;c.templateDeclaration=!0}catch(E){console.warn(E,b)}return c},g=function(){function c(b,a){m[a]||("#"==a.charAt(0)?m[a]=String.fromCharCode("x"==a.charAt(1)||"X"==a.charAt(1)?parseInt(a.substr(2),16):a.substr(1)):(F.innerHTML=b,m[a]=F.firstChild?F.firstChild.nodeValue:""));return m[a]}
function a(b){b=b.refs;return!b||!b.length?0:b}function g(b){for(var m=[],F=0,o,e;o=b[F];F++){var C=a(o),r=C&&1==C.length?1:0;switch(o.type){case 1:e=r;for(var r=(o.prefix?o.prefix+":":"")+o.name,q=o.attrs,j=[],h=void 0,x=void 0,p=void 0,n=0,E=void 0;E=q[n];n++){h=0;if(E.value)if("class"==E.name){if(x=E.value.match(i)){for(var w=[],A={},t,h=[[]],G=0;t=x[G];G++)(p=t.match(f))?(t=A[p[2]],A[p[2]]||(t=A[p[2]]=[],h[0].push(p[2]),h.push(t)),t.push(p[1]||"")):w.push(t);E.value=w.join(" ");1==h.length&&(h=
0)}}else if(x=E.value.split(d),1<x.length){p=[];w=[];A={};for(G=0;G<x.length;G++)G%2?(h=x[G],A[h]||(A[h]=p.length,p.push(h)),w.push(A[h])):x[G]&&w.push(x[G].replace(k,c));h=[p,w]}else E.value=E.value.replace(k,c);j.push([2,h,a(E),(E.prefix?E.prefix+":":"")+E.name,E.value])}e=[1,e,C,r,j.length?j:0,g(o.childs)];break;case 3:e=[3,r,C,o.value.replace(k,c)];break;case 8:e=[8,r,C,o.value.replace(k,c)]}m.push(e)}return m.length?m:0}var i=/(\S+)/g,f=/^([a-z\_][a-z0-9\-\_]*)?\{([a-z\_][a-z0-9\-\_]*)\}$/i,
d=/\{([a-z\_][a-z0-9\_]*|l10n:[a-z\_][a-z0-9\_]*(?:\.[a-z\_][a-z0-9\_]*)*)\}/i,k=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,m={},F=j.createElement("div");return function(c,a){c.templateDeclaration||(c=b(""+c,a));return g(c)}}(),i=function(){function b(c,a){for(var g=0,i;i=c[g];g++)-1==i.indexOf(":")&&f.push(i+":"+a)}function c(b){var a=i.length,a=g[a]||"r"+a;i.push(a+"="+b);return a}function a(g,f){for(var k,z,m,o,e,C,r=0,h=0,q;q=g[r];r++,h++,C=!1){r?g[r+1]?(v&&q[0]==g[r-1][0]&&3==q[0]&&h++,k=f+".childNodes["+
h+"]"):k=f+".lastChild":k=f+".firstChild";if(o=q[2])C=!0,k=c(k),b(o,k),q[1]&&d.push([q[0],k,o[0]]);if(1==q[0]){e=-1;C||(k=c(k),e=i.length);if(z=q[4])for(var j=0,p;p=z[j];j++){var x=p[3];if(o=p[2])C=!0,b(o,c(k+'.getAttributeNode("'+x+'")'));if(o=p[1]){p=[2,k];C=!0;for(var n=0,E;E=o[0][n];n++)E="class"==x?p.concat([E,x,o[n+1]]):p.concat([E,x,o[0],o[1]]),d.push(E)}}(m=q[5])&&a(m,k);!C&&e==i.length&&i.pop()}}}var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".toArray(),i,f,d;return function(b,
c){i=[];f=[];d=[];a(b,c);return{path:i,ref:f,binding:d}}}(),C=function(){function b(c,a){return function(){for(var b=0,g;g=c[b];b++)this.tmpl.set(g,a[g](this))}}function c(a){var g={};return function(c){var i="bindingId"in c?c.bindingId:null,f=g[i];if(!f){var f=[],d={},u={},k={},z;for(z in a){var m=c[z],o=m&&m.getter;if(o&&(k[z]=o,f.push(z),m.events))for(var m=(""+m.events).qw(),o=0,F;F=m[o];o++)d[F]?d[F].push(z):(u||(u={}),d[F]=[z],u[F]=b(d[F],k))}f={names:f,events:d,sync:b(f,k),handler:u};i&&(g[i]=
f)}return f}}function g(b,c){for(var i=[],f=b[5],d=b[4],u,k,z=0;z<f.length;z++)"string"==typeof f[z]?i.push('"'+f[z].replace(a,'\\"')+'"'):(u=d[f[z]],k=u.indexOf(":"),-1==k?i.push(c?'"{'+u+'}"':"__"+u):i.push('__l10n["'+u.substr(k+1)+'"]'));1==i.length&&i.push('""');return i.join("+")}function f(b){for(var a={},i,d,k,z=[],m=[],D,o,F={},e=0,C;C=b[e];e++){k=C[1];h=C[2];i=a[h];d="_"+e;D="__"+h;var r=h.split(":");if("l10n"==r[0]&&r[1])(D=r[1],o||(o={}),a[D]||(a[D]=[],o[D]=[]),i=a[D],i.l10n=!0,3==C[0])?
(i.push(k+'.nodeValue=__l10n["'+D+'"];'),o[D].push(k+".nodeValue=value;")):(o[D].push("bind_attr("+[k,'"'+q+'"',"{}",g(C,!0)]+");"),z.push(d),i.push(d+"=bind_attr("+[k,'"'+q+'"',d,g(C)]+");"));else switch(a[h]||(i=a[h]=[],z.push(D)),C[0]){case 1:case 8:z.push(d+"="+k);F.bind_node=!0;i.push(d+"=bind_node("+[k,d]+",value);");break;case 3:z.push(d+"="+k);F.bind_nodeValue=!0;i.push(d+"=bind_nodeValue("+[k,d]+",value);");break;case 2:var q=C[3];if("class"==q){C=C[4];for(D=0;D<C.length;D++)z.push(d+'=""'),
F.bind_attrClass=!0,i.push(d+"=bind_attrClass("+[k,d,"value",'"'+C[D]+'"']+");")}else F.bind_attr=!0,z.push(d+"="+g(C,!0)),i.push(d+"=bind_attr("+[k,'"'+q+'"',d,g(C)]+");")}}m.push("function set(bindName,value){\nvalue=resolve(attaches,updateAttach,bindName,value);switch(bindName){");for(var h in a)m.push('case"'+h+'":\n'+(a[h].l10n?a[h].join("\n"):"if(__"+h+"!==value){__"+h+"=value;\n"+a[h].join("\n")+"}")+"break;");m.push("}}");for(var j in F)z.push(j+"=tools."+j);return{vars:z,l10n:o,getBinding:c(a),
body:m.join("")}}var d=/\s+/,k="function"==typeof Node&&j instanceof Node,m=k?function(b,c,a){b=a instanceof Node?a:b;b!==c&&c.parentNode.replaceChild(b,c);return b}:function(b,c,a){a=a&&"object"==typeof a?a:b;if(a!==c)try{c.parentNode.replaceChild(a,c)}catch(g){a=b,c!==a&&c.parentNode.replaceChild(a,c)}return a},e=function(b,c,a,g){a!==g&&(g?b.setAttribute(c,g):b.removeAttribute(c));return g},F={bind_nodeValue:k?function(b,c,a){var g=a instanceof Node?a:b;g!==c&&c.parentNode.replaceChild(g,c);g===
b&&(g.nodeValue=a);return g}:function(b,c,a){c=m(b,c,a);c===b&&(c.nodeValue=a);return c},bind_node:m,bind_attr:e,bind_attrClass:global.DOMTokenList&&j&&j.documentElement.classList instanceof global.DOMTokenList?function(b,c,a,g){a=a?g+a:"";a!=c&&(c&&b.classList.remove(c),a&&b.classList.add(a));return a}:function(b,c,a,g){a=a?g+a:"";a!=c&&(g=b.className.split(d),c&&g.remove(c),a&&g.push(a),b.className=g.join(" "));return a},resolve:function(b,c,a,g){var i=g&&g.bindingBridge,f=b[a];if(i||f)i?(g!==f&&
(f&&f.bindingBridge.detach(f,c,a),i.attach(g,c,a),b[a]=g),g=i.get(g)):f&&(f.bindingBridge.detach(f,c,a),delete b[a]);return g}};return function(b){var c=i(b,"_"),a=f(c.binding),g=G(b),b={},d;if(a.l10n){d={};var u=[],k;for(k in a.l10n)u.push('case"'+k+'":\n__l10n["'+k+'"]=value;'+a.l10n[k].join(";")+"break;");u=new Function("_","__l10n","bind_attr","var "+c.path+";return function(token, value){switch(token){"+u.join("")+"}}");u=u(g,d,e);for(k in a.l10n)u(k,basis.l10n.getToken(k).value)}c=new Function("gMap",
"tMap","build","tools","__l10n","return function createInstance_(obj,actionCallback,updateCallback){var _=build(),id=gMap.seed++,attaches={},resolve=tools.resolve,"+c.path.concat(a.vars)+";\nif(obj&&a&&a.nodeType!=3)gMap[a.basisObjectId=id]=obj;\nfunction updateAttach(){set(String(this),attaches[this])};\n"+a.body+";return tMap[id]={"+[c.ref,"set:set,rebuild:function(){if(updateCallback)updateCallback.call(obj)},destroy:function(){for(var key in attaches)if(attaches[key])attaches[key].bindingBridge.detach(attaches[key],updateAttach,key);attaches=null;delete tMap[id];if(obj)delete gMap[id]}"]+
"}}");c=c(o,b,function(){return g.cloneNode(!0)},F,d);return{createInstance:c,getBinding:a.getBinding,l10nProtoUpdate:u,l10n:a.l10n,map:b}}}(),G=function(b){for(var a=j.createDocumentFragment(),g,i,f,d=0,k;k=b[d];d++)switch(k[0]){case 1:var m=k[3];g=m.split(/:/);f=1<g.length?j.createElementNS(c[g[0]],m):j.createElement(m);if(g=k[4])for(var o=0,C;C=g[o];o++){var h=C[3];f.setAttribute(h,C[4]);if(C=h.match(q)){C=C[1];if(!E[C]){E[C]=e(h);for(var h=0,r=s.browserEvents(C),p;p=r[h++];)s.addGlobalHandler(p,
E[C])}s.W3CSUPPORT||(h=s.getEventInfo(C,m),h.supported&&!h.bubble&&f.attachEvent("on"+C,function(b){return function(){s.fireEvent(j,b)}}(C)))}}(i=k[5])&&f.appendChild(G(i));a.appendChild(f);break;case 8:a.appendChild(j.createComment(k[3]));break;case 3:v&&d&&3==b[d-1][0]&&a.appendChild(j.createComment("")),a.appendChild(j.createTextNode(k[3]))}return a},H=y(null,{__extend__:function(b){return b instanceof H?b:new H(b)},init:function(b){this.setSource(b)},createInstance:function(b,c,a){n.call(this);
return this.createInstance(b,c,a)},clearInstance:function(b){b.destroy()},getBinding:function(b){n.call(this);return this.getBinding(b)},setSource:function(b){var c=this.source;if(c!=b){this.isDecl=!1;if("string"==typeof b){var a=b.match(/^([a-z]+):/);if(a){var g=a[1],b=b.substr(a[0].length);switch(g){case "file":b=basis.resource(b);break;case "id":b=h(b);case "tokens":this.isDecl=!0}}}if(c&&c.bindingBridge){if(a=c.url&&f[c.url])a.remove(this),a.length||delete f[c.url];this.source.bindingBridge.detach(c,
A,this)}b&&b.bindingBridge&&(b.url&&(f[b.url]||(f[b.url]=[]),f[b.url].add(this)),b.bindingBridge.attach(b,A,this));this.source=b;A.call(this)}}});this.extend({Template:H,tokenize:b,makeDeclaration:g,buildPathes:i,makeFunctions:C,buildHtml:G,filesMap:f,resolveObjectById:function(b){return o[b]}})}.body()+"//@ sourceURL="+l+"src/basis/template.js")).call(basis.namespace("basis.template"),basis.namespace("basis.template"),basis.namespace("basis.template").exports,this,l+"src/basis/template.js",l+"src/basis/",
basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.dom,A=basis.template.Template,n=global.document.createElement("div");this.extend({Template:A,escape:function(h){return e.createElement("div",e.createText(h)).innerHTML},unescape:function(e){n.innerHTML=e;return n.firstChild.nodeValue},string2Html:function(h){n.innerHTML=h;return e.createFragment.apply(null,Array.from(n.childNodes))}})}.body()+
"//@ sourceURL="+l+"src/basis/html.js")).call(basis.namespace("basis.html"),basis.namespace("basis.html"),basis.namespace("basis.html").exports,this,l+"src/basis/html.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(b){return b.sortingValue||0}function A(b,c){b=b.sortingValue||0;c=c.sortingValue||0;return+(b>c)||-(b<c)}function n(b,c){b=b.sortingValue||0;c=c.sortingValue||
0;return-(b>c)||+(b<c)}function h(b){return b.childNodes.sort(b.sortingDesc?n:A)}function j(b,c,a,g,i){if(c!==a){var f=b,d=[];g&&(b.contextSelection=a,b.selected&&d.push(b));for(;f;){if((g=!f.selection||i&&f===b?f.firstChild:null)&&g.contextSelection!==c)throw"Try change wrong context selection";for(;!g;){if(f===b){d.length&&(c&&c.remove(d),a&&a.add(d));return}g=f.nextSibling;g||(f=f.parentNode)}f=g;f.selected&&d.push(f);f.contextSelection=a}}}function y(b,c){var a=c.length-1;b.childNodes=c;b.firstChild=
c[0]||null;b.lastChild=c[a]||null;for(var g=a;a=c[g];g--)a.nextSibling=c[g+1]||null,a.previousSibling=c[g-1]||null,b.insertBefore(a,a.nextSibling)}function l(b,c){var a;if("function"==typeof b.childFactory&&(a=b.childFactory(c),a instanceof b.childClass))return a;if(!a)throw i;throw g;}var s=this.path,v=basis.Class,t=basis.dom,p=basis.data,d=basis.event.create,r=basis.event.events,x=basis.event.LISTEN,w=p.SUBSCRIPTION,m=p.DataObject,a=p.AbstractDataset,k=p.Dataset,q=Function.getter,E=Function.nullGetter,
o=Function.$undef,f=Object.complete,p=v.oneFunctionProperty,c=s+": Node can't be inserted at specified point in hierarchy",b=s+": Node was not found",g=s+": Child node has wrong class",i=s+": Child node is null",C=s+": Operation is not allowed because node is under dataSource control",G=s+": Node can't has owner and parentNode",H={NONE:"none",PARENT:"parent",OWNER:"owner"};w.add("OWNER",{ownerChanged:function(b,c){this.remove(b,c);this.add(b,b.owner)}},function(b,c){b(c,c.owner)});w.add("DATASOURCE",
{dataSourceChanged:function(b,c){this.remove(b,c);this.add(b,b.dataSource)}},function(b,c){b(c,c.dataSource)});var D=v.customExtendProperty({},function(b,c){for(var a in c){var g=c[a];v.isClass(g)&&(g={instanceOf:g});if(g&&"object"==typeof g){var i=!1,f={instanceOf:g.instanceOf},d={key:a,config:f};typeof g.config&&(f.config=g.config);"function"==typeof g.existsIf&&(i=f.existsIf=g.existsIf);"function"==typeof g.delegate&&(i=f.delegate=g.delegate);"function"==typeof g.dataSource&&(i=f.dataSource=g.dataSource);
if(i){var g=g.hook?u.__extend__(g.hook):u,k;for(k in g)if(g[k]===I){d.hook=g;break}}b[a]=d}else b[a]=null}}),I=function(){var b=this.owner,c=this.context.key,a=this.context.config,g=!a.existsIf||a.existsIf(b),i=b.satellite[c];g?i?(a.delegate&&i.setDelegate(a.delegate(b)),a.dataSource&&i.setDataSource(a.dataSource(b))):(g=("function"==typeof a.config?a.config(b):a.config)||{},g.owner=b,a.delegate&&(g.delegate=a.delegate(b)),a.dataSource&&(g.dataSource=a.dataSource(b)),i=new a.instanceOf(g),b.satellite[c]=
i,b.event_satelliteChanged(this,c,null),b.listen.satellite&&i.addHandler(b.listen.satellite,b)):i&&(delete b.satellite[c],b.event_satelliteChanged(b,c,i),i.destroy())},u=p(I,{update:!0});x.add("owner","ownerChanged");x.add("dataSource","dataSourceChanged");var z=v(m,{event_update:function(b,c){m.prototype.event_update.call(this,b,c);var a=this.parentNode;a&&(a.matchFunction&&this.match(a.matchFunction),a.insertBefore(this,this.nextSibling))},event_childNodesModified:d("childNodesModified","node",
"delta")&&function(b,c){r.childNodesModified.call(this,b,c);var a=this.listen.childNode,g;if(a){if(g=c.inserted)for(var i=0,f;f=g[i];i++)f.addHandler(a,this);if(g=c.deleted)for(i=0;f=g[i];i++)f.removeHandler(a,this)}},event_dataSourceChanged:d("dataSourceChanged","node","oldDataSource"),event_groupingChanged:d("groupingChanged","node","oldGroupingNode"),event_sortingChanged:d("sortingChanged","node","oldSorting","oldSortingDesc"),event_ownerChanged:d("ownerChanged","node","oldOwner"),event_satelliteChanged:d("satelliteChanged",
"node","key","oldSattelite"),subscribeTo:m.prototype.subscribeTo+w.DATASOURCE,listen:{owner:{destroy:function(){this.setOwner()}}},autoDelegate:H.NONE,nodeType:"DOMWrapperNode",childNodes:null,childClass:z,dataSource:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:E,sortingDesc:!1,grouping:null,groupingClass:null,groupNode:null,satelliteConfig:D,satellite:null,owner:null,init:function(b){var c=this.dataSource,
a=this.childNodes,g=this.grouping;c&&(this.dataSource=null);m.prototype.init.call(this,b);g&&(this.grouping=null,this.setGrouping(g));if(this.childClass)this.childNodes=[],c?(this.dataSource=null,this.setDataSource(c)):a&&this.setChildNodes(a);else if(a&&(this.childNodes=null),c)this.dataSource=null;if(this.satellite){var b=this.listen.satellite,i;for(i in this.satellite)c=this.satellite[i],c.setOwner(this),this.event_satelliteChanged(this,i,null),b&&c.addHandler(b,this)}else this.satellite={};if(this.satelliteConfig!==
D)for(i in this.satelliteConfig)if((b=this.satelliteConfig[i])&&"object"==typeof b)c={context:b,owner:this},b.hook&&this.addHandler(b.hook,c),I.call(c);if(i=this.owner)this.owner=null,this.setOwner(i)},setSatellite:function(b,c){var a=this.satellite[b];!1==c instanceof m&&(c=null);if(a!=c&&!this.satelliteConfig[b]){var g=this.listen.satellite;a&&(a.setOwner(null),g&&a.removeHandler(g,this));if(this.satellite[b]=c)c.setOwner(this),g&&c.addHandler(g,this);this.event_satelliteChanged(this,b,a)}},appendChild:function(){},
insertBefore:function(){},removeChild:function(){},replaceChild:function(){},clear:function(){},setChildNodes:function(){},setGrouping:function(){},setSorting:function(){},setDataSource:function(){},setOwner:function(b){if(!b||!1==b instanceof z)b=null;if(b&&this.parentNode)throw G;var c=this.owner;c!==b&&(this.owner=b,this.event_ownerChanged(this,c),this.autoDelegate==H.OWNER&&this.setDelegate(b))},destroy:function(){m.prototype.destroy.call(this);this.dataSource?this.setDataSource():this.firstChild&&
this.clear();this.parentNode&&this.parentNode.removeChild(this);this.grouping&&(this.grouping.setOwner(),this.grouping=null);this.owner&&this.setOwner();if(this.satellite){for(var b in this.satellite){var c=this.satellite[b];c.owner=null;c.destroy()}this.satellite=null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=this.parentNode=this.childNodes=null}}),L=v(z,{autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(b){this.nodes=[];z.prototype.init.call(this,b)},
insert:function(b,c){var a=this.nodes,g=c?a.indexOf(c):-1;-1==g?(a.push(b),this.last=b):a.splice(g,0,b);this.first=a[0];b.groupNode=this;this.event_childNodesModified(this,{inserted:[b]})},remove:function(b){var c=this.nodes;c.remove(b)&&(this.first=c[0]||null,this.last=c[c.length-1]||null,b.groupNode=null,this.event_childNodesModified(this,{deleted:[b]}));!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(this.first){for(var b=this.nodes,c=b.length;0<c--;)b[c].groupNode=null;
this.nodes=[];this.last=this.first=null;this.event_childNodesModified(this,{deleted:b});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){z.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),M={childClass:z,childFactory:null,listen:{dataSource:{datasetChanged:function(b,c){var a={},g=[];if(c.deleted)if(a.deleted=g,this.childNodes.length==c.deleted.length){var g=Array.from(this.childNodes),i=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=i;this.dataSourceMap_=
{}}else for(var i=0,f;f=c.deleted[i];i++){f=f.eventObjectId;var d=this.dataSourceMap_[f];delete this.dataSourceMap_[f];d.canHaveDelegate=!0;this.removeChild(d);g.push(d)}if(c.inserted){a.inserted=[];for(i=0;f=c.inserted[i];i++)d=l(this,{cascadeDestroy:!1,delegate:f}),d.canHaveDelegate=!1,this.dataSourceMap_[f.eventObjectId]=d,a.inserted.push(d),this.firstChild&&this.insertBefore(d)}this.firstChild?this.event_childNodesModified(this,a):this.setChildNodes(a.inserted);if(this.destroyDataSourceMember&&
g.length)for(i=0;f=g[i];i++)f.destroy()},destroy:function(b){this.dataSource===b&&this.setDataSource()}}},appendChild:function(b){return this.insertBefore(b)},insertBefore:function(a,g){if(!this.childClass)throw c;if(a.firstChild)for(var i=this;i=i.parentNode;)if(i===a)throw c;var f=a&&a instanceof this.childClass;if(this.dataSource&&(!f||this.dataSourceMap_[a.delegate.eventObjectId]!==a))throw C;f||(a=l(this,a instanceof m?{delegate:a}:a));if(a.owner)throw G;var f=a.parentNode===this,d=a.groupNode,
u=this.grouping,k=this.sorting,z,o=this.childNodes,D,h=null,i=-1,r=!1,q,p;f&&(q=a.nextSibling,p=a.previousSibling);if(k!==E&&(g=null,z=this.sortingDesc,D=k(a)||0,f))if(D===a.sortingValue)r=!0;else if((!q||(z?q.sortingValue<=D:q.sortingValue>=D))&&(!p||(z?p.sortingValue>=D:p.sortingValue<=D)))a.sortingValue=D,r=!0;if(u){h=u.getGroupNode(a,!0);u=h.nodes;if(d===h&&(r||f&&q===g))return a;k!==E?r?i=q&&q.groupNode===h?u.indexOf(q):u.length:(i=u.binarySearchPos(D,e,z),a.sortingValue=D):i=g&&g.groupNode===
h?u.indexOf(g):u.length;if(i<u.length)g=u[i];else if(h.last)g=h.last.nextSibling;else{i=h;for(g=null;(i=i.nextSibling)&&!(g=i.first););}if(a===g||f&&q===g)return d!==h&&(d&&d.remove(a),h.insert(a,g)),a;i=-1}else if(k!==E){if(r)return a;i=o.binarySearchPos(D,e,z);g=o[i];a.sortingValue=D;if(a===g||f&&q===g)return a}else{if(g&&g.parentNode!==this)throw b;if(f){if(q===g)return a;if(a===g)throw c;}}this.domVersion_=(this.domVersion_||0)+1;if(f){if(q?(q.previousSibling=p,a.nextSibling=null):this.lastChild=
p,p?(p.nextSibling=q,a.previousSibling=null):this.firstChild=q,-1==i?o.remove(a):(z=o.indexOf(a),o.splice(z,1),i-=z<i),d)d.remove(a),d=null}else a.parentNode&&a.parentNode.removeChild(a);d!=h&&h.insert(a,g);if(g){-1==i&&(i=o.indexOf(g));if(-1==i)throw b;a.nextSibling=g;o.splice(i,0,a)}else i=o.length,o.push(a),g={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=g.previousSibling;0==i?this.firstChild=a:g.previousSibling.nextSibling=a;g.previousSibling=a;j(a,a.contextSelection,
this.selection||this.contextSelection,!0);f||(a.match&&a.match(this.matchFunction),a.autoDelegate==H.PARENT&&a.setDelegate(this),this.dataSource||this.event_childNodesModified(this,{inserted:[a]}));return a},removeChild:function(c){if(!c||c.parentNode!==this)throw b;if(!1==c instanceof this.childClass)throw g;if(this.dataSource&&this.dataSource.has(c.delegate))throw C;var a=this.childNodes.indexOf(c);if(-1==a)throw b;this.childNodes.splice(a,1);c.parentNode=null;c.nextSibling?c.nextSibling.previousSibling=
c.previousSibling:this.lastChild=c.previousSibling;c.previousSibling?c.previousSibling.nextSibling=c.nextSibling:this.firstChild=c.nextSibling;c.nextSibling=null;c.previousSibling=null;j(c,c.contextSelection,null,!0);c.groupNode&&c.groupNode.remove(c);this.dataSource||this.event_childNodesModified(this,{deleted:[c]});c.autoDelegate==H.PARENT&&c.setDelegate();return c},replaceChild:function(c,a){if(this.dataSource)throw C;if(null==a||a.parentNode!==this)throw b;this.insertBefore(c,a);return this.removeChild(a)},
clear:function(b){if(this.dataSource&&this.dataSource.itemCount)throw C;if(this.firstChild){b&&j(this,this.selection||this.contextSelection,null,!1,!0);var c=this.childNodes;this.lastChild=this.firstChild=null;this.childNodes=[];this.event_childNodesModified(this,{deleted:c});for(var a=c.length;0<a--;){var g=c[a];g.parentNode=null;g.groupNode=null;b?(g.nextSibling=null,g.previousSibling=null,g.autoDelegate==H.PARENT&&g.setDelegate()):g.destroy()}if(this.grouping){c=this.grouping.childNodes;for(a=
c.length-1;b=c[a];a--)b.clear()}}},setChildNodes:function(b,c){this.dataSource||this.clear(c);if(b&&(!1=="length"in b&&(b=[b]),b.length)){var a=this.event_childNodesModified;this.event_childNodesModified=o;for(var g=0,i=b.length;g<i;g++)this.insertBefore(b[g]);this.event_childNodesModified=a;this.event_childNodesModified(this,{inserted:this.childNodes})}},setDataSource:function(b){if(!b||!this.childClass||!1==b instanceof a)b=null;if(this.dataSource!==b){var c=this.dataSource,g=this.listen.dataSource;
c&&(this.dataSource=this.dataSourceMap_=null);this.firstChild&&this.clear();if(this.dataSource=b)this.dataSourceMap_={},g&&b.itemCount&&g.datasetChanged&&g.datasetChanged.call(this,b,{inserted:b.getItems()});this.event_dataSourceChanged(this,c)}},setGrouping:function(b){if("function"==typeof b||"string"==typeof b)b={groupGetter:b};!1==b instanceof K&&(b=b&&"object"==typeof b?new this.groupingClass(b):null);if(this.grouping!==b){var c=this.grouping,a;if(this.grouping){if(!b&&(this.grouping=null,this.firstChild)){a=
this.sorting!==E?h(this):this.childNodes;for(var g=a.length;0<g--;)a[g].groupNode=null;y(this,a)}c.setOwner()}if(b&&(this.grouping=b,b.setOwner(this),this.firstChild)){a=this.sorting!==E?h(this):this.childNodes;for(g=0;b=a[g];g++)b.groupNode=this.grouping.getGroupNode(b,!0);for(g=0;b=a[g];g++)b.groupNode.nodes.push(b);a.length=0;for(g=this.grouping.nullGroup;g;g=g.nextSibling)b=g.nodes,g.first=b[0]||null,g.last=b[b.length-1]||null,a.push.apply(a,b),g.event_childNodesModified(g,{inserted:b});y(this,
a)}this.event_groupingChanged(this,c)}},setSorting:function(b,c){b=q(b);c=!!c;if(this.sorting!==b||this.sortingDesc!=!!c){var a=this.sorting,g=this.sortingDesc;this.sorting=b;this.sortingDesc=!!c;if(b!==E&&this.firstChild){var i=[],f;for(f=this.firstChild;f;f=f.nextSibling)f.sortingValue=b(f)||0;if(this.grouping)for(var d=this.grouping.nullGroup;d;d=d.nextSibling)f=d.nodes=h({childNodes:d.nodes,sortingDesc:this.sortingDesc}),d.first=f[0]||null,d.last=f[f.length-1]||null,i.push.apply(i,f);else i=h(this);
y(this,i)}this.event_sortingChanged(this,a,g)}},setMatchFunction:function(b){if(this.matchFunction!=b){var c=this.matchFunction;this.matchFunction=b;for(var a=this.lastChild;a;a=a.previousSibling)a.match(b);this.event_matchFunctionChanged(this,c)}}},s=v(z,M,{event_enable:d("enable","node"),event_disable:d("disable","node"),event_select:d("select","node"),event_unselect:d("unselect","node"),event_match:d("match","node"),event_unmatch:d("unmatch","node"),event_matchFunctionChanged:d("matchFunctionChanged",
"node","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,init:function(b){this.selection&&!1==this.selection instanceof a&&(this.selection=new O(this.selection));z.prototype.init.call(this,b);this.disabled&&this.event_disable(this);this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(b){if(this.selection!==b)return j(this,this.selection||this.contextSelection,b||this.contextSelection,!1,!0),this.selection=
b,!0},hasOwnSelection:function(){return!!this.selection},select:function(b){var c=this.selected,a=this.contextSelection;a?b?c?a.remove([this]):a.add([this]):this.selectable&&a.set([this]):!c&&this.selectable&&(this.selected=!0,this.event_select(this));return this.selected!=c},unselect:function(){var b=this.selected;if(b){var c=this.contextSelection;c?c.remove([this]):(this.selected=!1,this.event_unselect(this))}return this.selected!=b},enable:function(){this.disabled&&(this.disabled=!1,this.event_enable(this))},
disable:function(){this.disabled||(this.disabled=!0,this.event_disable(this))},isDisabled:function(){return this.disabled||!!t.findAncestor(this,q("disabled"))},match:function(b){"function"!=typeof b&&(b=null);this.underMatch_&&!b&&this.underMatch_(this,!0);this.underMatch_=b;b=!b||b(this);this.matched!=b&&((this.matched=b)?this.event_match(this):this.event_unmatch(this))},destroy:function(){this.hasOwnSelection()&&(this.selection.destroy(),this.selection=null);this.unselect();z.prototype.destroy.call(this)}}),
K=v(z,M,{event_childNodesModified:function(b,c){r.childNodesModified.call(this,b,c);this.nullGroup.nextSibling=this.firstChild;var a;if(a=c.inserted){for(var g=0,i;i=a[g++];)i.groupId_=i.delegate?i.delegate.eventObjectId:i.data.id,this.map_[i.groupId_]=i;if(this.dataSource&&this.nullGroup.first){a=this.owner;i=Array.from(this.nullGroup.nodes);for(g=i.length;0<g--;)a.insertBefore(i[g],i[g].nextSibling)}}},event_ownerChanged:function(b,c){c&&c.grouping===this&&c.setGrouping(null,!0);this.owner&&this.owner.grouping!==
this&&this.owner.setGrouping(this);r.ownerChanged.call(this,b,c);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,groupGetter:E,childClass:L,childFactory:function(b){return new this.childClass(f({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},b))},init:function(b){this.map_={};this.nullGroup=new L;z.prototype.init.call(this,b)},getGroupNode:function(b,c){var a=this.groupGetter(b),g=a instanceof m,i=this.map_[g?
a.eventObjectId:a];this.dataSource&&(c=!1);!i&&c&&(i=this.appendChild(g?a:{data:{id:a,title:a}}));return i||this.nullGroup},insertBefore:function(b,c){var b=M.insertBefore.call(this,b,c),a=b.first;if(a){for(var g=a.parentNode,i=b.last,f,d,u,k=null,z=b;(z=z.nextSibling)&&!(k=z.first););u=k?k.previousSibling:g.lastChild;f=a.previousSibling;d=i.nextSibling;if(d!==k){var m=g.childNodes,z=b.nodes,o=z.length;f&&(f.nextSibling=d);d&&(d.previousSibling=f);u&&(u.nextSibling=a);k&&(k.previousSibling=i);a.previousSibling=
u;i.nextSibling=k;var i=m.indexOf(a),D=k?m.indexOf(k):m.length;D>i&&(D-=o);m.splice(i,o);m.splice.apply(m,[D,0].concat(z));if(!u||!f)g.firstChild=m[0];if(!k||!d)g.lastChild=m[m.length-1];if(a instanceof L)for(a=o;0<a--;)g.insertBefore(z[a],k)}}return b},removeChild:function(b){if(b=M.removeChild.call(this,b)){delete this.map_[b.groupId_];for(var c=0,a;a=b.nodes[c];c++)a.parentNode.insertBefore(a)}return b},clear:function(b){var c=[],a=this.getGroupNode,g=this.nullGroup;this.getGroupNode=function(){return g};
for(var i=this.firstChild;i;i=i.nextSibling)c.push.apply(c,i.nodes);for(var i=0,f;f=c[i];i++)f.parentNode.insertBefore(f);this.getGroupNode=a;M.clear.call(this,b);this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1;z.prototype.destroy.call(this);this.nullGroup.destroy();this.map_=this.nullGroup=null}});z.prototype.groupingClass=K;var d=v(a,{autoDestroy:!0,sourceNode:null,listen:{sourceNode:{childNodesModified:function(b,c){var a=this.memberMap_,g={},i,f=0,d=0,u=c.inserted,k=c.deleted;
if(u&&u.length)for(g.inserted=u;i=u[f];)a[i.eventObjectId]=i,f++;if(k&&k.length)for(g.deleted=k;i=k[d];)delete a[i.eventObjectId],d++;(f||d)&&this.event_datasetChanged(this,g)},destroy:function(){this.autoDestroy?this.destroy():this.setSourceNode()}}},event_sourceNodeChanged:d("sourceNodeChanged")&&function(b,c){r.sourceNodeChanged.call(this,b,c);!this.sourceNode&&this.autoDestroy&&this.destroy()},extendConstructor_:!1,init:function(b,c){a.prototype.init.call(this,c);b&&this.setSourceNode(b)},setSourceNode:function(b){!1==
b instanceof z&&(b=null);if(b!==this.sourceNode){var c=this.sourceNode,a=this.listen.sourceNode;this.sourceNode=b;if(a){var g=a.childNodesModified;c&&(c.removeHandler(a,this),g&&g.call(this,c,{deleted:c.childNodes}));b&&(b.addHandler(a,this),g&&g.call(this,b,{inserted:b.childNodes}))}this.event_sourceNodeChanged(this,c)}},destroy:function(){this.setSourceNode();a.prototype.destroy.call(this)}}),O=v(k,{multiple:!1,event_datasetChanged:function(b,c){k.prototype.event_datasetChanged.call(this,b,c);if(c.inserted)for(var a=
0,g;g=c.inserted[a];a++)g.selected||(g.selected=!0,g.event_select(g));if(c.deleted)for(a=0;g=c.deleted[a];a++)g.selected&&(g.selected=!1,g.event_unselect(g))},add:function(b){if(!this.multiple){if(this.itemCount)return this.set(b);b=[b[0]]}for(var c=[],a=0,g;g=b[a];a++)g.contextSelection==this&&g.selectable&&c.push(g);return k.prototype.add.call(this,c)},set:function(b){for(var c=[],a=0,g;g=b[a];a++)g.contextSelection==this&&g.selectable&&c.push(g);this.multiple||c.splice(1);return k.prototype.set.call(this,
c)}});this.extend({DELEGATE:H,AbstractNode:z,Node:s,GroupingNode:K,PartitionNode:L,ChildNodesDataset:d,Selection:O,nullSelection:new a})}.body()+"//@ sourceURL="+l+"src/basis/dom/wrapper.js")).call(basis.namespace("basis.dom.wrapper"),basis.namespace("basis.dom.wrapper"),basis.namespace("basis.dom.wrapper").exports,this,l+"src/basis/dom/wrapper.js",l+"src/basis/dom/",basis,function(e){return basis.resource(l+"src/basis/dom/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){function e(b,c){return h(c,!0).createRule(b)}function A(b,c){var a=b.match(/^([^{]+)\{(.*)\}\s*$/);if(a){for(var g=a[1].trim().split(/\s*,\s*/),i=0;i<g.length;i++)this.addRule(g[i],a[2]||null,c++);return c-1}}function n(b,c){var a=r.createElement(!b?'STYLE[type="text/css"]':'LINK[type="text/css"][rel="{alt}stylesheet"][href={url}]'.format({alt:c?"alternate ":"",url:b.quote('"')}));r.tag(null,"HEAD")[0].appendChild(a);a=a.sheet||a.styleSheet;try{a.cssRules||(a.cssRules=a.rules)}catch(g){}a.insertRule||
(a.insertRule=A);a.deleteRule||(a.deleteRule=a.removeRule);return a}function h(c,a){c||(c="DefaultGenericStyleSheet");E[c]||a&&(E[c]=new b(n()));return E[c]}function j(b,a,g,i){for(var i=i||{},a=a.qw(),d=0,u;u=a[d];d++)if("undefined"!=typeof c.style[u]){g&&(basis.platformFeature["css-"+b]=u);f[b]={key:u,getter:i[u]};break}}function l(b,c,g){var i;var d=c;i=(d=(i=f[d])?i.key:d.replace(/^-ms-/,"ms-").camelize())?{key:d,value:i&&i.getter?i.getter(g):g}:void 0;if(i){var u=i.key,m=!!a.test(g),d=b.style;
if(m||d.getPropertyPriority&&d.getPropertyPriority(c)==k)if(g.replace(a,""),d.setProperty)m||d.removeProperty(u),d.setProperty(u,i.value,m?k:"");else{b=u+": "+i.value+(m?" !"+k:"")+";";c=d[u]?u+"\\s*:\\s*"+d[u]+"(\\s*!"+k+")?\\s*;?":"^";try{d.cssText=d.cssText.replace(RegExp(c,"i"),b)}catch(D){}}else{if(o)try{b.style[i.key]=i.value}catch(e){}else b.style[i.key]=i.value;return b.style[i.key]}}}function B(b,c){for(var a in c)l(b,a,c[a]);return b}function s(b,c){return l(b,"display","string"==typeof c?
c:c?"":"none")}function v(b,c){return l(b,"visibility",c?"":"hidden")}function t(b){return H[b]||(H[b]=RegExp("\\s*\\b"+b+"\\b"))}function p(b,c){var a=(c?"g":"s")+b;return I[a]||(I[a]=RegExp((c?"":"\\s*")+"\\b"+b+"\\S*\\b"))}var d=global.document,r=basis.dom,x=basis.dom.event,w=basis.Class,m=global.DOMTokenList&&d&&d.documentElement.classList instanceof global.DOMTokenList,a=/\s*!important/i,k="important",q=1,E={},o=function(){var b=r.createElement();try{b.style.width="badvalue"}catch(c){return!0}return!1}(),
f={},c=r.createElement("DIV");j("opacity","opacity MozOpacity KhtmlOpacity filter",!0,{fitler:function(b){return"alpha(opacity:"+parseInt(b*100)+")"}});j("border-radius","borderRadius MozBorderRadius WebkitBorderRadius",!0);j("float","cssFloat styleFloat");var b=w(null,{styleSheet:null,rules:null,init:function(b){this.styleSheet=b;this.rules=[]},createRule:function(b){var c=this.styleSheet,a=this.rules.length;c.insertRule(b+"{}",a);b=Array.from(c.cssRules,a);b=b[1]?new i(b,this):new g(b[0],this);
this.rules.push.apply(this.rules,b.rules||[b]);return b},deleteRule:function(b){if(b instanceof i)b.rules.forEach(this.deleteRule,this);else{var c=this.rules.indexOf(b);-1!=c&&(this.rules.splice(c,1),this.styleSheet.deleteRule(c))}b.owner=null;b.destroy()},destroy:function(){this.rules.forEach(function(b){b.destroy()});this.rules=this.styleSheet=null}}),g=w(null,{rule:null,selector:"",init:function(b,c){this.owner=c;this.rule=b;this.selector=b.selectorText},setProperty:function(b,c){l(this.rule,b,
c)},setStyle:function(b){Object.iterate(b,this.setProperty,this)},clear:function(){this.rule.style.cssText=""},destroy:function(){this.owner&&this.owner.deleteRule(this);this.rule=this.owner=null}}),i=w(null,{rules:null,init:function(b,c){this.owner=c;this.rules=b.map(function(){return new g(rule,this)},this)},createRule:function(b){b=this.owner.createRule(b);this.rules.push(b);b.owner=this;return b},deleteRule:function(b){var c=this.rules.indexOf(b);-1!=c&&(this.rules.splice(c,1),this.owner.deleteRule(b))},
destroy:function(){this.owner&&this.owner.deleteRule(this);this.rules=this.owner=null}});["setProperty","setStyle","clear"].forEach(function(b){i.prototype[b]=function(){for(var c,a=0;c=this.rules[a];a++)c[b].apply(c,arguments)}});var C={};["em","ex","px","%"].forEach(function(b){C["%"==b?"percent":b]=function(c){return 0==c||isNaN(c)?"0":c+b}});var G,H={},D=w(null,{init:function(b){this.element=b},toString:function(){return this.element.className},set:function(b){this.clear();b.qw().forEach(this.add,
this)},replace:function(b,c,a){a=a||"";"undefined"!=typeof b&&this.remove(a+b);"undefined"!=typeof c&&this.add(a+c)},bool:function(b,c){c?this.add(b):this.remove(b)},clear:function(){this.element.className=""},contains:function(b){return!!this.element.className.match(t(b))},item:function(b){return this.element.className.qw()[b]},add:function(b){this.element.className.match(t(b))||(this.element.className+=" "+b)},remove:function(b){var c=this.element.className,b=c.replace(t(b),"");b!=c&&(this.element.className=
b)},toggle:function(b){var c=this.contains(b);c?this.remove(b):this.add(b);return!c}}),I={},u=w(null,{delim:"-",init:function(b,c){this.classList=c;this.prefix=b+this.delim},add:function(b){this.classList.add(this.prefix+b)},remove:function(b){this.classList.remove(this.prefix+b)},items:function(){var b=this.classList.toString();if(b)return b.toString().match(p(this.prefix,!0))},set:function(b){var c=this.items(),b="undefined"!=typeof b?this.prefix+b:"",a=this.classList;if(c)if(1==c.length){if(c[0]===
b)return;a.remove(c[0])}else this.clear();b&&a.add(b)},clear:function(){this.items().forEach(this.classList.remove,this.classList)}});m?(w=D.prototype,Object.extend(global.DOMTokenList.prototype,{set:w.set,replace:w.replace,bool:w.bool,clear:function(){for(var b=this.length;0<b--;)this.remove(this[b])},setPrefixToken:w.setPrefixToken}),G=function(b){return("string"==typeof b?r.get(b):b).classList}):G=function(b){return new D("string"==typeof b?r.get(b):b)};x.onLoad(function(){G(d.body).bool("opacity-not-support",
!basis.platformFeature["css-opacity"])});this.extend({setStyleProperty:l,setStyle:B,classList:function(b,c){return c?new u(c,G(b)):G(b)},uniqueRule:function(b){var c="genericRule-"+q++;b&&G(b).add(c);b=e("."+c);b.token=c;return b},createRule:e,getStyleSheet:h,addStyleSheet:n,StyleSheet:b,Rule:g,RuleSet:i}).extend(C);basis.namespace("basis.dom").extend({setStyleProperty:l,setStyle:B,display:s,show:function(b){return s(b,1)},hide:function(b){return s(b)},visibility:v,visible:function(b){return v(b,
1)},invisible:function(b){return v(b)}})}.body()+"//@ sourceURL="+l+"src/basis/cssom.js")).call(basis.namespace("basis.cssom"),basis.namespace("basis.cssom"),basis.namespace("basis.cssom").exports,this,l+"src/basis/cssom.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(d){return!(d%400&&(!(d%100)||d%4))}function A(d,a){return 1==d?28+e(a):l[d]}function n(d,a){return a.replace(r,
function(a,e){return p[e](d)})}function h(d,a,k,e,h,o,f){return new Date(d,a-1,k,e||0,h||0,o||0,f||0)}var j=Function.getter,l=[31,28,31,30,31,30,31,31,30,31,30,31],B={day:864E5,hour:36E5,minute:6E4,second:1E3},s="year month day hour minute second millisecond".qw(),v={},t={};Object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"},function(d,a){v[d]=j("get"+a+"()");t[d]=new Function("d,v","d.set"+a+"(v)")});var p={y:j("getFullYear().toString().substr(2)"),
Y:j("getFullYear()"),d:j("getDate()"),D:j("getDate()","{0:02}"),m:j("getMonth() + 1"),M:j("getMonth() + 1","{0:02}"),h:j("getHours()"),H:j("getHours()","{0:02}"),i:j("getHours() % 12 || 12","{0:02}"),p:j("getHours() > 12",{"true":"pm","false":"am"}),P:j("getHours() > 12",{"true":"PM","false":"AM"}),I:j("getMinutes()","{0:02}"),s:j("getSeconds()"),S:j("getSeconds()","{0:02}"),z:j("getMilliseconds()"),Z:j("getMilliseconds()","{0:03}")},d=/^(\d{1,4})-(\d\d?)-(\d\d?)(?:[T ](\d\d?):(\d\d?):(\d\d?)(?:\.(\d{1,3}))?)?$/,
r=/%([ymdhiszp])/ig;Object.extend(Date.prototype,{isLeapYear:function(){return e(this.getFullYear())},getMonthDayCount:function(){return A(this.getMonth(),this.getFullYear())},add:function(d,a){var k=v[d];if(!k)throw Error("Unknown date part: "+d);var e;if("year"==d||"month"==d)e=this.getDate(),28<e&&this.setDate(1);t[d](this,k(this)+a);28<e&&(k=this.getMonthDayCount(),e>k&&this.setDate(k));return this},diff:function(d,a){if("year"==d||"month"==d){var k=0<Number(this)-Number(a)?-1:1,e=0<k?this:a,
h=0<k?a:this,o=e.getFullYear(),o=h.getFullYear()-o;if("year"==d)return k*o;e=e.getMonth();h=h.getMonth();return k*(o?(1<o?12*(o-1):0)+(11-e)+(h+1):h-e)}k=Math.floor((a-this)/B[d]);return k+Number(0!=v[d](new Date(a-k*B[d]))-v[d](this))},set:function(d,a){var k=t[d];if(!k)throw Error("Unknown date part: "+d);var e;if("year"==d||"month"==d)e=this.getDate(),28<e&&this.setDate(1);k(this,a);28<e&&(k=this.getMonthDayCount(),e>k&&this.setDate(k));return this},get:function(d){if(v[d])return v[d](this);throw Error("Unknown date part: "+
d);},toISODateString:function(){return n(this,"%Y-%M-%D")},toISOTimeString:function(){return n(this,"%H:%I:%S.%Z")},fromDate:function(d){d instanceof Date&&(this.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()),this.setTime(d.getTime()));return this},toFormat:function(d){return n(this,d)}});var x=Date.prototype.toISOString;x&&(new Date).toISOString().match(/Z/i)&&(Date.prototype.toISOString=function(){return x.call(this).replace(/Z/i,"")});Object.complete(Date.prototype,{toISOString:function(){return this.toISODateString()+
"T"+this.toISOTimeString()},fromISOString:function(m){var a=(""+m).match(d);if(!a)throw Error("Value of date isn't in ISO format: "+m);a[2]=a[2]-1;for(var m=0,k;k=s[m];m++)this.set(k,a[m+1]||0);return this}});Object.extend(Date.prototype,{toODBCDate:Date.prototype.toISODateString,toODBCTime:Date.prototype.toISOTimeString,toODBC:Date.prototype.toISOString,fromODBC:Date.prototype.fromISOString});var w=/\D/;Date.fromISOString=function(d){return d?h.apply(null,(""+d).split(w)):null};Date.timer=function(d){var a=
d||new Date;a.measure=function(d){return d?((new Date-a)/1E3).toFixed(3):new Date-a};return a};this.extend({isLeapYear:e,getMonthDayCount:A,format:n})}.body()+"//@ sourceURL="+l+"src/basis/date.js")).call(basis.namespace("basis.date"),basis.namespace("basis.date"),basis.namespace("basis.date").exports,this,l+"src/basis/date.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(e,
d){if(!s||-1!=s.indexOf(d)){var r=h[e.namespace]+"/"+d;j[r]||(j[r]=!0,Function(basis.resource(r+".js"))())}}function A(e,d){var h=l[e];!h&&d&&(h=l[e]=new t(e));return h}var n=basis.Class,h={},j={},l={},B="base",s,v=n(null,{bindingBridge:{attach:function(e,d,h){return e.attach(d,h)},detach:function(e,d,h){return e.detach(d,h)},get:function(e){return e.value}},listeners:null,value:null,init:function(e,d){this.listeners=[];this.value="";this.dictionary=e;this.name=d},set:function(e){if(e!=this.value){this.value=
e;for(var d=0,h;h=this.listeners[d];d++)h.handler.call(h.context,e)}},get:function(){return this.value},attach:function(e,d){for(var h=0,j;j=this.listeners[h];h++)if(j.handler==e&&j.context==d)return!1;this.listeners.push({handler:e,context:d});return!0},detach:function(e,d){for(var h=0,j;j=this.listeners[h];h++)if(j.handler==e&&j.context==d)return this.listeners.splice(h,1),!0;return!1},destroy:function(){for(var e=0,d;d=this.listeners[e];e++)this.detach(d.handler,d.context);delete this.listeners;
delete this.value}}),t=n(null,{init:function(e){this.namespace=e;this.tokens={};this.resources={}},update:function(e,d){for(var h in d)this.setCultureValue(e,h,d[h])},setCulture:function(e){for(var d in this.tokens)this.setTokenValue(d,e)},setTokenValue:function(e,d){this.tokens[e].set(this.getCultureValue(d,e)||this.getCultureValue("base",e))},setCultureValue:function(e,d,h){var j=this.resources[e];j||(j=this.resources[e]={});j[d]=h;this.tokens[d]&&("base"==e||e==B)&&this.setTokenValue(d,B)},getCultureValue:function(e,
d){return this.resources[e]&&this.resources[e][d]},getToken:function(e){e in this.tokens||(this.tokens[e]=new v(this,e),this.setTokenValue(e,B));return this.tokens[e]},destroy:function(){delete this.namespace;delete this.tokens;delete this.resources}});this.extend({Token:v,getToken:function(e){1<arguments.length&&(e=Array.from(arguments).join("."));var d=e.lastIndexOf(".");return A(e.substr(0,d),!0).getToken(e.substr(d+1))},setCulture:function(h){if(B!=h){B=h||"base";for(var d in l){var h=l[d],j=
B;"base"!=j&&e(h,j);h.setCulture(j)}}},setCultureList:function(e){"string"==typeof e&&(e=e.qw());s=e},getCultureList:function(){return s},createDictionary:function(e,d,j){A(e,!0).update("base",j);h[e]=d},updateDictionary:function(e,d,h){(e=A(e))&&e.update(d,h)},loadCultureForDictionary:e})}.body()+"//@ sourceURL="+l+"src/basis/l10n.js")).call(basis.namespace("basis.l10n"),basis.namespace("basis.l10n"),basis.namespace("basis.l10n").exports,this,l+"src/basis/l10n.js",l+"src/basis/",basis,function(e){return basis.resource(l+
"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.Class,A=basis.dom,n=basis.Cleaner,h=basis.template.Template,j=basis.cssom.classList,l=Function.getter,B=basis.event.create,s=basis.dom.wrapper.Node,v=basis.dom.wrapper.PartitionNode,t=basis.dom.wrapper.GroupingNode,p=1,d=function(){var a={},d=/^([a-z\_][a-z0-9\_]*)\:(.*)/i;return{add:function(f,c){a[f]||(a[f]=c)},process:function(f,c){var b;if("string"==typeof c){var g=c.match(d);
g&&(b=a[g[1]],c=g[2]||f)}return b?b(c):c}}}();d.add("data",function(a){return["data."+a,"update"]});d.add("satellite",function(a){return{events:"satelliteChanged",getter:function(d){return d.satellite[a]?d.satellite[a].element:null}}});d.add("l10n",function(a){return Function.$const(basis.l10n.getToken(a))});d.add("resource",function(a){return Function.$const(basis.resource(a))});var r=e.customExtendProperty({selected:{events:"select unselect",getter:'selected && "selected"'},disabled:{events:"disable enable",
getter:function(a){return a.disabled?"disabled":""}},state:{events:"stateChanged",getter:"state"},childCount:{events:"childNodesModified",getter:function(a){return a.childNodes?a.childNodes.length:0}},hasChilds:{events:"childNodesModified",getter:function(a){return a.childNodes&&a.childNodes.length?"hasChilds":""}}},function(a,k){a.bindingId=p++;for(var f in k){var c=null;(c=k[f])?(c=d.process(f,c),c="object"!=typeof c?{getter:l(c)}:Array.isArray(c)?{getter:l(c[0]),events:c[1]}:{getter:l(c.getter),
l10n:!!c.l10n,l10nProxy:c.l10nProxy,events:c.events}):c=null;a[f]=c}}),x=e.extensibleProperty(),w=new h("<div/>"),m=function(a){return{template:w,tmpl:null,action:x,binding:r,id:null,cssClassName:null,event_templateChanged:B("templateChanged"),event_templateUpdate:B("templateUpdate"),event_update:function(d,f){this.templateUpdate(this.tmpl,"update",f);a.event_update.call(this,d,f)},event_match:function(d){a.event_match.call(this,d);A.display(this.element,!0)},event_unmatch:function(d){a.event_unmatch.call(this,
d);A.display(this.element,!1)},init:function(d){var f=this.template;f&&(this.template=null,this.setTemplate(f));a.init.call(this,d)},postInit:function(){a.postInit.call(this);this.template&&(this.templateSync(!0),this.container&&(A.insert(this.container,this.element),this.container=null))},templateSync:function(a){var f=this.template,c=f.getBinding(this.binding,this)||null,b=this.templateBinding_,g=this.tmpl,i=this.element;if(c!==b){b&&b.handler&&this.removeHandler(b.handler);a||(this.tmpl&&this.tmpl.destroy(),
g=f.createInstance(this,this.templateAction,this.templateSync),g.childNodesHere&&(g.childNodesElement=g.childNodesHere.parentNode,g.childNodesElement.insertPoint=g.childNodesHere),this.tmpl=g,this.element=g.element,this.childNodesElement=g.childNodesElement||g.element);if(this.content)if(this.content instanceof basis.l10n.Token){var d=this.content,k=A.createText(d.value),e=function(b){this.nodeValue=b};d.attach(e,k);this.addHandler({destroy:function(){d.detach(e,k)}});A.insert(g.content||g.element,
k)}else A.insert(g.content||g.element,this.content);this.id&&(g.element.id=this.id);if(a=this.cssClassName){"string"==typeof a&&(a={element:a});for(var m in a)if(f=g[m])for(var f=j(f),b=(""+a[m]).qw(),h=0,u;u=b[h++];)f.add(u)}this.templateUpdate(this.tmpl);c&&c.names.length&&(c.handler&&this.addHandler(c.handler),c.sync.call(this));for(g=this.lastChild;g;g=g.previousSibling)this.insertBefore(g,g.nextSibling);i&&this.element&&i!==this.element&&((g=i&&i.parentNode)&&g.replaceChild(this.element,i),this.event_templateChanged(this));
this.templateBinding_=c}},setTemplate:function(a){!1==a instanceof h&&(a=null);if(this.template!==a){var f=this.template,c=this.element;if(f){f.clearInstance(this.tmpl,this);var b=f.getBinding(this.binding,this);b&&b.handler&&this.removeHandler(b.handler);this.templateBinding_=null}(this.template=a)?(a=a.createInstance(this,this.templateAction,this.templateSync),a.childNodesHere&&(a.childNodesElement=a.childNodesHere.parentNode,a.childNodesElement.insertPoint=a.childNodesHere),this.tmpl=a,this.element=
a.element,this.childNodesElement=a.childNodesElement||a.element,f&&this.templateSync(!0)):this.childNodesElement=this.element=this.tmpl=null;c&&!this.element&&(f=c&&c.parentNode)&&f.nodeType==A.ELEMENT_NODE&&f.removeChild(c)}},updateBind:function(a){var f=this.binding[a];(f=f&&f.getter)&&this.tmpl&&this.tmpl.set(a,f(this))},templateAction:function(a,f){var c=this.action[a];c&&c.call(this,f)},templateUpdate:function(){},destroy:function(){a.destroy.call(this);this.setTemplate()}}},a=function(a){return{insertBefore:function(d,
f){var d=a.insertBefore.call(this,d,f),c=d.groupNode||this,c=c.childNodesElement||c.element||this.childNodesElement||this.element,b=d.nextSibling,g=d.element,b=(b&&b.element.parentNode==c?b.element:null)||c.insertPoint||null;(g.parentNode!==c||g.nextSibling!==b)&&c.insertBefore(g,b);return d},removeChild:function(d){a.removeChild.call(this,d);var f=d.element,c=f.parentNode;c&&c.removeChild(f);return d},clear:function(d){if(d)for(var f=this.firstChild;f;){var c=f.element,b=c.parentNode;b&&b.removeChild(c);
f=f.nextSibling}a.clear.call(this,d)},setChildNodes:function(d,f){var c=A.createFragment(),b=this.grouping||this,g=b.childNodesElement||b.element;b.childNodesElement=c;a.setChildNodes.call(this,d,f);g.insertBefore(c,g.insertPoint||null);b.childNodesElement=g}}},v=e(v,m,{binding:{title:"data:"}}),k=e(t,a,{childClass:v,groupingClass:e.SELF,event_ownerChanged:function(a,d){this.syncDomRefs();t.prototype.event_ownerChanged.call(this,a,d)},listen:{owner:{templateChanged:function(){this.syncDomRefs();for(var a=
this.lastChild;a;a=a.previousSibling)this.insertBefore(a,a.nextSibling)}}},init:function(a){this.element=this.childNodesElement=this.nullElement=A.createFragment();t.prototype.init.call(this,a)},syncDomRefs:function(){var a=this,d=this.owner,f=null;d&&(f=d.tmpl&&d.tmpl.groupsElement||d.childNodesElement||d.element,f.appendChild(this.nullElement));do a.element=a.childNodesElement=f;while(a=a.grouping)}}),s=e(s,m,{childClass:null}),q=e(s,a,{childClass:s,childFactory:function(a){return new this.childClass(a)},
groupingClass:k}),e=e(q,{selection:!0,init:function(a){q.prototype.init.call(this,a);n.add(this)},destroy:function(){q.prototype.destroy.call(this);n.remove(this)}}),a=function(a,d){for(var f=a.match(/\{(this_[^\}]+)\}/g)||[],c=[],b=0;b<f.length;b++){var g=f[b].match(/\{(this_[^\|\}]+)\}/)[1];c.push("this.tmpl."+g+".nodeValue = "+g.replace(/_/g,"."))}return Function("tmpl_","config_","return "+function(b){return Object.extend({template:tmpl_,templateUpdate:function(c,a,g){b.templateUpdate.call(this,
c,a,g);_code_()}},config_)}.toString().replace("_code_()",c.join(";\n")))(new h(a),d)};this.setWrapper(a);this.extend({simpleTemplate:a,BINDING_PRESET:d,Node:s,Container:q,PartitionNode:v,GroupingNode:k,Control:e})}.body()+"//@ sourceURL="+l+"src/basis/ui.js")).call(basis.namespace("basis.ui"),basis.namespace("basis.ui"),basis.namespace("basis.ui").exports,this,l+"src/basis/ui.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){function e(b,c){if(f)try{return parseFloat(j.getComputedStyle(b,null)[c])}catch(a){return 0}else return 0}function A(b,c){if(f)return e(b,"height");t.setStyle(c,{borderTop:b.currentStyle.borderTopWidth+" solid red",borderBottom:b.currentStyle.borderBottomWidth+" solid red",paddingTop:b.currentStyle.paddingTop,paddingBottom:b.currentStyle.paddingBottom,fontSize:0.01,height:0,overflow:"hidden"});return b.offsetHeight-c.offsetHeight}function n(b,c){if(o)p(b).add("Basis-Layout-OnResizeElement"),
b.onresize=c;else{var a=B.createElement({description:"IFRAME.Basis-Layout-OnResizeFrame",css:{position:"absolute",width:"100%",height:"100%",border:"none",left:0,zIndex:-1,top:"-2000px"}});B.insert(b,a);a.onload=function(){(a.contentWindow.onresize=c)()}}}for(var h=global.document,j=h.defaultView,l=basis.Class,B=basis.dom,s=basis.ua,v=Object.extend,t=basis.cssom,p=basis.cssom.classList,d=basis.ui.Container,r=s.test("IE"),x=s.test("IE7+"),w=!1,m=B.createElement(""),a=["","-webkit-"],k=0;k<a.length;k++)try{var q=
a[k]+"box";m.style.display=q;if(m.style.display==q){w=a[k];break}}catch(E){}var o="undefined"!=typeof m.onresize,f=j&&j.getComputedStyle,m=function(){return B.createElement({css:{position:"absolute",top:0,left:0,width:0,height:0,padding:0,margin:0,border:0}})};m.className="basis.Layout.Helper";var c={top:Number.NaN,left:Number.NaN,bottom:Number.NaN,right:Number.NaN,width:Number.NaN,height:Number.NaN,defined:!1},b=l(null,{init:function(b,c,a){this.reset();this.setElement(b,c,a)},setElement:function(b,
c,a){this.element=B.get(b);this.offsetElement=a;c||this.recalc(this.offsetElement)},copy:function(b){"top,left,bottom,right,height,width,defined".split(",").forEach(function(c){this[c]=b[c]},this)},reset:function(){v(this,c)},set:function(b,c){if(this.defined){switch(b.toLowerCase()){case "left":this.left=c;this.right=this.left+this.width;break;case "right":this.right=c;this.left=this.right-this.width;break;case "width":this.width=c;this.right=this.left+this.width;break;case "top":this.top=c;this.bottom=
this.top+this.height;break;case "bottom":this.bottom=c;this.top=this.bottom-this.height;break;case "height":this.height=c,this.bottom=this.top+this.height}(0>=this.width||0>=this.height)&&this.reset()}return this},recalc:function(c){this.reset();var a=this.element;if(a){var f=a,d=h.documentElement;if(a.getBoundingClientRect){if(f=a.getBoundingClientRect(),this.top=f.top,this.left=f.left,r&&(x?(this.top+=d.scrollTop-d.clientTop,this.left+=d.scrollLeft-d.clientLeft):a!=h.body&&(this.top-=h.body.clientTop-
h.body.scrollTop,this.left-=h.body.clientLeft-h.body.scrollLeft)),c)c=new b(c),this.top-=c.top,this.left-=c.left,c.destroy()}else if(h.getBoxObjectFor){var k=h.getBoxObjectFor(d),f=h.getBoxObjectFor(a);this.top=f.screenY-k.screenY;this.left=f.screenX-k.screenX;if(s.test("FF1.5-")){if(f=a.offsetParent)this.top-=f.scrollTop,this.left-=f.scrollLeft;f!=h.body&&(this.top+=d.scrollTop,this.left+=d.scrollLeft)}if(s.test("FF2+")){if(this.top&&(f=d.scrollTop,2<f)){for(var k=0,e=Math.floor(Math.log(f)/Math.LN2);0<=
e;e-=3)k+=1<<e;f>k&&(this.top-=1)}this.left&&(this.left-=1<d.scrollLeft)}c&&(c=new b(c),this.top-=c.top,this.left-=c.left,c.destroy())}else if(a!=c){this.top=a.offsetTop;this.left=a.offsetLeft;this.top-=h.body.clientTop-h.body.scrollTop;for(this.left-=h.body.clientLeft-h.body.scrollLeft;(f=f.offsetParent)&&f!=c;)this.top+=f.offsetTop+f.clientTop-f.scrollTop,this.left+=f.offsetLeft+f.clientLeft-f.scrollLeft}else this.top=this.left=0;this.width=a.offsetWidth;this.height=a.offsetHeight;this.bottom=this.top+
this.height;this.right=this.left+this.width;this.defined=!0}return this.defined},intersection:function(c){if(!this.defined)return!1;!1==c instanceof b&&(c=new b(c));return c.defined&&c.right>this.left&&c.left<this.right&&c.bottom>this.top&&c.top<this.bottom},inside:function(c){if(!this.defined)return!1;!1==c instanceof b&&(c=new b(c));return c.defined&&c.left>=this.left&&c.right<=this.right&&c.bottom>=this.bottom&&c.top<=this.top},point:function(b){if(!this.defined)return!1;var c=b.left||b.x||0,b=
b.top||b.y||0;return c>=this.left&&c<this.right&&b>=this.top&&b<this.bottom},power:function(b){if(!this.defined)return!1;if(b=B.get(b)||this.element)return B.setStyle(b,{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px"}),!0},destroy:function(){delete this.element}}),a=l(b,{init:function(b,c,a){this.setBoxes(b,c,a)},setBoxes:function(c,a,f){this.boxA=c instanceof b?c:new b(c,!0);this.boxB=a instanceof b?a:new b(a,!0);f||this.recalc()},recalc:function(){this.reset();
if(!this.boxA.recalc()||!this.boxB.recalc())return!1;this.boxA.intersection(this.boxB)&&(this.top=Math.max(this.boxA.top,this.boxB.top),this.left=Math.max(this.boxA.left,this.boxB.left),this.bottom=Math.min(this.boxA.bottom,this.boxB.bottom),this.right=Math.min(this.boxA.right,this.boxB.right),this.width=this.right-this.left,this.height=this.bottom-this.top,0>=this.width||0>=this.height?this.reset():this.defined=!0);return this.defined}}),k=l(b,{recalc:function(){this.reset();var c=this.element;if(c){var a=
c;this.width=c.clientWidth;this.height=c.clientHeight;if(c.getBoundingClientRect){var f=c.getBoundingClientRect();this.top=f.top;for(this.left=f.left;a=a.offsetParent;)this.top-=a.scrollTop,this.left-=a.scrollLeft}else if(h.getBoxObjectFor){f=h.getBoxObjectFor(c);this.top=f.y;for(this.left=f.x;a=a.offsetParent;)this.top-=a.scrollTop,this.left-=a.scrollLeft}else f=new b(c),this.top=f.top+c.clientTop,this.left=f.left+c.clientLeft;this.bottom=this.top+this.height;this.right=this.left+this.width;this.defined=
!0}return this.defined}});t.createRule(".Basis-VerticalPanel").setStyle({position:"relative"});q=t.createRule(".Basis-VerticalPanelStack");q.setStyle({overflow:"hidden"});!1!==w&&(q.setProperty("display",w+"box"),q.setProperty(w+"box-orient","vertical"));q=l(d,{template:'<div class="Basis-VerticalPanel"/>',flex:0,init:function(b){d.prototype.init.call(this,b);this.flex?w!==false&&t.setStyleProperty(this.element,w+"box-flex",this.flex):w===false&&n(this.element,function(){this.parentNode&&this.parentNode.realign()}.bind(this))}});
l=l(d,{childClass:q,template:'<div class="Basis-VerticalPanelStack">'+(w?"":'<div{ruller} style="position: absolute; visibility: hidden; top: -1000px; width: 10px;"/>')+"</div>",init:function(b){this.cssRule=t.uniqueRule();this.ruleClassName=this.cssRule.token;this.cssRule.setProperty("overflow","auto");d.prototype.init.call(this,b);if(w===false){this.realign();n(this.childNodesElement,function(){this.realign()}.bind(this))}},insertBefore:function(b,c){if(b=d.prototype.insertBefore.call(this,b,c)){b.flex&&
this.cssRule&&p(b.element).add(this.ruleClassName);this.realign();return b}},removeChild:function(b){if(d.prototype.removeChild.call(this,b)){b.flex&&this.cssRule&&p(b.element).remove(this.ruleClassName);this.realign();return b}},realign:function(){if(w===false){var c=this.element,a=this.lastChild.element,d=this.tmpl.ruller,k=(new b(a,false,c)).bottom-e(c,"paddingTop")-e(c,"borderTopWidth")||0,c=A(c,d);if(f)k=k+e(a,"marginBottom");else{var m=d.offsetHeight;d.style.height=a.currentStyle.marginBottom;
k=k+(d.offsetHeight-m)}if(k=c-k){for(c=a=0;m=this.childNodes[c];c++)if(m.flex){a++;k=k+A(m.element,d)}a&&this.cssRule.setProperty("height",Math.max(0,k/a)+"px")}}},destroy:function(){d.prototype.destroy.call(this);this.cssRule.destroy();this.cssRule=null}});this.extend({Box:b,Intersection:a,Viewport:k,VerticalPanel:q,VerticalPanelStack:l,Helper:m,addBlockResizeHandler:n})}.body()+"//@ sourceURL="+l+"src/basis/layout.js")).call(basis.namespace("basis.layout"),basis.namespace("basis.layout"),basis.namespace("basis.layout").exports,
this,l+"src/basis/layout.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.Class,A=basis.dom.event,n=basis.dom,h=Function.getter,j=basis.cssom.classList,l=A.addGlobalHandler,B=A.removeGlobalHandler,s=basis.event.EventObject,v=basis.event.create,t=basis.layout,p=basis.ua,d=A.getEventInfo("selectstart").supported,r,x={start:function(e){r&&x.over();r={dde:this,run:!1,event:{initX:A.mouseX(e),
initY:A.mouseY(e),deltaX:0,deltaY:0}};l("mousemove",x.move,r);l("mouseup",x.over,r);l("mousedown",x.over,r);d&&l("selectstart",A.kill,r);A.cancelDefault(e);this.event_prepare(r.event,e)},move:function(d){var a=r.dde;r.run||(r.run=!0,a.draging=!0,a.event_start(r.event));a.axisX&&(r.event.deltaX=a.axisXproxy(A.mouseX(d)-r.event.initX));a.axisY&&(r.event.deltaY=a.axisYproxy(A.mouseY(d)-r.event.initY));a.event_move(r.event,d)},over:function(e){var a=r.dde;B("mousemove",x.move,r);B("mouseup",x.over,r);
B("mousedown",x.over,r);d&&B("selectstart",A.kill,r);a.draging=!1;r.run&&a.event_over(r.event,e);r=null;A.kill(e)}},w=e(s,{containerGetter:h("element"),element:null,trigger:null,baseElement:null,fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:!0,axisY:!0,axisXproxy:Function.$self,axisYproxy:Function.$self,event_prepare:v("prepare"),event_start:v("start"),event_move:v("move"),event_over:v("over"),init:function(d){s.prototype.init.call(this,d);var d=this.element,a=this.trigger;this.trigger=this.element=
null;this.setElement(d,a);this.setBase(this.baseElement);basis.Cleaner.add(this)},setElement:function(d,a){d=d&&n.get(d);a=a&&n.get(a)||d;this.trigger!=a&&(this.trigger&&A.removeHandler(this.trigger,"mousedown",x.start,this),(this.trigger=a)&&A.addHandler(this.trigger,"mousedown",x.start,this));this.element!=d&&(this.element&&j(this.element).remove("Basis-Dragable"),(this.element=d)&&j(this.element).add("Basis-Dragable"))},setBase:function(d){this.baseElement=n.get(d)||(p.is("IE7-")?document.body:
document.documentElement)},isDraging:function(){return!!(r&&r.dde==this)},start:function(d){this.isDraging()||x.start.call(this,d)},stop:function(){this.isDraging()&&x.over()},destroy:function(){basis.Cleaner.remove(this);this.stop();s.prototype.destroy.call(this);this.setElement();this.setBase()}}),e=e(w,{event_start:function(d){var a=this.containerGetter(this,d.initX,d.initY);if(a){var k=new t.Box(a),e=new t.Viewport(this.baseElement);j(a).add("Basis-DragDrop-DragElement");d.element=a;d.box=k;d.viewport=
e}w.prototype.event_start.call(this,d)},event_move:function(d){if(d.element){if(this.axisX){var a=d.box.left+d.deltaX;this.fixLeft&&0>a?a=0:this.fixRight&&a+d.box.width>d.viewport.width&&(a=d.viewport.width-d.box.width);d.element.style.left=a+"px"}this.axisY&&(a=d.box.top+d.deltaY,this.fixTop&&0>a?a=0:this.fixBottom&&a+d.box.height>d.viewport.height&&(a=d.viewport.height-d.box.height),d.element.style.top=a+"px");w.prototype.event_move.call(this,d)}},event_over:function(d){d.element&&(j(d.element).remove("Basis-DragDrop-DragElement"),
w.prototype.event_over.call(this,d))}});this.extend({DragDropElement:w,MoveableElement:e})}.body()+"//@ sourceURL="+l+"src/basis/dragdrop.js")).call(basis.namespace("basis.dragdrop"),basis.namespace("basis.dragdrop"),basis.namespace("basis.dragdrop").exports,this,l+"src/basis/dragdrop.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a){if(a instanceof q)return a.set;
a=a.nodeType;if(!1==isNaN(a))return 1==a?k:"nodeValue"}var A=this.path,n=basis.Class,h=basis.dom,j=basis.Cleaner,l=Function.getter,B=basis.cssom.classList,s=basis.timer.TimeEventManager,v=basis.event.EventObject,t=basis.event.create,p=basis.data,d=p.DataObject,r=p.STATE,x=A+": Instance of DataObject required",w=A+": Link to undefined object ignored",m=n(d,{event_change:t("change"),locked:!1,lockValue_:null,extendConstructor_:!1,updateCount:0,init:function(a,c,b){d.prototype.init.call(this,{});c&&
this.addHandler(c);this.proxy="function"==typeof b?b:Function.$self;this.initValue=this.value=this.proxy(a)},set:function(a,c){var b=this.value,g=this.proxy?this.proxy(a):g,i=!1;g!==b&&(this.value=g,i=!0,this.updateCount+=1);!this.locked&&(i||c)&&this.event_change(g,b);return i},lock:function(){this.locked||(this.lockValue_=this.value,this.locked=!0)},unlock:function(){this.locked&&(this.locked=!1,this.value!==this.lockValue_&&this.event_change(this.value,this.lockValue_))},update:function(a,c){return this.set(a,
c)},reset:function(){this.set(this.initValue)},destroy:function(){d.prototype.destroy.call(this);delete this.initValue;delete this.proxy;delete this.lockValue_;delete this.value}}),a={destroy:function(a){this.removeLink(a)}},k=function(a){h.insert(h.clear(this),a)},q=n(m,{links_:null,bindingBridge:{attach:function(a,c,b){return a.addLink(b,c)},detach:function(a,c,b){return a.removeLink(b,c)},get:function(a){return a.value}},event_change:function(a,c){m.prototype.event_change.call(this,a,c);if(this.links_.length&&
!j.globalDestroy)for(var b=0,g;g=this.links_[b++];)this.power_(g,c)},init:function(a,c,b){m.prototype.init.call(this,a,c,b);this.links_=[];j.add(this)},addLink:function(d,c,b){if(null==c){if("object"!=typeof d&&!1==d instanceof Object)throw Error(w);c=e(d)}"function"!=typeof b&&(b=l(Function.$self,b));c={object:d,format:b,field:c,isEventObject:d instanceof v};this.links_.push(c);c.isEventObject&&d.addHandler(a,this);this.power_(c);return d},addLinkShortcut:function(a,c,b){return this.addLink(a,q.shortcut[c],
b)},removeLink:function(d,c){if(null!=this.links_){var b=2>arguments.length;!b&&null==c&&(c=e(d));for(var g=0,i=0,k;k=this.links_[i];i++)k.object===d&&(b||c==k.field)?k.isEventObject&&k.object.removeHandler(a,this):this.links_[g++]=k;this.links_.length=g}},clear:function(){for(var d=0,c;c=this.links_[d];d++)c.isEventObject&&c.object.removeHandler(a,this);this.links_.clear()},power_:function(a,c){var b=a.field;if(null!=b){var g=a.format(this.value),i=a.object;"function"==typeof b?b.call(i,g,2>arguments.length?
g:a.format(c)):i[b]=g}},destroy:function(){this.clear();m.prototype.destroy.call(this);this.links_=null;j.remove(this)}});q.shortcut={className:function(a,c){B(this).replace(c,a)},show:function(a){h.display(this,!!a)},hide:function(a){h.display(this,!a)},disable:function(a){this.disabled=!!a},enable:function(a){this.disabled=!a}};var E=r.PRIORITY,o={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},A=n(q,
{calculateValue:function(){return this.value+1},objects:null,timer_:null,valueChanged_:!1,stateChanged_:!0,state:r.UNDEFINED,extendConstructor_:!0,init:function(){var a=this.handler;delete this.handler;q.prototype.init.call(this,this.value||0,a,this.proxy);a=this.objects;this.objects=[];a&&Array.isArray(a)&&(this.lock(),this.add.apply(this,a),this.unlock());this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update();j.add(this)},add:function(){for(var a=0,c=arguments.length;a<c;a++){var b=
arguments[a];if(b instanceof d)this.objects.add(b)&&b.addHandler(o,this);else throw Error(x);}this.fire(!0,!0)},remove:function(a){this.objects.remove(a)&&a.removeHandler(o,this);this.fire(!0,!0)},clear:function(){for(var a=0,c;c=this.objects[a];a++)c.removeHandler(o,this);this.objects.clear();this.fire(!0,!0)},fire:function(a,c){if(!this.locked&&(this.valueChanged_=this.valueChanged_||!!a,this.stateChanged_=this.stateChanged_||!!c,!this.timer_&&(this.valueChanged_||this.stateChanged_)))this.timer_=
!0,s.add(this,"update",Date.now())},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){delete this.timer_;s.remove(this,"update");if(!j.globalDestroy&&(this.valueChanged_&&this.set(this.calculateValue()),this.stateChanged_)){var a=this.objects.length;if(a){for(var c=-2,b,g=0;g<a;g++){var i=this.objects[g],d=E.indexOf(""+i.state);d>c&&(b=i,c=d)}b&&this.setState(b.state,b.state.data)}else this.setState(r.UNDEFINED)}this.stateChanged_=this.valueChanged_=!1},destroy:function(){this.lock();
this.clear();s.remove(this,"update");q.prototype.destroy.call(this)}});this.extend({DataObjectSet:A,AbstractProperty:m,Property:q,PropertySet:A})}.body()+"//@ sourceURL="+l+"src/basis/data/property.js")).call(basis.namespace("basis.data.property"),basis.namespace("basis.data.property"),basis.namespace("basis.data.property").exports,this,l+"src/basis/data/property.js",l+"src/basis/data/",basis,function(e){return basis.resource(l+"src/basis/data/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){function e(e,d){if(global[e])return global[e];for(var e=e.charAt(0).toUpperCase()+e.substr(1),h=0,j;j=l[h++];)if(global[j+e])return global[j+e];return d}var A=basis.Class,n=basis.data.property.Property,h=basis.cssom.setStyle,j=basis.event.create,l=["webkit","moz","o","ms"],B=e("requestAnimationFrame",function(e){return setTimeout(e,1E3/60)}),s=e("cancelRequestAnimFrame")||e("cancelAnimationFrame",clearTimeout),v=A(n,{duration:1E3,startTime:0,timer:null,started:!1,event_start:j("start"),
event_finish:j("finish"),event_invert:j("invert"),event_change:function(e,d){0==e&&this.event_start();n.prototype.event_change.call(this,e,d);1==e&&this.event_finish()},extendConstructor_:!0,init:function(){this.run=this.run.bind(this);n.prototype.init.call(this,0)},start:function(e){this.started?e&&this.invert():(this.startTime=Date.now(),this.started=!0,this.run())},run:function(){s(this.timer);if(this.started){var e=(Date.now()-this.startTime).fit(0,this.duration)/this.duration;1<=e?this.stop():
(this.set(e),this.timer=B(this.run))}},invert:function(){this.event_invert();if(this.started){var e=(Date.now()-this.startTime).fit(0,this.duration)/this.duration;this.startTime=Date.now()-this.duration*(1-e);this.run()}},stop:function(){s(this.timer);this.started&&(this.started=!1,this.set(1))},destroy:function(){this.stop();n.prototype.destroy.call()}}),t=A(null,{thread:null,setter:Function.$null,notRevert:!1,timeFunction:Function.$self,init:function(e,d,h,j,n){this.thread=e instanceof v?e:new v(e);
this.setRange(h,j);this.setter=d;this.notInvert=n;this.thread.addHandler({start:function(){},invert:function(){this.start+=this.range;this.range*=-1},change:function(d){this.setter(this.start+this.range*this.timeFunction(d))},finish:function(){this.notInvert||(this.start+=this.range,this.range*=-1)},destroy:this.destroy},this)},setRange:function(e,d){this.start=e;this.range=d-e},destroy:function(){delete this.thread}});global.requestAnimationFrame=B;global.cancelAnimationFrame=s;this.extend({Thread:v,
Modificator:t,FX:{CSS:{FadeIn:function(e,d){return new t(e,function(e){h(d,{opacity:e})},0,1)},FadeOut:function(e,d){return new t(e,function(e){h(d,{opacity:e})},1,0)}}}})}.body()+"//@ sourceURL="+l+"src/basis/animation.js")).call(basis.namespace("basis.animation"),basis.namespace("basis.animation"),basis.namespace("basis.animation").exports,this,l+"src/basis/animation.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){function e(d,e,h){return h?a?d.createElementNS(h,e):d.createNode(1,e,h):d.createElement(e)}function A(d,e,h,m){d=h?a?d.createAttributeNS(h,e):d.createNode(2,e,h):d.createAttribute(e);d.nodeValue=m;return d}function n(a,d){return a.setAttributeNodeNS?a.setAttributeNodeNS(d):a.setAttributeNode(d)}function h(a,d,e){n(a,A(a.ownerDocument,w.PREFIX+(d?":"+d:""),w.NAMESPACE,e))}function j(a,d){return a.createTextNode(""+d)}function l(a,d){var e=a.nodeType,h=a.attributes,f=a.firstChild;if(f){if(f.nodeType!=
p&&f===a.lastChild)return f.nodeValue}else{var c=h&&h[0];if(e==p){if(!c)return"";if(1==h.length&&(c.baseName||c.localName)==x&&c.namespaceURI==r)return null}else if(!c)return null}var e={},c=[],b=0,g,i,m;if(f){do b=c.push(f);while(f=f.nextSibling)}if(h)for(f=0;m=h[f];f++)c.push(m);d||(d={});for(var f=0,j;j=c[f];f++){h=j.nodeName;g=f<b;m=d[h];if(g)g=l(j,d);else{if("xmlns"==h)continue;g=j.nodeValue}for(;m;)if(m.storeName&&(g[m.storeName]=h),m.rename)h=m.rename,m=d[h];else{m.format&&(g=m.format(g));
!e[h]&&m.forceArray&&(g=[g]);break}h in e?(i=e[h])&&i.push?i.push(g):e[h]=[i,g]:e[h]=g}return e}function B(a,m,l,o){if("@"==(""+m).charAt(0))return null==o?o:A(a,m.substr(1),"",""+o);m=e(a,m.toString(),o&&o.xmlns||m.namespace||l);if("undefined"==typeof o||null===o)n(m,A(a,x,r,"true"));else if("string"==typeof o||"number"==typeof o||"function"==typeof o||"boolean"==typeof o||o.constructor===Date||o.constructor===RegExp)m.appendChild(j(a,o));else{l=o.xmlns||l;o.xmlns&&w.BAD_SUPPORT&&h(m,"",l);for(var f in o){var c=
o[f];if(!("xmlns"==f||"function"==typeof c))if(c&&Array.isArray(c))for(var b=0;b<c.length;b++)m.appendChild(B(a,f,l,c[b]));else c&&"object"==typeof c&&c.toString!==Object.prototype.toString&&(c=c.toString()),(c=B(a,f,l,c))&&(c.nodeType==d?n(m,c):m.appendChild(c))}}return m}var s=basis.dom,v=basis.Class,t=basis.ua,p=s.ELEMENT_NODE,d=s.ATTRIBUTE_NODE,v=v(null,{init:function(a,d,e){this.localpart=a;this.namespace=d||"";this.prefix=e||""},toString:function(){return this.prefix?this.prefix+":"+this.localpart:
this.localpart}}),r="http://www.w3.org/2001/XMLSchema-instance",x="nil",w={PREFIX:"xmlns",NAMESPACE:"http://www.w3.org/2000/xmlns/",BAD_SUPPORT:t.test("webkit528.16-")||t.test("opera9-")},m="native",a=!0,t=function(){var d=document.implementation;if(d&&d.createDocument)return function(a,c){var b=d.createDocument(a,c,null);b.charset&&b.charset!=document.charset&&(b.charset=document.charset);return b};if(window.ActiveXObject)for(var h=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0"],j=0;j<h.length;j++)try{if(new ActiveXObject(h[j]))return m=
h[j],a=!1,function(a,c){var b=new ActiveXObject(m);b.documentElement=e(b,c,a);return b}}catch(o){}throw Error("Browser doesn't support for XML document!");}();this.extend({NAMESPACE:{XMLShema:"http://www.w3.org/2001/XMLSchema",XMLShemaInstance:r,Namespace:"http://www.w3.org/2000/xmlns/"},XMLNS:w,QName:v,getElementsByTagNameNS:function(a,d,e){if(a.getElementsByTagNameNS)return a.getElementsByTagNameNS(e,d);var h=[];a.ownerDocument.setProperty("SelectionNamespaces",'xmlns:x="'+e+'"');for(var a=a.selectNodes("//x:"+
d),d=0,f;f=a[d++];)f.namespaceURI==e&&h.push(f);return h},addNamespace:h,createDocument:t,createElementNS:e,createAttributeNS:A,setAttributeNodeNS:n,createText:j,createCDATA:function(a,d){return a.createCDATASection(d)},XML2Object:l,XML2String:function(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if("string"==typeof a.xml)return a.xml;a.nodeType==s.DOCUMENT_NODE&&(a=a.documentElement);return s.outerHTML(a)},Object2XML:B})}.body()+"//@ sourceURL="+l+"src/basis/xml.js")).call(basis.namespace("basis.xml"),
basis.namespace("basis.xml"),basis.namespace("basis.xml").exports,this,l+"src/basis/xml.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(d,e){return d<<e|d>>>32-e}function l(d){var e=[];do e.push((d&15).toString(16)),d>>=4;while(d);e.length&1&&e.push("0");return e.reverse().join("")}function n(d){if("number"==typeof d)return l(d);var e=[],e=Array.isArray(d)?d.map(n):
(""+d).toArray().map(function(d){return l(d.charCodeAt(0))});return e.join("")}var h=Array.create(255,function(d){return String.fromCharCode(d)}),j=function(){function d(d){for(var e="",m=d.length,a=0;a<m;a++)var k=d.charCodeAt(a),e=128>k?e+h[k]:2048>k?e+(h[k>>6|192]+h[k&63|128]):e+(h[k>>12|224]+h[k>>6&63|128]+h[k&63|128]);return e}function e(d){for(var j="",m=d.length,a,k,r,n=0;n<m;)a=d.charCodeAt(n++),128>a?j+=h[a]:(k=d.charCodeAt(n++),a&32?(r=d.charCodeAt(n++),j+=String.fromCharCode((a&15)<<12|
(k&63)<<6|r&63)):j+=String.fromCharCode((a&31)<<6|k&63));return j}return basis.namespace("basis.crypt.UTF16").extend({toBytes:function(d){for(var e=[],h=d.length,a=0;a<h;a++){var k=d.charCodeAt(a);e.push(k&255,k>>8)}return e},fromBytes:function(d){for(var e="",h=d.length,a,k,j=0;j<h;)a=d[j++]||0,k=d[j++]||0,e+=String.fromCharCode(k<<8|a);return e},toUTF8:d,fromUTF8:e,toUTF8Bytes:function(e){return y.toBytes(d(e))},fromUTF8Bytes:function(d){return e(y.fromBytes(d))}})}(),y=function(){return basis.namespace("basis.crypt.UTF8").extend({toBytes:function(d){for(var e=
d.length,h=Array(e),j=0;j<e;j++)h[j]=d.charCodeAt(j);return h},fromBytes:function(d){for(var e=d.length,j="",n=0;n<e;n++)j+=h[d[n]];return j},toUTF16:function(d){return j.fromUTF8(d)},fromUTF16:function(d){return j.toUTF8(d)},toUTF16Bytes:function(d){return j.toBytes(j.fromUTF8(d))},fromUTF16Bytes:function(d){return j.toUTF8(j.fromBytes(d))}})}(),B=function(){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".toArray(),e={};d.forEach(function(d,h){e[d]=h});return basis.namespace("basis.crypt.Base64").extend({encode:function(e,
h){e.constructor!=Array&&(e=h?j.toUTF8Bytes(e):j.toBytes(e));for(var m=e.length,a=0,k="",n,r,o,f,c,b;a<m;)n=e[a++],r=e[a++],o=e[a++],f=n>>2,n=(n&3)<<4|r>>4,c=(r&15)<<2|o>>6,b=o&63,void 0==r?c=b=64:void 0==o&&(b=64),k+=d[f]+d[n]+d[c]+d[b];return k},decode:function(d,h){for(var d=d.replace(/[^a-z0-9\+\/]/ig,""),m=[],a,k,n,l,o,f=0,c=d.length;f<c;)a=e[d.charAt(f++)],k=e[d.charAt(f++)],l=e[d.charAt(f++)],o=e[d.charAt(f++)],a=a<<2|k>>4,k=(k&15)<<4|l>>2,n=(l&3)<<6|o,m.push(a,k,n);(null==l||64==l)&&m.pop();
(null==o||64==o)&&m.pop();return h?j.fromUTF8Bytes(m):j.fromBytes(m)}})}(),s=function(){function d(d){for(var e=[],a=3;0<=a;a--)e.push(d>>8*a&255);return e}var h=[1518500249,1859775393,2400959708,3395469782],n=[function(d,e,a){return a^d&(e^a)},function(d,e,a){return d^e^a},function(d,e,a){return d&e|a&(d|e)},function(d,e,a){return e^d^a}];return function(l,m){l.constructor!=Array&&(l=m?j.toUTF8Bytes(l):j.toBytes(l));for(var a=l.length,k=[],q=0;q<a;q++)k[q>>2]|=l[q]<<(3-(q&3)<<3);k[a>>2]=a&3?k[a>>
2]|Math.pow(2,(4-(a&3)<<3)-1):2147483648;k.push.apply(k,Array.create((14<(k.length&15)?30:14)-(k.length&15),0));k.push(a>>>29);k.push(a<<3&4294967295);k.reverse();for(var a=[1732584193,4023233417,2562383102,271733878,3285377520],A=Array.from(a),o,f=k.length>>4,c=Array(80);f--;){for(q=0;16>q;q++)c[q]=k.pop();for(q=16;80>q;q++)c[q]=e(c[q-3]^c[q-8]^c[q-14]^c[q-16],1);for(q=0;80>q;q++)o=Math.floor(q/20),a[4]=e(a[0],5)+n[o](a[1],a[2],a[3])+a[4]+c[q]+h[o]&4294967295,a[1]=e(a[1],30),a.unshift(a.pop());for(q=
0;5>q;q++)a[q]=A[q]=a[q]+A[q]&4294967295}return a.map(d).flatten()}}(),v=function(){function d(a){for(var d=arguments,e=d.length,f=a&65535,c=a>>16,b=1;b<e;b++)var g=d[b],f=f+(g&65535),c=c+((g>>16)+(f>>16)),f=f&65535;return c<<16|f&65535}function h(a){for(var d=[],e=0;4>e;e++)d.push(a>>8*e&255);return d}var n=Math.pow(2,32),l,m=[],a=[],k=[function(a,d,e){return e^a&(d^e)},function(a,d,e){return d^e&(d^a)},function(a,d,e){return a^d^e},function(a,d,e){return d^(a|~e)}];return function(q,A){if(!l){l=
[[7,12,17,22].repeat(4),[5,9,14,20].repeat(4),[4,11,16,23].repeat(4),[6,10,15,21].repeat(4)].flatten();for(var o=0;64>o;o++)switch(m[o]=Math.floor(Math.abs(Math.sin(o+1))*n),o>>4){case 0:a[o]=o;break;case 1:a[o]=5*o+1&15;break;case 2:a[o]=3*o+5&15;break;case 3:a[o]=7*o&15}}q.constructor!=Array&&(q=A?j.toUTF8Bytes(q):j.toBytes(q));for(var o=[],f=q.length,c=0;c<f;c++)o[c>>2]|=q[c]<<((c&3)<<3);o[f>>2]|=128<<((f&3)<<3);o.push.apply(o,Array((14<(o.length&15)?30:14)-(o.length&15)));o.push(f<<3&4294967295);
o.push(f>>>29);for(var f=[1732584193,4023233417,2562383102,271733878],b=Array.from(f),g=o.length>>4;g--;){for(c=0;64>c;c++)f[0]=d(e(d(f[0],k[c>>4](f[1],f[2],f[3]),o[a[c]],m[c]),l[c]),f[1]),f.unshift(f.pop());for(c=0;4>c;c++)f[c]=b[c]=d(f[c],b[c])}return f.map(h).flatten()}}(),t="",p={};Object.iterate({sha1:function(d){return s(this,d)},sha1hex:function(d){return n(s(this,d))},md5:function(d){return v(this,d)},md5hex:function(d){return n(v(this,d))},base64:function(d){return B.encode(this,d)},base64decode:function(d){return B.encode(this,
d)},hex:function(){return n(this)}},function(d,e){p[d]=function(d){d=e.call(t,d);return t=Object.extend("object"!=typeof d?Object(d):d,p)}});this.setWrapper(function(d){t=d||"";return p});this.extend({HEX:n,SHA1:s,MD5:v})}.body()+"//@ sourceURL="+l+"src/basis/crypt.js")).call(basis.namespace("basis.crypt"),basis.namespace("basis.crypt"),basis.namespace("basis.crypt").exports,this,l+"src/basis/crypt.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){function e(c,b){var a={},d;c&&c.length&&(d=a.inserted=c);b&&b.length&&(d=a.deleted=b);if(d)return a}function l(c,b){if(!c.length)return 0;var a,d=b.object.eventObjectId,f=b.value||0,e,k,h=0,m=c.length-1;do if(a=h+m>>1,k=c[a],e=k.value,e===f)if(k=k.object.eventObjectId,d<k)m=a-1;else if(d>k)h=a+1;else return d==k?a:0;else if(f<e)m=a-1;else if(f>e)h=a+1;else return f==e?a:0;while(h<=m);return a+(e<f)}function n(c,b){return+(c.value>b.value)||-(c.value<b.value)||c.object.eventObjectId-b.object.eventObjectId}
var h=basis.Class,j=h.oneFunctionProperty,y=Object.extend,B=Object.values,s=Function.$self,v=Function.$true,t=Function.$false,p=basis.event.create,d=basis.data.SUBSCRIPTION,r=basis.data.DataObject,x=basis.data.KeyObjectMap,w=basis.data.AbstractDataset,m=basis.data.Dataset;d.add("SOURCE",{sourceChanged:function(c,b){this.remove(c,b);this.add(c,c.source)},sourcesChanged:function(c,b){var a;if(a=b.inserted)for(var d=a.length;0<d--;)this.add(c,a[d]);if(a=b.deleted)for(d=a.length;0<d--;)this.remove(c,
a[d])}},function(c,b){for(var a=b.sources||[b.source],d=0,f;f=a[d++];)c(b,f)});d.add("MINUEND",{operandsChanged:function(c,b){this.minuend!==b&&(this.remove(c,b),this.add(c,c.minuend))}},function(c,b){c(b,b.minuend)});d.add("SUBTRAHEND",{operandsChanged:function(c,b,a){this.subtrahend!==a&&(this.remove(c,a),this.add(c,c.subtrahend))}},function(c,b){c(b,b.subtrahend)});var a=h(w,{subscribeTo:d.SOURCE,event_sourcesChanged:p("sourcesChanged","dataset","delta"),sources:null,rule:function(c){return 0<
c},listen:{source:{datasetChanged:function(c,b){var a=this.memberMap_,d={},f,e;if(b.inserted)for(var k=0;f=b.inserted[k];k++)e=f.eventObjectId,a[e]?a[e].count++:a[e]={count:1,object:f},d[e]=a[e];if(b.deleted)for(k=0;f=b.deleted[k];k++)e=f.eventObjectId,d[e]=a[e],a[e].count--;this.applyRule(d)},destroy:function(c){this.removeSource(c)}}},init:function(c){w.prototype.init.call(this,c);c=this.sources;this.sources=[];c&&c.forEach(this.addSource,this)},setRule:function(c){"function"!=typeof c&&(c=a.UNION);
this.rule!==c&&(this.rule=c,this.applyRule())},applyRule:function(c){var b=this.memberMap_,a=this.rule,d=this.sources.length,f=[],k=[],h,D,m;c||(c=b);for(var u in c)h=b[u],D=d&&h.count&&a(h.count,d),D!=!!this.item_[u]&&(D?f:k).push(h.object),0==h.count&&delete b[u];(m=e(f,k))&&this.event_datasetChanged(this,m);return m},addSource:function(c){if(c instanceof w&&this.sources.add(c)){this.listen.source&&c.addHandler(this.listen.source,this);var b=this.memberMap_,a;for(a in c.item_)b[a]?b[a].count++:
b[a]={count:1,object:c.item_[a]};this.applyRule();this.event_sourcesChanged(this,{inserted:[c]});return!0}},removeSource:function(c){if(this.sources.remove(c)){this.listen.source&&c.removeHandler(this.listen.source,this);var b=this.memberMap_,a;for(a in c.item_)b[a].count--;this.applyRule();this.event_sourcesChanged(this,{deleted:[c]});return!0}},setSources:function(c){for(var b=Array.from(this.sources),a=0,d;d=c[a];a++)d instanceof w&&(b.remove(d)||this.addSource(d));b.forEach(this.removeSource,
this)},clear:function(){Array.from(this.sources).forEach(this.removeSource,this)},destroy:function(){w.prototype.destroy.call(this);this.sources=null}});a.UNION=a.prototype.rule;a.INTERSECTION=function(c,b){return c==b};a.DIFFERENCE=function(c){return 1==c};a.MORE_THAN_ONE_INCLUDE=function(c,b){return 1==b||1<c};a.AT_LEAST_ONE_EXCLUDE=function(c,b){return 1==b||c<b};var k=function(c){return!this.has(c)},q=h(w,{subscribeTo:d.MINUEND+d.SUBTRAHEND,minuend:null,subtrahend:null,event_operandsChanged:p("operandsChanged",
"dataset","oldMinuend","oldSubtrahend"),listen:{minuend:{datasetChanged:function(c,b){if(this.subtrahend){var a=e(b.inserted&&b.inserted.filter(k,this.subtrahend),b.deleted&&b.deleted.filter(this.has,this));a&&this.event_datasetChanged(this,a)}},destroy:function(){this.setOperands(null,this.subtrahend)}},subtrahend:{datasetChanged:function(c,b){if(this.minuend){var a=e(b.deleted&&b.deleted.filter(k,this),b.inserted&&b.inserted.filter(this.has,this));a&&this.event_datasetChanged(this,a)}},destroy:function(){this.setOperands(this.minuend,
null)}}},init:function(c){w.prototype.init.call(this,c);var c=this.minuend,b=this.subtrahend;this.subtrahend=this.minuend=null;(c||b)&&this.setOperands(c,b)},setOperands:function(c,b){var a,d=!1;!1==c instanceof w&&(c=null);!1==b instanceof w&&(b=null);var f=this.minuend,k=this.subtrahend;if(f!==c){d=!0;this.minuend=c;var h=this.listen.minuend;h&&(f&&f.removeHandler(h,this),c&&c.addHandler(h,this))}if(k!==b&&(d=!0,this.subtrahend=b,h=this.listen.subtrahend))k&&k.removeHandler(h,this),b&&b.addHandler(h,
this);if(!d)return!1;this.event_operandsChanged(this,f,k);if(!c||!b)this.itemCount&&this.event_datasetChanged(this,a={deleted:this.getItems()});else{var d=[],f=[],D;for(D in this.item_)(!c.item_[D]||b.item_[D])&&d.push(this.item_[D]);for(D in c.item_)!this.item_[D]&&!b.item_[D]&&f.push(c.item_[D]);(a=e(f,d))&&this.event_datasetChanged(this,a)}return a},setMinuend:function(c){return this.setOperands(c,this.subtrahend)},setSubtrahend:function(c){return this.setOperands(this.minuend,c)},clear:function(){this.setOperands()}}),
E={subscribeTo:d.SOURCE,source:null,sourceMap_:null,event_sourceChanged:p("sourceChanged","dataset","oldSource"),listen:{source:{destroy:function(){this.setSource()}}},init:function(c){this.sourceMap_={};var b=this.source;b&&(this.source=null);w.prototype.init.call(this,c);b&&this.setSource(b)},setSource:function(c){!1==c instanceof w&&(c=null);if(this.source!==c){var b=this.source,a=this.listen.source;this.source=c;if(a){var d=a.datasetChanged;b&&(b.removeHandler(a,this),d&&d.call(this,b,{deleted:b.getItems()}));
c&&(c.addHandler(a,this),d&&d.call(this,c,{inserted:c.getItems()}))}this.event_sourceChanged(this,b)}},clear:function(){this.setSource()},destroy:function(){w.prototype.destroy.call(this);this.sourceMap_=null}},o=h(w,E,{map:s,reduce:t,rule:Function.getter(v),ruleEvents:j(function(c){var b=this.map?this.map(c):object;if(!1==b instanceof r||this.reduce(b))b=null;var a=this.sourceMap_[c.eventObjectId],d=a.member;if(d!==b){var f=this.memberMap_,k,h,D;a.member=b;d&&(a=d.eventObjectId,this.removeMemberRef&&
this.removeMemberRef(d,c),0==--f[a]&&(delete f[a],D=[d]));b&&(d=b.eventObjectId,this.addMemberRef&&this.addMemberRef(b,c),f[d]?f[d]++:(f[d]=1,h=[b]));(k=e(h,D))&&this.event_datasetChanged(this,k)}},{update:!0}),addMemberRef:null,removeMemberRef:null,listen:{source:{datasetChanged:function(c,b){var a=this.sourceMap_,d=this.memberMap_,f=[],k=[],h,D,j,u=this.ruleEvents;m.setAccumulateState(!0);if(b.inserted)for(var z=0;h=b.inserted[z];z++){j=this.map?this.map(h):h;if(!1==j instanceof r||this.reduce(j))j=
null;u&&h.addHandler(u,this);a[h.eventObjectId]={sourceObject:h,member:j};j&&(D=j.eventObjectId,d[D]?d[D]++:(d[D]=1,f.push(j)),this.addMemberRef&&this.addMemberRef(j,h))}if(b.deleted)for(z=0;h=b.deleted[z];z++)D=h.eventObjectId,j=a[D].member,u&&h.removeHandler(u,this),delete a[D],j&&(D=j.eventObjectId,0==--d[D]&&(delete d[D],k.push(j)),this.removeMemberRef&&this.removeMemberRef(j,h));m.setAccumulateState(!1);(b=e(f,k))&&this.event_datasetChanged(this,b)}}},setMap:function(c){"function"!=typeof c&&
(c=s);if(this.map!==c)return this.map=c,this.applyRule()},setReduce:function(c){"function"!=typeof c&&(c=t);if(this.reduce!==c)return this.reduce=c,this.applyRule()},setRule:function(c){"function"!=typeof c&&(c=v);if(this.rule!==c)return this.rule=c,this.applyRule()},applyRule:function(){var c=this.sourceMap_,b=this.memberMap_,a,d,f,k,h,D=[],m=[],u,j;for(j in c){h=c[j];k=h.sourceObject;a=h.member;d=this.map?this.map(k):k;if(!1==d instanceof r||this.reduce(d))d=null;if(a!=d&&(h.member=d,a&&(f=a.eventObjectId,
this.removeMemberRef&&this.removeMemberRef(a,k),b[f]--),d))a=d.eventObjectId,this.addMemberRef&&this.addMemberRef(d,k),a in b?b[a]++:(b[a]=1,D.push(d))}for(f in this.item_)0==b[f]&&(delete b[f],m.push(this.item_[f]));(u=e(D,m))&&this.event_datasetChanged(this,u);return u}}),d=h(o,{reduce:function(c){return!this.rule(c)}}),f=h(o,{subsetClass:w,keyMap:null,map:function(c){return this.keyMap.resolve(c)},setRule:function(c){"function"!=typeof c&&(c=v);if(this.rule!==c)return this.rule=c,this.keyMap.keyGetter=
c,this.applyRule()},addMemberRef:function(c,b){c.event_datasetChanged(c,{inserted:[b]})},removeMemberRef:function(c,b){c.event_datasetChanged(c,{deleted:[b]})},init:function(c){if(!this.keyMap||!1==this.keyMap instanceof x)this.keyMap=new x(y({keyGetter:this.rule,itemClass:this.subsetClass},this.keyMap));o.prototype.init.call(this,c)},getSubset:function(c,b){return this.keyMap.get(c,b)},destroy:function(){o.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}}),p=h(w,E,{rule:Function.getter(v),
ruleEvents:j(function(c){var b=this.sourceMap_[c.eventObjectId],c=this.rule(c),a=this.index_;c!==b.value&&(a.splice(l(a,b),1),b.value=c,a.splice(l(a,b),0,b),this.applyRule())},{update:!0}),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:{datasetChanged:function(c,b){var a=this.sourceMap_,d=this.index_,f=this.ruleEvents,e=!1,k=!1,h,m=b.inserted,u=b.deleted;if(u){u.length>d.length-u.length&&(e=!0,k=u.length!=d.length,d.length=0);for(var j=0,o;o=u[j];j++)e||(h=a[o.eventObjectId],d.splice(l(d,
h),1)),delete a[o.eventObjectId],f&&o.removeHandler(f,this);if(k)for(var r in a)h=a[r],d.splice(l(d,h),0,h)}if(m){k=!d.length;for(j=0;o=m[j];j++)h={object:o,value:this.rule(o)},a[o.eventObjectId]=h,k?d.push(h):d.splice(l(d,h),0,h),f&&o.addHandler(f,this);k&&d.sort(n)}this.applyRule()}}},event_rangeChanged:p("rangeChanged","dataset","oldOffset","oldLimit"),init:function(c){this.index_=[];E.init.call(this,c)},setRange:function(c,b){var a=this.offset,d=this.limit;if(a!=c||d!=b)this.offset=c,this.limit=
b,this.applyRule(),this.event_rangeChanged(this,a,d)},setOffset:function(c){return this.setRange(c,this.limit)},setLimit:function(c){return this.setRange(this.offset,c)},applyRule:function(){var c=this.offset,b=c+this.limit;this.orderDesc&&(c=this.index_.length-b,b=c+this.limit);for(var a=Object.slice(this.item_),c=this.index_.slice(Math.max(0,c),Math.max(0,b)),b=[],d,f=0,k;k=c[f];f++){var h=k.object.eventObjectId;a[h]?delete a[h]:b.push(k.object)}(d=e(b,B(a)))&&this.event_datasetChanged(this,d);
return d},destroy:function(){E.destroy.call(this);this.index_=null}}),h=h(w,E,{subsetClass:w,rule:Function.getter(t),ruleEvents:j(function(c){var b=this.sourceMap_,a=this.memberMap_,d=c.eventObjectId,f=b[d].list,b=b[d].list={},d=this.rule(c),k,h=[],m=[],j;if(Array.isArray(d))for(var u=0;u<d.length;u++)if(j=this.keyMap.resolve(d[u]))z=j.eventObjectId,b[z]=j,f[z]||(j.event_datasetChanged(j,{inserted:[c]}),a[z]?a[z]++:(h.push(j),a[z]=1));for(var z in f)b[z]||(j=f[z],j.event_datasetChanged(j,{deleted:[c]}),
--a[z]||(delete a[z],m.push(j)));(k=e(h,m))&&this.event_datasetChanged(this,k)},{update:!0}),keyMap:null,map:s,listen:{source:{datasetChanged:function(c,b){var a=this.sourceMap_,d=this.memberMap_,f=this.ruleEvents,k,h,j,o=[],u=[];m.setAccumulateState(!0);if(k=b.inserted)for(var z=0,n;n=k[z];z++){var r=this.rule(n),l={object:n,list:{}};a[n.eventObjectId]=l;if(Array.isArray(r))for(var q=0;q<r.length;q++)if((h=this.keyMap.get(r[q],!0))&&!h.has(n))j=h.eventObjectId,l.list[j]=h,h.event_datasetChanged(h,
{inserted:[n]}),d[j]?d[j]++:(o.push(h),d[j]=1);f&&n.addHandler(f,this)}if(k=b.deleted)for(z=0;n=k[z];z++){h=n.eventObjectId;r=a[h].list;delete a[h];for(j in r)h=r[j],h.event_datasetChanged(h,{deleted:[n]}),--d[j]||(delete d[j],u.push(h));f&&n.removeHandler(f,this)}m.setAccumulateState(!1);(b=e(o,u))&&this.event_datasetChanged(this,b)}}},init:function(a){if(!this.keyMap||!1==this.keyMap instanceof x)this.keyMap=new x(y({keyGetter:this.map,itemClass:this.subsetClass},this.keyMap));E.init.call(this,
a)},getSubset:function(a,b){return this.keyMap.get(a,b)},destroy:function(){E.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});this.extend({Merge:a,Subtract:q,MapReduce:o,Subset:d,Split:f,Slice:p,Cloud:h})}.body()+"//@ sourceURL="+l+"src/basis/data/dataset.js")).call(basis.namespace("basis.data.dataset"),basis.namespace("basis.data.dataset"),basis.namespace("basis.data.dataset").exports,this,l+"src/basis/data/dataset.js",l+"src/basis/data/",basis,function(e){return basis.resource(l+"src/basis/data/"+
e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(n,h,j){h=h||0;j=j||1;return h>j?e(n,j,h):Number((h+Math.random()*(j-h)).toFixed(n||0))}var l="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.".replace(/[^a-z]/gi,
" ").trim().split(/\s+/);this.extend({number:e,string:function(e,h){1>arguments.length&&(e=0);2>arguments.length&&(h=16);0>=e&&(e=0);1>=h&&(h=1);for(var j=Math.floor(e+Math.random()*(h-e)),l="",A=["a".charCodeAt(),"A".charCodeAt()],s=0;s<j;s++)l+=String.fromCharCode(Math.floor(26*Math.random())+A[Math.round(Math.random())]);return l},sentence:function(e){for(var h=[],e=parseInt(e);e--;)h.push(l[Math.round(Math.random()*l.length)]);return h.join(" ")}})}.body()+"//@ sourceURL="+l+"src/basis/data/generator.js")).call(basis.namespace("basis.data.generator"),
basis.namespace("basis.data.generator"),basis.namespace("basis.data.generator").exports,this,l+"src/basis/data/generator.js",l+"src/basis/data/",basis,function(e){return basis.resource(l+"src/basis/data/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(b,a){if(!b.length)return 0;var c,d,g=0,f=b.length-1;do if(c=g+f>>1,d=b[c]||0,a<d)f=c-1;else if(a>d)g=c+1;else return a==d?c:0;while(g<=f);return c+(d<a)}function l(b,a,c){if(!h.isClass(b)||
!b.isSubclassOf(t))throw"Wrong class for index constructor";a=Function.getter(a);c=c||"update";if("string"!=typeof c)throw"Events must be a event names space separated string";var c=c.qw().sort(),d=[b.basisClassId_,a.basisGetterId_,c].join("_"),g=m[d];if(g)return g.owner;for(var g={},f=0;f<c.length;f++)g[c[f]]=!0;m[d]={owner:this,indexClass:b.subclass({indexId:d,updateEvents:g,valueGetter:a})};this.indexId=d}function n(b,a,c){var d=b.indexCache_;b.lock();if(a)for(var g=0,f;f=a[g++];){var e=b.valueGetter(f);
d[f.eventObjectId]=e;b.add_(e)}if(c)for(g=0;f=c[g++];)a=f.eventObjectId,b.remove_(d[a]),delete d[a];b.unlock()}var h=basis.Class,j=basis.data,y=j.KeyObjectMap,B=j.AbstractDataset,s=basis.data.property.Property,v=basis.data.dataset.MapReduce,t=h(s,{autoDestroy:!0,indexCache_:null,valueGetter:Function.$null,updateEvents:{},init:function(){this.indexCache_={};s.prototype.init.call(this,0)},add_:function(){},remove_:function(){},update_:function(){},destroy:function(){s.prototype.destroy.call(this);this.indexCache_=
null}}),j=h(t,{add_:function(b){this.value+=b},remove_:function(b){this.value-=b},update_:function(b,a){this.set(this.value-a+b)}}),p=h(t,{valueGetter:Function.$true,add_:function(b){this.value+=!!b},remove_:function(b){this.value-=!!b},update_:function(b,a){this.set(this.value-!!a+!!b)}}),d=h(t,{sum_:0,count_:0,add_:function(b){this.sum_+=b;this.count_+=1;this.value=this.sum_/this.count_},remove_:function(b){this.sum_-=b;this.value=(this.count_-=1)?this.sum_/this.count_:0},update_:function(b,a){this.sum_+=
b-a;this.set(this.sum_/this.count_)}}),r=h(t,{itemGetter:Function.$null,vector_:null,init:function(){this.vector_=[];t.prototype.init.call(this)},add_:function(b){this.vector_.splice(e(this.vector_,b),0,b);this.value=this.vectorGetter(this.vector_)},remove_:function(b){this.vector_.splice(e(this.vector_,b),1);this.value=this.vectorGetter(this.vector_)},update_:function(b,a){this.vector_.splice(e(this.vector_,a),1);this.vector_.splice(e(this.vector_,b),0,b);this.set(this.vectorGetter(this.vector_))},
destroy:function(){t.prototype.destroy.call(this);this.vector_=null}}),x=h(r,{vectorGetter:function(b){return b[0]}}),w=h(r,{vectorGetter:function(b){return b[b.length-1]}}),m={},a={destroy:function(b){this.deleteIndex(b)}},k=function(b){return function(a,c){return new l(b,a,c)}},q=k(p),E=k(j),o=k(d),f=k(x),c=k(w),b={"*":function(b){var a,c,d=b.type,g=b.args[0],f=g.eventObjectId,e;for(e in this.indexes)c=this.indexes[e],c.updateEvents[d]&&(b=c.indexCache_[f],a=c.valueGetter(g),a!==b&&(c.update_(a,
b),c.indexCache_[f]=a))}},g={datasetChanged:function(a,c){var d;if(d=c.inserted)for(var g=d.length;0<g--;)d[g].addHandler(b,this);if(d=c.deleted)for(g=d.length;0<g--;)d[g].removeHandler(b,this);for(var f in this.indexes)n(this.indexes[f],c.inserted,c.deleted)},destroy:function(){var b=Object.values(this.indexes),a;for(a in b)this.deleteIndex(b[a])}};B.extend({indexes:null,getIndex:function(b){if(!1!=b instanceof l){this.indexes||(this.indexes={},this.addHandler(g),g.datasetChanged.call(this,this,
{inserted:this.getItems()}));var c=b.indexId,b=this.indexes[c];if(!b){b=m[c];if(!b)throw"Wrong index constructor";b=new b.indexClass;b.addHandler(a,this);this.indexes[c]=b;n(b,this.getItems())}return b}},deleteIndex:function(b){if(this.indexes&&this.indexes[b.indexId]){delete this.indexes[b.indexId];b.removeHandler(a,this);b.destroy();for(var c in this.indexes)return;this.removeHandler(g);this.indexes=null}}});B=h(v,{calcs:null,indexes:null,indexes_:null,timer_:void 0,indexUpdated:null,memberSourceMap:null,
keyMap:null,map:function(b){return this.keyMap.get(b,!0)},addMemberRef:function(b,a){this.memberSourceMap[b.eventObjectId]=a.eventObjectId;this.listen.member&&b.addHandler(this.listen.member,this);this.sourceMap_[a.eventObjectId].updated=!0;0<b.subscriberCount&&this.calcMember(b)},removeMemberRef:function(b){delete this.memberSourceMap[b.eventObjectId];this.listen.member&&b.removeHandler(this.listen.member,this)},event_sourceChanged:function(b,a){v.prototype.event_sourceChanged.call(this,b,a);var c,
d;for(d in this.indexes_)c=this.indexes_[d],a&&(this.deleteIndex(d),a.deleteIndex(this.indexes[d])),this.source&&this.addIndex(d,this.source.getIndex(c))},listen:{index:{change:function(b){var a=this.indexMap;a.indexValues[this.key]=b;a.indexUpdated=!0;a.recalcRequest()}},member:{subscribersChanged:function(b,a){0<b.subscriberCount&&0==a&&this.calcMember(b)}}},ruleEvents:h.oneFunctionProperty(function(b,a){v.prototype.ruleEvents.update.call(this,b,a);this.sourceMap_[b.eventObjectId].updated=!0;this.recalcRequest()},
{update:!0}),init:function(b){this.recalc=this.recalc.bind(this);this.indexUpdated=!1;this.indexesBind_={};this.memberSourceMap={};var a=this.indexes;this.indexes={};this.indexes_={};this.calcs=this.calcs||{};this.indexValues={};if(!this.keyMap||!1==this.keyMap instanceof y)this.keyMap=new y(Object.complete({create:function(b,a){return new this.itemClass(a)}},this.keyMap));v.prototype.init.call(this,b);Object.iterate(a,this.addIndex,this)},addIndex:function(b,a){if(!this.indexes[b]){if(a instanceof
l){if(this.indexes_[b])return;this.indexes_[b]=a;a=this.source&&this.source.getIndex(a)}if(a instanceof t){this.indexValues[b]=a.value;this.indexes[b]=a;this.indexesBind_[b]={key:b,indexMap:this};var c=this.listen.index;c&&(a.addHandler(c,this.indexesBind_[b]),c.change&&c.change.call(this.indexesBind_[b],a.value))}}},removeIndex:function(b){if(this.indexes_[b]||this.indexes[b])this.indexes[b]&&this.listen.index&&this.indexes[b].removeHandler(this.listen.index,this.indexesBind_[b]),delete this.indexValues[b],
delete this.indexesBind_[b],delete this.indexes[b],delete this.indexes_[b]},addCalc:function(b,a){this.calcs[b]=a;this.recalcRequest()},removeCalc:function(b){delete this.calcs[b]},lock:function(){for(var b in this.indexes)this.indexes[b].lock()},unlock:function(){for(var b in this.indexes)this.indexes[b].unlock()},recalcRequest:function(){this.timer_||(this.timer_=setTimeout(this.recalc,0))},recalc:function(){for(var b in this.item_)this.calcMember(this.item_[b]);this.indexUpdated=!1;this.timer_=
clearTimeout(this.timer_)},calcMember:function(b){var a=this.sourceMap_[this.memberSourceMap[b.eventObjectId]];if(b.subscriberCount&&(a.updated||this.indexUpdated)){a.updated=!1;var c={},d,g,f,e;for(e in this.calcs)if(d=this.calcs[e](a.sourceObject.data,this.indexValues,a.sourceObject),g=b.data[e],b.data[e]!==d&&("number"!=typeof d||"number"!=typeof g||!isNaN(d)||!isNaN(g)))c[e]=d,f=!0;f&&b.update(c)}},getMember:function(b){return this.keyMap.get(b,!0)},destroy:function(){this.timer_=clearTimeout(this.timer_);
this.indexesBind_=this.memberSourceMap=this.indexUpdated=this.calcs=null;this.keyMap.destroy();this.keyMap=null;for(var b in this.indexes)this.removeIndex(b);v.prototype.destroy.call(this)}});this.extend({IndexConstructor:l,createIndexConstructor:k,Index:t,Count:p,Sum:j,Avg:d,VectorIndex:r,Min:x,Max:w,count:q,sum:E,avg:o,max:c,min:f,IndexMap:B})}.body()+"//@ sourceURL="+l+"src/basis/data/index.js")).call(basis.namespace("basis.data.index"),basis.namespace("basis.data.index"),basis.namespace("basis.data.index").exports,
this,l+"src/basis/data/index.js",l+"src/basis/data/",basis,function(e){return basis.resource(l+"src/basis/data/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a){b[a]=b[a]||0;return a+b[a]++}function l(){var b=Array.from(arguments),a=b.pop();"function"!=typeof a&&console.warn("Last argument for calculate field constructor must be a function");for(var c=[],d=[],g=0,f;g<b.length;g++)f=b[g].quote('"'),c.push(f+" in delta"),d.push("data["+f+
"]");a=(new Function("calc","return function(delta, data, oldValue){"+(c.length?"if ("+c.join(" || ")+")":"")+"return calc("+d.join(", ")+");"+(c.length?"return oldValue;":"")+"}"))(a);a.args=b;a.isCalcField=!0;return a}function n(){return l.apply(null,Array.from(arguments).concat(function(){for(var b=[],a=arguments.length;0<a--;){if(null==arguments[a])return null;b.push(arguments[a])}return b.join("-")}))}var h=basis.Class,j=basis.Cleaner,y=Object.extend,B=Function.$self,s=Function.getter,v=basis.event.EventObject,
t=basis.event.create,p=basis.data,d=p.Dataset,r=p.dataset.Subset,x=p.dataset.Split,w=p.DataObject,m=p.STATE,a={},k={string:1,number:1},q=[],E=function(b){return isNaN(b)?null:Number(b)},o=function(b){return isNaN(b)?null:Number(b)},f=function(b){return isNaN(b)?null:parseInt(b)},c=function(b){return null==b?null:""+b},b={},g=basis.Class(null,{init:function(b){var a=this.index={};this.normalize=b;this.valueWrapper=function(c,d){var g=b(c,d);return g!==d&&a[g]?d:g};this.calcWrapper=function(c,d){var g=
b(c,d);if(g!==d&&a[g])throw"Duplicate value for index "+d+" => "+c;return g};j.add(this)},get:function(b,a){var c=this.index[b];if(c&&(!a||c instanceof a))return c},add:function(b,a){var c=this.index[b];if(a&&(!c||c===a))return this.index[b]=a,!0},remove:function(b,a){if(this.index[b]===a)return delete this.index[b],!0},destroy:function(){this.index=null}}),p=function(b,a){return function(c){return b.prototype[a].call(this,c&&c.map(this.wrapper))}},i=function(b,a){return function(c){this.name||(this.name=
e(a));b.prototype.init.call(this,c)}},C=function(b){return function(a,c){d.setAccumulateState(!0);a=(a||[]).map(this.wrapper);d.setAccumulateState(!1);return b.prototype.sync.call(this,a,c)}},G=h(d,{wrapper:Function.$self,init:i(d,"EntitySet"),sync:C(d),set:p(d,"set"),add:p(d,"add"),remove:p(d,"remove"),destroy:function(){d.prototype.destroy.call(this);delete this.wrapper}}),H=h(G,{set:Function.$false,add:Function.$false,remove:Function.$false,clear:Function.$false}),D=h(r,{init:i(r,"EntityCollection"),
sync:C(r)});D.sourceHandler=r.sourceHandler;var I=h(x,{subsetClass:H,init:i(x,"EntityGrouping"),sync:C(x),getSubset:function(b,a){var c=x.prototype.getSubset.call(this,b,a);c&&(c.wrapper=this.wrapper);return c}}),u=function(b){if(this instanceof u){b||(b=B);var a=new z({entitySetClass:{name:"Set of {"+((b.entityType||b).name||"UnknownWrapper")+"}",wrapper:b}}),b=function(b,c){return null!=b?(c instanceof G||(c=a.createEntitySet()),c.set(b instanceof d?b.getItems():Array.from(b)),c):null};b.entitySetType=
a;return b}},z=h(null,{entitySetClass:G,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),L=function(b){if(this instanceof L){var a=function(b,a){if(null!=b){if(b===a||b.entityType===c)return b;var e,i=c.idField;if(k[typeof b]){if(!i)return;e=b;b={};b[i]=e}else if(c.compositeKey)e=c.compositeKey(b,b);else if(i)e=b[i];else if(f&&(a=c.singleton,!a))return c.singleton=new g(b);null!=e&&d&&(a=d.get(e,c.entityClass));a&&a.entityType===c?a.update(b):a=new g(b);return a}return c.singleton},
c=new O(b||{},a),d=c.index__,g=c.entityClass,f=c.isSingleton;y(a,{toString:function(){return this.typeName+"()"},entityType:c,type:a,typeName:c.name,index:d,reader:function(b){return c.reader(b)},get:function(b){return c.get(b)},addField:function(b,a){c.addField(b,a)},all:c.all,createCollection:function(b,d,g){var f=c.collection_[b];return!f&&d?c.collection_[b]=new D({wrapper:a,source:g||c.all,rule:d}):f},getCollection:function(b){return c.collection_[b]},createGrouping:function(b,d,g){var f=c.grouping_[b];
return!f&&d?c.grouping_[b]=new I({wrapper:a,source:g||c.all,rule:d}):f},getGrouping:function(b){return c.grouping_[b]},getSlot:function(b,a){return c.getSlot(b,a)}});return a}},M=s("singleton"),K={};h(w,{});var O=h(null,{name:"UntitledEntityType",defaults:null,fields:null,extensible:!1,index__:null,slot_:null,init:function(b,a){this.name=b.name||e(this.name);this.index__=b.index;this.idFields={};q.push(this);this.isSingleton=b.isSingleton;this.wrapper=a;this.all=new H(Object.extend(b.all||{},{wrapper:a}));
this.slot_={};b.extensible&&(this.extensible=!0);this.fields={};this.defaults={};this.aliases={};this.getters={};Object.iterate(b.fields,this.addField,this);b.constrains&&b.constrains.forEach(function(b){this.addCalcField(null,b)},this);this.isSingleton&&(this.get=M);b.aliases&&Object.iterate(b.aliases,this.addAlias,this);this.collection_={};if(b.collections)for(var c in b.collections)this.collection_[c]=new D({name:c,wrapper:a,source:this.all,rule:b.collections[c]||Function.$true});this.grouping_=
{};if(b.groupings)for(c in b.groupings)this.grouping_[c]=new I({name:c,wrapper:a,source:this.all,rule:b.groupings[c]||Function.$true});this.entityClass=J(this,this.all,this.index__,this.slot_,this.fields,this.defaults,this.getters).extend({entityType:this,type:a,typeName:this.name,getId:function(){return this.__id__}})},reader:function(b){var a={};if(k[typeof b])return this.idField?(a[this.idField]=b,a):null;if(!b||null==b)return null;for(var c in b){var d=c in this.aliases?this.aliases[c]:"";d&&
d in this.fields&&(a[d]=this.fields[d].reader?this.fields[d].reader(b[c]):b[c])}return a},addAlias:function(b,a){a in this.fields&&!1==b in this.aliases&&(this.aliases[b]=a)},addField:function(b,a){if(!this.all.itemCount){this.aliases[b]=b;"function"==typeof a&&(a={type:a});"type"in a&&"function"!=typeof a.type&&(a.type=B);var d=a.type||B;[E,o,f,c].has(d)&&(a.id=!0);a.id&&((this.index__||(this.index__=new g(String)),this.idFields[b]=!0,this.idField||this.compositeKey)?(this.idField=null,this.compositeKey=
n.apply(null,Object.keys(this.idFields))):this.idField=b);a.calc?this.addCalcField(b,a.calc,void 0):this.fields[b]=d;this.defaults[b]="defValue"in a?a.defValue:d();this.getters["get_"+b]=function(){return this.data[b]};K[b]||(K[b]={destroy:function(){this.set(b,null)}})}},addCalcField:function(b,a,c){if(!b||!this.fields[b]){this.calcs||(this.calcs=[]);for(var d={args:a.args||[],wrapper:!c?a:function(b,d,g){return c(a(b,d,g))}},g=this.calcs.length,f=0,e=0;e<this.calcs.length;e++)a.args.has(this.calcs[e].key)&&
(f=e+1);if(b){d.key=b;for(e=0;e<this.calcs.length;e++)if(this.calcs[e].args.has(b)){g=e;break}if(f>g)return;this.idField&&b==this.idField&&(this.compositeKey=a);this.fields[b]=function(b,a){return a}}else g=f;this.calcs.splice(Math.min(g,f),0,d)}},get:function(b){b=this.getId(b);if(null!=b)return this.index__.get(b,this.entityClass)},getId:function(b){if((this.idField||this.compositeKey)&&null!=b){if(k[typeof b])return b;if(b&&b.entityType===this)return b.__id__;b instanceof w&&(b=b.data);return this.compositeKey?
this.compositeKey(b,b):b[this.idField]}},getSlot:function(b){var a=this.getId(b);if(null!=a){var c=this.slot_[a];c||(k[typeof b]&&(c={},this.idField&&!this.compositeKey&&(c[this.idField]=b),b=c),c=this.slot_[a]=new w({delegate:this.get(a),data:b}));return c}}}),F=h(w,{init:v.prototype.init,event_rollbackUpdate:t("rollbackUpdate")}),J=function(b,c,d,g,f,e,i){function k(a,c,d){var g=!1,f=b.calcs,e=a.__id__,i=a.data;try{if(f)for(var h=0,m;m=f[h++];){var D=m.key;if(D){var z=i[D];i[D]=m.wrapper(c,i,i[D]);
i[D]!==z&&(c[D]=z,g=!0)}else m.wrapper(c,i)}b.compositeKey?a.__id__=b.compositeKey(c,i,a.__id__):j&&j in c&&(a.__id__=i[j]);a.__id__!==e&&b.index__.calcWrapper(a.__id__)}catch(o){a.__id__=e;for(var n in c)a.data[n]=c[n];if(d)for(n in d)a.modified||(a.modified=d);g=!1}a.__id__!==e&&u(a,e,a.__id__);return g}function u(b,a,c){null!=a&&(d.remove(a,b),g[a]&&g[a].setDelegate());null!=c&&(d.add(c,b),g[c]&&g[c].setDelegate(b))}var j=b.idField;return h(F,i,{canHaveDelegate:!1,modified:null,isTarget:!0,extendConstructor_:!1,
init:function(b){F.prototype.init.call(this);this.fieldHandlers_={};this.data={};this.root=this;this.target=this;var a,d={},g;for(g in f)g in b?(d[g]=e[g],a=f[g](b[g])):a=e[g],a&&a!==this&&a instanceof v&&a.addHandler(K[g],this)&&(this.fieldHandlers_[g]=!0),this.data[g]=a;k(this,d);c.event_datasetChanged(c,{inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},get:function(b){return this.data[b]},set:function(a,c,d,g){var e=f[a];if(!e){if(!b.extensible)return;
e=B}var i,u=this.modified,c=e(c,this.data[a]),e=this.data[a];if(c!==e&&(!c||!e||c.constructor!==Date||e.constructor!==Date||+c!==+e))a:{i={};if(a!=j)if(d)(u||(this.modified=u={}),!1===a in u)?(i.rollback={key:a,value:void 0},u[a]=e):u[a]===c&&(i.rollback={key:a,value:c},delete u[a],Object.keys(u).length||(this.modified=null));else if(u&&a in u)if(u[a]!==c){i.rollback={key:a,value:u[a]};u[a]=c;break a}else return!1;this.data[a]=c;this.fieldHandlers_[a]&&(e.removeHandler(K[a],this),this.fieldHandlers_[a]=
!1);c&&c!==this&&c instanceof v&&c.addHandler(K[a],this)&&(this.fieldHandlers_[a]=!0);i.key=a;i.value=e;i.delta={};i.delta[a]=e}else!d&&u&&a in u&&(i={rollback:{key:a,value:u[a]}},delete u[a],Object.keys(u).length||(this.modified=null));if(!g&&i){var d=i.key,a=i.delta||{},h;i.rollback&&(h={},h[i.rollback.key]=i.rollback.value);k(this,a,h)&&(d=!0);d&&(this.event_update(this,a),i.delta=a);h&&this.event_rollbackUpdate(this,h)}return i||!1},update:function(b,a){if(b){var c,d={},g,f={},e,i;for(i in b)if(e=
this.set(i,b[i],a,!0))if(e.key&&(c=!0,d[e.key]=e.value),e.rollback)g=!0,f[e.rollback.key]=e.rollback.value;k(this,d,f)&&(c=!0);c&&this.event_update(this,d);g&&this.event_rollbackUpdate(this,f)}return c?d:!1},reset:function(){this.update(e)},clear:function(){var b={},a;for(a in this.data)b[a]=void 0;return this.update(b)},commit:function(b){if(this.modified){var a=this.modified;this.modified=null}this.update(b);a&&this.event_rollbackUpdate(this,a)},rollback:function(){if(this.state!=m.PROCESSING){if(this.modified){var b=
this.modified;this.modified=null;this.update(b);this.event_rollbackUpdate(this,b)}this.setState(m.READY)}},destroy:function(){for(var b in this.fieldHandlers_)this.fieldHandlers_[b]&&this.data[b].removeHandler(K[b],this);this.fieldHandlers_=a;null!=this.__id__&&u(this,this.__id__,null);w.prototype.destroy.call(this);c.event_datasetChanged(c,{deleted:[this]});this.data=a;this.modified=null}})};this.extend({isEntity:function(b){return b&&b instanceof J},NumericId:E,NumberId:o,IntId:f,StringId:c,Index:g,
CalculateField:l,EntityType:L,Entity:J,BaseEntity:F,EntitySetType:u,EntitySet:G,ReadOnlyEntitySet:H,Collection:D,Grouping:I})}.body()+"//@ sourceURL="+l+"src/basis/entity.js")).call(basis.namespace("basis.entity"),basis.namespace("basis.entity"),basis.namespace("basis.entity").exports,this,l+"src/basis/entity.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.Class,l=
Object.extend,n=basis.event.EventObject,h=basis.event.create;basis.ua.Cookies.get("DEBUG_MODE");var j,y,B=!1,s={},v=Date.now,t=l(new n,{event_sessionOpen:h("sessionOpen"),event_sessionClose:h("sessionClose"),event_sessionFreeze:h("sessionFreeze"),event_sessionUnfreeze:h("sessionUnfreeze"),isOpened:function(){return!!j},getTimestamp:function(){if(j)return y},open:function(d,e){var h;s[d]||(s[d]=new p(d));h=s[d];j===h?B&&this.unfreeze():(this.close(),j=h,y=v(),e&&l(h.data,e),this.event_sessionOpen(this))},
close:function(){j&&(B&&this.unfreeze(),this.event_sessionClose(this),y=j=null)},freeze:function(){j&&!B&&(this.event_sessionFreeze(this),B=!0,y=null)},unfreeze:function(){j&&B&&(B=!1,y=v(),this.event_sessionUnfreeze(this))},storeData:function(d,e){if(j)return j.storeData(d,e);throw Error("No opened session");},getData:function(d){if(j)return j.getData(d);throw Error("No opened session");},destroy:function(){for(var d=Object.keys(s),e;e=d.pop();)s[e].destroy();n.prototype.destroy.call(this)}}),p=
e(n,{event_destroy:function(){j==this&&t.close();delete s[this.key]},extendConstructor_:!1,init:function(d){n.prototype.init.call(this);this.key=d;this.data={}},storeData:function(d,e){if(B)throw Error("Session is frozen");return this.data[d]=e},getData:function(d){if(B)throw Error("Session is frozen");return this.data[d]},destroy:function(){n.prototype.destroy.call(this);for(var d=Object.keys(this.data),e;e=d.pop();){var h=this.data[e];null!=h&&"function"==typeof h.destroy&&h.destroy();delete this.data[e]}}});
this.extend({SessionManager:t})}.body()+"//@ sourceURL="+l+"src/basis/session.js")).call(basis.namespace("basis.session"),basis.namespace("basis.session"),basis.namespace("basis.session").exports,this,l+"src/basis/session.js",l+"src/basis/",basis,function(e){return basis.resource(l+"src/basis/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(b,a){var c={"JS-Framework":"Basis"};r.test(a.method)?("multipart/form-data"!=a.contentType&&(c["Content-Type"]=
a.contentType+(a.encoding?";charset="+a.encoding:"")),j.test("gecko")&&(c.Connection="close")):j.test("ie")&&(c["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");Object.iterate(Object.extend(c,a.headers),function(b,a){a!=null&&this.setRequestHeader(b,a)},b)}function l(b){var a=this.xhr;if(a){var c=this.proxy;"number"!=typeof b&&(b=a.readyState);b!=this.prevReadyState_&&(this.prevReadyState_=b,c.event_readyStateChanged(this,b),4==b?(this.clearTimeout(),a.onreadystatechange=Function.$undef,"unknown"==
typeof a.responseText||!a.responseText&&!a.getAllResponseHeaders()?(c.event_failure(this),c.event_abort(this),b=d.ERROR):(this.processResponse(),this.isSuccessful()?(c.event_success(this),b=d.READY):(this.processErrorResponse(),c.event_failure(this,this.data.error),b=d.ERROR)),c.event_complete(this)):b=d.PROCESSING,this.setState(b,this.data.error))}}function n(b){var a=v(b);return function(){a.apply(m,arguments);this.service&&a.apply(this.service,arguments);a.apply(this,arguments)}}var h=basis.Class,
j=basis.ua,y=basis.Cleaner,B=basis.timer.TimeEventManager,s=basis.event.EventObject,v=basis.event.create,t=basis.data,p=t.DataObject,d=t.STATE,r=/POST/i;(function(){for(var b=192;255>=b;b++)b.toHex(),String.fromCharCode(b+848),(b+848).toHex(),b.toHex()})();var x="native",w=function(){if(window.XMLHttpRequest)return function(){return new XMLHttpRequest};var b=window.ActiveXObject;if(b)for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;x=a[c];c++)try{if(new b(x))return function(){return new b(x)}}catch(d){}throw Error(x=
"Browser doesn't support for XMLHttpRequest!");}(),t=h(p,{timeout:3E4,requestStartTime:0,debug:!1,proxy:null,event_stateChanged:function(b,a){p.prototype.event_stateChanged.call(this,b,a);for(var c=0;c<this.influence.length;c++)this.influence[c].setState(this.state,this.state.data)},init:function(b){p.prototype.init.call(this,b);this.xhr=w();this.influence=[]},setInfluence:function(b){this.influence=Array.from(b)},clearInfluence:function(){this.influence=[]},isIdle:function(){return 4==this.xhr.readyState||
0==this.xhr.readyState},isSuccessful:function(){try{var b=this.xhr.status;return void 0==b||0==b||200<=b&&300>b}catch(a){}return!1},processResponse:function(){this.update({responseText:this.xhr.responseText,responseXML:this.xhr.responseXML,status:this.xhr.status})},processErrorResponse:function(){this.update({error:{code:"SERVER_ERROR",msg:this.xhr.responseText}})},prepare:Function.$true,prepareRequestData:function(b){var a=Object.iterate(b.params,function(b,a){return null==a||a&&"function"==typeof a.toString&&
null==a.toString()?null:b+"="+(""+a.toString()).replace(/[\%\=\&\<\>\s\+]/g,function(b){b=b.charCodeAt(0).toHex();return"%"+(2>b.length?"0":"")+b})}).filter(Function.$isNotNull).join("&");r.test(b.method)&&!b.postBody&&(b.postBody=a||"",a="");a&&(b.url+=(-1==b.url.indexOf("?")?"?":"&")+a);return b},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(b){this.update({responseText:"",responseXML:"",status:"",error:""});j.test("gecko1.8.1-")&&b.asynchronous&&(this.xhr=
w());this.proxy.event_start(this);var a=this.xhr;this.prevReadyState_=-1;b.asynchronous?a.onreadystatechange=l.bind(this):l.call(this,0);a.open(b.method,b.url,b.asynchronous);e(a,b);this.setTimeout(this.timeout);var c=b.postBody;if(r.test(b.method)&&j.test("ie9-"))if("object"==typeof c&&"undefined"!=typeof c.documentElement&&"string"==typeof c.xml)c=c.xml;else if("string"==typeof c)c=c.replace(/\r/g,"");else if(null==c||""==c)c="[No data]";a.send(c);return!0},repeat:function(){this.requestData&&(this.abort(),
this.send(this.requestData))},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),4!=this.xhr.readyState&&l.call(this,4))},setTimeout:function(b){"ontimeout"in this.xhr?(this.xhr.timeout=b,this.xhr.ontimeout=this.timeoutAbort.bind(this)):B.add(this,"timeoutAbort",Date.now()+b)},clearTimeout:function(){!1=="ontimeout"in this.xhr&&B.remove(this,"timeoutAbort")},timeoutAbort:function(){this.proxy.event_timeout(this);this.abort()},destroy:function(){this.abort();this.clearInfluence();
delete this.xhr;delete this.requestData;p.prototype.destroy.call(this)}}),m=new s({abort:function(){for(var b=Array.from(a),c=0;c<b.length;c++)b[c].abort();return b}}),a=[];m.addHandler({start:function(b){a.add(b.proxy)},complete:function(b){a.remove(b.proxy)}});var k={start:function(b){this.inprogressRequests.add(b)},complete:function(b){this.inprogressRequests.remove(b)}},q={complete:function(){var b=this.requestQueue.shift();b&&setTimeout(function(){b.doRequest()},0)}},E=h(s,{requests:null,poolLimit:null,
poolHashGetter:Function.$true,event_start:n("start"),event_timeout:n("timeout"),event_abort:n("abort"),event_success:n("success"),event_failure:n("failure"),event_complete:n("complete"),init:function(b){this.requests={};this.requestQueue=[];this.inprogressRequests=[];s.prototype.init.call(this,b);this.addHandler(k,this);this.poolLimit&&this.addHandler(q,this)},getRequestByHash:function(b){if(!this.requests[b]){var a,c;for(c in this.requests)this.requests[c].isIdle()&&!this.requestQueue.has(this.requests[c])&&
(a=this.requests[c],delete this.requests[c]);this.requests[b]=a||new this.requestClass({proxy:this})}return this.requests[b]},prepare:Function.$true,prepareRequestData:Function.$self,request:function(b){if(this.prepare()){var a=Object.slice(b),a=this.prepareRequestData(a),c=this.poolHashGetter(a);this.requests[c]&&this.requests[c].abort();c=this.getRequestByHash(c);c.initData=Object.slice(b);c.requestData=a;c.setInfluence(a.influence);this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?
(this.requestQueue.push(c),c.setState(d.PROCESSING)):c.doRequest();return c}},abort:function(){for(var b=0,a;a=this.inprogressRequests[b];b++)a.abort();for(b=0;a=this.requestQueue[b];b++)a.setState(d.ERROR);this.inprogressRequests=[];this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var b=0,a;a=this.stoppedRequests[b];b++)a.proxy.get(a.initData);this.stoppedRequests=
[]}this.stopped=!1},destroy:function(){for(var b in this.requests)this.requests[b].destroy();delete this.requestData;delete this.requestQueue;s.prototype.destroy.call(this);delete this.requests;y.remove(this)}});E.createEvent=n;var o=h(E,{requestClass:t,event_readyStateChanged:n("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,init:function(b){E.prototype.init.call(this,b);this.requestHeaders={};this.params={};y.add(this)},setParam:function(b,
a){this.params[b]=a},setParams:function(b){this.clearParams();for(var a in b)this.setParam(a,b[a])},removeParam:function(b){delete this.params[b]},clearParams:function(){for(var b in this.params)delete this.params[b]},prepareRequestData:function(b){var a=b.url||this.url;if(!a)throw Error("URL is not defined");Object.extend(b,{url:a,method:this.method.toUpperCase(),contentType:this.contentType,encoding:this.encoding,asynchronous:this.asynchronous,headers:[this.requestHeaders,b.headers].merge(),postBody:b.postBody||
this.postBody,params:[this.params,b.params].merge(),influence:b.influence});return b},get:function(){this.request.apply(this,arguments)}}),f={start:function(b){this.inprogressProxies.add(b.proxy)},complete:function(b){this.inprogressProxies.remove(b.proxy)}},c=h(s,{proxyClass:o,requestClass:t,event_sessionOpen:v("sessionOpen"),event_sessionClose:v("sessionClose"),event_sessionFreeze:v("sessionFreeze"),event_sessionUnfreeze:v("sessionUnfreeze"),isSecure:!1,prepare:Function.$true,signature:Function.$undef,
isSessionExpiredError:Function.$false,init:function(b){s.prototype.init.call(this,b);this.inprogressProxies=[];this.proxyClass=h(this.proxyClass,{service:this,needSignature:this.isSecure,event_failure:function(b){this.constructor.superClass_.prototype.event_failure.apply(this,arguments);this.needSignature&&this.service.isSessionExpiredError(b)&&(this.service.freeze(),this.service.stoppedProxies.push(this),this.stop())},request:function(b){return!this.service.prepare(this,b)||this.needSignature&&!this.service.sign(this)?
void 0:this.constructor.superClass_.prototype.request.call(this,b)},requestClass:this.requestClass});this.addHandler(f,this)},sign:function(b){return this.sessionKey?(this.signature(b,this.sessionData),!0):!1},openSession:function(b,a){this.sessionKey=b;this.sessionData=a;this.unfreeze();this.event_sessionOpen()},closeSession:function(){this.freeze();this.event_sessionClose()},freeze:function(){if(this.sessionKey){this.oldSessionKey=this.sessionKey;this.sessionData=this.sessionKey=null;this.stoppedProxies=
Array.from(this.inprogressProxies);for(var b=0,a;a=this.inprogressProxies[b];b++)a.stop();this.event_sessionFreeze()}},unfreeze:function(){if(this.oldSessionKey==this.sessionKey&&this.stoppedProxies)for(var b=0,a;a=this.stoppedProxies[b];b++)a.resume();this.event_sessionUnfreeze()},createProxy:function(b){return new this.proxyClass(b)},destroy:function(){delete this.inprogressProxies;delete this.stoppedProxies;delete this.sessionData;delete this.sessionKey;delete this.oldSessionKey;s.prototype.destroy.call(this)}});
this.extend({Transport:o,TransportDispatcher:m,createEvent:n,Proxy:E,AjaxProxy:o,AjaxRequest:t,ProxyDispatcher:m,Service:c})}.body()+"//@ sourceURL="+l+"src/basis/net/ajax.js")).call(basis.namespace("basis.net.ajax"),basis.namespace("basis.net.ajax"),basis.namespace("basis.net.ajax").exports,this,l+"src/basis/net/ajax.js",l+"src/basis/net/",basis,function(e){return basis.resource(l+"src/basis/net/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=
basis.Class,l=basis.dom,n=basis.net.ajax,h=basis.xml,j=h.QName,y=h.addNamespace,B=h.XML2Object,s=h.Object2XML,v=h.createElementNS,t=h.NAMESPACE,p=n.AjaxProxy,d=n.AjaxRequest,n=e(d,{requestDataGetter:Function.$self,responseDataGetter:Function.$self,errorCodeGetter:function(a){return l.tag(a,"code")[0]},errorMessageGetter:function(a){return l.tag(a,"message")[0]},isSuccessful:function(){var a=this.xhr.responseXML;return d.prototype.isSuccessful.call(this)&&void 0!==a&&void 0!==a.documentElement},init:function(a){d.prototype.init.call(this,
a);this.requestEnvelope=new x},processResponse:Function.$undef,processErrorResponse:function(){this.parseResponseXML();var a,d;this.responseEnvelope&&(d=this.responseEnvelope.element,a=this.errorCodeGetter(d),d=this.errorMessageGetter(d),a=a?a.firstChild.nodeValue:"UNKNOWN_ERROR",d=d?d.firstChild.nodeValue:"Unknown error");this.update({error:{code:a||"TRANSPORT_ERROR",message:d}})},parseResponseXML:function(){if(void 0==this.responseEnvelope){var a=this.xhr.responseXML;!a||void 0===a||void 0===a.documentElement?
this.responseEnvelope=null:(a.xml&&window.DOMParser&&(a=(new DOMParser).parseFromString(a.xml,"text/xml")),this.responseEnvelope=new x(a.documentElement))}},getRequestData:function(){var a=this.requestEnvelope.getBody();if(a)return this.requestDataGetter(a.getValue())},getResponseData:function(){this.parseResponseXML();var a=this.responseEnvelope&&this.responseEnvelope.getBody();if(a)return this.responseDataGetter(a.getValue(this.mapping))},setMapping:function(a){this.mapping=a},prepareRequestData:function(a){delete this.responseEnvelope;
this.setMapping(a.mapping);a.headers.SOAPAction=a.namespace+(!/\/$/.test(a.namespace)?"/":"")+a.methodName;a.soapHeader&&this.requestEnvelope.getHeader(!0).setValue(a.soapHeader,a.namespace);if(a.soapHeaderSections){var d=this.requestEnvelope.getHeader(!0),e;for(e in a.soapHeaderSections){var h=a.soapHeaderSections[e],m=h.data||h;d.setSection(new j(e,h.namespace||this.proxy.namespace),m)}}this.requestEnvelope.getBody(!0).setValue(new j(a.methodName,a.namespace),a.soapBody);a.postBody=this.requestEnvelope.document;
return a},destroy:function(){delete this.mapping;this.requestEnvelope.destroy();this.responseEnvelope&&this.responseEnvelope.destroy();d.prototype.destroy.call(this)}}),r=e(p,{requestClass:n,method:"POST",contentType:"text/xml",encoding:"utf-8",namespace:null,methodName:null,mapping:null,soapBody:null,soapHeader:null,soapHeaderSections:null,setSoapHeaderSection:function(a,d){this.soapHeaderSections[a]=d},init:function(a){this.soapHeaderSections||(this.soapHeaderSections={});p.prototype.init.call(this,
a)},prepareRequestData:function(a){a=p.prototype.prepareRequestData.call(this,a);Object.extend(a,{namespace:this.namespace,methodName:this.methodName,soapBody:a.soapBody||this.soapBody,soapHeader:a.soapHeader||this.soapHeader,soapHeaderSections:[this.soapHeaderSections,a.soapHeaderSections].merge(),mapping:a.mapping||this.mapping});return a}}),x=e(null,{header:null,body:null,init:function(a){a||(a=h.createDocument("http://schemas.xmlsoap.org/soap/envelope/","soap:Envelope").documentElement,y(a,"xsd",
t.XMLShema),y(a,"xsi",t.XMLShemaInstance),h.XMLNS.BAD_SUPPORT&&y(a,"soap","http://schemas.xmlsoap.org/soap/envelope/"));this.document=a.ownerDocument;this.element=a;this.body=this.getBody(!0)},getElementByName:function(a){return h.getElementsByTagNameNS(this.element,a,"http://schemas.xmlsoap.org/soap/envelope/")[0]},getHeader:function(a){var d=this.header;if(!d){var e=this.getElementByName("Header");if(e||a)d=this.header=new w(e,this.document),e||this.element.insertBefore(d.element,this.element.firstChild)}return d},
setHeaderSection:function(a,d){this.getHeader(!0).setSection(a,d)},getBody:function(a){var d=this.body;if(!d){var e=this.getElementByName("Body");if(e||a)d=this.body=new m(e,this.document),e||this.element.appendChild(d.element)}return d},destroy:function(){this.header&&(this.header.destroy(),delete this.header);this.body&&(this.body.destroy(),delete this.body);delete this.element;delete this.document}}),w=e(null,{init:function(a,d){this.element=a||v(d,"Header","http://schemas.xmlsoap.org/soap/envelope/")},
getValue:function(){return B(this.element)},setValue:function(a,d){l.clear(this.element);this.appendChild(a,d)},appendChild:function(a,d){if(a)for(var e in a){var j=this.element.appendChild(s(this.element.ownerDocument,e,d,a[e]));h.XMLNS.BAD_SUPPORT&&y(j,"",d)}},setSection:function(a,d){var e=h.getElementsByTagNameNS(this.element,a,a.namespace)[0];e&&l.remove(e);this.appendChild(Function.wrapper(a)(d),a.namespace)}}),m=e(null,{init:function(a,d){this.element=a||v(d,"Body","http://schemas.xmlsoap.org/soap/envelope/")},
getValue:function(a){return B(this.element,a)},setValue:function(a,d,e){l.clear(this.element);this.appendChild(a,d,e)},appendChild:function(a,d,e){d=s(this.element.ownerDocument,a,a.namespace,Function.$defined(d)?d:{});this.element.appendChild(d);h.XMLNS.BAD_SUPPORT&&y(d.element,"",a.namespace);e&&h.setAttributeNodeNS(d,h.createAttributeNS(document,"encodingStyle","http://schemas.xmlsoap.org/soap/encoding/",e))}});this.extend({SOAPProxy:r,SOAPRequest:n,Envelope:x,EnvelopeHeader:w,EnvelopeBody:m})}.body()+
"//@ sourceURL="+l+"src/basis/net/soap.js")).call(basis.namespace("basis.net.soap"),basis.namespace("basis.net.soap"),basis.namespace("basis.net.soap").exports,this,l+"src/basis/net/soap.js",l+"src/basis/net/",basis,function(e){return basis.resource(l+"src/basis/net/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=Function.getter,l=basis.Class,n=basis.dom,h=basis.ui.Node,j=basis.ui.Control,y=l(h,{event_select:function(){h.prototype.event_select.call(this);
n.focus(this.element)},event_disable:function(){h.prototype.event_disable.call(this);this.tmpl.buttonElement.disabled=!0},event_enable:function(){h.prototype.event_enable.call(this);this.tmpl.buttonElement.disabled=!1},caption:"[no caption]",groupId:0,name:null,template:'<button{buttonElement} class="Basis-Button {selected} {disabled}" event-click="click"><span class="Basis-Button-Back"/><span class="Basis-Button-Caption">{caption}</span></button>',binding:{caption:"caption"},action:{click:function(){this.isDisabled()||
this.click()}},click:function(){},init:function(e){h.prototype.init.call(this,e)},setCaption:function(e){this.caption=e;this.tmpl.set("caption",this.binding.caption.getter(this))}}),l=l(j,{template:'<div class="Basis-ButtonPanel {disabled}"><div{childNodesElement|content} class="Basis-ButtonPanel-Content"/></div>',childClass:y,groupingClass:{groupGetter:function(e){return e.groupId||-e.eventObjectId},childClass:{template:'<div class="Basis-ButtonGroup"/>'}},grouping:{},getButtonByName:function(h){return this.childNodes.search(h,
e("name"))}});this.extend({Button:y,ButtonPanel:l})}.body()+"//@ sourceURL="+l+"src/basis/ui/button.js")).call(basis.namespace("basis.ui.button"),basis.namespace("basis.ui.button"),basis.namespace("basis.ui.button").exports,this,l+"src/basis/ui/button.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(){var a=this.owner&&this.owner.dataSource,d=this.ownerDataSource;
d!=a&&(this.ownerDataSource=a,this.event_ownerDataSourceChanged(this,d))}var l=basis.Class,n=basis.dom,h=basis.event.create,j=basis.event.events,y=basis.event.LISTEN,B=basis.data.STATE,s=basis.ui.Node,v=function(){this.event_condChanged(this)},t=l(s,{template:'<div class="Basis-Label {selected} {disabled}"/>',content:null,visibilityGetter:Function.$true,visible:null,insertPoint:function(a){return a.tmpl.content||a.element},event_visibilityChanged:h("visibilityChanged","node")&&function(a){j.visibilityChanged.call(this,
a);this.insertPoint?this.visible?(a="function"==typeof this.insertPoint?this.insertPoint(this.owner):this.insertPoint,a=Array.isArray(a)?a:[a],a.splice(1,0,this.element),n.insert.apply(null,a)):n.remove(this.element):n.display(this.element,this.visible)},event_condChanged:h("condChanged","node")&&function(a){j.condChanged.call(this,a);a=this.owner?!!this.visibilityGetter(this.owner):!1;this.visible!==a&&(this.visible=a,this.event_visibilityChanged(this))},event_ownerChanged:function(a,d){s.prototype.event_ownerChanged.call(this,
a,d);this.event_condChanged(this)}}),p=l(t,{template:'<div class="Basis-Label Basis-Label-State {selected} {disabled}"/>',listen:{owner:{stateChanged:v}}}),d=l(p,{template:'<div class="Basis-Label Basis-Label-Processing {selected} {disabled}"/>',content:"Processing...",visibilityGetter:function(a){return a.state==B.PROCESSING}}),r=l(p,{template:'<div class="Basis-Label Basis-Label-Error {selected} {disabled}"/>',content:"Error",visibilityGetter:function(a){return a.state==B.ERROR}});y.add("ownerDataSource",
"ownerDataSourceChanged");var h=l(t,{template:'<div class="Basis-Label Basis-Label-State {selected} {disabled}"/>',listen:{owner:{dataSourceChanged:function(){e.call(this)}}},ownerDataSource:null,event_ownerChanged:function(a,d){s.prototype.event_ownerChanged.call(this,a,d);e.call(this)},event_ownerDataSourceChanged:h("ownerDataSourceChanged","node","oldOwnerDataSource")&&function(a,d){j.ownerDataSourceChanged.call(this,a,d);this.event_condChanged(this)}}),y=l(h,{template:'<div class="Basis-Label Basis-Label-State {selected} {disabled}"/>',
listen:{ownerDataSource:{stateChanged:v}}}),x=l(y,{content:"Processing...",template:'<div class="Basis-Label Basis-Label-Processing {selected} {disabled}"/>',visibilityGetter:function(a){return a.dataSource&&a.dataSource.state==B.PROCESSING}}),w=l(y,{content:"Error",template:'<div class="Basis-Label Basis-Label-Error {selected} {disabled}"/>',visibilityGetter:function(a){return a.dataSource&&a.dataSource.state==B.ERROR}}),m=l(h,{template:'<div class="Basis-Label Basis-Label-Count {selected} {disabled}">{count}</div>',
listen:{ownerDataSource:{stateChanged:v,datasetChanged:v}}}),a=l(m,{template:'<div class="Basis-Label Basis-Label-Empty {selected} {disabled}"/>',content:"Empty",visibilityGetter:function(a){return a.dataSource&&a.dataSource.state==B.READY&&!a.dataSource.itemCount}}),v=l(t,{template:'<div class="Basis-Label Basis-Label-Count {selected} {disabled}">{count}</div>',listen:{owner:{stateChanged:v,childNodesModified:v}}}),l=l(v,{template:'<div class="Basis-Label Basis-Label-Empty {selected} {disabled}"/>',
content:"Empty",visibilityGetter:function(a){return a.state==B.READY&&!a.firstChild}});this.extend({NodeLabel:t,State:p,Processing:d,Error:r,DataSourceLabel:h,DataSourceState:y,DataSourceProcessing:x,DataSourceError:w,DataSourceItemCount:m,DataSourceEmpty:a,ChildNodesCount:v,Empty:l})}.body()+"//@ sourceURL="+l+"src/basis/ui/label.js")).call(basis.namespace("basis.ui.label"),basis.namespace("basis.ui.label"),basis.namespace("basis.ui.label").exports,this,l+"src/basis/ui/label.js",l+"src/basis/ui/",
basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(d){"function"==typeof d.expand&&d.expand()}function l(d){"function"==typeof d.collapse&&d.collapse()}var n=basis.Class,h=basis.dom,j=basis.dom.event,y=basis.event.create,B=basis.ui.Container,s=basis.ui.Control,v=basis.ui.PartitionNode,t=basis.ui.GroupingNode,p={expandAll:function(){h.axis(this,h.AXIS_DESCENDANT_OR_SELF,e)},collapseAll:function(){h.axis(this,
h.AXIS_DESCENDANT_OR_SELF,l)},expand:Function(),collapse:Function(),toggle:Function()},v=n(v,{template:'<li class="Basis-TreePartitionNode"><div class="Basis-TreePartitionNode-Title"><span>{title}</span></div><ul{childNodesElement} class="Basis-TreePartitionNode-Content"/></li>'}),t=n(t,{childClass:v}),d=n(B,p,{childClass:null,childFactory:null,event_collapse:y("collapse"),event_expand:y("expand"),template:'<li class="Basis-TreeNode"><div{content} class="Basis-TreeNode-Title {selected} {disabled}"><span{titleElement} class="Basis-TreeNode-Caption" event-click="select">{title}</span></div></li>',
binding:{title:'data:title || "[no title]"',collapsed:{events:"expand collapse",getter:function(d){return d.collapsed?"collapsed":""}}},action:{select:function(d){this.isDisabled()||this.select(j(d).ctrlKey)},toggle:function(){this.toggle()}}}),y=n(d,{childClass:d,groupingClass:t,template:'<li class="Basis-TreeNode {collapsed}"><div{content} class="Basis-TreeNode-Title Basis-TreeNode-CanHaveChildren {selected} {disabled}"><div class="Basis-TreeNode-Expander" event-click="toggle"/><span{titleElement} class="Basis-TreeNode-Caption" event-click="select">{title}</span></div><ul{childNodesElement} class="Basis-TreeNode-Content"/></li>',
collapsable:!0,collapsed:!1,init:function(e){d.prototype.init.call(this,e);this.collapsed&&this.collapsable&&this.event_collapse()},expand:function(){if(this.collapsed)return this.collapsed=!1,this.event_expand(),!0},collapse:function(){if(!this.collapsed&&this.collapsable)return this.collapsed=!0,this.event_collapse(),!0},toggle:function(){this.collapsed?this.expand():this.collapse()}});this.extend({Tree:n(s,p,{template:'<ul class="Basis-Tree {disabled}"/>',childClass:d,groupingClass:t}),Node:d,
Folder:y,GroupingNode:t,PartitionNode:v})}.body()+"//@ sourceURL="+l+"src/basis/ui/tree.js")).call(basis.namespace("basis.ui.tree"),basis.namespace("basis.ui.tree"),basis.namespace("basis.ui.tree").exports,this,l+"src/basis/ui/tree.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.Class,l=basis.dom,n=basis.dom.event,h=basis.cssom,j=Function.getter,y=basis.cssom.classList,
B=basis.Cleaner,s=basis.layout,v=basis.event.create,t=basis.ui.Container,p=basis.ui.Control,d=basis.ui.PartitionNode,r=basis.ui.GroupingNode,x={VERTICAL:"V",HORIZONTAL:"H"},w={L:"LEFT",R:"RIGHT",T:"TOP",B:"BOTTOM",C:"CENTER"},m={LEFT:"RIGHT",RIGHT:"LEFT",TOP:"BOTTOM",BOTTOM:"TOP",CENTER:"CENTER"},a={finish:function(){this.visible||(l.remove(this.element),this.event_cleanup(this))}},v=e(t,{template:'<div class="Basis-Popup {selected} {disabled}"><div{closeButton} class="Basis-Popup-CloseButton"><span>Close</span></div><div{content|childNodesElement} class="Basis-Popup-Content"/></div>',
event_beforeShow:v("beforeShow"),event_show:v("show"),event_hide:v("hide"),event_realign:v("realign"),event_cleanup:v("cleanup"),event_layoutChanged:v("layoutChanged","oldOrientation","oldDir")&&function(a,c){var b=(a+"-"+c.qw().slice(2,4).join("-")).toLowerCase(),d=(this.orientation+"-"+this.dir.qw().slice(2,4).join("-")).toLowerCase();y(this.element).replace(b,d,this.cssLayoutPrefix)},visible:!1,autorotate:!1,dir:"",defaultDir:"RIGHT BOTTOM RIGHT TOP",orientation:x.VERTICAL,hideOnAnyClick:!0,hideOnKey:!1,
ignoreClickFor:null,cssLayoutPrefix:"popup-",init:function(d){t.prototype.init.call(this,d);this.cssRule=h.uniqueRule(this.element);this.ignoreClickFor=Array.from(this.ignoreClickFor);this.dir&&(this.defaultDir=this.dir.toUpperCase());this.setLayout(this.defaultDir,this.orientation);this.thread&&this.thread.addHandler(a,this);B.add(this)},setLayout:function(a,c,b){var d=this.dir,e=this.orientation;"string"==typeof a&&(this.dir=a.toUpperCase());"string"==typeof c&&(this.orientation=c);if(d!=this.dir||
e!=this.orientation)this.event_layoutChanged(e,d),b||this.realign()},flip:function(a){var c=this.dir.qw(),a=a==x.VERTICAL;c[0+a]=m[c[0+a]];c[2+a]=m[c[2+a]];this.setLayout(c.join(" "))},rotate:function(a){var c=this.dir.qw(),a=(a%4+4)%4,b=[];if(!a)return c;var d=c[0].charAt(0),e=c[1].charAt(0),h="LTRTRBLBLCCTRCCBCCCCCCCC".indexOf(d+e)>>1,d=(h&252)+((h&3)+a&3)<<1;b.push(w["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d)],w["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d+1)]);d=c[2].charAt(0);e=c[3].charAt(0);h="LTRTRBLBLCCTRCCBCCCCCCCC".indexOf(d+
e)>>1;a="C"!=d&&"C"!=e&&c[0]==c[2]!=(c[1]==c[3])?-a+4:a;d=(h&252)+((h&3)+a&3)<<1;b.push(w["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d)],w["LTRTRBLBLCCTRCCBCCCCCCCC".charAt(d+1)]);return b},isFitToViewport:function(a){if(this.visible&&this.relElement){var c=new s.Box(this.relElement,!1,this.element.offsetParent),b=new s.Viewport(this.element.offsetParent),d=this.element.offsetWidth,e=this.element.offsetHeight,a=(""+(a||this.dir)).toUpperCase().qw(),h="CENTER"==a[0]?c.left+(c.width>>1):c[a[0].toLowerCase()],
c="CENTER"==a[1]?c.top+(c.height>>1):c[a[1].toLowerCase()];return("LEFT"!=a[2])*(h<d>>("CENTER"==a[2]))||("RIGHT"!=a[2])*(b.width-h<d>>("CENTER"==a[2]))||("TOP"!=a[3])*(c<e>>("CENTER"==a[3]))||("BOTTOM"!=a[3])*(b.height-c<e>>("CENTER"==a[3]))?!1:{x:h,y:c}}},realign:function(){if(this.visible&&this.relElement){for(var a=this.dir.qw(),c,b=0,d=a,e=a[2],h=a[3],k="number"==typeof this.autorotate||!this.autorotate.length?3:this.autorotate.length;this.autorotate&&b<=k;){if(c=this.isFitToViewport(d.join(" "))){e=
d[2];h=d[3];this.setLayout(d.join(" "),null,!0);break}if(b==k)break;Array.isArray(this.autorotate)?(d=this.autorotate[b++],d="string"==typeof d?d.toUpperCase().split(" "):this.rotate(d)):d=this.rotate(++b*this.autorotate)}c||(c=new s.Box(this.relElement,!1,this.element.offsetParent),c={x:"CENTER"==a[0]?c.left+(c.width>>1):c[a[0].toLowerCase()],y:"CENTER"==a[1]?c.top+(c.height>>1):c[a[1].toLowerCase()]});a=new s.Box(this.element.offsetParent);b={left:"auto",right:"auto",top:"auto",bottom:"auto"};switch(e){case "LEFT":b.left=
c.x+"px";break;case "CENTER":b.left=Math.round(c.x-this.element.offsetWidth/2)+"px";break;case "RIGHT":b.right=a.width-c.x+"px"}switch(h){case "TOP":b.top=c.y+"px";break;case "CENTER":b.top=Math.round(c.y-this.element.offsetHeight/2)+"px";break;case "BOTTOM":b.bottom=a.height-c.y+"px"}this.cssRule.setStyle(b);this.event_realign()}},show:function(a,c,b){this.relElement=l.get(a)||this.relElement;this.setLayout(c||this.defaultDir,b);this.visible?this.realign():this.relElement&&(y(this.element).remove("pre-transition"),
l.visibility(this.element,!1),o.appendChild(this),this.event_beforeShow(),this.visible=!0,this.realign(),this.thread&&this.thread.start(1),l.visibility(this.element,!0),y(this.element).add("pre-transition"),this.event_show())},hide:function(){this.visible&&(l.parentOf(document.body,this.element)&&(this.thread?this.thread.start(1):(l.remove(this.element),this.event_cleanup(this))),this.visible=!1,this.parentNode&&o.removeChild(this),this.event_hide())},hideAll:function(){o.clear()},destroy:function(){this.thread&&
(this.thread.removeHandler(a,this),this.thread=null);this.hide();t.prototype.destroy.call(this);this.cssRule.destroy();this.cssRule=null;B.remove(this)}}),k=e(v,{cssLayoutPrefix:"mode-",template:'<div class="Basis-Balloon {selected} {disabled}" event-click="click"><div class="Basis-Balloon-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/><div class="tail"/></div><div class="Basis-Balloon-Layout"><div{closeButton} class="Basis-Balloon-CloseButton"><span>Close</span></div><div{content|childNodesElement} class="Basis-Balloon-Content"/></div></div>'}),
q=e(t,{childClass:e.SELF,template:'<div class="Basis-Menu-Item" event-click="click"><a{content} class="{selected} {disabled}" href="#"><span>{caption}</span></a></div>',binding:{caption:"caption"},action:{click:function(a){this.click();n.kill(a)}},event_childNodesModified:function(a,c){y(this.element).bool("hasSubItems",this.firstChild);t.prototype.event_childNodesModified.call(this,a,c)},groupId:0,caption:"[untitled]",handler:null,defaultHandler:function(a){this.parentNode&&this.parentNode.defaultHandler(a)},
setCaption:function(a){this.caption=a;this.templateUpdate(this.tmpl)},click:function(){!this.isDisabled()&&!(this instanceof E)&&(this.handler?this.handler(this):this.defaultHandler(this))}}),E=e(q,{template:'<div class="Basis-Menu-ItemSet {selected} {disabled}"/>'}),d=e(d,{template:'<div class="Basis-Menu-ItemGroup"><div{childNodesElement|content} class="Basis-Menu-ItemGroup-Content"></div></div>'}),r=e(r,{childClass:d}),e=e(v,{childClass:q,defaultDir:"LEFT BOTTOM LEFT TOP",subMenu:null,groupingClass:r,
grouping:j("groupId"),defaultHandler:function(){this.hide()},template:'<div class="Basis-Menu {selected} {disabled}"><div{closeButton} class="Basis-Menu-CloseButton"><span>Close</span></div><div{content|childNodesElement} class="Basis-Menu-Content"/></div>'}),o=new p({id:"Basis-PopupStack",handheldMode:!1,childClass:v,event_childNodesModified:function(a,c){if(c.deleted)for(var b=c.deleted.length-1,d;d=c.deleted[b];b--)d.hide();c.inserted&&!c.deleted&&this.childNodes.length==c.inserted.length&&(y(this.element).add("IsNotEmpty"),
document.body.className=document.body.className,n.addGlobalHandler("click",this.hideByClick,this),n.addGlobalHandler("keydown",this.hideByKey,this),n.addGlobalHandler("scroll",this.hideByScroll,this),n.addHandler(window,"resize",this.realignAll,this));this.lastChild?this.lastChild.select():(y(this.element).remove("IsNotEmpty"),document.body.className=document.body.className,n.removeGlobalHandler("click",this.hideByClick,this),n.removeGlobalHandler("keydown",this.hideByKey,this),n.removeGlobalHandler("scroll",
this.hideByScroll,this),n.removeHandler(window,"resize",this.realignAll,this));p.prototype.event_childNodesModified.call(this,a,c)},insertBefore:function(a,c){var b=document.documentElement.scrollTop,d=document.body.scrollTop;p.prototype.insertBefore.call(this,a,c)&&(a.documentST_=b,a.bodyST_=d,this.handheldMode&&(document.documentElement.scrollTop=0,document.body.scrollTop=0),a.element.style.zIndex=basis.ui.window?basis.ui.window.getWindowTopZIndex():2001)},removeChild:function(a){a&&(a.hideOnAnyClick&&
a.nextSibling&&this.removeChild(a.nextSibling),p.prototype.removeChild.call(this,a),this.handheldMode&&(document.documentElement.scrollTop=a.documentST_,document.body.scrollTop=a.bodyST_))},realignAll:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.realign()},clear:function(){this.firstChild&&this.removeChild(this.firstChild)},hideByClick:function(a){for(var a=n.sender(a),c,b=this.childNodes.filter(j("hideOnAnyClick")).reverse(),d=0,e;e=b[d];d++){if(a===e.tmpl.closeButton||l.parentOf(e.tmpl.closeButton,
a)){this.removeChild(e);return}c||(c=l.axis(a,l.AXIS_ANCESTOR_OR_SELF));if(c.has(e.element)||c.some(Array.prototype.has,e.ignoreClickFor)){this.removeChild(b[d-1]);return}}this.removeChild(b.pop())},hideByKey:function(a){var a=n.key(a),c=this.lastChild;if(c&&c.hideOnKey){var b=!1;"function"==typeof c.hideOnKey?b=c.hideOnKey(a):Array.isArray(c.hideOnKey)&&(b=c.hideOnKey.has(a));b&&c.hide()}},hideByScroll:function(a){a=n.sender(a);if(!l.parentOf(a,this.element))for(var c=this.lastChild;c;){var b=c.previousSibling;
c.relElement&&c.offsetParent!==a&&l.parentOf(a,c.relElement)&&c.hide();c=b}}});n.onLoad(function(){l.insert(document.body,o.element,l.INSERT_BEGIN);o.realignAll()});this.extend({ORIENTATION:x,setHandheldMode:function(a){o.handheldMode=!!a},Popup:v,Balloon:k,Menu:e,MenuGroupingNode:r,MenuPartitionNode:d,MenuItem:q,MenuItemSet:E})}.body()+"//@ sourceURL="+l+"src/basis/ui/popup.js")).call(basis.namespace("basis.ui.popup"),basis.namespace("basis.ui.popup"),basis.namespace("basis.ui.popup").exports,this,
l+"src/basis/ui/popup.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.Class,l=basis.dom.event,n=basis.dom,h=Function.getter,j=Function.nullGetter,y=Object.extend,B=basis.cssom.classList,s=basis.data,v=basis.dom.wrapper,t=v.GroupingNode,p=v.PartitionNode,d=basis.ui.Node,r=basis.ui.Container,x=basis.ui.Control,w=basis.ui.PartitionNode,m=e(d,{template:'<th class="Basis-Table-Header-Cell {selected} {disabled}"><div class="Basis-Table-Sort-Direction"/><div class="Basis-Table-Header-Cell-Content"><span{content} class="Basis-Table-Header-Cell-Title">{title}</span></div></th>',
binding:{title:"data:title"}}),a=e(t,{event_ownerChanged:function(a,d){d&&n.remove(this.headerRow);if(this.owner&&this.owner.element){var c=this,b=this.owner.element;do n.insert(b,c.headerRow,n.INSERT_BEGIN);while(c=c.grouping)}t.prototype.event_ownerChanged.call(this,a,d)},childClass:{init:function(a){p.prototype.init.call(this,a);this.cell=new m({delegate:this,titleGetter:this.titleGetter,binding:this.binding||{}})},event_childNodesModified:function(a,d){var c=0;if(this.nodes[0]&&this.nodes[0]instanceof
this.constructor)for(var b=0,g;g=this.nodes[b];b++)c+=g.cell.element.colSpan;else c=this.nodes.length;this.cell.element.colSpan=c;this.groupNode&&this.groupNode.event_childNodesModified.call(this.groupNode,this.groupNode,{});p.prototype.event_childNodesModified.call(this,a,d)},destroy:function(){p.prototype.destroy.call(this);this.cell.destroy()}},groupingClass:e.SELF,init:function(a){t.prototype.init.call(this,a);this.element=this.childNodesElement=this.headerRow=n.createElement("tr.Basis-Table-Header-GroupContent")},
insertBefore:function(a,d){a=t.prototype.insertBefore.call(this,a,d);n.insert(this.headerRow,a.cell.element,n.INSERT_BEFORE,a.nextSibling&&a.nextSibling.cell.element);return a},removeChild:function(a){n.remove(a.cell.element);t.prototype.removeChild.call(a)},destroy:function(){t.prototype.destroy.call(this);this.headerRow=null}}),v=e(d,{colSorting:null,defaultOrder:!1,groupId:0,template:'<th class="Basis-Table-Header-Cell {selected} {disabled}" event-click="setColumnSorting"><div class="Basis-Table-Sort-Direction"/><div class="Basis-Table-Header-Cell-Content"><span{content} class="Basis-Table-Header-Cell-Title"/></div></th>',
action:{setColumnSorting:function(){if(this.selected){var a=this.parentNode&&this.parentNode.owner;a&&a.setSorting(a.sorting,!a.sortingDesc)}else this.select()}},init:function(a){d.prototype.init.call(this,a);this.selectable=!!this.colSorting;this.colSorting&&(this.defaultOrder="desc"==this.defaultOrder,B(this.element).add("Basis-Table-Header-SortableCell"))},select:function(){this.selected||(this.order=this.defaultOrder);d.prototype.select.call(this)}}),a=e(r,{childClass:v,groupingClass:a,template:'<thead{groupsElement} class="Basis-Table-Header {selected} {disabled}"><tr{childNodesElement|content}/></thead>',
listen:{owner:{sortingChanged:function(a){var d=this.childNodes.search(a.sorting,"colSorting");d?(d.select(),d.order=a.sortingDesc,B(this.tmpl.content).bool("sort-order-desc",d.order)):this.selection.clear()}}},init:function(a){this.selection={owner:this,handlerContext:this,handler:{datasetChanged:function(a){(a=a.pick())&&this.owner&&this.owner.setSorting(a.colSorting,a.order)}}};r.prototype.init.call(this,a);this.applyConfig_(this.structure)},applyConfig_:function(a){if(a){for(var d=[],c=[],b=this.owner&&
this.owner.sorting,g=0;g<a.length;g++){var e=a[g],k=e.header,m={};"groupId"in e&&(m.groupId=e.groupId);m.content=(null==k||"object"!=typeof k||k instanceof basis.l10n.Token?k:k.content)||String.Entity.nbsp;"function"==typeof m.content&&(m.content=m.content.call(this));m.cssClassName=(k.cssClassName||"")+" "+(e.cssClassName||"");k=h(e.colSorting||e.sorting);k!==j&&(m.colSorting=k,m.defaultOrder=e.defaultOrder,(e.autosorting||k===b)&&c.push(m));d.push(m)}c.length&&(c[0].selected=!0);this.setChildNodes(d)}}}),
k=e(d,{colSpan:1,template:'<td{content} class="Basis-Table-Footer-Cell {selected} {disabled}">\u00a0</td>',templateUpdate:function(){this.element.colSpan=this.colSpan},setColSpan:function(a){this.colSpan=a||1;this.templateUpdate(this.tmpl)}}),q=e(r,{childClass:k,template:'<tfoot class="Basis-Table-Footer {selected} {disabled}"><tr{content|childNodesElement}/></tfoot>',init:function(a){r.prototype.init.call(this,a);this.applyConfig_(this.structure);n.display(this.element,this.useFooter)},applyConfig_:function(a){if(a){var d=
null;this.clear();this.useFooter=!1;for(var c=0;c<a.length;c++){var b=a[c],e;if("footer"in b){e=null!=b.footer?b.footer:{};"object"!=typeof e&&(e={content:e});var i=e.content;"function"==typeof i&&(i=i.call(this));this.useFooter=!0;e=this.appendChild({cssClassName:(b.cssClassName||"")+" "+(e.cssClassName||""),content:i,template:e.template||k.prototype.template})}else d?d.setColSpan(d.colSpan+1):e=this.appendChild({});e&&(d=e)}}}}),E=e(d,{childClass:null,repaintCount:0,template:'<tr class="Basis-Table-Row {selected} {disabled}" event-click="select"><\!--{cells}--\></tr>',
action:{select:function(a){this.select(l(a).ctrlKey)}},templateUpdate:function(){this.repaintCount+=1;for(var a=0,d;d=this.updaters[a];a++){var c=this.element.childNodes[d.cellIndex];d=d.getter.call(this,this,c);1<this.repaintCount&&(c.innerHTML="");if(!d||!Array.isArray(d))d=[d];for(var b=0;b<d.length;b++){var e=d[b];c.appendChild(e&&e.nodeType?e:n.createText(null!=e&&("string"!=typeof e||""!=e)?e:" "))}}}}),w=e(w,{template:'<tbody class="Basis-Table-Body"><tr class="Basis-Table-GroupHeader" event-click="toggle"><td{content} colspan="100"><span class="expander"/><span class="Basis-Table-GroupHeader-Title">{title}</span></td></tr><\!--{childNodesHere}--\></tbody>',
action:{toggle:function(){B(this.element).toggle("collapsed")}}});this.extend({Table:e(x,{childClass:E,groupingClass:{childClass:w},template:'<table{groupsElement} class="Basis-Table {selected} {disabled}" cellspacing="0"><\!--{header}--\><tbody{content|childNodesElement} class="Basis-Table-Body"/><\!--{footer}--\></table>',headerClass:a,footerClass:q,columnCount:0,init:function(a){this.applyConfig_(this.structure);x.prototype.init.call(this,a);this.headerConfig=this.header;this.footerConfig=this.footer;
this.header=new this.headerClass(y({owner:this,structure:this.structure},this.header));this.footer=new this.footerClass(y({owner:this,structure:this.structure},this.footer));n.replace(this.tmpl.header,this.header.element);n.replace(this.tmpl.footer,this.footer.element)},applyConfig_:function(a){if(a){var d=[],c="";this.firstChild&&this.clear();for(var b=0;b<a.length;b++){var e=a[b],i=e.body||{};if("function"==typeof i||"string"==typeof i)i={content:i};var e=[e.cssClassName||"",i.cssClassName||""].join(" ").trim(),
h=i.content,c=c+("<td"+(i.templateRef?i.templateRef.quote("{"):"")+(e?' class="'+e+'"':"")+">"+("string"==typeof h?i.content:"")+"</td>");"function"==typeof h&&d.push({cellIndex:b,getter:h})}this.columnCount=b;this.childClass=this.childClass.subclass({template:this.childClass.prototype.template.source.replace("<\!--{cells}--\>",c),updaters:d})}},loadData:function(a){this.setChildNodes(s(a))},destroy:function(){x.prototype.destroy.call(this);this.header.destroy();this.header=null;this.footer.destroy();
this.footer=null}}),Body:w,Header:a,HeaderCell:v,Row:E,Footer:q})}.body()+"//@ sourceURL="+l+"src/basis/ui/table.js")).call(basis.namespace("basis.ui.table"),basis.namespace("basis.ui.table"),basis.namespace("basis.ui.table").exports,this,l+"src/basis/ui/table.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(d){return'[style="padding:0!important;margin:0!important;border:0!important;width:auto!important;height:0!important;font-size:0!important;'+
(d||"")+'"]'}function l(d,h){return j.createElement("tbody"+e(),j.createElement("tr"+e(),d.columnWidthSync_.map(Function.getter(h))))}function n(d,e,h){j.replace(d.tmpl[e],d.tmpl[e]=h)}var h=basis.Class,j=basis.dom,y=basis.dom.event.sender,B=basis.cssom,s=basis.ui.table.Table,v=basis.layout,t=j.createElement("td"+e(),j.createElement(e("position:relative!important"),j.createElement('iframe[event-load="measureInit"]'+e('width:100%!important;position:absolute!important;visibility:hidden!important;behavior:expression(basis.dom.event.fireEvent(window,\\"load\\",{type:\\"load\\",target:this}),(runtimeStyle.behavior=\\"none\\"))')))),
p=j.createElement("td"+e(),j.createElement(e()));this.extend({ScrollTable:h(s,{timer_:!1,columnWidthSync_:null,template:'<div class="Basis-Table Basis-ScrollTable {selected} {disabled}" event-load=""><div class="Basis-ScrollTable-Header-Container"><table{headerOffset} class="Basis-ScrollTable-Header" cellspacing="0"><\!--{header}--\><\!--{headerExpandRow}--\></table><div{headerExpandCell} class="Basis-ScrollTable-ExpandHeaderCell"><div class="Basis-ScrollTable-ExpandHeaderCell-B1"><div class="Basis-ScrollTable-ExpandHeaderCell-B2"/></div></div></div><div{scrollContainer} class="Basis-ScrollTable-ScrollContainer" event-scroll="scroll"><div{boundElement} class="Basis-ScrollTable-TableWrapper"><table{tableElement|groupsElement} class="Basis-ScrollTable-ContentTable" cellspacing="0"><\!--{shadowHeader}--\><\!--{measureRow}--\><tbody{content|childNodesElement} class="Basis-Table-Body"/><\!--{shadowFooter}--\></table></div></div><div class="Basis-ScrollTable-Footer-Container"><table{footerOffset} class="Basis-ScrollTable-Footer" cellspacing="0"><\!--{footer}--\><\!--{footerExpandRow}--\></table><div{footerExpandCell} class="Basis-ScrollTable-ExpandFooterCell"><div class="Basis-ScrollTable-ExpandFooterCell-B1"><div class="Basis-ScrollTable-ExpandFooterCell-B2"/></div></div></div></div>',
action:{scroll:function(){var d=-this.tmpl.scrollContainer.scrollLeft+"px";this.tmpl.headerOffset.style.left!=d&&(this.tmpl.headerOffset.style.left=d,this.tmpl.footerOffset.style.left=d)},measureInit:function(d){(y(d).contentWindow.onresize=this.requestRelayout)()}},headerClass:{listen:{childNode:{"*":function(){this.owner&&this.owner.requestRelayout()}}}},init:function(d){this.requestRelayout=this.requestRelayout.bind(this);this.relayout=this.relayout.bind(this);s.prototype.init.call(this,d);this.header.addHandler({"*":this.requestRelayout},
this);this.columnWidthSync_=Array.create(this.columnCount,function(){return{measure:t.cloneNode(!0),header:p.cloneNode(!0),footer:p.cloneNode(!0)}});n(this,"measureRow",l(this,"measure"));n(this,"headerExpandRow",l(this,"header"));n(this,"footerExpandRow",l(this,"footer"));v.addBlockResizeHandler(this.tmpl.boundElement,this.requestRelayout);basis.ua.is("IE8")&&setTimeout(this.requestRelayout,1)},requestRelayout:function(){this.timer_||(this.timer_=setTimeout(this.relayout,0))},relayout:function(){var d=
this.header.element,e=this.footer.element,h=j.outerHTML(d);this.shadowHeaderHTML_!=h&&(this.shadowHeaderHTML_=h,n(this,"shadowHeader",d.cloneNode(!0)));h=j.outerHTML(e);this.shadowFooterHtml_!=h&&(this.shadowFooterHtml_=h,n(this,"shadowFooter",e.cloneNode(!0)));for(var h=0,l,m;l=this.columnWidthSync_[h];h++)m=l.measure.offsetWidth+"px",B.setStyleProperty(l.header.firstChild,"width",m),B.setStyleProperty(l.footer.firstChild,"width",m);h=this.tmpl.boundElement.offsetWidth||0;d=d.offsetHeight||0;e=e.offsetHeight||
0;this.tmpl.headerExpandCell.style.left=h+"px";this.tmpl.footerExpandCell.style.left=h+"px";this.tmpl.tableElement.style.margin="-{0}px 0 -{1}px".format(d,e);this.element.style.paddingBottom=d+e+"px";this.timer_=clearTimeout(this.timer_)},destroy:function(){this.timer_=clearTimeout(this.timer_);this.timer_=!0;this.shadowFooterHtml_=this.shadowHeaderHtml_=this.columnWidthSync_=null;s.prototype.destroy.call(this)}})})}.body()+"//@ sourceURL="+l+"src/basis/ui/scrolltable.js")).call(basis.namespace("basis.ui.scrolltable"),
basis.namespace("basis.ui.scrolltable"),basis.namespace("basis.ui.scrolltable").exports,this,l+"src/basis/ui/scrolltable.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=this.path,l=basis.Class,n=basis.dom,h=basis.dom.event,j=basis.cssom,y=basis.cssom.classList,B=basis.Cleaner,s=basis.event.create,v=basis.dragdrop,t=basis.ui.Node,p=basis.ui.Container,d=basis.ui.Control,
r=basis.ui.button.ButtonPanel;basis.l10n.createDictionary(e,"",{emptyTitle:"[no title]"});var x=l(t,{captureElement:null,template:'<div class="Basis-Blocker"><div{content} class="Basis-Blocker-Mate"/></div>',init:function(a){t.prototype.init.call(this,a);n.setStyle(this.element,{display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%"});B.add(this)},capture:function(a,d){if(this.captureElement=n.get(a||document.body))n.insert(this.captureElement,this.element),this.element.style.zIndex=
d||1E3,n.show(this.element)},release:function(){this.captureElement&&(this.element.parentNode==this.captureElement&&n.remove(this.element),this.captureElement=null,n.hide(this.element))},destroy:function(){this.release();t.prototype.destroy.call(this);B.remove(this)}}),e=l(p,{template:'<div class="Basis-Window {selected} {disabled}" event-mousedown="mousedown" event-keypress="keypress"><div class="Basis-Window-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/></div><div class="Basis-Window-Layout"><div{ddtrigger} class="Basis-Window-Title"><div class="Basis-Window-TitleCaption">{title}</div></div><div{content} class="Basis-Window-Content"><\!-- {childNodesHere} --\></div></div></div>',
binding:{title:"title"},action:{close:function(){this.close()},mousedown:function(){this.activate()},keypress:function(a){var d=h.key(a);d==h.KEY.ESCAPE?this.closeOnEscape&&this.close(0):d==h.KEY.ENTER&&"TEXTAREA"!=h.sender(a).tagName&&h.kill(a)}},event_beforeShow:s("beforeShow"),event_open:s("open"),event_close:s("close"),event_active:s("active"),closeOnEscape:!0,autocenter:!0,autocenter_:!1,modal:!1,closed:!0,moveable:!0,title:basis.l10n.getToken(e,"emptyTitle"),init:function(a){p.prototype.init.call(this,
a);n.hide(this.element);a=this.tmpl.title.parentNode;this.setTitle(this.title);this.cssRule=j.uniqueRule(this.element);this.moveable&&v&&(this.dde=new v.MoveableElement({element:this.element,trigger:this.tmpl.ddtrigger||a,fixRight:!1,fixBottom:!1}),this.dde.addHandler({move:function(){this.autocenter=!1;this.element.style.margin=0},over:function(){this.cssRule.setStyle(Object.slice(this.element.style,"left top".qw()));n.setStyle(this.element,{top:"",left:""})}},this));var d=Array.from(this.buttons).map(function(a){return Object.complete({click:(a.click||
this.close).bind(this)},a)},this),e=Object.slice(this,["buttonOk","buttonCancel"]),h;for(h in e){var m=e[h];d.push({name:"buttonOk"==h?"ok":"cancel",caption:m.caption||m.title||m,click:(m.click||this.close).bind(this)})}d.length&&(this.buttonPanel=new r({cssClassName:"Basis-Window-ButtonPlace",container:this.tmpl.content,childNodes:d}));if(!this.titleButton||!1!==this.titleButton.close)y(a).add("Basis-Window-Title-ButtonPlace-Close"),n.insert(a,n.createElement("SPAN.Basis-Window-Title-ButtonPlace",
n.createElement('SPAN.Basis-Window-Title-CloseButton[event-click="close"]',n.createElement("SPAN","Close"))),n.INSERT_BEGIN);!1!==this.autocenter&&(this.autocenter=this.autocenter_=!0);this.thread&&this.thread.addHandler({finish:function(){this.closed&&n.remove(this.element)}},this);B.add(this)},setTitle:function(a){this.tmpl.set("title",a)},realign:function(){this.autocenter&&(this.element.style.margin="",this.cssRule.setStyle(this.element.offsetWidth?{left:"50%",top:"50%",marginLeft:-this.element.offsetWidth/
2+"px",marginTop:-this.element.offsetHeight/2+"px"}:{left:0,top:0}))},activate:function(){this.select()},open:function(a){this.closed?(n.visibility(this.element,!1),n.show(this.element),m.appendChild(this),this.closed=!1,this.realign(),this.thread&&this.thread.start(!0),this.event_beforeShow(a),n.visibility(this.element,!0),this.buttonPanel&&this.buttonPanel.firstChild&&this.buttonPanel.firstChild.select(),this.event_open(a),this.event_active(a)):this.realign()},close:function(a){this.closed||(this.thread?
this.thread.start(1):n.remove(this.element),m.removeChild(this),this.autocenter=this.autocenter_,this.closed=!0,this.event_close(a))},destroy:function(){this.dde&&(this.dde.destroy(),delete this.dde);p.prototype.destroy.call(this);this.cssRule.destroy();this.cssRule=null;B.remove(this)}}),w=new x,m=new d({id:"Basis-WindowStack",childClass:e});m.addHandler({childNodesModified:function(){y(this.element).bool("IsNotEmpty",this.firstChild);var a=-1;if(this.lastChild){for(var d=0,e;e=this.childNodes[d];d++)e.element.style.zIndex=
2001+2*d,e.modal&&(a=d);this.lastChild.select()}-1!=a?w.capture(this.element,2E3+2*a):w.release()}});m.selection.addHandler({datasetChanged:function(){var a=this.pick(),d=m.lastChild;a?a.parentNode==m&&a!=d&&(m.insertBefore(a),m.event_childNodesModified({})):d&&this.add([d])}});h.onLoad(function(){n.insert(document.body,m.element,n.INSERT_BEGIN);for(var a=m.firstChild;a;a=a.nextSibling)a.realign()});this.extend({Window:e,Blocker:x,getWindowTopZIndex:function(){return 2*m.childNodes.length+2001}})}.body()+
"//@ sourceURL="+l+"src/basis/ui/window.js")).call(basis.namespace("basis.ui.window"),basis.namespace("basis.ui.window"),basis.namespace("basis.ui.window").exports,this,l+"src/basis/ui/window.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(d){d.autoSelectChild&&d.selection&&!d.selection.itemCount&&(d=d.childNodes.search(!1,"disabled"))&&d.select()}var l=basis.Class,
n=basis.dom,h=Function.getter,j=basis.cssom.classList,y=basis.ui.Node,B=basis.ui.Container,s=basis.ui.Control,v=l(s,{childClass:y,autoSelectChild:!0,event_childNodesModified:function(d,h){e(this);s.prototype.event_childNodesModified.call(this,d,h)},listen:{childNode:{enable:function(){e(this)},disable:function(){e(this)}}},item:function(d){return this.childNodes[isNaN(d)?this.indexOf(d):parseInt(d)]},indexOf:function(d){return d instanceof this.childClass?this.childNodes.indexOf(d):this.childNodes.search(d,
"name")?Array.lastSearchIndex:-1}}),t=l(B,{childClass:null,event_disable:function(d){this.unselect();B.prototype.event_disable.call(this,d)},template:'<div class="Basis-Tab {selected} {disabled}" event-click="select"><span class="Basis-Tab-Start"/><span class="Basis-Tab-Content"><span class="Basis-Tab-Caption">{title}</span></span><span class="Basis-Tab-End"/></div><div{content}/>',binding:{title:"data:title"},action:{select:function(){this.isDisabled()||this.select()}},titleGetter:h("data.title"),
groupId:0}),p=l(v,{childClass:t,groupingClass:{childClass:{template:'<div class="Basis-TabControl-TabGroup {selected} {disabled}"/>'}},template:'<div class="Basis-TabControl {selected} {disabled}"><div class="Basis-TabControl-Start"/><div{content|childNodesElement} class="Basis-TabControl-Content"/><div class="Basis-TabControl-End"/></div>'}),h=l(B,{event_select:function(d){j(this.element).remove("Basis-Page-Hidden");B.prototype.event_select.call(this,d)},event_unselect:function(d){j(this.element).add("Basis-Page-Hidden");
B.prototype.event_unselect.call(this,d)},template:'<div class="Basis-Page Basis-Page-Hidden {selected} {disabled}"><div{content|childNodesElement} class="Basis-Page-Content"/></div>'}),d=l(v,{childClass:h,template:'<div class="Basis-PageControl {selected} {disabled}"/>'}),y=l(t,{childClass:y,event_select:function(d){t.prototype.event_select.call(this,d);j(this.tmpl.pageElement).remove("Basis-Page-Hidden")},event_unselect:function(d){t.prototype.event_unselect.call(this,d);j(this.tmpl.pageElement).add("Basis-Page-Hidden")},
template:'<div class="Basis-TabSheet {selected} {disabled}" event-click="select"><div{tabElement} class="Basis-Tab"><span class="Basis-Tab-Start"/><span class="Basis-Tab-Content"><span class="Basis-Tab-Caption">{title}</span></span><span class="Basis-Tab-End"/></div><div{pageElement} class="Basis-Page Basis-Page-Hidden"><div{content|pageContent|childNodesElement} class="Basis-Page-Content"/></div></div>',destroy:function(){n.remove(this.tmpl.pageElement);t.prototype.destroy.call(this)}}),r=l(p,{childClass:y,
template:'<div class="Basis-AccordionControl {selected} {disabled}"><div{content|childNodesElement} class="Basis-AccordionControl-Content"/></div>'}),l=l(p,{childClass:y,template:'<div class="Basis-TabSheetControl {selected} {disabled}"><div{tabsElement} class="Basis-TabControl"><div class="Basis-TabControl-Start"/><div{content|childNodesElement} class="Basis-TabControl-Content"/><div class="Basis-TabControl-End"/></div><div{pagesElement} class="Basis-PageControl"/></div>',insertBefore:function(d,
e){var h=this.domVersion_;(d=p.prototype.insertBefore.call(this,d,e))&&h!=this.domVersion_&&this.tmpl.pagesElement&&this.tmpl.pagesElement.insertBefore(d.tmpl.pageElement,this.nextSibling?this.nextSibling.tmpl.pageElement:null);return d},removeChild:function(d){if(d=p.prototype.removeChild.call(this,d))return this.tmpl.pagesElement&&d.element.appendChild(d.tmpl.pageElement),d},clear:function(d){this.childNodes.forEach(function(d){d.element.appendChild(d.tmpl.pageElement)});p.prototype.clear.call(this,
d)}});this.extend({AbstractTabsControl:v,TabControl:p,Tab:t,PageControl:d,Page:h,AccordionControl:r,TabSheetControl:l,TabSheet:y})}.body()+"//@ sourceURL="+l+"src/basis/ui/tabs.js")).call(basis.namespace("basis.ui.tabs"),basis.namespace("basis.ui.tabs"),basis.namespace("basis.ui.tabs").exports,this,l+"src/basis/ui/tabs.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a){return{hour:a.getHours(),
day:a.getDate()-1,month:a.getMonth(),year:a.getFullYear()}}function l(a,b){var d={},e=E[a];if(e){var f=b.getFullYear(),h=b.getMonth(),k=b.getDate(),f=f-f%e[1],h=e[2]?h-h%e[2]:0,k=e[3]?k:1;d.periodStart=new Date(f,h,k);d.periodEnd=new Date(new Date(f+e[4],h+e[5],k+e[6])-1)}else d.periodStart=new Date(b),d.periodEnd=new Date(b);return d}function n(){for(var a=l(this.nodePeriodName,(new Date(this.periodStart)).add(this.nodePeriodUnit,-this.nodePeriodUnitCount*(this.getInitOffset(this.periodStart)||0))),
b=[],d=0;d<this.nodeCount;d++)b.push(a),a=l(this.nodePeriodName,(new Date(a.periodStart)).add(this.nodePeriodUnit,this.nodePeriodUnitCount));return b}var h=this.path,j=basis.Class,y=basis.dom,B=basis.dom.event,s=Function.getter,v=basis.event.create,t=basis.l10n.createDictionary,p=basis.l10n.getToken,d=basis.data.property.Property,r=basis.ui.Node,x=basis.ui.Container,w=basis.ui.Control,m=__dirname+"../../../l10n/calendar",a="jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec".split(",");t(h,m,{quarter:"Quarter",
today:"Today",selected:"Selected"});t(h+".month",m,{jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December"});t(h+".monthShort",m,{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"});t(h+".day",m,{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thr:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"});t(h+".day2",m,{mon:"Mo",tue:"Tu",
wed:"We",thr:"Th",fri:"Fr",sat:"Sa",sun:"Su"});t(h+".day3",m,{mon:"Mon",tue:"Tue",wed:"Wed",thr:"Thr",fri:"Fri",sat:"Sat",sun:"Sun"});var k={};(function(){for(var a=32,b=2147483647;--a;)k[a]=b,b>>=1})();var q={century:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},decade:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},year:function(a){return a.periodStart.getFullYear()},quarter:function(a){return LOCALE("QUARTER").toLowerCase().format(1+
a.periodStart.getMonth().base(3)/3)},month:function(c){return p(h,"monthShort",a[c.periodStart.getMonth()])},day:function(a){return a.periodStart.getDate()}},E={century:["year",100,0,0,100,0,0],decade:["year",10,0,0,10,0,0],year:["year",1,0,0,1,0,0],quarter:["month",1,3,0,0,3,0],month:["month",1,1,0,0,1,0],day:["day",1,1,1,0,0,1]},o=j(r,{childClass:null,periodStart:null,periodEnd:null,event_periodChanged:v("periodChanged"),event_select:function(){r.prototype.event_select.call(this);y.focus(this.element)},
template:'<a class="Basis-Calendar-Node {nodePeriodName} {selected} {disabled} {before} {after}" event-click="click">{title}</a>',action:{click:function(a){var b=this.parentNode&&this.parentNode.parentNode;b&&b.templateAction("click",a,this)}},binding:{nodePeriodName:"nodePeriodName",title:{events:"periodChanged",getter:function(a){return q[a.nodePeriodName](a)}},before:{events:"periodChanged",getter:function(a){return a.parentNode&&a.periodStart<a.parentNode.periodStart?"before":""}},after:{events:"periodChanged",
getter:function(a){return a.parentNode&&a.periodEnd>a.parentNode.periodEnd?"after":""}}},setPeriod:function(a,b){if(this.periodStart-a.periodStart||this.periodEnd-a.periodEnd)this.periodStart=a.periodStart,this.periodEnd=a.periodEnd,b&&(b>=this.periodStart&&b<=this.periodEnd?this.select():this.unselect()),this.event_periodChanged()}}),f=j(x,{event_periodChanged:v("periodChanged"),event_selectedDateChanged:v("selectedDateChanged"),template:'<div class="Basis-Calendar-Section Basis-Calendar-Section-{sectionName} {selected} {disabled}"><div class="Basis-Calendar-SectionTitle">{title}</div><div{childNodesElement} class="Basis-Calendar-SectionContent"/></div><div{tabElement} class="Basis-Calendar-SectionTab {selected}" event-click="select">{tabTitle}</div>',
binding:{sectionName:"sectionName",title:{events:"periodChanged",getter:function(a){return a.getTitle(a.periodStart)||"-"}},tabTitle:{events:"selectedDateChanged",getter:function(a){return a.getTabTitle(a.selectedDate)||"-"}}},childClass:o,minDate:null,maxDate:null,periodStart:null,periodEnd:null,setPeriod:function(a){if(this.periodStart-a.periodStart||this.periodEnd-a.periodEnd){var b=this.periodStart,d=this.periodEnd;this.periodStart=a.periodStart;this.periodEnd=a.periodEnd;a=n.call(this);this.minDate=
a[0].periodStart;this.maxDate=a[a.length-1].periodEnd;if(this.firstChild)for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].setPeriod(a[e],this.selectedDate);this.event_periodChanged(this,b,d)}},selectedDate:null,setSelectedDate:function(a){if(this.selectedDate-a){var b=this.selectedDate;this.selectedDate=a;(a=this.getNodeByDate(this.selectedDate))?a.select():this.selectedDate&&this.minDate<=this.selectedDate&&this.selectedDate<=this.maxDate?this.setViewDate(this.selectedDate):this.selection.clear();
this.event_selectedDateChanged(b)}},isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,selection:!0,init:function(a){var b=this.selectedDate;this.selectedDate=null;this.setViewDate(b);this.childNodes=n.call(this).map(function(a){return{nodePeriodName:this.nodePeriodName,periodStart:a.periodStart,periodEnd:a.periodEnd}},this);x.prototype.init.call(this,a);this.setSelectedDate(b);B.addHandler(this.tmpl.tabElement,
"click",this.select.bind(this,!1))},getTitle:Function(),getTabTitle:Function(),getNodeByDate:function(a){if(a&&this.periodStart<=a&&a<=this.periodEnd){a:{var b=this.childNodes;if(b.length){var d,e,f=0,h=b.length,k;do if(e=b[d=f+h>>1],a<(k=e.periodStart))h=d-1;else if(a>(e=e.periodEnd))f=d+1;else{a=a>=k&&a<=e?d:-1;break a}while(f<=h)}a=-1}if(-1!=a)return this.childNodes[a]}return null},prevPeriod:function(){this.isPrevPeriodEnabled&&this.setPeriod(l(this.periodName,new Date(+this.periodStart-1)))},
nextPeriod:function(){this.isNextPeriodEnabled&&this.setPeriod(l(this.periodName,new Date(+this.periodEnd+1)))},setViewDate:function(a){this.setPeriod(l(this.periodName,a))},getInitOffset:Function()});f.Month=j(f,{sectionName:"Month",periodName:"month",nodeCount:42,nodePeriodName:"day",nodePeriodUnit:"day",getTabTitle:s("getDate()"),getInitOffset:function(a){return 1+((new Date(a)).set("day",1).getDay()+5)%7},template:'<div class="Basis-Calendar-Section Basis-Calendar-Section-{sectionName} {selected} {disabled}"><div class="Basis-Calendar-SectionTitle">{title} {year}</div><div{content|childNodesElement} class="Basis-Calendar-SectionContent"><div class="Basis-Calendar-MonthWeekDays"><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.mon}</span><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.tue}</span><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.wed}</span><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.thr}</span><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.fri}</span><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.sat}</span><span class="Basis-Calendar-MonthWeekDays-Day">{l10n:basis.ui.calendar.day2.sun}</span></div></div></div><div{tabElement} class="Basis-Calendar-SectionTab {selected}" event-click="select">{tabTitle}</div>',
binding:{year:{events:"periodChanged",getter:function(a){return a.periodStart.getFullYear()}},title:{events:"periodChanged",getter:function(c){return p(h,"month",a[c.periodStart.getMonth()])}}}});f.Year=j(f,{sectionName:"Year",periodName:"year",nodePeriodName:"month",nodePeriodUnit:"month",getTabTitle:s("getMonth()",function(c){return p(h,"month",a[c])}),getTitle:s("getFullYear()")});f.YearDecade=j(f,{sectionName:"YearDecade",periodName:"decade",nodePeriodName:"year",nodePeriodUnit:"year",getInitOffset:function(){return 1},
getTabTitle:s("getFullYear()"),getTitle:function(a){return a.getFullYear()+" - "+this.periodEnd.getFullYear()}});f.Century=j(f,{sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:"year",nodePeriodUnitCount:10,getTabTitle:function(a){if(a)return a=a.getFullYear(),a-=a%10,a+"-"+(Number(a.toString().substr(-2))+9).lead(2)},getInitOffset:function(){return 1}});f.YearQuarters=j(f,{sectionName:"YearQuarter",periodName:"year",nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:"month",
nodePeriodUnitCount:3});f.Quarter=j(f,{sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:"month",nodePeriodUnit:"month",binding:{title:{l10n:!0,events:"periodChanged",l10nProxy:function(a,b){return[Math.floor(1+a.periodStart.getMonth().base(3)/3),b,a.periodStart.getFullYear()].join(" ")},getter:function(){return p(h,"quarter")}}}});this.extend({Calendar:j(w,{event_change:v("change"),childClass:f,childFactory:Function(),template:'<div class="Basis-Calendar {selected} {disabled}"><div class="Basis-Calendar-Header"><div{sectionTabs} class="Basis-Calendar-SectionTabs" /></div><div class="Basis-Calendar-Body"><span event-click="movePrev" class="Basis-Calendar-ButtonPrevPeriod"><span>\u2039</span><span class="over"></span></span><span event-click="moveNext" class="Basis-Calendar-ButtonNextPeriod"><span>\u203a</span><span class="over"></span></span><div{content|childNodesElement} class="Basis-Calendar-Content"/></div><div class="Basis-Calendar-Footer"><div class="Basis-Calendar-Footer-Date"><span class="Basis-Calendar-Footer-Label">{l10n:basis.ui.calendar.today}:</span><span event-click="selectToday" class="Basis-Calendar-Footer-Value">{today}</span></div></div></div>',
binding:{today:function(){return(new Date).toFormat("%D.%M.%Y")}},action:{moveNext:function(){this.selection.pick().nextPeriod()},movePrev:function(){this.selection.pick().prevPeriod()},selectToday:function(){this.selectedDate.set(new Date)}},event_childNodesModified:function(a,b){if(b.inserted)for(var d=0,e;e=b.inserted[d++];)e.setViewDate(this.date.value),this.selectedDate.addLink(e,e.setSelectedDate);if(b.deleted)for(d=0;e=b.deleted[d++];)this.selectedDate.removeLink(e,e.setSelectedDate);w.prototype.event_childNodesModified.call(this,
a,b);y.insert(y.clear(this.tmpl.sectionTabs),this.childNodes.map(s("tmpl.tabElement")));this.selection&&!this.selection.itemCount&&this.firstChild&&this.firstChild.select()},templateAction:function(a,b,d){w.prototype.templateAction.call(this,a,b);d instanceof o&&(a=d.periodStart,b=this.selection.pick(),this.selectedDate.set((new Date(this.selectedDate.value)).add(b.nodePeriodUnit,this.selectedDate.value.diff(b.nodePeriodUnit,a))),this.nextSection(!1))},date:null,minDate:null,maxDate:null,map:null,
periodEnableByDefault:!0,sections:["Month","Year","YearDecade"],init:function(a){var b=new Date;this.selectedDate=new d(new Date(this.date||b));this.date=new d(new Date(this.date||b));w.prototype.init.call(this,a);this.sections&&y.insert(this,this.sections.map(function(a){return new f[a]({selectedDate:this.selectedDate.value})},this))},setSection:function(a){(a=this.childNodes.search("sectionName",a))&&a.select()},nextSection:function(a){var b=this.selection.pick();(b=a?b.nextSibling:b.previousSibling)?
(b.select(),b.setViewDate(this.selectedDate.value)):a||this.event_change()},selectDate:function(a){0!=a-this.date.value&&this.date.set(a)},getNextPeriod:function(a,b){if(!this.isNextPeriodEnabled(a,b))return!1;if(this.map){var d=b?1:-1,f=b?"start":"till",h=b?"till":"start",m=(new Date(a)).add("millisecond",d),j=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(j){var D=l("year",m);for(D.periodEnd.getFullYear()==m.getFullYear()&&(D[f]=m);!this.isPeriodEnabled(D.periodStart,D.periodEnd);)D=
l("year",m.add("year",d));for(D[h]=l("month",D[f])[h];!this.isPeriodEnabled(D.periodStart,D.periodEnd);)D=l("month",m.add("month",d));var n=e(D[f]),h=e(D[h]);if(j=j[h.year]&&j[h.year][h.month]){this.periodEnableByDefault&&(f=k[D.periodEnd.getMonthDayCount()],j=j&f^f);for(f=n.day;f!=h.day+d;f+=d)if(j>>f&1){m=new Date(n.year,n.month,f+1);break}}else return l("day",D[f])}}return l("day",m)},isNextPeriodEnabled:function(a,b){if(!b&&this.minDate&&this.minDate>a||b&&this.maxDate&&this.maxDate<a)return!1;
if(this.map)if(this.periodEnableByDefault){if(!b&&this.minDate)return this.isPeriodEnabled(this.minDate,a);if(b&&this.maxDate)return this.isPeriodEnabled(a,this.maxDate)}else{var d=b?1:-1,e=a.getFullYear(),f=(new Date(a)).add("millisecond",d),h=f.getFullYear(),k=Object.keys(this.map.enable).filter(function(a){return d*a>=d*h}),m=k.length;if(m)for(var k=k.sort(function(a,b){return d*(a>b)||-d*(a<b)}),j=0;j<m;j++){var u=l("year",new Date(k[j],0));if(this.isPeriodEnabled(b&&k[j]==e?f:u.periodStart,!b&&
k[j]==e?f:u.periodEnd))return!0}return!1}return!0},isPeriodEnabled:function(a,b){if(this.minDate&&this.minDate>b||this.maxDate&&this.maxDate<a)return!1;var d=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(d){var f=e(a),h=e(b),m,j,D,l=f.month,u=new Date(f.year,f.month),z=11-f.month,n=z+1+12*(h.year-f.year-1)+(h.month+1)-1;if(this.periodEnableByDefault){if(0==n)return!(m=d[f.year])||!(j=m[f.month])||(j^2147483647)>>f.day&k[h.day-f.day+1];for(var o=0;o<=n;o++){if(!o||z==o%12)if(m=
d[u.getFullYear()],!m)return!0;j=m[l=u.getMonth()];if(!j)return!0;D=k[u.getMonthDayCount()];if(o/n?1==o/n?(j&D^D)&k[h.day+1]:j&D^D:(j&D^D)>>f.day)return!0;u.setMonth(l+1)}}else{if(0==n)return(m=d[f.year])&&(j=m[f.month])&&j>>f.day&k[h.day-f.day+1];for(o=0;o<=n;o++){if(!o||z==o%12||!m)if(m=d[u.getFullYear()],!m){o+=12;u.setMonth(l+12);continue}if((j=m[l=u.getMonth()])&&(o/n?1==o/n?j&k[h.day+1]:j:j>>f.day))return!0;u.setMonth(l+1)}}return!1}return!0},destroy:function(){w.prototype.destroy.call(this);
this.date.destroy()}}),CalendarSection:f})}.body()+"//@ sourceURL="+l+"src/basis/ui/calendar.js")).call(basis.namespace("basis.ui.calendar"),basis.namespace("basis.ui.calendar"),basis.namespace("basis.ui.calendar").exports,this,l+"src/basis/ui/calendar.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a,b){return new j(a.source.replace("<\!-- {fieldPlace} --\>",
b))}var l=basis.Class,n=basis.dom.event,h=basis.dom,j=basis.template.Template,y=basis.Cleaner,B=Object.complete,s=Function.getter,v=basis.cssom.classList,t=basis.event.create,p=basis.event.events,d=basis.data.property.Property,r=basis.dom.wrapper.Selection,x=basis.ui.Control,w=basis.ui.Node,m=basis.ui.Container,a=basis.ui.popup.Popup,k=new j('<div{sampleContainer} class="Basis-Field {selected} {disabled}"><div class="Basis-Field-Title"><label><span{title}>{titleText}</span></label></div><div{content} class="Basis-Field-Container"><\!-- {fieldPlace} --\></div></div>'),
q=w.subclass({childClass:null,template:k,nextFieldOnEnter:!0,serializable:!0,event_select:function(){h.focus(this.tmpl.field,!0);w.prototype.event_select.call(this)},event_enable:function(){this.tmpl.field.removeAttribute("disabled");w.prototype.event_enable.call(this)},event_disable:function(){this.tmpl.field.setAttribute("disabled","disabled");w.prototype.event_disable.call(this)},event_input:t("input","event"),event_change:t("change","event"),event_keydown:t("keydown","event"),event_keypress:t("keypress",
"event"),event_keyup:t("keyup","event")&&function(a){this.nextFieldOnEnter&&([n.KEY.ENTER,n.KEY.CTRL_ENTER].has(n.key(a))?(n.cancelDefault(a),this.nextFieldFocus()):this.setValid());p.keyup.call(this,a)},event_focus:t("focus","event")&&function(a){this.valid&&this.setValid();p.focus.call(this,a)},event_blur:t("blur","event")&&function(a){this.validate(!0);p.blur.call(this,a)},init:function(a){w.prototype.init.call(this,a);this.name=this.name||"";this.tmpl.titleText&&(this.tmpl.titleText.nodeValue=
this.title||"");if(this.tmpl.field&&(n.addHandler(this.tmpl.field,"keydown",this.keydown,this),n.addHandler(this.tmpl.field,"keyup",this.keyup,this),n.addHandler(this.tmpl.field,"keypress",this.keypress,this),n.addHandler(this.tmpl.field,"blur",this.blur,this),n.addHandler(this.tmpl.field,"focus",this.focus,this),n.addHandler(this.tmpl.field,"change",this.change,this),n.addHandler(this.tmpl.field,"input",this.input,this),this.name&&(this.tmpl.field.name=this.name),this.size))this.tmpl.field.size=
this.size;this.validators||(this.validators=[]);this.setSample(this.sample);this.minLength&&this.setMinLength(this.minLength);this.maxLength&&this.setMaxLength(this.maxLength);this.readOnly&&this.setReadOnly(this.readOnly);this.defaultValue!==this.value&&(this.defaultValue=this.value,this.setDefaultValue())},setReadOnly:function(a){a?this.tmpl.field.setAttribute("readonly","readonly",0):this.tmpl.field.removeAttribute("readonly",0)},setDefaultValue:function(){this.setValue(this.defaultValue);this.setValid()},
setSample:function(a){this.tmpl.sampleContainer&&a?this.sampleElement?h.insert(h.clear(this.sampleElement),a):h.insert(this.tmpl.sampleContainer,this.sampleElement=h.createElement("SPAN.Basis-Field-Sample",a)):this.sampleElement&&(h.remove(this.sampleElement),this.sampleElement=null)},getValue:function(){return this.tmpl.field.value},setValue:function(a){a=a||"";this.tmpl.field.value!=a&&(this.tmpl.field.value=a,this.event_change())},setMaxLength:function(a){this.maxLength=a},setMinLength:function(a){this.minLength=
a},attachValidator:function(a,b){this.validators.add(a)&&b&&this.validate()},detachValidator:function(a,b){this.validators.remove(a)&&b&&this.validate()},change:function(a){this.event_change(a)},input:function(a){this.event_input(a)},keydown:function(a){this.event_keydown(a)},keyup:function(a){this.event_keyup(a)},keypress:function(a){this.event_keypress(a)},blur:function(a){this.event_blur(a)},focus:function(a){this.event_focus(a)},select:function(){this.unselect();w.prototype.select.apply(this,
arguments)},setValid:function(a,b){var c=v(this.element);"boolean"==typeof a?(c.bool("invalid",!a),c.bool("valid",a),b?this.element.title=b:this.element.removeAttribute("title")):(c.remove("invalid"),c.remove("valid"),this.element.removeAttribute("title"));this.valid=a},validate:function(a){var b;this.setValid();for(var c=0;c<this.validators.length;c++)if(b=this.validators[c](this))return a||this.setValid(!1,b.message),b;""!=this.getValue()&&this.setValid(!0)},nextFieldFocus:function(){var a=h.axis(this,
h.AXIS_FOLLOWING_SIBLING).search(!0,"selectable");a?a.select():this.parentNode&&this.parentNode.submit&&this.parentNode.submit()},destroy:function(){n.clearHandlers(this.element);this.tmpl.field&&n.clearHandlers(this.tmpl.field);this.button&&(n.clearHandlers(this.button),delete this.button);this.validators.clear();w.prototype.destroy.call(this);delete this.sampleElement;delete this.sampleContainer;delete this.defaultValue}});q.create=function(a,b){a={radiogroup:"RadioGroup",checkgroup:"CheckGroup"}[a.toLowerCase()]||
a.capitalize();if(q[a])return new q[a](b);throw Error("Wrong field type `{0}`".format(a));};q.Hidden=q.subclass({selectable:!1,template:'<input{field} type="hidden" />'});q.Text=q.subclass({template:e(k,'<input{field} type="text" />'),init:function(a){q.prototype.init.call(this,a);this.minLength&&this.attachValidator(C.MinLength);this.autocomplete&&this.tmpl.field.setAttribute("autocomplete",this.autocomplete)},setMaxLength:function(a){this.tmpl.field.setAttribute("maxlength",a,0);q.prototype.setMaxLength.call(this,
a)}});q.Password=q.Text.subclass({template:e(k,'<input{field} type="password" />')});q.File=q.subclass({template:e(k,'<input{field} type="file" />')});q.Textarea=q.subclass({nextFieldOnEnter:!1,template:e(k,"<textarea{field} />"),init:function(a){this.counter=h.createElement(".counter",q.LOCALE.Textarea.SYMBOLS_LEFT+": ",h.createText(0));q.prototype.init.call(this,a);this.minLength&&this.attachValidator(C.MinLength);this.maxLength&&this.attachValidator(C.MaxLength);n.addHandler(this.tmpl.field,"keyup",
this.updateCounter,this);n.addHandler(this.tmpl.field,"input",this.updateCounter,this);window.opera&&n.addHandler(this.tmpl.field,"focus",function(){this.contentEditable=!0;this.contentEditable=!1})},updateCounter:function(){var a=this.maxLength-this.getValue().length;this.counter.lastChild.nodeValue=0<=a?a:0},setValue:function(a){q.prototype.setValue.call(this,a);this.updateCounter()},setMaxLength:function(a){q.prototype.setMaxLength.call(this,a);a?(this.updateCounter(),h.insert(this.tmpl.sampleContainer,
this.counter)):h.remove(this.counter)},destroy:function(){delete this.counter;q.prototype.destroy.call(this)}});q.Checkbox=q.subclass({value:!1,template:'<div class="Basis-Field Basis-Field-Checkbox"><div{content} class="Basis-Field-Container {selected} {disabled}"><label><input{field} type="checkbox" /><span>{titleText}</span></label></div></div>',invert:function(){this.setValue(!this.getValue())},setValue:function(a){var b=this.tmpl.field.checked;this.tmpl.field.checked=!!a;b!=this.tmpl.field.checked&&
this.event_change()},getValue:function(){return this.tmpl.field.checked}});q.Label=q.subclass({cssClassName:"Basis-Field-Label",template:e(k,"<label{field}>{fieldValueText}</label>"),valueGetter:Function.$self,event_change:function(){q.prototype.event_change.apply(this,arguments);this.tmpl.fieldValueText.nodeValue=this.valueGetter(this.getValue())}});var E=w.subclass({childClass:null,titleGetter:function(a){return a.title||a.getValue()},valueGetter:s("value"),getTitle:function(){return this.titleGetter(this)},
getValue:function(){return this.valueGetter(this)}}),o={datasetChanged:function(){this.event_change()}},f=l(q,m,{childClass:E,template:q.prototype.template,multipleSelect:!1,init:function(a){this.selection=new r({multiple:!!this.multipleSelect});this.selection.addHandler(o,this);q.prototype.init.call(this,a);y.add(this)},getValue:function(){var a=this.selection.getItems().map(s("getValue()"));return!this.selection.multiple?a[0]:a},setValue:function(a){var b={};(this.multipleSelect?Array.from(a):[a]).forEach(function(a){b[a]=
!0});for(var a=[],c=this.firstChild;c;c=c.nextSibling)b[c.getValue()]&&a.push(c);this.selection.set(a)},destroy:function(){q.prototype.destroy.call(this);y.remove(this)}});f.Item=E;var c=E.subclass({event_select:function(){this.tmpl.field.checked=!0;E.prototype.event_select.call(this)},event_unselect:function(){this.tmpl.field.checked=!1;E.prototype.event_unselect.call(this)},event_enable:function(){this.tmpl.field.removeAttribute("disabled");w.prototype.event_enable.call(this)},event_disable:function(){this.tmpl.field.setAttribute("disabled",
"disabled");w.prototype.event_disable.call(this)},template:'<label class="Basis-RadioGroup-Item {selected} {disabled}" event-click="select"><input{field} type="radio" class="radio"/><span{content}>{titleText}</span></label>',templateUpdate:function(a,b,c){E.prototype.templateUpdate.call(this,a,b,c);a.field.value=this.getValue();a.titleText.nodeValue=this.getTitle()},action:{select:function(){this.isDisabled()||this.select()}}});q.RadioGroup=f.subclass({childClass:c,template:e(k,'<div{field|childNodesElement} class="Basis-RadioGroup"></div>'),
childFactory:function(a){a=f.prototype.childFactory.call(this,a);this.name&&(a.tmpl.field.name=this.name);return a}});q.RadioGroup.Item=c;c=E.subclass({event_select:function(){this.tmpl.field.checked=!0;E.prototype.event_select.call(this)},event_unselect:function(){this.tmpl.field.checked=!1;E.prototype.event_unselect.call(this)},event_enable:function(){this.tmpl.field.removeAttribute("disabled");w.prototype.event_enable.call(this)},event_disable:function(){this.tmpl.field.setAttribute("disabled",
"disabled");w.prototype.event_disable.call(this)},template:'<label event-click="click" class="{selected} {disabled}"><input{field} type="checkbox"/><span{content}>{titleText}</span></label>',templateUpdate:function(a,b,c){E.prototype.templateUpdate.call(this,a,b,c);this.tmpl.field.value=this.getValue();this.tmpl.titleText.nodeValue=this.getTitle()},action:{click:function(a){this.isDisabled()||(this.select(this.parentNode.multipleSelect),"INPUT"!=n.sender(a).tagName&&n.kill(a))}}});q.CheckGroup=f.subclass({childClass:c,
multipleSelect:!0,template:e(k,'<div{field|childNodesElement} class="Basis-CheckGroup"></div>')});q.CheckGroup.Item=c;c=E.subclass({event_select:function(){this.parentNode&&this.parentNode.setValue(this.getValue())},event_unselect:function(){this.parentNode&&this.parentNode.setValue()},template:"<option{field}>{titleText}</option>",templateUpdate:function(a,b,c){E.prototype.templateUpdate.call(this,a,b,c);a.field.value=this.getValue();a.field.text=this.getTitle()}});q.Select=f.subclass({childClass:c,
template:e(k,"<select{field|childNodesElement} />"),event_keyup:function(a,b){this.change();f.prototype.event_keyup.call(this,a,b)},setValue:function(a){(a=this.childNodes.search(a,"getValue()"))?this.selection.set([a]):this.selection.clear()}});q.Select.Item=c;var b={show:function(){v(this.tmpl.field).add("Basis-DropdownList-Opened")},hide:function(){v(this.tmpl.field).remove("Basis-DropdownList-Opened")}},c=E.subclass({template:'<div class="Basis-Combobox-Item {selected} {disabled}" event-click="click">{titleText}</div>',
templateUpdate:function(a,b,c){E.prototype.templateUpdate.call(this,a,b,c);a.titleText.nodeValue=this.getTitle()},action:{click:function(a){this.isDisabled()||(this.select(),this.parentNode&&this.parentNode.hide(),n.kill(a))}}}),g={keyup:function(a){var b=n.key(a),c=this.selection.pick();switch(b){case n.KEY.DOWN:if(a.altKey)return this.popup.visible?this.hide():!this.isDisabled()?this.show():null;c=h.axis(c?c:this.firstChild,h.AXIS_FOLLOWING_SIBLING).search(!1,"disabled");break;case n.KEY.UP:if(a.altKey)return this.popup.visible?
this.hide():!this.isDisabled()?this.show():null;c=c?h.axis(c,h.AXIS_PRESCENDING_SIBLING).search(!1,"disabled"):this.firstChild}c&&(c.select(),h.focus(this.tmpl.field))},keydown:function(a){var b=n.key(a);b==n.KEY.DOWN||b==n.KEY.UP?n.kill(a):b==n.KEY.ENTER&&(this.popup.visible&&this.hide(),n.kill(a))}};q.Combobox=f.subclass({childClass:c,event_enable:function(){this.delegate&&this.delegate.select&&this.delegate.select();f.prototype.event_enable.call(this)},event_change:function(){f.prototype.event_change.call(this);
var a=this.getValue();this.property&&this.property.set(a);this.hidden&&(this.hidden.value=a);this.satellite&&this.satellite.captionItem.setDelegate(this.selection.pick())},caption:null,popup:null,property:null,template:e(k,'<span{field} class="Basis-DropdownList" event-click="click" tabindex="0"><span class="Basis-DropdownList-Caption"><\!--{captionItem}--\></span><span class="Basis-DropdownList-Trigger"/></span><div{content|childNodesElement} class="Basis-DropdownList-PopupContent" />'),binding:{captionItem:"satellite:"},
action:{click:function(a){this.isDisabled()||this.popup.visible?this.hide():this.show({});n.kill(a)}},init:function(c){if(!basis.ui.popup)throw Error("basis.ui.popup required for DropDownList");this.property&&(this.value=this.property.value);this.satelliteConfig=m.prototype.satelliteConfig.__extend__({captionItem:{instanceOf:this.childClass,delegate:s("selection.pick()"),config:{getTitle:function(){return this.delegate&&this.delegate.getTitle()},getValue:function(){return this.delegate&&this.delegate.getValue()},
handler:{delegateChanged:function(){this.event_update(this,{})}}}}});f.prototype.init.call(this,c);this.satellite.captionItem.setDelegate(this.selection.pick());n.addHandlers(this.tmpl.field,g,this);this.name&&h.insert(this.tmpl.field,this.hidden=h.createElement("INPUT[type=hidden][name={0}]".format((""+this.name).quote())));this.popup=new a(B({cssClassName:"Basis-DropdownList-Popup",autorotate:1,ignoreClickFor:[this.tmpl.field],thread:this.thread,content:this.childNodesElement,handler:b,handlerContext:this},
this.popup));this.property&&this.property.addLink(this,this.setValue)},show:function(){this.popup.show(this.tmpl.field);this.select()},hide:function(){this.popup.hide()},getTitle:function(){var a=this.selection.pick();return a&&a.getTitle()},getValue:function(){var a=this.selection.pick();return a&&a.getValue()},setValue:function(a){this.getValue()!=a&&((a=this.childNodes.search(a,"getValue()"))&&!a.isDisabled()?this.selection.set([a]):this.selection.clear())},destroy:function(){this.property&&(this.property.removeLink(this),
this.property=null);this.popup.destroy();this.popup=null;f.prototype.destroy.call(this)}});q.Combobox.Item=c;var i=l(null,{init:function(a,b){this.field=a;this.message=b}}),C={NO_LOCALE:"There is no locale for this error",RegExp:function(a){a.constructor!=RegExp&&(a=RegExp(a));return function(b){var c=b.getValue();if(""!=c&&!c.match(a))return new i(b,C.LOCALE.RegExp.WRONG_FORMAT||C.NO_LOCALE)}},Required:function(a){var b=a.getValue();if(Function.$isNull(b)||""==b)return new i(a,C.LOCALE.Required.MUST_BE_FILLED||
C.NO_LOCALE)},Number:function(a){var b=a.getValue();if(isNaN(b))return new i(a,C.LOCALE.Number.WRONG_FORMAT||C.NO_LOCALE)},Currency:function(a){var b=a.getValue();if(isNaN(b))return new i(a,C.LOCALE.Currency.WRONG_FORMAT||C.NO_LOCALE);if(0>=b)return new i(a,C.LOCALE.Currency.MUST_BE_GREATER_ZERO||C.NO_LOCALE)},Email:function(a){var b=a.getValue().trim();if(""!=b&&!b.match(/^[a-z0-9\.\-\_]+\@(([a-z0-9][a-z0-9\-]*\.)+[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})$/i))return new i(a,C.LOCALE.Email.WRONG_FORMAT||
C.NO_LOCALE)},Url:function(a){var b=a.getValue().trim();if(""!=b&&!b.match(/^(https?\:\/\/)?((\d{1,3}\.){3}\d{1,3}|([a-zA-Z][a-zA-Z\d\-]+\.)+[a-zA-Z]{2,6})(:\d+)?(\/[^\?]*(\?\S(\=\S*))*(\#\S*)?)?$/i))return new i(a,C.LOCALE.Url.WRONG_FORMAT||C.NO_LOCALE)},MinLength:function(a){var b=a.getValue();if((Function.$isNotNull(b.length)?b.length:(""+b).length)<a.minLength)return new i(a,(C.LOCALE.MinLength.MUST_BE_LONGER_THAN||C.NO_LOCALE).format(a.minLength))},MaxLength:function(a){var b=a.getValue();if((Function.$isNotNull(b.length)?
b.length:(""+b).length)>a.maxLength)return new i(a,(C.LOCALE.MaxLength.MUST_BE_SHORTER_THAN||C.NO_LOCALE).format(a.maxLength))}},l=x.subclass({childClass:q,childFactory:function(a){return q.create(a.type||"text",a)},onSubmit:Function.$false,event_reset:t("reset"),event_disable:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.disabled||a.event_disable();x.prototype.event_disable.call(this)},event_enable:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.disabled||a.event_enable();x.prototype.event_enable.call(this)},
template:'<div class="Basis-FormContent {selected} {disabled}" />',getFieldByName:function(a){return this.childNodes.search(a,"name")},getFieldById:function(a){return this.childNodes.search(a,"id")},serialize:function(){for(var a={},b=this.firstChild;b;b=b.nextSibling)b.serializable&&b.name&&(a[b.name]=b.getValue());return a},setData:function(a,b){this.loadData(a,b)},loadData:function(a,b){for(var c=Object.keys(a),d=this.firstChild;d;d=d.nextSibling)-1!=c.indexOf(d.name)?d.setValue(a[d.name]):d.setDefaultValue(),
d.setValid();b||this.validate()},setDefaultState:function(){this.reset()},reset:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.setDefaultValue();this.event_reset()},validate:function(){for(var a,b=[],c=this.firstChild;c;c=c.nextSibling)(a=c.validate())&&b.push(a);return b.length?(b[0].field.select(),b):!0},submit:function(){if(!0===this.validate()&&this.onSubmit)this.onSubmit(this.serialize())}}),t=l.subclass({template:'<form{formElement} class="Basis-Form {selected} {disabled}"><div{content|childNodesElement} class="Basis-FormContent" /></form>',
method:"POST",init:function(a){this.selection=!1;x.prototype.init.call(this,a);this.target&&(this.formElement.target=this.target);this.action&&(this.formElement.action=this.action);this.enctype&&(this.formElement.enctype=this.enctype);n.addHandler(this.formElement,"submit",this.submit,this);this.formElement.onsubmit=this.submit;this.setMethod(this.method)},setMethod:function(a){this.formElement.method=a?a.toUpperCase():"POST"},submit:function(){if(!0===this.validate()&&!this.onSubmit()){if("FORM"==
this.tagName)return!1;this.formElement.submit()}return!0}}),G=d.subclass({matchFunction:function(a,b){if(!b){var c=a._original||this.textNodeGetter(a);Array.isArray(c)||(c=[c]);a._original=c;for(var d=0,e=c.length;0<e--;){var f=c[e];if(f){var g=f.nodeValue.split(this.rx);1<g.length?(a._replaced||(a._replaced={}),h.replace(a._replaced[e]||f,a._replaced[e]=h.createElement("SPAN.matched",h.wrap(g,this.map))),d++):a._replaced&&a._replaced[e]&&(h.replace(a._replaced[e],f),delete a._replaced[e])}}return 0<
d}if(a._replaced){for(c in a._replaced)h.replace(a._replaced[c],a._original[c]);delete a._replaced;delete a._original}return!1},event_change:function(a,b){this.rx=this.regexpGetter(a);d.prototype.event_change.call(this,a,b)},extendConstructor_:!0,init:function(){var a=this.startPoints||"";this.textNodeGetter=s(this.textNodeGetter||"tmpl.titleText");"function"!=typeof this.regexpGetter&&(this.regexpGetter=function(b){return RegExp("("+a+")("+b.forRegExp()+")","i")});this.map={};this.map[this.wrapElement||
"SPAN.match"]=function(a,b){return b%3==2};d.prototype.init.call(this,"",this.handlers,String.trim)}}),H={childNodesModified:function(a,b){b.inserted&&b.inserted.forEach(function(a){this.matchFunction(a,""==this.value)},this)}},c=G.subclass({event_change:function(a,b){G.prototype.event_change.call(this,a,b);this.applyMatch()},init:function(a){G.prototype.init.call(this,a);this.node.addHandler(H,this)},applyMatch:function(){this.node.childNodes.forEach(function(a){this.matchFunction(a,""==this.value)},
this)}}),D=G.subclass({event_change:function(a,b){G.prototype.event_change.call(this,a,b);this.node.setMatchFunction(a?this.matchFunction.bind(this):null)}}),I=q.Text.subclass({cssClassName:"Basis-MatchInput",matchFilterClass:D,event_keyup:function(a){this.matchFilter.set(this.tmpl.field.value);q.Text.prototype.event_keyup.call(this,a)},event_change:function(a){this.matchFilter.set(this.tmpl.field.value);q.Text.prototype.event_change.call(this,a)},init:function(a){q.Text.prototype.init.call(this,
a);this.matchFilter=new this.matchFilterClass(this.matchFilter)}});this.extend({createFieldTemplate:function(a){return e(k,a)},FormContent:l,Form:t,Field:q,Validator:C,ValidatorError:i,RadioGroup:q.RadioGroup,CheckGroup:q.CheckGroup,Combobox:q.Combobox,ComplexField:f,Matcher:c,MatchProperty:G,MatchFilter:D,MatchInput:I})}.body()+"//@ sourceURL="+l+"src/basis/ui/form.js")).call(basis.namespace("basis.ui.form"),basis.namespace("basis.ui.form"),basis.namespace("basis.ui.form").exports,this,l+"src/basis/ui/form.js",
l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.Class,l=basis.event.EventObject,n=basis.event.create,h=basis.dom,j=basis.dom.event,y=basis.cssom.classList,B=basis.ui.Node,s=!1,v=!1,t;(function(){function d(a,e){for(var h;h=e.shift();)if("undefined"!=typeof a.style[h])return h;return!1}var a=h.createElement("");(t=d(a,["transform","WebkitTransform","msTransform","MozTransform",
"OTransform"]))&&(s=!0);if(s&&(d(a,["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"])||"webkitPerspective"in document.documentElement.style))v=!0})();var p=l.subclass({minScrollDelta:0,scrollX:!0,scrollY:!0,event_start:n("start","scrollerObject"),event_finish:n("finish","scrollerObject"),event_startInertia:n("startInertia","scrollerObject"),event_updatePosition:n("updatePosition","scrollerObject","scrollPosition"),init:function(d){this.viewportTargetY=this.viewportTargetX=
this.viewportY=this.viewportX=this.currentDirectionY=this.currentDirectionX=this.currentVelocityY=this.currentVelocityX=this.lastMouseY=this.lastMouseX=0;0==this.minScrollDelta&&(this.minScrollDeltaXReached=this.minScrollDeltaYReached=!0);this.startTime=this.lastUpdateTime=this.lastMotionUpdateTime=this.updateFrameHandle=0;this.panningActive=this.processInertia=!1;l.prototype.init.call(this,d);this.targetElement&&(j.addHandler(this.targetElement,"mousedown",this.onMouseDown,this),j.addHandler(this.targetElement,
"touchstart",this.onMouseDown,this));this.onUpdateHandler=this.onUpdate.bind(this);this.updateElementPosition=s?this.updatePosition_styleTransform:this.updatePosition_styleTopLeft},updatePosition_styleTopLeft:function(){this.scrollX&&(this.targetElement.style.left=-this.viewportX+"px");this.scrollY&&(this.targetElement.style.top=-this.viewportY+"px")},updatePosition_styleTransform:function(){var d=-(this.isUpdating?this.viewportX:Math.round(this.viewportX))+"px",a=-(this.isUpdating?this.viewportY:
Math.round(this.viewportY))+"px";this.targetElement.style[t]="translate("+d+", "+a+")"+(v?" translateZ(0)":"")},resetVariables:function(){this.viewportTargetX=this.viewportX;this.viewportTargetY=this.viewportY;this.startX=this.viewportX;this.startY=this.viewportY;this.currentDirectionY=this.currentDirectionX=this.currentVelocityY=this.currentVelocityX=0;0!=this.minScrollDelta&&(this.minScrollDeltaYReached=this.minScrollDeltaXReached=!1);this.processInertia=!1},startUpdate:function(){this.isUpdating||
(this.isUpdating=!0,this.lastUpdateTime=Date.now(),this.updateFrameHandle=this.nextFrame(),this.event_start(this))},stopUpdate:function(){this.isUpdating&&(this.resetVariables(),this.isUpdating=!1,cancelAnimationFrame(this.updateFrameHandle),this.updateElementPosition(),this.event_finish(this))},onMouseDown:function(d){this.stopUpdate();this.panningActive=!0;this.isMoved=!1;this.lastMouseX=j.mouseX(d);this.lastMouseY=j.mouseY(d);this.lastMotionUpdateTime=Date.now();j.addHandler(document,"mousemove",
this.onMouseMove,this);j.addHandler(document,"touchmove",this.onMouseMove,this);j.addHandler(document,"mouseup",this.onMouseUp,this);j.addHandler(document,"touchend",this.onMouseUp,this)},onMouseMove:function(d){(0==this.minScrollDelta||this.minScrollDeltaYReached||this.minScrollDeltaXReached)&&this.startUpdate();var a=Date.now(),e=a-this.lastMotionUpdateTime;this.lastMotionUpdateTime=a;if(e){if(this.minScrollDeltaXReached||!this.minScrollDeltaYReached)a=j.mouseX(d),e=this.lastMouseX-a,this.lastMouseX=
a,this.viewportTargetX+=e,!this.isMoved&&5<Math.abs(this.startX-this.viewportTargetX)&&(this.isMoved=!0);if(this.minScrollDeltaYReached||!this.minScrollDeltaXReached)a=j.mouseY(d),e=this.lastMouseY-a,this.lastMouseY=a,this.viewportTargetY+=e,!this.isMoved&&5<Math.abs(this.startY-this.viewportTargetY)&&(this.isMoved=!0);if(0<this.minScrollDelta&&!this.minScrollDeltaXReached&&!this.minScrollDeltaYReached&&(Math.abs(this.viewportTargetX-this.viewportX)>this.minScrollDelta&&(this.minScrollDeltaXReached=
!0),Math.abs(this.viewportTargetY-this.viewportY)>this.minScrollDelta&&(this.minScrollDeltaYReached=!0),this.minScrollDeltaYReached&&(this.viewportTargetX=this.viewportX,this.currentDirectionX=0),this.minScrollDeltaXReached))this.viewportTargetY=this.viewportY,this.currentDirectionY=0;j.cancelDefault(d)}},onMouseUp:function(){this.panningActive=!1;this.processInertia=!0;var d=Date.now()-this.lastMotionUpdateTime,d=Math.max(10,d);this.lastMotionUpdateTime=0;this.scrollX&&(this.currentVelocityX*=1-
Math.min(1,Math.max(0,d/100)));this.scrollY&&(this.currentVelocityY*=1-Math.min(1,Math.max(0,d/100)));j.removeHandler(document,"mousemove",this.onMouseMove,this);j.removeHandler(document,"touchmove",this.onMouseMove,this);j.removeHandler(document,"mouseup",this.onMouseUp,this);j.removeHandler(document,"touchend",this.onMouseUp,this);this.event_startInertia(this)},onUpdate:function(d){d||(d=Date.now());var a=d-this.lastUpdateTime;this.lastUpdateTime=d;if(a){if(this.panningActive){var e;if(this.scrollX&&
(e=this.viewportTargetX-this.viewportX))this.currentVelocityX=e/a,this.currentDirectionX=0==e?0:0>e?-1:1;if(this.scrollY&&(e=this.viewportTargetY-this.viewportY))this.currentVelocityY=e/a,this.currentDirectionY=0==e?0:0>e?-1:1}else if(this.processInertia&&(this.scrollX&&(this.viewportTargetX+=this.currentVelocityX*a,this.currentVelocityX*=0.94),this.scrollY))this.viewportTargetY+=this.currentVelocityY*a,this.currentVelocityY*=0.94;a=e=0;if(this.scrollX){e=this.viewportTargetX-this.viewportX;var h=
this.panningActive||0<Math.abs(this.currentVelocityX)?1:0.12;this.viewportX+=e*h}this.scrollY&&(a=this.viewportTargetY-this.viewportY,h=this.panningActive||0<Math.abs(this.currentVelocityY)?1:0.12,this.viewportY+=a*h);e=!this.scrollX||0.5>Math.abs(e);a=!this.scrollY||0.5>Math.abs(a);!this.panningActive&&e&&a&&(this.scrollX&&(this.viewportX=this.viewportTargetX),this.scrollY&&(this.viewportY=this.viewportTargetY),this.stopUpdate());this.updateElementPosition();this.event_updatePosition(this,d,this.viewportX,
this.viewportY)}this.nextFrame()},nextFrame:function(){this.isUpdating&&(this.updateFrameHandle=requestAnimationFrame(this.onUpdateHandler,this.targetElement))},setPosition:function(d,a,e){this.setPositionX(d,!e);this.setPositionY(a,!e)},setPositionX:function(d,a){a?(this.viewportTargetX=d||0,this.currentVelocityX=0,this.startUpdate()):(this.stopUpdate(),this.viewportTargetX=this.viewportX=d,this.updateElementPosition())},setPositionY:function(d,a){a?(this.viewportTargetY=d||0,this.currentVelocityY=
0,this.startUpdate()):(this.stopUpdate(),this.viewportTargetY=this.viewportY=d,this.updateElementPosition())},calcExpectedPosition:function(d){var a=0,e="x"==d?this.currentVelocityX:this.currentVelocityY,d="x"==d?this.viewportTargetX:this.viewportTargetY;if(e)for(var h=Math.log(0.0010/Math.abs(e))/Math.log(0.94),j=0;j<h;j++)a+=15*e,e*=0.94;return d+a},calcExpectedPositionX:function(){return this.calcExpectedPosition("x")},calcExpectedPositionY:function(){return this.calcExpectedPosition("y")}}),d=
B.subclass({cssClassName:"Basis-ScrollPanel-Scrollbar",template:'<div class="Basis-Scrollbar {selected} {disabled}"><div{trackElement} class="Basis-Scrollbar-Track"></div></div>',listen:{owner:{realign:function(){this.realign()},updatePosition:function(){this.trackSize||this.realign();var d=this.getScrollbarPosition();1<d&&(d=1+3*(d-1));0>d&&(d*=3);var a=Math.max(0,Math.min(this.trackSize*d,this.scrollbarSize-4)),d=Math.max(0,Math.min(this.trackSize-this.trackSize*d,this.scrollbarSize-4)),e={};e[this.startProperty]=
a+"px";e[this.endProperty]=d+"px";h.setStyle(this.tmpl.trackElement,e)}}},realign:function(){this.scrollbarSize=this.getScrollbarSize();this.trackSize=this.scrollbarSize-this.scrollbarSize*this.getScrollbarPart()},getScrollbarSize:Function.$null,getScrollbarPart:Function.$null,getScrollbarPosition:Function.$null}),r=d.subclass({cssClassName:"horizontal",startProperty:"left",endProperty:"right",getScrollbarSize:function(){return this.element.offsetWidth},getScrollbarPart:function(){return this.owner.element.offsetWidth/
(this.owner.maxPositionX-this.owner.minPositionX+this.owner.element.offsetWidth)},getScrollbarPosition:function(){return(this.owner.scroller.viewportX-this.owner.minPositionX)/(this.owner.maxPositionX-this.owner.minPositionX)}}),x=d.subclass({cssClassName:"vertical",startProperty:"top",endProperty:"bottom",getScrollbarSize:function(){return this.element.offsetHeight},getScrollbarPart:function(){return this.owner.element.offsetHeight/(this.owner.maxPositionY-this.owner.minPositionY+this.owner.element.offsetHeight)},
getScrollbarPosition:function(){return(this.owner.scroller.viewportY-this.owner.minPositionY)/(this.owner.maxPositionY-this.owner.minPositionY)}}),w=e(basis.ui.Container,{useScrollbars:!0,scrollX:!0,scrollY:!0,wheelDelta:40,event_realign:n("realign"),event_updatePosition:n("updatePosition"),template:'<div class="Basis-ScrollPanel" event-mousewheel="onwheel"><div{scrollElement|childNodesElement|content} class="Basis-ScrollPanel-Content {selected} {disabled}"/><\!--{horizontalScrollbar}--\><\!--{verticalScrollbar}--\></div>',
binding:{horizontalScrollbar:"satellite:",verticalScrollbar:"satellite:"},action:{onwheel:function(d){var a=j.wheelDelta(d);this.scrollY?this.scroller.setPositionY(this.scroller.viewportTargetY-this.wheelDelta*a,!0):this.scrollX&&this.scroller.setPositionX(this.scroller.viewportTargetX-this.wheelDelta*a,!0);j.kill(d)}},satelliteConfig:{horizontalScrollbar:{instanceOf:r,existsIf:function(d){return d.useScrollbars&&d.scrollX}},verticalScrollbar:{instanceOf:x,existsIf:function(d){return d.useScrollbars&&
d.scrollY}}},init:function(d){basis.ui.Node.prototype.init.call(this,d);this.maxPositionY=this.maxPositionX=this.minPositionY=this.minPositionX=0;d=Object.extend(this.scroller||{},{targetElement:this.tmpl.scrollElement,scrollX:this.scrollX,scrollY:this.scrollY});this.scroller=new p(d);this.scroller.addHandler({updatePosition:this.updatePosition,start:function(){!this.maxPositionX&&!this.maxPositionY&&this.realign();y(this.element).add("scrollProcess")},finish:function(){y(this.element).remove("scrollProcess")}},
this);y(this.element).bool("bothScrollbars",this.scrollX&&this.scrollY);basis.layout.addBlockResizeHandler(this.tmpl.scrollElement,this.realign.bind(this))},updatePosition:function(){this.scroller.panningActive||this.fixPosition();this.event_updatePosition(this)},fixPosition:function(){var d=this.scroller;if(this.scrollX&&(d.viewportX<this.minPositionX||d.viewportX>this.maxPositionX)){var a=Math.min(this.maxPositionX,Math.max(this.minPositionX,d.viewportX));d.setPositionX(a,!0)}if(this.scrollY&&(d.viewportY<
this.minPositionY||d.viewportY>this.maxPositionY))a=Math.min(this.maxPositionY,Math.max(this.minPositionY,d.viewportY)),d.setPositionY(a,!0)},realign:function(){this.element.offsetWidth&&(this.calcDimensions(),this.updatePosition(),this.event_realign())},calcDimensions:function(){this.scrollX&&(this.maxPositionX=Math.max(0,this.tmpl.scrollElement.scrollWidth-this.element.offsetWidth));this.scrollY&&(this.maxPositionY=Math.max(0,this.tmpl.scrollElement.scrollHeight-this.element.offsetHeight))},destroy:function(){this.scroller.destroy();
basis.ui.Node.prototype.destroy.call(this)}}),e=w.subclass({scrollX:!1,scrollY:!1,childTransform:Function.$null,selection:!0,action:{onwheel:function(d){var a=j.wheelDelta(d),e=this.selection.pick();(a=-1==a?e.nextSibling:e.previousSibling)&&a.select();j.kill(d)}},event_childNodesModified:function(d,a){w.prototype.event_childNodesModified.call(this,d,a);this.scroller&&this.childNodes.length==a.inserted.length&&(this.scrollToChild(this.firstChild,!0),this.firstChild.select())},childClass:B.subclass({template:'<div class="{selected} {disabled}" event-click="select"/>',
action:{select:function(){this.parentNode.scroller.isMoved||this.select()}},event_select:function(){B.prototype.event_select.apply(this,arguments);this.parentNode.scrollToChild(this)}}),init:function(d){w.prototype.init.call(this,d);this.scroller.addHandler({startInertia:this.adjustPosition},this);this.childTransform!=Function.$null&&this.scroller.addHandler({updatePosition:this.applyPosition},this);!this.selection.itemCount&&this.firstChild&&(this.firstChild.select(),this.scrollToChild(this.firstChild,
!0))},setPosition:function(d,a){this.scrollX?this.scroller.setPositionX(d,!a):this.scroller.setPositionY(d,!a)},adjustPosition:function(){var d=this.scrollX?this.firstChild.element.offsetWidth:this.firstChild.element.offsetHeight,a=(this.scrollX?this.element.offsetWidth:this.element.offsetHeight)/2-d/2+this.calcExpectedPosition();this.scrollToChild(this.childNodes[Math.max(0,Math.min(this.childNodes.length-1,Math.round(a/d)))])},applyPosition:function(){for(var d=this.scrollX?this.firstChild.element.offsetWidth:
this.firstChild.element.offsetHeight,a=(this.scrollX?this.element.offsetWidth/2:this.element.offsetHeight/2)-d/2+(this.scroller.viewportX||this.scroller.viewportY),e=Math.floor(a/d),d=a/d-e,h=0,j;j=this.childNodes[h];h++)a=h==e?1-d:h==e+1?d:0,this.childTransform(j,a)},scrollToChild:function(d,a){this.setPosition((this.scrollX?d.element.offsetLeft:d.element.offsetTop)+(this.scrollX?d.element.offsetWidth:d.element.offsetHeight)/2-(this.scrollX?this.element.offsetWidth/2:this.element.offsetHeight/2),
a)},calcDimensions:function(){w.prototype.calcDimensions.call(this);this.scrollX&&(this.minPositionX=(this.firstChild?this.firstChild.element.offsetWidth/2:0)-this.element.offsetWidth/2,this.maxPositionX=this.maxPositionX+this.element.offsetWidth/2-(this.lastChild?this.lastChild.element.offsetWidth/2:0));this.scrollY&&(this.minPositionY=(this.firstChild?this.firstChild.element.offsetHeight/2:0)-this.element.offsetHeight/2,this.maxPositionY=this.maxPositionY+this.element.offsetHeight/2-(this.lastChild?
this.lastChild.element.offsetHeight/2:0))},calcExpectedPosition:function(){return this.scroller.calcExpectedPosition(this.scrollX?"x":"y")}});this.extend({Scroller:p,Scrollbar:d,ScrollPanel:w,ScrollGallery:e})}.body()+"//@ sourceURL="+l+"src/basis/ui/scroller.js")).call(basis.namespace("basis.ui.scroller"),basis.namespace("basis.ui.scroller"),basis.namespace("basis.ui.scroller").exports,this,l+"src/basis/ui/scroller.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});
(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a){return(100*a||0).toFixed(4)+"%"}var l=basis.dom,n=basis.dom.event,h=basis.event.events,j=basis.event.create,y=basis.cssom,B=basis.cssom.classList,s=basis.dom.wrapper.AbstractNode,v=basis.ui.Node,t=basis.ui.Container,p=basis.dragdrop.DragDropElement,d=basis.layout.Box,r=v.subclass({pos:0,caption:"\u00a0",template:'<div class="Basis-Slider-Mark {selected} {disabled}"><span class="Basis-Slider-Mark-CaptionWrapper"><span class="Basis-Slider-Mark-Caption">{text}</span></span></div>',
templateUpdate:function(a){a.text.nodeValue=this.caption;y.setStyle(this.element,{left:e(this.pos),width:e(this.width)});this.isLast&&B(this.element).add("last");this.isRange&&B(this.element).add("range")}}),x=t.subclass({template:'<div class="Basis-Slider-MarkLayer"/>',childClass:r,captionGetter:Function.$self,count:0,marks:null,init:function(a){t.prototype.init.call(this,a);this.apply()},apply:function(){var a=this.marks||[],d=this.owner_;if(d){if(0<this.count)for(var e=1,h=this.count;e<=h;e++){var j=
d.closest(e/h);a.push({pos:d.value2pos(j),caption:this.captionFormat(j),isLast:h==e})}a=a.filter(Function.$isNotNull).sortAsObject("pos");for(e=d=0;h=a[e];e++)h.width=h.pos-d,h.pos=d,d+=h.width;1!=d&&a.push({pos:d,width:1-d,isLast:!0});this.setChildNodes(a)}}}),w=function(a){var e=this.tmpl.scrollbar;this.setStepValue((n.mouseX(a)-(new d(e)).left)/e.offsetWidth*this.stepCount)},m={move:function(a,d){w.call(this,d)}};this.extend({Slider:v.subclass({event_change:j("change","oldValue")&&function(a,d){h.change.call(this,
a,d);this.templateUpdate(this.tmpl,"change")},event_rangeChanged:j("rangeChanged")&&function(a){h.rangeChanged.call(this,a);this.templateUpdate(this.tmpl,"rangeChanged")},captionFormat:function(a){return Math.round(Number(a))},marks:"auto",min:0,max:100,step:NaN,value:NaN,stepCount:NaN,stepValue:NaN,template:'<div class="Basis-Slider Basis-Slider-MinMaxOutside {selected} {disabled}" event-mousewheel="focus wheelStep" event-keyup="keyStep" event-mousedown="focus" tabindex="0"><div class="Basis-Slider-MinLabel"><span class="caption">{minValue}</span></div><div class="Basis-Slider-MaxLabel"><span class="caption">{maxValue}</span></div><div class="Basis-Slider-ScrollbarContainer" event-click="jumpTo"><\!--{marks}--\><div{scrollbar} class="Basis-Slider-Scrollbar"><div{valueBar} class="Basis-Slider-ValueBar"><div{scrollTrumb} class="Basis-Slider-Thumb"/></div><div{leftBar} class="Basis-Slider-LeftBar"/></div></div></div>',
binding:{marks:"satellite:"},action:{jumpTo:w,focus:function(){l.focus(this.element)},keyStep:function(a){switch(n.key(a)){case n.KEY.DOWN:case n.KEY.LEFT:case 189:case 109:this.stepDown();break;case n.KEY.UP:case n.KEY.RIGHT:case 187:case 107:this.stepUp();break;case n.KEY.PAGEDOWN:this.stepDown(10);break;case n.KEY.PAGEUP:this.stepUp(10);break;case n.KEY.HOME:this.setValue(this.min);break;case n.KEY.END:this.setValue(this.max)}},wheelStep:function(a){0>n.wheelDelta(a)?this.stepDown():this.stepUp()}},
satelliteConfig:{marks:t.subclass({template:'<div class="Basis-Slider-MarkLayers {selected} {disabled}"/>',childClass:x})},templateUpdate:function(a,d){if(!d||"rangeChanged"==d)a.minValue.nodeValue=this.captionFormat(this.min),a.maxValue.nodeValue=this.captionFormat(this.max),B(this.element).bool("NoMax",this.max==this.min);(!d||"change"==d)&&y.setStyle(a.valueBar,{width:e(this.value2pos(this.value))})},init:function(a){var d=this.step,e=this.value;this.value=this.step=NaN;v.prototype.init.call(this,
a);this.setRange(this.min,this.max,d||1);this.setValue(isNaN(e)?this.min:e);this.scrollbarDD=new p({element:this.tmpl.scrollTrumb,handler:m,handlerContext:this})},setRange:function(a,d,e){if(a>d)var h=a,a=d,d=h;e=e||1;a=a||0;if(this.min!=a||this.max!=d||this.step!=e)this.stepCount=Math.ceil((d-a)/e),this.step=e,this.min=a,this.max=this.min+this.stepCount*this.step,this.setValue(this.value||this.min),this.marks&&this.satellite.marks instanceof s&&this.satellite.marks.setChildNodes((Array.isArray(this.marks)?
this.marks:[this.marks]).map(function(a){"object"!=typeof a&&(a={count:a});a=Object.extend({captionFormat:this.captionFormat,owner_:this},a);"auto"==a.count&&(a.count=Math.min(this.stepCount,20));return a},this))},closest:function(a){return this.normalize(this.min+(this.max-this.min)*a.fit(0,1)+this.step/2)},value2pos:function(a){return(a.fit(this.min,this.max)-this.min)/(this.max-this.min)},normalize:function(a){a<this.min?a=this.min:a>this.max&&(a=this.max);return this.min+Math.floor(1.0E-5+(a-
this.min)/this.step)*this.step},stepUp:function(a){this.setStepValue(this.stepValue+parseInt(a||1))},stepDown:function(a){this.setStepValue(this.stepValue-parseInt(a||1))},setStepValue:function(a){a=Math.round(a).fit(0,this.stepCount);if(this.stepValue!=a){var d=this.value;this.value=this.normalize(this.min+a*this.step);this.stepValue=a;this.event_change(this,d)}},setValue:function(a){this.setStepValue((a-this.min)/this.step)},destroy:function(){this.scrollbarDD.destroy();this.scrollbarDD=null;v.prototype.destroy.call(this)}}),
MarkLayer:x,Mark:r})}.body()+"//@ sourceURL="+l+"src/basis/ui/slider.js")).call(basis.namespace("basis.ui.slider"),basis.namespace("basis.ui.slider"),basis.namespace("basis.ui.slider").exports,this,l+"src/basis/ui/slider.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.dom,l=basis.cssom,n=basis.cssom.classList,h=basis.dragdrop.DragDropElement,j;if("getComputedStyle"in
global){var y={};basis.dom.event.onLoad(function(){var d=e.insert(document.body,e.createElement('[style="position:absolute;top:auto"]'));"auto"!=j(d,"top")&&(y={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0});e.remove(d)});j=function(d,e){if(y[e]){for(var h=[];d&&1==d.nodeType;)h.push(d.cloneNode(!1)),d=d.parentNode;for(d=h.pop();h.length;)d=d.appendChild(h.pop())}if(h=global.getComputedStyle(d,null))return h.getPropertyValue(e)}}else{var B=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,s=/\dpx$/i;j=function(d,
e){var h=d.currentStyle;if(h){var h=h[e],j=h.match(B);if(j&&j[2]&&"px"!=j[2])if(s.test(h))h=parseInt(h)+"px";else{var j=d.style.left,l=d.runtimeStyle.left;d.runtimeStyle.left=d.currentStyle.left;d.style.left=h||0;h=d.style.pixelLeft;d.style.left=j;d.runtimeStyle.left=l;h+="px"}return h}}}var v=l.createRule("IFRAME"),t={width:"deltaX",height:"deltaY"},p={width:{"-1":"w-resize",1:"e-resize"},height:{"-1":"n-resize",1:"s-resize"}};this.extend({Resizer:h.subclass(function(d){return{factor:NaN,property:"width",
event_prepare:function(){t[this.property]?(v.setProperty("pointerEvents","none"),this.cursorOverloadRule_=l.createRule("*"),this.cursorOverloadRule_.setProperty("cursor",this.cursor+" !important")):("undefined"!=typeof console&&console.warn("Property to change `"+this.property+"` is unsupported"),this.stop())},event_start:function(e){d.event_start.call(this,e);e.delta=t[this.property];e.factor=this.factor;var h=j(this.element,"float"),l=j(this.element,"position"),m=(l="absolute"==l||"fixed"==l)?this.element.offsetParent:
this.element.parentNode,a;"deltaY"==e.delta?(e.offsetStart=this.element.clientHeight-parseFloat(j(this.element,"padding-top"))-parseFloat(j(this.element,"padding-bottom")),a=m.clientHeight,l||(a-=parseFloat(j(m,"padding-top"))+parseFloat(j(m,"padding-bottom"))),isNaN(e.factor)&&(e.factor=l&&"auto"!=j(this.element,"bottom")?-1:1)):(e.offsetStart=this.element.clientWidth-parseFloat(j(this.element,"padding-left"))-parseFloat(j(this.element,"padding-right")),a=m.clientWidth,l||(a-=parseFloat(j(m,"padding-left"))+
parseFloat(j(m,"padding-right"))),isNaN(e.factor)&&(e.factor="right"==h?-1:"left"==h?1:l&&"auto"!=j(this.element,"right")?-1:1));e.offsetStartInPercent=100/a;n(this.resizer).add("selected")},event_move:function(e){d.event_move.call(this,e);this.element.style[this.property]=e.offsetStartInPercent*(e.offsetStart+e.factor*e[e.delta])+"%"},event_over:function(e){d.event_over.call(this,e);n(this.resizer).remove("selected");v.setProperty("pointerEvents","auto");this.cursorOverloadRule_.destroy();this.cursorOverloadRule_=
null},init:function(h){this.resizer=e.createElement(".Basis-Resizer");this.cursor=p[this.property][1];this.resizer.style.cursor=this.cursor;d.init.call(this,h)},setElement:function(h){var j=this.element;d.setElement.call(this,h,this.resizer);j!==this.element&&(j&&e.remove(this.resizer),this.element&&e.insert(this.element,this.resizer))},destroy:function(){d.destroy.call(this);this.cursorOverloadRule_&&(this.cursorOverloadRule_.destroy(),this.cursorOverloadRule_=null)}}})})}.body()+"//@ sourceURL="+
l+"src/basis/ui/resizer.js")).call(basis.namespace("basis.ui.resizer"),basis.namespace("basis.ui.resizer"),basis.namespace("basis.ui.resizer").exports,this,l+"src/basis/ui/resizer.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(d){return(100*d||0).toFixed(4)+"%"}function l(d){var e=d.childNodes.search(d.activePage,"pageNumber");e?e.select():d.selection.clear()}
var n=basis.dom.event,h=basis.event.create,j=basis.event.events,y=basis.cssom.classList,B=basis.layout.Box,s=basis.dragdrop.DragDropElement,v=basis.ui.Control,t=basis.ui.Node.subclass({pageGetter:Function.getter("pageNumber + 1"),event_pageNumberChanged:h("pageNumberChanged","node","oldPageNumber")&&function(d,e){j.pageNumberChanged.call(this,d,e);this.templateUpdate(this.tmpl,"pageNumberChanged")},template:'<td class="Basis-PaginatorNode"><span><a{link} class="{selected} {disabled}" event-click="click" href="#">{pageNumber}</a></span></td>',
templateUpdate:function(d){d.pageNumber.nodeValue=this.pageGetter(this)},action:{click:function(d){n.kill(d);this.isDisabled()||this.click()}},click:function(){this.parentNode&&this.parentNode.setActivePage(this.pageNumber)},setPageNumber:function(d){if(this.pageNumber!=d){var e=this.pageNumber;this.pageNumber=d;this.event_pageNumberChanged(this,e)}}}),p={start:function(){this.initOffset=this.tmpl.scrollTrumb.offsetLeft},move:function(d){d=((this.initOffset+d.deltaX)/this.tmpl.scrollTrumbWrapper.offsetWidth).fit(0,
1);this.setSpanStartPage(Math.round(d*(this.pageCount-this.pageSpan)));this.tmpl.scrollTrumb.style.left=e(d)},over:function(){this.setSpanStartPage(this.spanStartPage_)}};this.extend({Paginator:v.subclass({childClass:t,template:'<div class="Basis-Paginator {selected} {disabled}" event-mousewheel="scroll"><table><tbody><tr{childNodesElement}/></tbody></table><div{scrollbarContainer} class="Basis-Paginator-ScrollbarContainer"><div{scrollbar} class="Basis-Paginator-Scrollbar" event-click="jumpTo"><div{activePageMarkWrapper}><div{activePageMark} class="Basis-Paginator-ActivePageMark"><div/></div></div><div{scrollTrumbWrapper}><div{scrollTrumb} class="Basis-Paginator-ScrollbarSlider"><div{scrollTrumbElement}><span/></div></div></div></div></div></div>',
action:{jumpTo:function(d,e){var h=this.tmpl.scrollbar,h=(n.mouseX(e)-(new B(h)).left)/h.offsetWidth;this.setSpanStartPage(Math.floor(h*this.pageCount)-Math.floor(this.pageSpan/2))},scroll:function(d){(d=n.wheelDelta(d))&&this.setSpanStartPage(this.spanStartPage_+d)}},event_activePageChanged:h("activePageChanged"),event_pageCountChanged:h("pageCountChanged"),pageSpan:NaN,pageCount:NaN,activePage:NaN,defaultPageSpan:5,defaultPageCount:1,defaultActivePage:0,spanStartPage_:-1,init:function(d){v.prototype.init.call(this,
d);var d=this.pageSpan||this.defaultPageSpan,e=this.pageCount||this.defaultPageCount,h=this.activePage||this.defaultActivePage;this.activePage=this.pageCount=this.pageSpan=NaN;this.setProperties(e,d);this.setActivePage(h,!0);this.scrollbarDD=new s({element:this.tmpl.scrollTrumb,handler:p,handlerContext:this})},setProperties:function(d,h,j){d=d||1;h=Math.min(h||10,d);h!=this.pageSpan&&(this.pageSpan=h,this.setChildNodes(Array.create(h,function(a){return{pageNumber:a}})));if(this.pageCount!=d){this.pageCount=
d;var l=1/d;this.tmpl.activePageMark.style.width=e(l/(1-l));this.tmpl.activePageMarkWrapper.style.width=e(1-l);this.event_pageCountChanged(this.pageCount)}var l=h/d,m=l/(1-l);this.tmpl.scrollTrumbWrapper.style.width=e(1-l);this.tmpl.scrollTrumb.style.width=e(m);y(this.element).bool("Basis-Paginator-WithNoScroll",h>=d);this.setSpanStartPage(this.spanStartPage_);this.setActivePage(3==arguments.length?j:this.activePage)},setActivePage:function(d,h){d=d.fit(0,this.pageCount-1);d!=this.activePage&&(this.activePage=
Number(d),this.event_activePageChanged(d));l(this);this.tmpl.activePageMark.style.left=e(d/Math.max(this.pageCount-1,1));h&&this.spotlightPage(this.activePage)},spotlightPage:function(d){this.setSpanStartPage(d-Math.round(this.pageSpan/2)+1)},setSpanStartPage:function(d){d=d.fit(0,this.pageCount-this.pageSpan);if(d!=this.spanStartPage_){this.spanStartPage_=d;for(var h=this.childNodes.length;0<h--;)this.childNodes[h].setPageNumber(d+h);l(this)}this.tmpl.scrollTrumb.style.left=e((d/Math.max(this.pageCount-
this.pageSpan,1)).fit(0,1))},destroy:function(){this.scrollbarDD.destroy();this.scrollbarDD=null;v.prototype.destroy.call(this)}})})}.body()+"//@ sourceURL="+l+"src/basis/ui/paginator.js")).call(basis.namespace("basis.ui.paginator"),basis.namespace("basis.ui.paginator"),basis.namespace("basis.ui.paginator").exports,this,l+"src/basis/ui/paginator.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",
function(){var e=basis.Class,l=basis.ui.tabs.PageControl,n=basis.ui.scroller.Scroller;this.extend({PageSlider:e(l,{template:'<div class="Basis-PageControl Basis-PageSlider {selected} {disabled}"><div{childNodesElement} class="Basis-PageSlider-Content"/></div>',childClass:{event_select:function(){this.constructor.superClass_.prototype.event_select.apply(this,arguments);this.parentNode.scrollToPage(this)}},event_childNodesModified:function(e,j){l.prototype.event_childNodesModified.call(this,e,j);for(var n=
0,B;B=this.childNodes[n];n++)basis.cssom.setStyle(B.element,{left:100*n+"%"})},init:function(e){l.prototype.init.call(this,e);this.scroller=new n({targetElement:this.tmpl.childNodesElement,scrollY:!1,minScrollDelta:10,handler:{startInertia:this.setPage},handlerContext:this});this.selection.itemCount&&this.scrollToPage(this.selection.pick())},setPage:function(){var e=this.selection.pick();if(e){var j=e.element.offsetWidth,l=e.element.offsetLeft,n=e;if(this.scroller.currentVelocityX)n=(0<this.scroller.currentVelocityX?
e.nextSibling:e.previousSibling)||e;else if(this.scroller.viewportX>l+j/2||this.scroller.viewportX<l-j/2)n=(0<this.scroller.viewportX-l?e.nextSibling:e.previousSibling)||e;this.scrollToPage(n)}},scrollToPage:function(e){this.scroller&&(e.select(),this.scroller.setPositionX(e.element.offsetLeft,!0))},destroy:function(){l.prototype.init.call(this,config);this.scroller.destroy()}})})}.body()+"//@ sourceURL="+l+"src/basis/ui/pageslider.js")).call(basis.namespace("basis.ui.pageslider"),basis.namespace("basis.ui.pageslider"),
basis.namespace("basis.ui.pageslider").exports,this,l+"src/basis/ui/pageslider.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){var e=basis.dom.wrapper.Node,l=basis.ui.Node,n=basis.event.create,h=l.subclass({template:'<canvas{canvas} class="{selected} {disabled}"><div>Canvas doesn\'t support.</div></canvas>',init:function(e){l.prototype.init.call(this,e);this.tmpl.canvas.width=
this.width||600;this.tmpl.canvas.height=this.height||400;e=this.tmpl.canvas;"undefined"!=typeof FlashCanvas&&FlashCanvas.initElement(e);e&&e.getContext&&(this.context=e.getContext("2d"))},reset:function(){this.context&&this.context.clearRect(0,0,this.element.offsetWidth,this.element.offsetHeight)},draw:Function.undef}),e=e.subclass({draw:function(e){e.save();e.fillStyle="red";e.fillRect(10*this.data.value,10,30,30);e.restore()},listen:{childNode:{update:function(){this.updateCount++}}}}),n=h.subclass({childFactory:function(e){return new this.childClass(e)},
childClass:e,drawCount:0,lastDrawUpdateCount:-1,event_draw:n("draw","object"),listen:{childNode:{update:function(){this.updateCount++}}},init:function(e){h.prototype.init.call(this,e);this.updateCount=0;if((e=this.tmpl.canvas)&&e.getContext)this.updateTimer_=setInterval(this.draw.bind(this),1E3/60)},isNeedToDraw:function(){return this.context&&(this.updateCount!=this.lastDrawUpdateCount||this.tmpl.canvas.width!=this.lastDrawWidth||this.tmpl.canvas.height!=this.lastDrawHeight)},draw:function(){if(!this.isNeedToDraw())return!1;
this.lastDrawWidth=this.tmpl.canvas.width;this.lastDrawHeight=this.tmpl.canvas.height;this.lastDrawUpdateCount=this.updateCount;this.drawCount+=1;this.reset();this.drawFrame();this.event_draw(this);return!0},drawFrame:function(){for(var e=this.firstChild;e;e=e.nextSibling)e.draw(this.context)},destroy:function(){clearInterval(this.updateTimer_);h.prototype.destroy.call(this)}});this.extend({CanvasLayer:h,Canvas:n,Shape:e})}.body()+"//@ sourceURL="+l+"src/basis/ui/canvas.js")).call(basis.namespace("basis.ui.canvas"),
basis.namespace("basis.ui.canvas"),basis.namespace("basis.ui.canvas").exports,this,l+"src/basis/ui/canvas.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(a){a=Math.abs(a);if(1<Math.abs(a))return(""+Math.floor(a)).length-1;/0\.(0+)?[^0]/.test(""+a);return-1*(RegExp.$1||"").length-1}function l(a,b){var c=a.element.getBoundingClientRect();return b-c.left-a.clientRect.left}
function n(a,b){var c=a.clientRect.width,d=a.childNodes.length,e=l(a,b);return Math.max(0,Math.min(d-1,Math.round(e/(c/(d-1)))))}function h(a,b,c){b=a.childNodes.slice(Math.min(c,b),Math.max(c,b)+1);a=Array.from(a.selection.getItems());if(g)a=a.concat(b);else for(var d,c=0,e;e=b[c];c++)-1!=(d=a.indexOf(e))&&a.splice(d,1);return a}var j=basis.Class.oneFunctionProperty,y=basis.dom.event,B=basis.dom.wrapper.AbstractNode,s=basis.dom.wrapper.Node,v=basis.ui.canvas.Canvas,t=basis.ui.canvas.CanvasLayer,
p=basis.dom.wrapper.Selection,d=basis.event.create,r=Function.getter,x=s.subclass({usedColors:null,presetColors:["#F80","#BB7BF1","#FF3030","#090","#6699DD"],listen:{owner:{childNodesModified:function(a,b){b.deleted&&b.deleted.forEach(this.releaseColor,this);b.inserted&&b.inserted.forEach(this.setColor,this)}}},init:function(a){this.presetColors=Array.from(this.presetColors);this.usedColors={};s.prototype.init.call(this,a)},setColor:function(a){a.color||(a.color=this.getColor());this.usedColors[a.color]=
!0},releaseColor:function(a){delete this.usedColors[a.color];this.presetColors.push(a.color)},getColor:function(){var a=this.presetColors.pop();if(!a){do{var a=Math.random(),a=a+0.618033988749895,a=a%1,a=6*a,b=0.57*(1-Math.abs(a%2-1)),c=void 0;switch(Math.floor(a)){case 0:c=[0.57,b,0];break;case 1:c=[b,0.57,0];break;case 2:c=[0,0.57,b];break;case 3:c=[0,b,0.57];break;case 4:c=[b,0,0.57];break;case 5:c=[0.57,0,b]}a=[Math.floor(256*(c[0]+0.38)),Math.floor(256*(c[1]+0.38)),Math.floor(256*(c[2]+0.38))];
a="#"+a[0].toString(16)+a[1].toString(16)+a[2].toString(16)}while(this.usedColors[a])}return a}}),w=s.subclass({event_requestRedraw:d("requestRedraw")}),m=v.subclass({childClass:w,template:'<div class="Basis-Graph {selected} {disabled}" style="position: relative; display: inline; display: inline-block; zoom: 1; outline: none"><\!-- {graphSelection} --\><canvas{canvas} style="vertical-align: top; position:relative"><div>Canvas doesn\'t support.</div></canvas><\!-- {graphViewer} --\></div>',binding:{graphSelection:"satellite:",
graphViewer:"satellite:"},style:{},event_sortingChanged:function(a,b,c){v.prototype.event_sortingChanged.call(this,a,b,c);this.redrawRequest()},event_groupingChanged:function(a,b){v.prototype.event_groupingChanged.call(this,a,b);this.redrawRequest()},event_childNodesModified:function(a,b){v.prototype.event_childNodesModified.call(this,a,b);this.redrawRequest()},listen:{childNode:{requestRedraw:function(){this.redrawRequest()}}},setStyle:function(a){Object.extend(this.style,Object.slice(a,["strokeStyle",
"lineWidth"]));this.redrawRequest()},redrawRequest:function(){this.updateCount++},drawFrame:Function.$undef}),a={datasetChanged:function(a,b){var c,d,e=[];if(b.inserted)for(var f=0,g;g=b.inserted[f];f++)c=this.keyGetter(g),d=this.valueGetter(g),e[c]=d,this.valuesMap[c]=d,g.addHandler(k,this);if(b.deleted)for(f=0;g=b.deleted[f];f++)c=this.keyGetter(g),e[c]=null,this.valuesMap[c]=null,g.removeHandler(k,this);this.event_valuesChanged(this,e)}},k={update:function(a){var b=this.keyGetter(a),a=this.valueGetter(a),
c={};this.valuesMap[b]=a;c[b]=a;this.event_valuesChanged(this,c)}},d=B.subclass({valuesMap:null,sourceGetter:r("source"),keyGetter:Function.$undef,valueGetter:Function.$const(0),getValue:function(a,b){return this.source?this.valuesMap[b]:this.valueGetter(a)},legendGetter:r("legend"),getLegend:function(){return this.legendGetter(this)},colorGetter:r("color"),getColor:function(){return this.colorGetter(this)},event_valuesChanged:d("valuesChanged","object","delta"),event_sourceChanged:d("sourceChanged",
"object","oldSource"),init:function(a){this.valuesMap={};s.prototype.init.call(this,a);if(this.source=this.sourceGetter(this))a=this.source,this.source=null,this.setSource(a)},setSource:function(b){if(this.source!==b){var c=this.source;c&&(c.removeHandler(a,this),a.datasetChanged.call(this,c,{deleted:c.getItems()}));if(this.source=b)this.source.addHandler(a,this),a.datasetChanged.call(this,c,{inserted:this.source.getItems()});this.event_sourceChanged(this,c)}},destroy:function(){this.setSource(null);
B.prototype.destroy.call(this)}}),q=s.subclass({childClass:d,childFactory:function(a){return new this.childClass(a)},listen:{childNode:{valuesChanged:function(a,b){this.event_valuesChanged(a,b)}}},init:function(a){this.colorPicker=new x(Object.extend({owner:this},this.colorPicker));s.prototype.init.call(this,a)},destroy:function(){this.colorPicker.destroy();this.colorPicker=null;s.prototype.destroy.call(this)}}),E={childNodesModified:function(a,b){if(b.inserted)for(var c=0,d;d=b.inserted[c];c++)for(var e=
0,f;f=this.childNodes[e];e++)f.values[d.eventObjectId]=d.getValue(f,this.keyGetter(f));if(b.deleted)for(c=0;d=b.deleted[c];c++)for(e=0;f=this.childNodes[e];e++)delete f.values[d.eventObjectId];this.redrawRequest()},valuesChanged:function(a,b){for(var c=!1,d,e=0,f;f=this.childNodes[e];e++)d=this.keyGetter(f),b[d]&&(b[d]?f.values[a.eventObjectId]=b[d]:delete f.values[a.eventObjectId],c=!0);c&&this.redrawRequest()}},j=w.subclass({values:{},valueChangeEvents:j(function(a){for(var b=0,c;c=this.series.childNides[b];b++)a.values[c.eventObjectId]=
c.getValue(a,this.keyGetter(a));this.redrawRequest()},{update:!0}),init:function(a){this.values={};w.prototype.init.call(this,a)}}),o=m.subclass({childClass:j,keyGetter:Function.$self,keyTitleGetter:function(a){return this.keyGetter(a)},event_childNodesModified:function(a,b){m.prototype.event_childNodesModified.call(this,a,b);if(this.series&&this.series.childNodes){if(b.inserted)for(var c=0,d;d=b.inserted[c];c++){for(var e=0,f;f=this.series.childNodes[e];e++)f.getValue&&(d.values[f.eventObjectId]=
f.getValue(d,this.keyGetter(d)));d.addHandler(d.valueChangeEvents,this)}if(b.deleted)for(c=0;d=b.deleted[c];c++){for(e=0;f=this.series.childNodes[e];e++)d.values[f.eventObjectId]=null;d.removeHandler(d.valueChangeEvents,this)}this.redrawRequest()}},init:function(a){m.prototype.init.call(this,a);if(Array.isArray(this.series)){for(var a=[],b=0,c;c=this.series[b];b++)a[b]="function"==typeof c?{valueGetter:c}:c;this.series={childNodes:a}}this.series=new q(Object.extend({owner:this},this.series));this.series.addHandler(E,
this);E.childNodesModified.call(this,this.series,{inserted:this.series.childNodes})},getValuesForSeria:function(a){for(var b=[],c=0,d;d=this.childNodes[c];c++)b.push(d.values[a.eventObjectId]);return b},destroy:function(){this.series.destroy();delete this.series;m.prototype.destroy.call(this)}}),f=o.subclass({showLegend:!0,showYLabels:!0,showXLabels:!0,showBoundLines:!0,showGrid:!0,keyValuesOnEdges:!0,invertAxis:!1,autoRotateScale:!1,scaleAngle:0,min:0,max:"auto",init:function(a){this.clientRect=
{};o.prototype.init.call(this,a)},drawFrame:function(){var a=this.context,b=0,c=0,d=10,e=0,f=a.canvas.width,g=a.canvas.height,h=this.series.childNodes,i=this.childNodes.map(this.keyTitleGetter,this),j=i.length;if(2>j||!h.length)a.textAlign="center",a.fillStyle="#777",a.font="20px tahoma",a.fillText(0==j?"No data":"Not enough data",f/2,g/2);else{var k=this.getMaxGridValue(),l=this.getMinGridValue(),m=this.getGridPart(Math.max(Math.abs(l),Math.abs(k)));Math.abs(l)>Math.abs(k)?k=Math.ceil(k/m)*m:l=Math.floor(l/
m)*m;var n=(k-l)/m;a.font="10px tahoma";var o=[],p=[],d=c=0,t=this.invertAxis?this.showYLabels:this.showXLabels;if(this.invertAxis?this.showXLabels:this.showYLabels){for(var r=this.invertAxis?o:p,q,s=0;s<n+1;s++)r[s]=Math.round(l+m*s).group(),q=a.measureText(r[s]).width,q>c&&(c=q);c+=6;b+=10}if(t){m=this.invertAxis?p:o;for(s=0;s<j;s++)m[s]=i[s],q=a.measureText(m[s]).width,q>d&&(d=q);d+=6}s=q=0;this.showXLabels&&(q=a.measureText(o[0]).width+12,s=a.measureText(o[(this.invertAxis?n:j)-1]).width+12);
i=this.invertAxis?c:d;c=Math.max(this.invertAxis?d:c,Math.round(q/2));d=Math.round(s/2);if(this.showLegend){for(s=m=0;q=h[s];s++)q=a.measureText(q.getLegend()).width+20+20,q>m&&(m=q);m=Math.floor((f-c-d)/m);t=(f-c-d)/m;s=Math.ceil(h.length/m);e+=30*s;for(s=0;q=h[s];s++){var r=Math.round(c+s%m*t),v=g-e+5+30*(Math.ceil((s+1)/m)-1);a.fillStyle=q.getColor();a.fillRect(r,v,20,20);a.fillStyle="black";a.textAlign="left";a.fillText(q.getLegend(),r+20+5,v+10+3)}}e+=this.showXLabels?30:1;a.font="10px tahoma";
a.lineWidth=1;a.fillStyle="black";a.strokeStyle="black";q=(f-c-d)/(this.invertAxis?n:j-(this.keyValuesOnEdges?1:0));if(this.showXLabels){this.autoRotateScale?(m=Math.ceil(13/q)-1,r=(m+1)*q<i?Math.asin(13/((m+1)*q)):0):(s=(r=this.scaleAngle%180*Math.PI/180)?Math.min(10/Math.sin(r),i):i,m=Math.ceil((s+3)/q)-1);e+=Math.round(i*Math.sin(r));t=10<m||4>q;a.textAlign=r?"right":"center";a.beginPath();v=!this.keyValuesOnEdges&&!this.invertAxis?q/2:0;for(s=0;s<o.length;s++){var w=Math.round(v+c+s*q)+0.5,i=
m&&0!=s%(m+1);a.save();i||(a.translate(w+3,g-e+15),a.rotate(-r),a.fillText(o[s],0,0));a.restore();if(!i||!t)a.moveTo(w,g-e+0.5),a.lineTo(w,g-e+(i?3:5))}a.stroke();a.closePath()}j=(g-b-e)/(this.invertAxis?j-(this.keyValuesOnEdges?1:0):n);if(this.showYLabels){a.textAlign="right";r=!this.keyValuesOnEdges&&this.invertAxis?j/2:0;m=Math.ceil(15/j)-1;t=10<m||4>j;a.beginPath();for(s=0;v=p[s];s++)if(o=Math.round(this.invertAxis?b+r+s*j:g-e-r-s*j)+0.5,(i=m&&0!=s%(m+1))||a.fillText(v,c-6,o+2.5),!i||!t)a.moveTo(c+
0.5-3,o),a.lineTo(c+0.5,o);a.stroke();a.closePath()}if(this.showGrid){a.beginPath();p=this.invertAxis?q:j;for(s=0;s<n;s++)this.invertAxis?(o=f-d-Math.round(s*p)+0.5,a.moveTo(o,b+0.5),a.lineTo(o,g-e+0.5)):(o=b+Math.round(s*p)+0.5,a.moveTo(c+0.5,o),a.lineTo(f-d+0.5,o));a.strokeStyle="rgba(128, 128, 128, .25)";a.stroke();a.closePath()}this.showBoundLines&&(a.beginPath(),a.moveTo(c+0.5,b),a.lineTo(c+0.5,g-e+0.5),a.moveTo(c+0.5,g-e+0.5),a.lineTo(f-d+0.5,g-e+0.5),a.lineWidth=1,a.strokeStyle="black",a.stroke(),
a.closePath());a=this.invertAxis?j:q;for(s=0;q=h[s];s++)this.drawSeria(this.getValuesForSeria(q),q.getColor(),s,l,k,a,c,b,f-c-d,g-b-e);Object.extend(this.clientRect,{left:c,top:b,width:f-c-d,height:g-b-e});this.minValue=l;this.maxValue=k}},setMin:function(a){this.min=a;this.updateCount++},setMax:function(a){this.max=a;this.updateCount++},getMinValue:function(){for(var a,b=0,c;c=this.childNodes[b];b++)for(var d in c.values)if(c.values[d]<a||null==a)a=c.values[d];return a},getMaxValue:function(){for(var a,
b=0,c;c=this.childNodes[b];b++)for(var d in c.values)if(c.values[d]>a||null==a)a=c.values[d];return a},getMinGridValue:function(){var a="auto"==this.min?this.getMinValue():this.min;return Math.floor(Math.ceil(a)/Math.pow(10,e(a)))*Math.pow(10,e(a))},getMaxGridValue:function(){var a="auto"==this.max?this.getMaxValue():this.max;return Math.ceil(Math.ceil(a)/Math.pow(10,e(a)))*Math.pow(10,e(a))},getGridPart:function(a){var b,c=e(a);0==c&&(b=a);if(0==a%Math.pow(10,c)){var d=a/Math.pow(10,c);5<=d&&(b=
d)}if(!b){b=1;for(var f,g=a,h=0;5>b&&h<=c;){for(var i=2;5>=i;i++)if(d=g/i,f=(g-d)/Math.pow(10,c-h),0==f-Math.floor(f)&&20>b*i){g=d;b*=i;break}h++}}return a/b},drawSeria:Function.$undef}),c=!1,b=-1,g=!0,i={mousedown:function(a){var d=this.owner,e=l(d,y.mouseX(a)),f;f=y.mouseY(a);var i=d.element.getBoundingClientRect();f=f-i.top-d.clientRect.top;if(0<e&&e<this.clientRect.width&&0<f&&f<this.clientRect.height){for(var j in C)y.addGlobalHandler(j,C[j],this);g=y.mouseButton(a,y.MOUSE_LEFT);b=e=n(d,y.mouseX(a));
e=h(d,e,b);!c&&g&&d.selection.clear();this.draw(e)}this.owner.element.setAttribute("tabindex",1);this.owner.element.focus();y.kill(a)},contextmenu:function(a){y.kill(a)},keydown:function(a){y.key(a)==y.KEY.CTRL&&(c=!0)},keyup:function(a){y.key(a)==y.KEY.CTRL&&(c=!1)},blur:function(){b=-1;g=!0;c=!1}},C={mousemove:function(a){var c=this.owner,a=n(c,y.mouseX(a));this.draw(h(c,a,b))},mouseup:function(a){var c=this.owner,a=n(c,y.mouseX(a)),a=h(c,a,b);c.selection.set(a);for(var d in C)y.removeGlobalHandler(d,
C[d],this)}},G={datasetChanged:function(){this.draw()}},j=t.subclass({style:{fillStyle:"#dfdaff",strokeStyle:"#9a89ff",alpha:".7"},template:'<canvas{canvas} class="{selected} {disabled}" style="position:absolute;left:0;top:0"/>',listen:{owner:{draw:function(){this.recalc();this.draw()}}},event_ownerChanged:function(a,b){t.prototype.event_ownerChanged.call(this,a,b);b&&b.selection&&(b.selection.removeHandler(G,this),y.removeHandlers(b.element,i,this));this.owner&&this.owner.selection&&(this.recalc(),
this.owner.selection.addHandler(G,this),y.addHandlers(this.owner.element,i,this))},recalc:function(){this.tmpl.canvas.width=this.owner.tmpl.canvas.width;this.tmpl.canvas.height=this.owner.tmpl.canvas.height;this.clientRect=this.owner.clientRect},draw:function(a){this.reset();this.context.save();this.context.translate(this.clientRect.left,this.clientRect.top);var b=this.clientRect.width/(this.owner.childNodes.length-1);a||(a=this.owner.selection.getItems());for(var c={},d=0;d<a.length;d++)c[a[d].eventObjectId]=
!0;var e;e=-1;Object.extend(this.context,this.style);for(d=0;d<this.owner.childNodes.length+1;d++)(a=this.owner.childNodes[d])&&c[a.eventObjectId]?-1==e&&(e=d):-1!=e&&(a=Math.round(e*b-(e==d-1?1:0)),e=Math.round((d-1)*b+(e==d-1?1:0)),this.context.fillRect(a+0.5,0.5,e-a,this.clientRect.height),this.context.strokeRect(a+0.5,0.5,e-a,this.clientRect.height),e=-1);this.context.restore()}}),d=t.subclass({template:'<canvas{canvas} class="{selected} {disabled}" event-mousemove="move" event-mouseout="out" style="position:absolute;left:0;top:0"/>',
action:{move:function(a){this.mx=y.mouseX(a);this.my=y.mouseY(a);this.updatePosition(this.mx,this.my)},out:function(){this.my=this.mx=null;this.reset()}},listen:{owner:{draw:function(){this.recalc();this.mx&&this.updatePosition(this.mx,this.my)}}},event_ownerChanged:function(a,b){t.prototype.event_ownerChanged.call(this,a,b);this.owner&&this.recalc()},recalc:function(){this.element.width=this.owner.tmpl.canvas.width;this.element.height=this.owner.tmpl.canvas.height;this.clientRect=this.owner.clientRect;
this.max=this.owner.maxValue},updatePosition:function(a,b){this.reset();var c=this.element.getBoundingClientRect(),d=a-c.left-this.clientRect.left,c=b-c.top-this.clientRect.top;0<d&&d<this.clientRect.width&&0<c&&c<this.clientRect.height&&this.draw(d,c)},draw:function(a){var b=this.context;b.save();b.translate(this.clientRect.left,this.clientRect.top);var c=this.clientRect.top,d=this.clientRect.height,e=this.max,f=this.owner.series.childNodes,g=this.owner.childNodes.length,h=this.clientRect.width/
(g-1),a=Math.round(a/h),h=Math.round(a*h);b.beginPath();b.moveTo(h+0.5,0);b.lineTo(h+0.5,d);b.strokeStyle="#CCC";b.stroke();b.closePath();b.font="10px tahoma";b.textAlign="center";var i=this.owner.keyTitleGetter(this.owner.childNodes[a]),j=b.measureText(i).width;b.beginPath();b.moveTo(h+0.5,d+1+0.5);b.lineTo(h-3+0.5,d+4+0.5);b.lineTo(h-Math.round(j/2)-5+0.5,d+4+0.5);b.lineTo(h-Math.round(j/2)-5+0.5,d+4+10+5+0.5);b.lineTo(h+Math.round(j/2)+5+0.5,d+4+10+5+0.5);b.lineTo(h+Math.round(j/2)+5+0.5,d+4+0.5);
b.lineTo(h+3+0.5,d+4+0.5);b.lineTo(h+0.5,d+1);b.fillStyle="#c29e22";b.strokeStyle="#070";b.fill();b.stroke();b.closePath();b.fillStyle="black";b.fillText(i,h+0.5,c+d+5);for(var c=[],j=i=0,k;k=f[j];j++){var l=this.owner.childNodes[a].values[k.eventObjectId];if(!isNaN(l)){var m=Number(l.toFixed(2)).group(),n=b.measureText(m).width;i<n&&(i=n);l=Math.round((1-l/e)*d);n=Math.max(12,Math.min(l,d-12));c[j]={color:k.getColor(),text:m,valueY:l,labelY:n}}}c=c.sortAsObject(r("valueY"));e=c.map(function(a){return{labels:[a],
y:a.labelY,height:24}});for(f=!0;1<e.length&&f;)for(j=1;j<e.length;)f=!1,e[j].y-e[j].height/2<e[j-1].y+e[j-1].height/2?(e[j].y=e[j-1].y+(e[j].y-e[j-1].y)*e[j].labels.length/e[j-1].labels.length/2,e[j].labels=e[j-1].labels.concat(e[j].labels),e[j].height=24*e[j].labels.length,e[j].y=Math.max(e[j].height/2,Math.min(e[j].y,d-e[j].height/2)),e.splice(j-1,1),f=!0):j++;for(j=0;j<e.length;j++)for(f=0;f<e[j].labels.length;f++)d=e[j].labels[f],d.labelY=e[j].y-e[j].height/2+24*f+12;g=a>=g/2?-1:1;for(j=0;d=
c[j];j++)b.strokeStyle=d.color,b.fillStyle="white",b.lineWidth=3,b.beginPath(),b.arc(h+0.5,d.valueY+0.5,3,0,2*Math.PI),b.stroke(),b.fill(),b.closePath(),b.beginPath(),b.moveTo(h+4*g+0.5,d.valueY+0.5),b.lineTo(h+14*g+0.5,d.labelY-5+0.5),b.lineTo(h+14*g+0.5,d.labelY-Math.round(12)+0.5),b.lineTo(h+14*g+(i+14)*g+0.5,d.labelY-Math.round(12)+0.5),b.lineTo(h+14*g+(i+14)*g+0.5,d.labelY+Math.round(12)+0.5),b.lineTo(h+14*g+0.5,d.labelY+Math.round(12)+0.5),b.lineTo(h+14*g+0.5,d.labelY+5+0.5),b.lineTo(h+4*g+
0.5,d.valueY+0.5),b.fillStyle=d.color,b.strokeStyle="#444",b.lineWidth=1,b.stroke(),b.fill(),b.closePath(),b.fillStyle="black",b.textAlign="right",b.fillText(d.text,h+20*g+(1==g?i:0)+0.5,d.labelY+4);b.restore()}}),j=f.subclass({fillArea:!0,style:{strokeStyle:"#090",lineWidth:2.5,lineJoin:"bevel"},satelliteConfig:{graphViewer:{instanceOf:d},graphSelection:{instanceOf:j,existsIf:r("selection")}},init:function(a){this.selection&&!(this.selection instanceof p)&&(this.selection=Object.complete({multiple:!0},
this.selection));f.prototype.init.call(this,a)},drawSeria:function(a,b,c,d,e,f,g,h,i,j){c=this.context;this.keyValuesOnEdges||(g+=f/2);this.style.strokeStyle=b;c.save();c.translate(g,h);c.beginPath();for(var k=0;k<a.length;k++)g=k*f,h=j*(1-(a[k]-d)/(e-d)),0==k?c.moveTo(g,h):c.lineTo(g,h);Object.extend(c,this.style);c.stroke();this.fillArea&&1==this.childNodes.length&&(c.lineWidth=0,a=0>d?Math.max(0,e)/(e-d)*j:j,c.lineTo(i,a),c.lineTo(0,a),c.globalAlpha=0.15,c.fillStyle=b,c.fill());c.closePath();c.restore()}}),
d=d.subclass({draw:function(a,b){var c=this.context;c.save();c.translate(this.clientRect.left,this.clientRect.top);for(var d=this.owner.clientRect,e=this.owner.bars,f=this.owner.series.childNodes,g=this.owner.invertAxis,h=d.width,d=d.height,g=Math.floor((g?b:a)/((g?d:h)/e[0].length)),h=this.owner.keyTitleGetter(this.owner.childNodes[g]),i,j,k=0;k<e.length;k++)if(d=e[k][g],a>=d.x&&a<=d.x+d.width&&b>=d.y&&b<=d.y+d.height){j=d;i=f[k].getLegend();break}j&&(e=h+", "+i+", "+Number(j.value.toFixed(2)).group(),
c.font="10px Tahoma",f=c.measureText(e).width+10,i=Math.round(Math.max(0,Math.min(this.clientRect.width-f,a-f/2))),g=Math.round(b-20-5),0>g&&(g=Math.round(b+20)),c.strokeStyle="black",c.lineWidth=1.5,c.shadowColor="#000",c.shadowBlur=5,c.strokeRect(j.x+0.5,j.y+0.5,j.width,j.height),c.clearRect(j.x+0.5,j.y+0.5,j.width,j.height),c.strokeStyle="#333",c.fillStyle="white",c.lineWidth=1,c.shadowBlur=3,c.fillRect(i+0.5,g+0.5,f,20),c.shadowBlur=0,c.strokeRect(i+0.5,g+0.5,f,20),c.fillStyle="black",c.fillText(e,
i+5,g+20-5));c.restore()}}),d=f.subclass({bars:null,keyValuesOnEdges:!1,satelliteConfig:{graphViewer:d},drawFrame:function(){this.bars=[];f.prototype.drawFrame.call(this)},drawSeria:function(a,b,c,d,e,f,g,h,i,j){var k=this.context;k.save();k.translate(g,h);k.fillStyle=b;Object.extend(k,this.style);k.strokeStyle="#333";k.lineWidth=1;b=0<=d?0:0>=e?j:Math.abs(d/(e-d)*j);this.bars[c]=[];for(h=0;h<a.length;h++)g=this.getBarRect(a[h],c,h,d,e,f,i,j,b),g.value=a[h],this.bars[c].push(g),g.x=Math.round(g.x),
g.y=Math.round(g.y),g.width=Math.round(g.width),g.height=Math.round(g.height),this.drawBar(g);k.restore()},getBarRect:function(a,b,c,d,e,f,g,h,i){var j=this.series.childNodes.length,k=Math.round(0.7*f/j),l={};this.invertAxis?(l.height=k,l.y=f/2+c*f-l.height*j/2+b*l.height,l.width=((a-d)/(e-d)*g-i)*(0<a?1:-1),l.x=i-(0>a?l.width:0)):(l.width=k,l.x=f/2+c*f-l.width*j/2+b*l.width,l.height=((a-d)/(e-d)*h-i)*(0<a?1:-1),l.y=h-i-(0<a?l.height:0));return l},drawBar:function(a){this.context.fillRect(a.x+0.5,
a.y+0.5,a.width,a.height);10<a.width&&10<a.height&&this.context.strokeRect(a.x+0.5,a.y+0.5,a.width,a.height)}}),H=d.subclass({getMaxValue:function(){for(var a,b,c=0,d;d=this.childNodes[c];c++){b=0;for(var e in d.values)b+=d.values[e];if(b>a||null==a)a=b}return a},getBarRect:function(a,b,c,d,e,f,g,h){var d={},b=0<b&&this.bars[b-1][c],i=0.7*f;this.invertAxis?(d.height=i,d.y=f/2+c*f-i/2,d.width=a/e*g,d.x=b&&b.x+b.width||0):(d.width=i,d.x=f/2+c*f-d.width/2,d.height=a/e*h,d.y=h-d.height-(b&&h-b.y));return d}});
this.extend({LinearGraph:j,BarGraph:d,StackedBarGraph:H})}.body()+"//@ sourceURL="+l+"src/basis/ui/graph.js")).call(basis.namespace("basis.ui.graph"),basis.namespace("basis.ui.graph"),basis.namespace("basis.ui.graph").exports,this,l+"src/basis/ui/graph.js",l+"src/basis/ui/",basis,function(e){return basis.resource(l+"src/basis/ui/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){function e(e,j,l){l||(l={});for(var e=(h[j]||h.text)(function(d){d=d.trimRight().replace(/\r\n|\n\r|\r/g,
"\n");l.keepFormat||(d=d.replace(/^(?:\s*[\n]+)+?([ \t]*)/,"$1"));d=d.replace(/\n[ \t]+/g,function(a){return a.replace(/\t/g,"  ")}).replace(/\n[ \t]+\n/g,"\n\n");if(!l.keepFormat){for(var e=1E3,h=d.split(/\n+/),j=Number(null!=d.match(/^function/));j<h.length;j++){var m=h[j].match(/^\s*/);m[0].length<e&&(e=m[0].length);if(0==e)break}0<e&&(d=d.replace(RegExp("(^|\\n) {"+e+"}","g"),"$1"))}return d=d.replace(RegExp("(^|\\n)( +)","g"),function(a,d,e){return d+"\u00a0".repeat(e.length)})}(e||"").replace(/</g,
"&lt;")).join("").split("\n"),j=(""+e.length).length,n=[],t=l.noLineNumber?"":" hasLineNumber",p=0;p<e.length;p++)n.push('<div class="line '+(p%2?"odd":"even")+t+'"><span class="lineContent">'+(!l.noLineNumber?'<input class="lineNumber" value="'+(p+1).lead(j)+'" type="none" unselectable="on" readonly="readonly" tabindex="-1" /><span class="over"></span>':"")+(e[p]+"\r\n")+"</span></div>");return n.join("")}var l=basis.Class,n=basis.ui.Node,h={},j={add:function(e,j){h[e]=j}};j.add("text",Array.from);
j.add("js",function(){var e=RegExp("\\b("+"break case catch continue default delete do else false for function if in instanceof new null return super switch this throw true try typeof var while with".qw().join("|")+")\\b","g");return function(h){function j(n,m,a,k){d!=m&&l.push(h.substring(d,m).replace(e,'<span class="token-keyword">$1</span>'));d=a+1;n&&l.push('<span class="token-'+n+'">'+h.substring(m,a+1)+"</span>"+(k||""))}for(var l=[],n=h.toArray(),p,d=0,r,x=0;x<n.length;x++)if("'"==n[x]||'"'==
n[x]){r=n[x];for(p=x;++x<n.length;){"\\"==n[x]&&("\n"==n[x+1]?(j("string",p,x),p=++x+1):x+=2);if(n[x]==r){j("string",p,x);break}if("\n"==n[x])break}}else if("/"==n[x])if(p=x,x++,"/"==n[x]){for(;++x<n.length&&"\n"!=n[x];);j("comment",p,x-1)}else if("*"==n[x])for(;++x<n.length;)if("*"==n[x]&&"/"==n[x+1]){j("comment",p,++x);break}else"\n"==n[x]&&(j("comment",p,x-1,"\n"),d=p=x+1);j(null,h.length);return l}}());j.add("css",function(){var e=RegExp("(^|[^a-z0-9-])((?:"+"-webkit- -o- -ms- -moz- -khtml-".qw().join("|")+
")?(?:"+"transition transition-delay transition-duration transition-property transition-timing-function transform transform-origin background-origin background-clip background-size border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-radius border-top-right-radius border-bottom-right-radius border-bottom-left-radius border-top-left-radius box-decoration-break box-shadow column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width columns column-span column-width".qw().join("|")+
")|(?:"+"azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".qw().join("|")+
"))(s|:|$)","gi"),h=RegExp("\\b("+"left-side far-left left center-left center-right center far-right right-side right behind leftwards rightwards inherit scroll fixed transparent none repeat-x repeat-y repeat no-repeat collapse separate auto top bottom both open-quote close-quote no-open-quote no-close-quote crosshair default pointer move e-resize ne-resize nw-resize n-resize se-resize sw-resize s-resize text wait help ltr rtl inline block list-item run-in compact marker table inline-table table-row-group table-header-group table-footer-group table-row table-column-group table-column table-cell table-caption below level above higher lower show hide caption icon menu message-box small-caption status-bar normal wider narrower ultra-condensed extra-condensed condensed semi-condensed semi-expanded expanded extra-expanded ultra-expanded italic oblique small-caps bold bolder lighter inside outside disc circle square decimal decimal-leading-zero lower-roman upper-roman lower-greek lower-alpha lower-latin upper-alpha upper-latin hebrew armenian georgian cjk-ideographic hiragana katakana hiragana-iroha katakana-iroha crop cross invert visible hidden always avoid x-low low medium high x-high static relative absolute portrait landscape spell-out once digits continuous code x-slow slow fast x-fast faster slower justify underline overline line-through blink capitalize uppercase lowercase embed bidi-override baseline sub super text-top middle text-bottom silent x-soft soft loud x-loud pre nowrap serif sans-serif cursive fantasy monospace empty string strict loose char true false dotted dashed solid double groove ridge inset outset larger smaller xx-small x-small small large x-large xx-large all newspaper distribute distribute-all-lines distribute-center-last inter-word inter-ideograph inter-cluster kashida ideograph-alpha ideograph-numeric ideograph-parenthesis ideograph-space keep-all break-all break-word lr-tb tb-rl thin thick inline-block w-resize hand distribute-letter distribute-space whitespace ignore".qw().join("|")+
")\\b","g");return function(j){function l(a,d,k,f){if(r!=d){var c=j.substring(r,d);w&&(c=m?c.replace(h,'<span class="token-value">$1</span>'):c.replace(e,'$1<span class="token-key">$2</span>$3'));n.push(c)}r=k+1;a&&n.push('<span class="token-'+a+'">'+j.substring(d,k+1)+"</span>"+(f||""))}for(var n=[],p=j.toArray(),d=0,r=0,x,w=!1,m=!1,a=!1,k=0;k<p.length;k++)if("'"==p[k]||'"'==p[k]){x=p[k];for(d=k;++k<p.length;){if(p[k]==x){l("string",d,k);break}if("\n"==p[k])break;"\\"==p[k]&&"\n"==p[k+1]&&(l("string",
d,k),d=++k+1)}}else if("/"==p[k]){if(d=k,k++,"*"==p[k])for(;++k<p.length;)if("*"==p[k]&&"/"==p[k+1]){l("comment",d,++k);break}else"\n"==p[k]&&(l("comment",d,k-1,"\n"),r=d=k+1)}else"{"==p[k]?(w=!0,a=m=!1,d=k+1,l("",d,k)):"("==p[k]?m&&(a=!0):")"==p[k]?m&&(a=!1):":"==p[k]?w&&!a&&(d=k+1,l("",d,k),m=!0):";"==p[k]?w&&!a&&(d=k+1,l("",d,k),m=!1):"}"==p[k]&&(m=w=!1);l(null,j.length);return n}}());l=l(n,{template:'<pre{code} class="Basis-SyntaxHighlight"/>',codeGetter:Function.getter("data.code"),normalize:!0,
lineNumber:!0,lang:"text",templateUpdate:function(){var h=this.codeGetter(this);h!=this.code_&&(this.code_=h,this.tmpl.code.innerHTML=e(h,this.lang,{keepFormat:!this.normalize,noLineNumber:!this.lineNumber}))}});this.extend({highlight:e,SourceCodeNode:l})}.body()+"//@ sourceURL="+l+"src/basis/format/highlight.js")).call(basis.namespace("basis.format.highlight"),basis.namespace("basis.format.highlight"),basis.namespace("basis.format.highlight").exports,this,l+"src/basis/format/highlight.js",l+"src/basis/format/",
basis,function(e){return basis.resource(l+"src/basis/format/"+e)});(new Function("module, exports, global, __filename, __dirname, basis, resource",function(){}.body()+"//@ sourceURL="+l+"src/package/all.js")).call(basis.namespace("package.all"),basis.namespace("package.all"),basis.namespace("package.all").exports,this,l+"src/package/all.js",l+"src/package/",basis,function(e){return basis.resource(l+"src/package/"+e)})})();
