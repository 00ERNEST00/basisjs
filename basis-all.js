/*!
 * Basis javasript library 
 * http://code.google.com/p/basis-js/
 *
 * @license
 * GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>
 */

/*

 GNU General Public License v2.0 <http://www.gnu.org/licenses/gpl-2.0.html>
*/
(function(f){function o(a,c){for(var b in c)a[b]=c[b];return a}function n(a,c){for(var b in c)b in a==!1&&(a[b]=c[b]);return a}function k(a){return a==null||a==void 0}function q(a){return a}function p(a){var c={};a.names=function(a){return Object.slice(c,typeof a=="string"?a.qw():a)};a.extend=function(a){n(c,a);o(this,a);return this};return a}function v(a,c){for(var b=a.split("."),e=f,h,g,j;b.length;)if(h=b.shift(),g=(g?g+".":"")+h,e[h]||(e[h]=p((!b.length?c:null)||function(){},g),j&&(j.namespaces_[g]=
e[h])),e=e[h],!j&&(j=e,!j.namespaces_))j.namespaces_={};return d[a]=e}o(Object,{extend:o,complete:n,keys:function(a){var c=[],b;for(b in a)c.push(b);return c},values:function(a){var c=[],b;for(b in a)c.push(a[b]);return c},slice:function(a,c){var b={};if(!c)return o(b,a);for(var e=0,h;h=c[e++];)h in a&&(b[h]=a[h]);return b},splice:function(a,c){var b={};if(!c)return o(b,a);for(var e=0,h;h=c[e++];)h in a&&(b[h]=a[h],delete a[h]);return b},iterate:function(a,c,b){var e=[],h;for(h in a)e.push(c.call(b,
h,a[h]));return e},coalesce:function(){for(var a=arguments,c=0;c<a.length;c++)if(a[c]!=null)return a[c]}});var r=function(){},t=function(){var a=1,c={},b={};a++;return function(e,h){var g,j;if(!h){if(e.getter)return e.getter;if(typeof e=="function")return e}if(typeof e!="function")b[e]?g=b[e]:(g=new Function("object","return object != null ? object."+e+" : object"),g.path=e,g.getterIdx_=a++,b[e]=g);else if(g=e,!g.getterIdx_)g.getterIdx_=a++;j=g.getterIdx_;var z=c[j];if(z)if(typeof h=="undefined"){if(z.nmg)return z.nmg}else for(j=
0;j<z.length;j++){if(z[j].modificator===h)return z[j].getter}else z=c[j]=[];var A=!0;switch(h&&typeof h){case "string":j=function(a){return h.format(g(a))};break;case "function":j=function(a){return h(g(a))};break;case "object":A=!1;j=function(a){return h[g(a)]};break;default:j=g.path?g:function(a){return g(a)}}if(A&&(z.push({getter:j,modificator:h}),typeof h=="undefined"))z.nmg=j;return j.getter=j}}();o(Function,{$undefined:function(a){return a==void 0},$defined:function(a){return a!=void 0},$isNull:k,
$isNotNull:function(a){return a!=null&&a!=void 0},$isSame:function(a){return a===this},$isNotSame:function(a){return a!==this},$self:q,$const:function(a){return function(){return a}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:r,getter:t,def:function(a,c,b){b=b||k;return function(e){e=a(e);return b(e)?c:e}},wrapper:function(a){return function(c){var b={};b[a]=c;return b}},lazyInit:function(a,c){var b=0,e;return function(){b++||(e=a.apply(c||this,arguments));
return e}},lazyInitAndRun:function(a,c,b){var e=0,h;return function(){e++||(h=a.call(b||this));c.apply(h,arguments);return h}},runOnce:function(a,c){var b=0;return function(){if(!b++)return a.apply(c||this,arguments)}}});n(Function.prototype,{bind:function(a){var c=this,b=Array.from(arguments,1);return b.length?function(){return c.apply(a,b.concat.apply(b,arguments))}:function(){return c.apply(a,arguments)}}});n(Array,{isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"}});
o(Array,{from:function(a,c){if(a!=null){var b=a.length;if(typeof b=="undefined")return[a];c||(c=0);if(b-c>0){for(var e=[],h=0,g=c;g<b;)e[h++]=a[g++];return e}}return[]},create:function(a,c,b){for(var e=[],h=typeof c=="function",g=0;g<a;g++)e[g]=h?c.call(b,g,e):c;return e}});n(Array.prototype,{indexOf:function(a,c){c=parseInt(c)||0;if(c<0)return-1;for(;c<this.length;c++)if(this[c]===a)return c;return-1},lastIndexOf:function(a,c){for(var b=this.length,c=parseInt(c),c=isNaN(c)||c>=b?b-1:(c+b)%b;c>=0;c--)if(this[c]===
a)return c;return-1},forEach:function(a,c){for(var b=0,e=this.length;b<e;b++)b in this&&a.call(c,this[b],b,this)},every:function(a,c){for(var b=0,e=this.length;b<e;b++)if(b in this&&!a.call(c,this[b],b,this))return!1;return!0},some:function(a,c){for(var b=0,e=this.length;b<e;b++)if(b in this&&a.call(c,this[b],b,this))return!0;return!1},filter:function(a,c){for(var b=[],e=0,h=this.length;e<h;e++)e in this&&a.call(c,this[e],e,this)&&b.push(this[e]);return b},map:function(a,c){for(var b=[],e=0,h=this.length;e<
h;e++)e in this&&(b[e]=a.call(c,this[e],e,this));return b},reduce:function(a,c){var b=this.length,e=arguments.length;if(b==0&&e==1)throw new TypeError;var h,g=0;e>1&&(h=c,g=1);for(e=0;e<b;e++)e in this&&(h=g++?a.call(null,h,this[e],e,this):this[e]);return h}});o(Array.prototype,{flatten:function(){return this.concat.apply([],this)},repeat:function(a){return Array.create(parseInt(a)||0,this).flatten()},item:function(a){a=parseInt(a||0);return this[a>=0?a:this.length+a]},search:function(a,c,b){Array.lastSearchIndex=
-1;for(var c=Function.getter(c||q),b=parseInt(b)||0,e=this.length;b<e;b++)if(c(this[b])===a)return this[Array.lastSearchIndex=b]},lastSearch:function(a,c,b){Array.lastSearchIndex=-1;for(var c=Function.getter(c||q),e=this.length,b=isNaN(b)||b==null?e:parseInt(b),e=b>e?e:b;e-- >0;)if(c(this[e])===a)return this[Array.lastSearchIndex=e]},binarySearchPos:function(a,c,b,e,h,g){if(!this.length)return e?-1:0;var c=Function.getter(c||q),b=!!b,j,h=isNaN(h)?0:h,z=isNaN(g)?this.length-1:g;do if(g=h+z>>1,j=c(this[g]),
b?a>j:a<j)z=g-1;else if(b?a<j:a>j)h=g+1;else return a==j?g:e?-1:0;while(h<=z);return e?-1:g+(j<a^b)},binarySearch:function(a,c){return this.binarySearchPos(a,c,!1,!0)},add:function(a){return this.indexOf(a)==-1&&!!this.push(a)},remove:function(a){a=this.indexOf(a);return a!=-1&&!!this.splice(a,1)},has:function(a){return this.indexOf(a)!=-1},merge:function(a){return this.reduce(o,a||{})},sortAsObject:function(a,c,b){a=Function.getter(a);b=b?-1:1;return this.map(function(b,c){return{i:c,v:a(b)}}).sort(c||
function(a,c){return b*(a.v>c.v||-(a.v<c.v)||(a.i>c.i?1:-1))}).map(function(a){return this[a.i]},this)},set:function(a){if(this!==a)this.length=0,this.push.apply(this,a);return this},clear:function(){this.length=0;return this}});if(![1,2].splice(1).length){var m=Array.prototype.splice;Array.prototype.splice=function(){var a=Array.from(arguments);if(a.length<2)a[1]=this.length;return m.apply(this,a)}}var w={"<":">","[":"]","(":")","{":"}","\u00ab":"\u00bb"};String.Entity={laquo:"\u00ab",raquo:"\u00bb",
nbsp:"\u00a0",quot:'"',quote:'"',copy:"\u00a9",shy:"\u00ad",para:"\u00b6",sect:"\u00a7",deg:"\u00b0",mdash:"\u2014",hellip:"\u2026"};n(String,{toLowerCase:function(a){return String(a).toLowerCase()},toUpperCase:function(a){return String(a).toUpperCase()},trim:function(a){return String(a).trim()},trimLeft:function(a){return String(a).trimLeft()},trimRight:function(a){return String(a).trimRight()},isEmpty:function(a){return a==null||String(a)==""},isNotEmpty:function(a){return a!=null&&String(a)!=""}});
n(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});o(String.prototype,{toObject:function(a){try{return Function("return 0,"+this)()}catch(c){if(a)throw c;}},toArray:(new String("a"))[0]?function(){return Array.from(this)}:function(){for(var a=[],c=this.length,b=0;b<c;b++)a[b]=this.charAt(b);return a},repeat:function(a){return Array(parseInt(a)+1||0).join(this)},qw:function(){var a=
this.trim();return a?a.split(/\s+/):[]},forRegExp:function(){return this.replace(/[\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$]/g,"\\$&")},format:function(a){for(var c={},b=0;b<arguments.length;b++)c[b]=arguments[b];typeof a=="object"&&o(c,a);return this.replace(/\{([a-z\d\_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,function(a,b,g,j,z){a=b in c?c[b]:z?"":a;return g&&!isNaN(a)?(a=Number(a),g=="."?a.toFixed(j):a.lead(j)):a})},quote:function(a,c){var a=a||'"',c=c||w[a]||a,b=(a.length==1?a:"")+(c.length==1?c:"");return a+
(b?this.replace(RegExp("["+b.forRegExp()+"]","g"),"\\$&"):this)+c},capitalize:function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()},camelize:function(){return this.replace(/-(.)/g,function(a,c){return c.toUpperCase()})},dasherize:function(){return this.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}});String.format=String.prototype.format;if("|||".split(/\|/).length+"|||".split(/(\|)/).length!=11)String.prototype.split=function(a){if(a==""||a&&a.source=="")return this.toArray();
var c=[],b=0,e;if(a instanceof RegExp)for(a.global||(a=RegExp(a.source,/\/([mi]*)$/.exec(a)[1]+"g"));e=a.exec(this);)e[0]=this.substring(b,e.index),c.push.apply(c,e),b=a.lastIndex;else for(;(e=this.indexOf(a,b))!=-1;)c.push(this.substring(b,e)),b=e+a.length;c.push(this.substr(b));return c};if("12".substr(-1)!="2"){var x=String.prototype.substr;String.prototype.substr=function(a,c){return x.call(this,a<0?Math.max(0,this.length+a):a,c)}}o(Number.prototype,{fit:function(a,c){return!isNaN(a)&&this<a?
Number(a):!isNaN(c)&&this>c?Number(c):this},between:function(a,c){return!isNaN(this)&&this>=a&&this<=c},quote:function(a,c){return(this+"").quote(a,c)},toHex:function(){return parseInt(this).toString(16).toUpperCase()},sign:function(){return this<0?-1:+(this>0)},base:function(a){return!a||isNaN(a)?0:Math.floor(this/a)*a},lead:function(a,c){return(this+"").replace(/\d+/,function(b){return(a-=b.length-1)>1?Array(a).join(c||0)+b:b})},group:function(a,c){return(this+"").replace(/\d+/,function(b){return b.replace(/\d/g,
function(e,h){return!h+(b.length-h)%(a||3)?e:(c||" ")+e})})},format:function(a,c,b,e,h){a=this.toFixed(a);if(c||h)a=a.replace(/(\d+)(\.?)/,function(a,b,e){return(c?Number(b).group(3,c):b)+(e?h||e:"")});b&&(a=a.replace(/^-?/,"$&"+(b||"")));return a+(e||"")}});n(Date,{now:function(){return+new Date}});(new Date).getYear()<1900&&o(Date.prototype,{getYear:function(){return this.getFullYear()-1900},setYear:function(a){return this.setFullYear(!isNaN(a)&&a<100?Number(a)+1900:a)}});var d={},u=function(){function a(a,
b){for(var j=d[a],c=b?b.split(/\./):[];j&&c.length;)j=j[c.shift()];return j}var c=f.document?f.document.getElementsByTagName("SCRIPT"):null,b=(c?c[c.length-1].src:module.filename).replace(/[^\/]+$/,""),e={};return typeof require=="function"?function(a){return require(requirePath+a.replace(/\./g,"/"))}:function(c,g){var j=c.match(/^([a-z][a-zA-Z0-9\_]*(\.[a-z][a-zA-Z0-9\_]*)*)?/)[0],z=c.substr(j.length?j.length+1:0),A=a(j,z),D=/^basis\./.test(j)?b:(location?location.href:"").replace(/[a-z0-9\-\_\.]+\.[a-z0-9]+$/,
"");if(!d[j]||!A)if(/^https?:/.test(D))if(e[c])throw"Attempt to load namespace, probably cycle require";else{e[c]=1;var C=new XMLHttpRequest;C.open("POST",D+(g||"")+c.replace(/\./g,"/")+".js",!1);C.send(null);if(C.status==200)try{(new Function(C.responseText)).call(f)}catch(B){throw B;}else if(C.status==404&&z)u(j);else throw"!";}else throw"Path `"+c+"` can't be resolved";return A||a(j,z)}}(),s=function(){function a(a){return typeof a=="function"&&a.basisClass_}var c=Function(),b=1;o(c,{className:"basis.Class",
extendConstructor_:!1,prototype:{constructor:null,init:Function(),toString:function(){return"[object "+(this.constructor||this).className+"]"},destroy:function(){for(var a in this)this[a]=null;this.destroy=r}},create:function(g){typeof g!="function"&&(g=c);var j=Function();j.prototype=g.prototype;for(var j={className:g.className+"._SubClass_",basisClass_:!0,superClass_:g,extendConstructor_:!!g.extendConstructor_,__extend__:function(b){return b&&(typeof b=="object"||typeof b=="function"&&!a(b))?c.create.call(null,
C,b):b},extend:c.extend,subclass:function(){return c.create.apply(null,[C].concat(Array.from(arguments)))},prototype:new j},e=arguments,A=1;A<e.length;A++)j.extend(typeof e[A]=="function"&&!a(e[A])?e[A](g.prototype):e[A]);var h={},C=j.extendConstructor_?function(a,j){this.eventObjectId=b++;var A,c;for(c in a)A=this[c],this[c]=A&&A.__extend__?A.__extend__(a[c]):a[c];this.init(j||h)}:function(){this.eventObjectId=b++;this.init.apply(this,arguments)};j.prototype.constructor=C;o(C,j);return C},extend:function(a){var b=
this.prototype;if(a.prototype)a=a.prototype;var c=Object.keys(a);a.toString!==Object.prototype.toString&&c.add("toString");for(var A=c.length;A-- >0;){var e=c[A],h=a[e],B=b[e];e=="className"||e=="extendConstructor_"?this[e]=h:b[e]=B&&B.__extend__?B.__extend__(h):h}return this}});var e=function(a,b){return{__extend__:function(a){var A=Function();A.prototype=this;A=new A;b(A,a);return A}}.__extend__(a)},h=function(a){return e(a,o)};return v("basis.Class",c.create).extend({BaseClass:c,create:c.create,
isClass:a,CustomExtendProperty:e,ExtensibleProperty:h,NestedExtProperty:function(a){return e(a,function(a,b){for(var A in b){var c=a[A];a[A]=c&&c.__extend__?c.__extend__(b[A]):h(b[A])}})}})}(),l=function(){function a(a){var j=b[a];j||(j=b[a]=function(){var b=this.handlers_,j,e;if(b&&b.length)for(var b=c.call(b),h=b.length;h-- >0;)j=b[h],e=j.handler[a],typeof e=="function"&&e.apply(j.thisObject,arguments)});return j}var c=Array.prototype.slice,b={},e,h=s(null,{handlers_:null,event_destroy:e=a("destroy",
"object"),listen:s.NestedExtProperty(),extendConstructor_:!0,init:function(){if(this.handler)(this.handlers_||(this.handlers_=[])).push({handler:this.handler,thisObject:this.handlerContext||this})},addHandler:function(a,b){var c=this.handlers_;if(!c)c=this.handlers_=[];b||(b=this);for(var A=c.length,e;A-- >0;)if(e=c[A],e.handler===a&&e.thisObject===b)return!1;return!!c.push({handler:a,thisObject:b||this})},removeHandler:function(a,b){var c=this.handlers_;if(c){b||(b=this);for(var A=c.length,e;A-- >
0;)if(e=c[A],e.handler===a&&e.thisObject===b)return!!c.splice(A,1);return!1}},destroy:function(){if(this.handlers_)e.call(this,this),this.handlers_=null}});h.createEvent=a;h.event=b;return h}(),y=function(){var a=[];return{add:function(c){c!=null&&a.push(c)},remove:function(c){a.remove(c)}}}();(function(){function a(a){if(c){if(a.source!=f||a.data!=b)return;basis.dom.event.kill(a)}e.length&&(a=e.shift(),delete h[a.key],a.fn())}var c=typeof addEventListener=="function"&&typeof postMessage=="function",
b="zeroTimeoutMessage",e=[],h={},g=1;c&&f.addEventListener("message",a,!0);var j=setTimeout;f.setTimeout=function(A,z){var C;z?C=j.call(f,A,z):(C={key:"z"+g++,fn:typeof A=="function"?A:new Function(A)},h[C.key]=C,e.push(C),c?postMessage(b,"*"):C.timer=j.call(f,a,0),C=C.key);return C};var z=clearTimeout;f.clearTimeout=function(a){if(/z\d+/.test(a)){var b=h[a];b&&(clearTimeout(b.timer),e.remove(b),delete h[a])}else return z.call(f,a)}})();var i=function(){function a(){if(!D)if(g.length){var a=Date.now(),
j=Math.max(g[0].eventTime,a);j<z&&(clearTimeout(A),A=setTimeout(b,(z=j)-a))}else A=clearTimeout(A),z=e}function c(b,c){var A=b.eventObjectId,e=j[c]&&j[c][A];e&&(g.remove(e),delete j[c][A],a())}function b(){var b=Date.now(),b=g.binarySearchPos(b+15,h);D=!0;g.splice(0,b).forEach(function(a){delete j[a.eventName][a.object.eventObjectId];a.callback.call(a.object)});D=!1;z=e;a()}var e=2E12,h=t("eventTime"),g=[],j={},z=e,A=null,D=!1;y.add({destroy:function(){D=!0;clearTimeout(A);g.length=0;j=null}});return{add:function(b,
A,e){var z=b.eventObjectId,D=j[A];D||(D=j[A]={});var d=D[z];if(d){if(isNaN(e))return c(b,A);if(d.eventTime==e)return;g.remove(d);d.eventTime=e}else{if(isNaN(e))return;d=D[z]={eventName:A,object:b,eventTime:e,callback:b[A]}}g.splice(g.binarySearchPos(e,h),0,d);a()},remove:c}}();v("basis").extend({namespace:v,platformFeature:{},EventObject:l,TimeEventManager:i,Cleaner:y,require:u});f.basis.locale={}})(this);
(function(f,o){function n(d){for(var y=1E6,d=String(d).split("."),i=0,a=0;i<4&&i<d.length;i++,y/=100)a+=d[i]*y;return a}function k(){for(var d=0;d<arguments.length;d++){var y=arguments[d].toLowerCase();if(y in p){if(p[y])return!0}else{var i=y.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(i){p[y]=!1;var a=i[1].toLowerCase(),c=n(i[3]),i=i[4]||"=";if(a=v[a])return p[y]=!c||i=="="&&a==c||i=="+"&&a>=c||i=="-"&&a<c}}}return!1}var q="basis.ua",p={},v={},r=o.navigator&&o.navigator.userAgent,t="unknown",m={MSIE:["Internet Explorer",
"msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]},w;for(w in m)if(!(w=="MSIE"&&o.opera)&&!(w=="Safari"&&r.match(/chrome/i))&&!(w=="AppleWebKit"&&r.match(/iphone/i))&&r.match(RegExp(w+".(\\d+(\\.\\d+)*)","i")))for(var x=m[w],d=o.opera&&typeof o.opera.version==
"function"?o.opera.version():RegExp.$1,u=n(d),t=x[0]+" "+d,d=0;d<x.length;d++)v[x[d].toLowerCase()]=u;f.platformFeature.datauri=!1;r=typeof Image!="undefined"?new Image:{};r.onload=function(){f.platformFeature.datauri=!0};r.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";if(k("IE7-"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}q=f.namespace(q);q.toString=function(){return t};return q.extend({testImage:r,prettyName:t,test:k,is:function(d){return k(d)},
Cookies:{set:function(d,y,i,a){document.cookie=d+"="+(y==null?"":escape(y))+";path="+(a||(location.pathname.indexOf("/")==0?"":"/")+location.pathname)+(i?";expires="+(new Date(Date.now()+i*1E3)).toGMTString():"")},get:function(d){return(d=document.cookie.match(RegExp("(^|;)\\s*"+d+"\\s*=\\s*(.*?)\\s*(;|$)")))&&unescape(d[2])},remove:function(d,y){document.cookie=d+"=;expires="+(new Date(0)).toGMTString()+";path="+(y||(location.pathname.indexOf("/")==0?"":"/")+location.pathname)}}})})(basis,this);
(function(f,o){function n(a,j,c){if(j!=null)return a.insertBefore(b(j)?j:v(j),c||null)}function k(a){return t("",a.cloneNode(!0)).innerHTML}function q(a){return b(a)||a&&a.nodeType?a:typeof a=="string"?d.getElementById(a):null}function p(b,j,c){var g,h=[],c=typeof c=="string"?getter(c):c||Function.$true;j&26&&c(b)&&h.push(b);switch(j){case 1:case 2:for(g=b;(g=g[l])&&g!==b.document;)c(g)&&h.push(g);break;case 64:for(g=b[y];g;)c(g)&&h.push(g),g=g[i];break;case 4:case 8:b[y]&&(j=new e(b),j.nodes(c,h));
break;case 128:j=new e(b,c);for(j.cursor_=b[i]||b[l];g=j.next();)h.push(g);break;case 256:for(g=b;g=g[i];)c(g)&&h.push(g);break;case 32:c(b[l])&&h.push(b[l]);break;case 512:j=new e(b,c,e.BACKWARD);for(j.cursor_=b[a]||b[l];g=j.next();)h.push(g);break;case 1024:for(g=b;g=g[a];)c(g)&&h.push(g)}return h}function v(a){return d.createTextNode(a!=null?a:"")}function r(){for(var a=d.createDocumentFragment(),b=arguments.length,j=r.array=[],c=0;c<b;c++)j.push(n(a,arguments[c]));return a}function t(a,b){var c=
a!=void 0&&typeof a!="string",e=(c?a.description:a)||"",h="div",i=e.match(/^([a-z0-9\_\-]+)(.*)$/i);i&&(h=i[1],e=i[2]);if(e!=""){for(var y=[],l={},s;i=z.exec(e);){if(i[8])throw Error("Create element error in basis.dom.createElement()\n\nDescription:\n> "+e+"\n\nProblem place:\n> "+e.substr(0,i.index)+"--\>"+e.substr(i.index)+"<--");s=i[1]||i[2]||i[3];i[1]?l.id=s:i[2]?y.push(s):s!="class"&&(l[s]=i[4]?x(i[5],i[6],i[7]):s)}g&&l.name&&/^(input|textarea|select)$/i.test(h)&&(h="<"+h+" name="+l.name+">")}e=
d.createElement(h);if(l){if(l.style&&j)e.style.cssText=l.style;for(var m in l)e.setAttribute(m,l[m],0)}if(y&&y.length)e.className=y.join(" ");arguments.length>1&&n(e,r.apply(0,Array.from(arguments,1).flatten()));if(c&&(a.css&&f.cssom&&f.cssom.setStyle(e,a.css),f.dom.event))for(var u in a)typeof a[u]=="function"?f.dom.event.addHandler(e,u,a[u],e):a[u]instanceof Event.Handler&&f.dom.event.addHandler(e,u,a[u].handler,a[u].thisObject);return e}function m(a,b){return a[l]?a[l].replaceChild(b,a):a}function w(a){if(d.selection){var b=
d.selection.createRange();b.compareEndPoints("StartToEnd",b)!=0&&b.collapse(a);return b.getBookmark().charCodeAt(2)-2}}var x=Object.coalesce,d=o.document,u=f.Class,s=d.createElement("div"),l="parentNode",y="firstChild",i="nextSibling",a="previousSibling",c;c=typeof s.compareDocumentPosition=="function"?function(a,b){return a.compareDocumentPosition(b)}:function(a,b){return a==b?0:a.document!=b.document?33:a.sourceIndex>b.sourceIndex?2|8*b.contains(childA):4|16*a.contains(childB)};var b;if(typeof Node!=
"undefined"){if(b=function(a){return a instanceof Node},!Node.prototype.contains)Node.prototype.contains=function(a){return!!(this.compareDocumentPosition(a)&16)}}else b=function(a){return a&&a.ownerDocument===d};var e=u(null,{root_:null,cursor_:null,filter:Function.$true,init:function(a,b,j){this.setRoot(a);this.setDirection(j);if(typeof b=="function")this.filter=b},setDirection:function(b){Object.extend(this,b?{a:"lastChild",b:a,c:i,d:y}:{a:y,b:i,c:a,d:"lastChild"})},setRoot:function(a){this.root_=
a||d;this.reset()},reset:function(){this.cursor_=null},first:function(a){this.reset();return this.next(a)},last:function(a){this.reset();return this.prev(a)},nodes:function(a,b){var j;b||(b=[]);for(this.reset();j=this.next(a);)b.push(j);return b},next:function(a){var a=a||this.filter,b=this.cursor_||this.root_;do for(var j=b[this.a];!j;){if(b===this.root_)return this.cursor_=null;(j=b[this.b])||(b=b[l])}while(!a(b=j));return this.cursor_=b},prev:function(a){var a=a||this.filter,b=this.cursor_,j=this.c,
c=this.d;do{var e=b?b[j]:this.root_[c];if(e){for(;e[c];)e=e[c];b=e}else b&&(b=b[l]);if(!b||b===this.root_){b=null;break}}while(!a(b));return this.cursor_=b},destroy:function(){this.cursor_=this.root_=null}});e.BACKWARD=!0;var h="textContent innerText nodeValue".qw(),g=function(){var a=d.createElement("input");a.name="a";return!/name/.test(k(a))}(),j;s.setAttribute("style","color: red");j=s.style.color!=="red";var z=/#([a-z0-9\_\-\:]+)|\.([a-z0-9\_\-\:]+)|\[([a-z0-9\_\-:]+)(="((?:\\.|[^"])*)"|='((?:\\.|[^'])*)'|=((?:\\.|[^\]])*))?\s*\]|\s*(\S)/gi;
return f.namespace("basis.dom").extend({ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_TYPE_NODE:10,DOCUMENT_NODE:9,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,AXIS_ANCESTOR:1,AXIS_ANCESTOR_OR_SELF:2,AXIS_DESCENDANT:4,AXIS_DESCENDANT_OR_SELF:8,AXIS_SELF:16,AXIS_PARENT:32,AXIS_CHILD:64,AXIS_FOLLOWING:128,AXIS_FOLLOWING_SIBLING:256,AXIS_PRESCENDING:512,AXIS_PRESCENDING_SIBLING:1024,INSERT_BEGIN:"begin",
INSERT_END:"end",INSERT_BEFORE:"before",INSERT_AFTER:"after",TreeWalker:e,outerHTML:k,textContent:function(a){for(var b=0,j;j=h[b++];)if(a[j]!=null)return a[j];return p(a,4,function(a){return a.nodeType==3}).map(getter("nodeValue")).join("")},get:q,tag:function(a,b){a=q(a)||d;return b=="*"&&a.all?Array.from(a.all):Array.from(a.getElementsByTagName(b||"*"))},axis:p,findAncestor:function(a,b,j){for(;a&&a!==j;){if(b(a))return a;a=a.parentNode}},createElement:t,createText:v,createFragment:r,insert:function(a,
j,c,e){a=q(a);if(!a)throw Error("basis.dom.insert: destination node can't be null");switch(c){case void 0:case "end":e=null;break;case "begin":e=a[y];break;case "before":break;case "after":e=e[i];break;default:e=Number(c).between(0,a.childNodes.length)?a.childNodes[c]:null}c=!b(a);if(!j||!Array.isArray(j))c=c?j&&a.insertBefore(j,e):n(a,j,e);else if(c)for(var c=[],g=0,h=j.length;g<h;g++)c[g]=a.insertBefore(j[g],e);else a.insertBefore(r.apply(0,j),e),c=r.array;return c},remove:function(a){return a[l]?
a[l].removeChild(a):a},replace:m,swap:function(a,b){if(a===b||c(a,b)&25)return!1;m(a,s);m(b,a);m(s,b);return!0},clone:function(a,b){var j=a.cloneNode(!b);j.attachEvent&&p(j,8).forEach(Event.clearHandlers);return j},clear:function(a){for(a=q(a);a.lastChild;)a.removeChild(a.lastChild);return a},wrap:function(a,b,j){var c=[],j=Function.getter(j||Function.$self),e;for(e in b)for(var g=0;g<a.length;g++){var h=j(a[g]);c[g]=b[e](a[g],g,h)?t(e,h):a[g]}return c},setAttribute:function(a,b,j){j==null?a.removeAttribute(b):
a.setAttribute(b,j)},parentOf:function(a,b){return a.contains(b)},isInside:function(a,b){return a==b||b.contains(a)},focus:function(a,b){try{a=q(a),a.focus(),b&&a.select&&a.select()}catch(j){}},setSelectionRange:function(a,b,j){arguments.length<3&&(j=b);if(a.setSelectionRange)a.setSelectionRange(b,j);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveStart("character",b);c.moveEnd("character",j-b);c.select()}},getSelectionStart:function(a){return typeof a.selectionStart!="undefined"?
a.selectionStart:w(!0)},getSelectionEnd:function(a){return typeof a.selectionEnd!="undefined"?a.selectionEnd:w(!1)}})})(basis,this);
(function(f,o){function n(a){return a||o.event}function k(a){return typeof a=="string"?x.get(a):a}function q(a){a=n(a);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function p(a){a=n(a);a.preventDefault?a.preventDefault():a.returnValue=!1}function v(a){var c=Array.from(l[a.type]);if(c)for(var b=c.length;b-- >0;){var e=c[b];e.handler.call(e.thisObject,a)}}function r(a,c,b,e){a=k(a);if(!a)throw Error("Event.addHandler: can't attach event listener to undefined");if(typeof b!="function")throw Error("Event.addHandler: handler must be a function");
a[u]||(a[u]={});var h={handler:b,thisObject:e},g=a[u],j=g[c];if(j){for(a=0;c=j[a];a++)if(c.handler===b&&c.thisObject===e)return;j.push(h)}else j=g[c]=[h],j.fireEvent=function(a){a=n(a);if(y&&a&&typeof a.returnValue=="undefined"){v(a);if(a.cancelBubble===!0)return;if(typeof a.returnValue=="undefined")a.returnValue=!0}for(var b=0,c;c=j[b++];)c.handler.call(c.thisObject,a)},a.addEventListener?a.addEventListener(c,j.fireEvent,!1):a.attachEvent("on"+c,j.fireEvent)}function t(a,c,b,e){var a=k(a),h=a[u];
if(h&&(h=h[c]))for(var g=0,j;j=h[g];g++)if(j.handler===b&&j.thisObject===e){h.splice(g,1);h.length||m(a,c);break}}function m(a,c){var a=k(a),b=a[u];if(b)if(typeof c!="string")for(c in b)m(a,c);else{var e=b[c];e&&(a.removeEventListener?a.removeEventListener(c,e.fireEvent,!1):a.detachEvent("on"+c,e.fireEvent),delete b[c])}}var w=o.document,x=f.dom,d=Function.$null,u="__basisEvents",s={mousewheel:["mousewheel","DOMMouseScroll"]},l={},y=!w.addEventListener,i=function(){function a(){c++||setTimeout(function(){for(var a=
0;a<b.length;a++)b[a].callback.call(b[a].thisObject)},10)}var c=!1,b=[];if(f.ua.is("ie7-"))(function(){var b="_"+Date.now();w.write('<script id="'+b+'" defer src="//:"><\/script>');k(b).onreadystatechange=function(){this.readyState=="complete"&&(x.remove(this),a())}})();else if(f.ua.is("safari525-"))var e=setInterval(function(){/loaded|complete/.test(w.readyState)&&(clearInterval(e),a())},15);else r(w,"DOMContentLoaded",a,!1);r(w,"load",a,!1);r(o,"load",a,!1);return function(a,e){c||b.push({callback:a,
thisObject:e})}}();return f.namespace("basis.dom.event",n).extend({KEY:{BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F5:116},MOUSE_LEFT:{VALUE:1,BIT:1},MOUSE_RIGHT:{VALUE:3,BIT:2},MOUSE_MIDDLE:{VALUE:2,BIT:4},browserEvents:function(a){return s[a]||[a]},Handler:function(a,c){this.handler=a;this.thisObject=c},sender:function(a){a=n(a);return a.target||a.srcElement},cancelBubble:q,
cancelDefault:p,kill:function(a,c){(c=k(c))?r(c,a,Event.kill):(p(a),q(a))},key:function(a){a=n(a);return a.keyCode||a.which||0},charCode:function(a){a=n(a);return a.charCode||a.keyCode||0},mouseButton:function(a,c){a=n(a);return typeof a.which=="number"?a.which==c.VALUE:a.button&c.BIT},mouseX:function(a){a=n(a);return a.changedTouches?a.changedTouches[0].pageX:"pageX"in a?a.pageX:a.clientX+(w.documentElement.scrollLeft||w.body.scrollLeft)},mouseY:function(a){a=n(a);return a.changedTouches?a.changedTouches[0].pageY:
"pageY"in a?a.pageY:a.clientY+(w.documentElement.scrollTop||w.body.scrollTop)},wheelDelta:function(a){a=n(a);return"wheelDelta"in a?a.wheelDelta/120:a.type=="DOMMouseScroll"?-a.detail/3:0},addGlobalHandler:function(a,c,b){var e=l[a];if(e)for(a=e.length;a-- >0;){var h=e[a];if(h.handler===c&&h.thisObject===b)return}else w.addEventListener?w.addEventListener(a,v,!0):r(w,a,d),e=l[a]=[];e.push({handler:c,thisObject:b})},removeGlobalHandler:function(a,c,b){var e=l[a];if(e)for(var h=0,g;g=e[h];h++)if(g.handler===
c&&g.thisObject===b){e.splice(h,1);e.length||(delete l[a],w.removeEventListener?w.removeEventListener(a,v,!0):t(w,a,d));break}},addHandler:r,addHandlers:function(a,c,b){var a=k(a),e;for(e in c)r(a,e,c[e],b)},removeHandler:t,clearHandlers:m,fireEvent:function(a,c){var a=k(a),b=a[u];b&&b[c]&&b[c].fireEvent()},onLoad:i,onUnload:function(a,c){r(o,"unload",a,c)}})})(basis,this);
(function(f,o){function n(a,b){return p(b,!0).getRule(a,!0)}function k(a,b){var j=a.match(/^([^{]+)\{(.*)\}\s*$/);if(j){for(var c=j[1].trim().split(/\s*,\s*/),e=0;e<c.length;e++)this.addRule(c[e],j[2]||null,b++);return b-1}}function q(a,b){var j=s.createElement(!a?'STYLE[type="text/css"]':'LINK[type="text/css"][rel="{alt}stylesheet"][href={url}]'.format({alt:b?"alternate ":"",url:a.quote('"')}));s.tag(null,"HEAD")[0].appendChild(j);j=j.sheet||j.styleSheet;try{if(!j.cssRules)j.cssRules=j.rules}catch(c){}if(!j.insertRule)j.insertRule=
k;if(!j.deleteRule)j.deleteRule=j.removeRule;return j}function p(a,j){a||(a="DefaultGenericStyleSheet");b[a]||j&&(b[a]=new g(q()));return b[a]}function v(a,b,j,c){for(var c=c||{},b=b.qw(),g=0,z;z=b[g];g++)if(typeof h.style[z]!="undefined"){j&&(f.platformFeature["css-"+a]=z);e[a]={key:z,getter:c[z]};break}}function r(a,b){var j=e[a];if(a=j?j.key:a.replace(/^-ms-/,"ms-").camelize())return{key:a,value:j&&j.getter?j.getter(b):b}}function t(a,b,j){if(typeof a.setProperty=="function")return a.setProperty(b,
j);if(b=r(b,j))return a.style[b.key]=b.value}function m(a,b){for(var j in b)t(a,j,b[j]);return a}function w(a,b){return t(a,"display",typeof b=="string"?b:b?"":"none")}function x(a,b){return t(a,"visibility",b?"":"hidden")}function d(a){return C[a]||(C[a]=RegExp("\\s*\\b"+a+"\\b"))}var u=o.document,s=f.dom,l=f.dom.event,y=f.Class,i=/\s*!important/i,a=String("important"),c=1,b={},e={},h=s.createElement("DIV");v("opacity","opacity MozOpacity KhtmlOpacity filter",!0,{fitler:function(a){return"alpha(opacity:"+
parseInt(a*100)+")"}});v("border-radius","borderRadius MozBorderRadius WebkitBorderRadius",!0);v("float","cssFloat styleFloat");var g=y(null,{styleSheet:null,rules:null,init:function(a){this.styleSheet=a;this.rules=[];this.map_={}},getRule:function(a,b){if(!this.map_[a]&&b){for(var c=this.styleSheet,e=this.rules.length,g=c.insertRule(a+"{}",e),h=e;h<=g;h++)this.rules.push(new j(c.cssRules[h]));this.map_[a]=e!=g?new z(this.rules.splice(e)):this.rules[e]}return this.map_[a]},deleteRule:function(a){var b=
this.map_[a];if(b){for(var b=b.rules||[b],j=0;j<b.length;j++){var c=this.rules.indexOf(b[j]);this.stylesheet.deleteRule(c);this.rules.splice(c,1)}delete this.map_[a]}},destroy:function(){delete this.rules}}),j=y(null,{rule:null,selector:"",init:function(a){if(a)this.rule=a,this.selector=a.selectorText},setProperty:function(b,j){var c,e=!!i.test(j),g=this.rule.style;if(e||g.getPropertyPriority&&g.getPropertyPriority(b)==a){if(j=j.replace(i,""),c=r(b,j)){var h=c.key;g.setProperty?(e||g.removeProperty(h),
g.setProperty(h,c.value,e?a:"")):g.cssText=g.cssText.replace(RegExp(g[h]?h+"\\s*:\\s*"+g[h]+"(\\s*!"+a+")?\\s*;?":"^","i"),h+": "+c.value+(e?" !"+a:"")+";")}}else t(this.rule,b,j)},setStyle:function(a){Object.iterate(a,this.setProperty,this)},clear:function(){this.rule.style.cssText=""},destroy:function(){delete this.rule}}),z=y(null,{rules:null,init:function(a){this.rules=a},destroy:function(){delete this.rules}});["setProperty","setStyle","clear"].forEach(function(a){z.prototype[a]=function(){for(var b,
j=0;b=this.rules[j];j++)b[a].apply(b,arguments)}});var A={};["em","ex","px","%"].forEach(function(a){A[a=="%"?"percent":a]=function(b){return b==0||isNaN(b)?"0":b+a}});var D,C={},B=y(null,{init:function(a){this.element=a},toString:function(){return this.element.className},set:function(a){this.clear();a.qw().forEach(this.add,this)},replace:function(a,b,j){j=j||"";typeof a!="undefined"&&this.remove(j+a);typeof b!="undefined"&&this.add(j+b)},bool:function(a,b){b?this.add(a):this.remove(a)},clear:function(){this.element.className=
""},contains:function(a){return!!this.element.className.match(d(a))},item:function(a){return this.element.className.qw()[a]},add:function(a){this.element.className.match(d(a))||(this.element.className+=" "+a)},remove:function(a){var b=this.element.className,a=b.replace(d(a),"");if(a!=b)this.element.className=a},toggle:function(a){var b=this.contains(a);b?this.remove(a):this.add(a);return!b}});o.DOMTokenList&&u.documentElement.classList?(y=B.prototype,Object.extend(o.DOMTokenList.prototype,{set:y.set,
replace:y.replace,bool:y.bool,clear:function(){for(var a=this.length;a-- >0;)this.remove(this[a])}}),D=function(a){return(typeof a=="string"?s.get(a):a).classList}):D=function(a){return new B(typeof a=="string"?s.get(a):a)};l.onLoad(function(){D(u.body).bool("opacity-not-support",!f.platformFeature["css-opacity"])});s.extend({setStyleProperty:t,setStyle:m,display:w,show:function(a){return w(a,1)},hide:function(a){return w(a)},visibility:x,visible:function(a){return x(a,1)},invisible:function(a){return x(a)}});
return f.namespace("basis.cssom").extend({setStyleProperty:t,setStyle:m,classList:D,uniqueRule:function(a){var b="genericRule-"+c++;a&&D(a).add(b);a=n("."+b);a.token=b;return a},cssRule:n,getStyleSheet:p,addStyleSheet:q,CssStyleSheetWrapper:g,CssRuleWrapper:j,CssRuleWrapperSet:z}).extend(A)})(basis,this);
(function(f,o){function n(a,b,e,h){for(var b=b.split(/\{([a-z0-9\_]+(?:\|[^}]*)?)\}/i),g=l(),j,z=0;z<b.length;z++)z%2?(j=b[z].split(/\|/),a.getters[j[0]]=e+"childNodes["+h+"]",j=j.length>1?j[1]:j[0]):j=b[z].length?b[z]:null,j!=null&&(s&&(g.lastChild&&g.appendChild(r.createComment("")),h++),g.appendChild(y(j)),h++);return g}function k(a){return function(b){if(!b||!(b.type=="click"&&b.which==3)){var e=f.dom.event.sender(b),h,g;do if(h=e.getAttributeNode&&e.getAttributeNode(a))break;while(e=e.parentNode);
if(e&&h){do if(g=e.basisObjectId)if((g=x[g])&&g.templateAction){e=h.nodeValue.qw();h=0;for(var j;j=e[h++];)g.templateAction(j,f.dom.event(b));break}while(e=e.parentNode)}}}}function q(a,b,e){b=b.trim();if(!b)return"";for(var h="",g;g=u.exec(b);){var j=g[2],z=g[4]||g[5]||j;g[3]&&(a.getters[g[3]]=e+'.getAttributeNode("'+j+'")');if(g=j.match(/^event-([a-z]+)/i)){var A=g[1];if(!w[A]){w[A]=!0;g=0;for(var A=f.dom.event.browserEvents(A),d;d=A[g++];)f.dom.event.addGlobalHandler(d,k(j))}if(!window.__basis_emitEvent)window.__basis_emitEvent=
function(a,b){var a=f.dom.event(a),j=this,c;do if(c=j.basisObjectId)if((c=x[c])&&c.templateAction){for(var j=b.qw(),e=0,g;g=j[e++];)c.templateAction(g,f.dom.event(a));break}while(j=j.parentNode)}}h+=j=="class"?z.trim().replace(/^(.)|\s+/g,".$1"):"["+j+(z?"="+z.quote('"'):"")+"]"}return h}function p(a,b){if(!a.stack)a.stack=[];if(!a.source)a.source=a.str;b||(b=".");for(var e=l(),h,g=0,j,z=a.stack;j=d.exec(a.str);){h=RegExp.leftContext;a.str=a.str.substr(h.length+j[0].length);if(h.length)e.appendChild(n(a,
h,b,g)),g=e.childNodes.length;if(j[5])if(j[5]==z[z.length-1])return z.pop(),e;else throw"Wrong end tag";if(j[6])j[7]&&(a.getters[j[7]]=b+"childNodes["+g+"]"),e.appendChild(r.createComment(j[6]));else{h=j[1];var A=j[2],i=!!j[4],y=b+"childNodes["+g+"]";j=t.createElement(h+q(a,j[3],y));A&&(a.getters[A]=y);i||(z.push(h),j.appendChild(p(a,y+".")));e.appendChild(j)}g++}a.str.length&&e.appendChild(n(a,a.str,b,g));if(z.length)throw"No end tag for "+z.reverse();return e}function v(a){if(!this.proto){a=this.source;
if(typeof a=="function")this.source=a=a();for(var a=a.trim(),a={str:a,getters:{element:".childNodes[0]"}},b=p(a),a=Object.iterate(a.getters,function(a,j){for(var c=a.split(/\|/).map(String.format,"obj_.{0}"),e=j.split(/(\.?childNodes\[(\d+)\])/),g=b,h=0;h<e.length;h+=3){var d=e[h+2];if(!d)break;e[h+2]="";g=g.childNodes[d];g.previousSibling?g.nextSibling||(e[h+1]=".lastChild"):e[h+1]=".firstChild"}return{name:c[0],alias:c.join("="),path:"dom_"+e.join("")}}).sortAsObject("path"),e=0;e<a.length;e++)for(var h=
RegExp("^"+a[e].path.forRegExp()),g=e+1,j;j=a[g++];)j.path=j.path.replace(h,a[e].name);this.createInstance=(new Function("proto_","map_","var obj_, dom_; return "+function(a,b){obj_=a||{};dom_=proto_.cloneNode(!0);_code_();if(b&&obj_.element){var j=obj_.element.basisObjectId=map_.seed++;map_[j]=b}return obj_}.toString().replace("_code_()",a.map(String.format,"{alias}={path};\n").join(""))))(b,x);this.clearInstance=(new Function("map_","var obj_; return "+function(a){obj_=a;(a=obj_.element&&obj_.element.basisObjectId)&&
delete map_[a];_code_()}.toString().replace("_code_()",a.map(String.format,"{alias}=null;\n").join(""))))(x)}}var r=o.document,t=f.dom,m=f.Class,w={},x={seed:1},d=/<([a-z0-9\_]+)(?:\{([a-z0-9\_\|]+)\})?([^>]*?)(\/?)>|<\/([a-z0-9\_]+)>|<\!--(\s*\{([a-z0-9\_\|]+)\}\s*|.*?)--\>/i,u=/(?:([a-z0-9\_\-]+):)?([a-z0-9\_\-]+)(?:\{([a-z0-9\_\|]+)\})?(?:="((?:\\.|[^"])*?)"|='((?:\\.|[^'])*?)')?\s*/gi;t.createFragment();var s=t.createElement("","a","b").cloneNode(!0).childNodes.length==1,l=t.createFragment,y=
t.createText,i=m(null,{__extend__:function(a){return a instanceof i?a:new i(a)},init:function(a){this.source=a},createInstance:function(a,b){v.call(this);return this.createInstance(a,b)},clearInstance:function(){v.call(this)}}),a=r.createElement("DIV");return f.namespace("basis.html").extend({Template:i,escape:function(a){return t.createElement("DIV",t.createText(a)).innerHTML},unescape:function(c){a.innerHTML=c;return a.firstChild.nodeValue},string2Html:function(c){a.innerHTML=c;return t.createFragment.apply(null,
Array.from(a.childNodes))}})})(basis,this);
(function(){function f(a,b,c){for(var e=1,g;b;)b&1&&(g=u[e],c&e?(a.addHandler(g.handler,g.context),g.action(g.context.add,a)):(a.removeHandler(g.handler,g.context),g.action(g.context.remove,a))),b>>=1,e<<=1}function o(a,b){var e={},c;if(a&&a.length)c=e.inserted=a;if(b&&b.length)c=e.deleted=b;if(c)return e}function n(a){return Array.isArray(a)?a.map(n):{data:a}}var k=basis.Class,q=basis.EventObject,p=Object.values,v=Function.$self,r=Function.$true,t=Function.$false,m=q.createEvent,w=q.event,x={},d=
[],u={},s=1,l={NONE:0,MASK:0,regType:function(a,b,e){u[s]={handler:b,action:e,context:{add:function(b,e){if(e){var c=l[a]+"_"+b.eventObjectId;if(!e.subscribers_)e.subscribers_={};if(!e.subscribers_[c]){var g=e.subscriberCount;e.subscribers_[c]=b;e.subscriberCount+=1;e.event_subscribersChanged(e,g)}}},remove:function(b,e){if(e){var c=l[a]+"_"+b.eventObjectId;if(e.subscribers_[c]){var g=e.subscriberCount;delete e.subscribers_[c];e.subscriberCount-=1;e.event_subscribersChanged(e,g)}}}}};l[a]=s;l.MASK|=
s;s<<=1}};l.regType("DELEGATE",{delegateChanged:function(a,b){this.remove(a,b);this.add(a,a.delegate)}},function(a,b){a(b,b.delegate)});l.regType("TARGET",{targetChanged:function(a,b){this.remove(a,b);this.add(a,a.target)}},function(a,b){a(b,b.target)});l.regType("SOURCE",{sourceChanged:function(a,b){this.remove(a,b);this.add(a,a.source)},sourcesChanged:function(a,b){var e;if(e=b.inserted)for(var c=e.length;c-- >0;)this.add(a,e[c]);if(e=b.deleted)for(c=e.length;c-- >0;)this.remove(a,e[c])}},function(a,
b){for(var e=b.sources||[b.source],c=0,g;g=e[c++];)a(b,g)});var y=k(q,{state:"ready",data:null,canHaveDelegate:!0,delegate:null,root:null,cascadeDestroy:!1,isTarget:!1,target:null,active:!1,subscribeTo:l.DELEGATE+l.TARGET,subscriberCount:0,subscribers_:null,event_update:m("update","object","delta"),event_stateChanged:m("stateChanged","object","oldState"),event_delegateChanged:m("delegateChanged","object","oldDelegate"),event_rootChanged:m("rootChanged","object","oldRoot"),event_targetChanged:m("targetChanged",
"object","oldTarget")&&function(a,b){var e=this.listen.target;e&&(b&&b.removeHandler(e,this),this.target&&this.target.addHandler(e,this));w.targetChanged.call(this,a,b)},event_subscribersChanged:m("subscribersChanged","object"),event_activeChanged:m("activeChanged","object"),listen:{delegate:{update:function(a,b){this.data=a.data;this.event_update(this,b)},stateChanged:function(a,b){this.state=a.state;this.event_stateChanged(this,b)},targetChanged:function(a,b){this.target=a.target;this.event_targetChanged(this,
b)},rootChanged:function(a,b){this.data=a.data;this.event_rootChanged(this,b)},destroy:function(){this.cascadeDestroy?this.destroy():this.setDelegate()}}},init:function(a){q.prototype.init.call(this,a);if(a=this.delegate)this.delegate=null,this.data=a.data,this.state=a.state,this.setDelegate(a);else{this.root=this;if(!this.data)this.data={};if(this.isTarget)this.target=this}this.active&&f(this,this.subscribeTo,l.MASK)},isConnected:function(a){if(a instanceof y){for(;a&&a!==this&&a!==a.delegate;)a=
a.delegate;return a===this}return!1},getRootDelegate:function(){for(var a=this;a.delegate&&a.delegate!==a;)a=a.delegate;return a},setDelegate:function(a){if(this.canHaveDelegate&&a&&a instanceof y){if(a.delegate&&this.isConnected(a))return!1}else a=null;if(this.delegate!==a){var b=this.state,e=this.data,c=this.delegate,g=this.target,h=this.root,d={};c&&c.removeHandler(this.listen.delegate,this);if(a){this.delegate=a;this.root=a.root;this.data=a.data;this.state=a.state;this.target=a.target;a.addHandler(this.listen.delegate,
this);for(var i in a.data)i in e===!1&&(d[i]=void 0);for(i in e)e[i]!==a.data[i]&&(d[i]=e[i])}else for(i in this.target=this.delegate=null,this.root=this,this.data={},e)this.data[i]=e[i];this.event_delegateChanged(this,c);this.root!==h&&this.event_rootChanged(this,h);this.target!==g&&this.event_targetChanged(this,g);if(a){for(i in d){this.event_update(this,d);break}b!==this.state&&(String(b)!=this.state||b.data!==this.state.data)&&this.event_stateChanged(this,b)}return!0}return!1},setState:function(a,
b){var e=this.target||this.getRootDelegate();if(e!==this)return e.setState(a,b);return this.state!=String(a)||this.state.data!=b?(e=this.state,this.state=Object(String(a)),this.state.data=b,this.event_stateChanged(this,e),!0):!1},deprecate:function(){this.state!="processing"&&this.setState("deprecated")},update:function(a){var b=this.target||this.getRootDelegate();if(b!==this)return b.update(a);if(a){var b={},e=0,c;for(c in a)this.data[c]!==a[c]&&(e++,b[c]=this.data[c],this.data[c]=a[c]);if(e)return this.event_update(this,
b),b}return!1},setActive:function(a){a=!!a;return this.active!=a?(this.active=a,this.event_activeChanged(this),f(this,this.subscribeTo,l.MASK*a),!0):!1},setSubscription:function(a){a&=l.MASK;var b=this.subscribeTo^a;return b?(this.subscribeTo=a,this.active&&f(this,b,a),!0):!1},destroy:function(){this.active&&f(this,this.subscribeTo,0);this.delegate&&this.setDelegate();q.prototype.destroy.call(this);this.data=x;this.state="undefined";this.target=this.root=null}}),i=k(null,{itemClass:y,keyGetter:v,
map_:null,extendConstructor_:!0,init:function(){this.map_={};basis.Cleaner.add(this)},resolve:function(a){return this.get(this.keyGetter(a),a)},create:function(a){var b={};a instanceof y?b.delegate=a:b.data={id:a,title:a};return new this.itemClass(b)},get:function(a,b){var e=a instanceof y?a.eventObjectId:a,c=this.map_[e];!c&&b&&(c=this.map_[e]=this.create(a,b),c.addHandler({destroy:function(){delete this.map_[e]}},this));return c},destroy:function(){basis.Cleaner.remove(this);for(var a=p(this.map_),
b=0,e;e=a[b++];)e.destroy()}}),a=k(y,{state:"undefined",itemCount:0,item_:null,memberMap_:null,cache_:null,event_datasetChanged:m("datasetChanged","dataset","delta")&&function(a,b){var e,c=0,g=0,h;if(e=b.inserted)for(;h=e[c];)this.item_[h.eventObjectId]=h,c++;if(e=b.deleted)for(;h=e[g];)delete this.item_[h.eventObjectId],g++;this.itemCount+=c-g;this.cache_=null;w.datasetChanged.call(this,a,b)},init:function(a){y.prototype.init.call(this,a);this.memberMap_={};this.item_={}},has:function(a){return!(!a||
!this.item_[a.eventObjectId])},getItems:function(){if(!this.cache_)this.cache_=p(this.item_);return this.cache_},pick:function(){for(var a in this.item_)return this.item_[a];return null},top:function(a){var b=[];if(a)for(var e in this.item_)if(b.push(this.item_[e])>=a)break;return b},add:function(){},remove:function(){},set:function(){},sync:function(){},clear:function(){},destroy:function(){this.clear();y.prototype.destroy.call(this);this.cache_=d;this.itemCount=0;this.item_=this.memberMap_=null}}),
c=k(a,{listen:{item:{destroy:function(a){this.memberMap_[a.eventObjectId]&&this.remove([a])}}},init:function(b){a.prototype.init.call(this,b);if(b=this.items)this.set(b),this.items=null},add:function(a){for(var b,e=this.memberMap_,c=[],g=0;g<a.length;g++){var h=a[g];if(h instanceof y){var d=h.eventObjectId;e[d]||(e[d]=h,h.addHandler(this.listen.item,this),c.push(h))}}c.length&&this.event_datasetChanged(this,b={inserted:c});return b},remove:function(a){for(var b,e=this.memberMap_,c=[],g=0;g<a.length;g++){var h=
a[g];if(h instanceof y){var d=h.eventObjectId;e[d]&&(h.removeHandler(this.listen.item,this),delete e[d],c.push(h))}}c.length&&this.event_datasetChanged(this,b={deleted:c});return b},set:function(a){if(!this.itemCount)return this.add(a);if(!a.length)return this.clear();for(var b=this.memberMap_,e={},c=[],g=[],h,d,i,l=0;l<a.length;l++)if(h=a[l],h instanceof y)d=h.eventObjectId,e[d]=h,b[d]||(b[d]=h,h.addHandler(this.listen.item,this),g.push(h));for(d in b)e[d]||(h=b[d],h.removeHandler(this.listen.item,
this),delete b[d],c.push(h));(i=o(g,c))&&this.event_datasetChanged(this,i);return i},sync:function(a,b){if(a){c.setAccumulateState(!0);for(var e=this.memberMap_,g,h,B={},d=[],i,l=0;l<a.length;l++)if(g=a[l],g instanceof y)h=g.eventObjectId,B[h]=g,e[h]||d.push(g);for(h in this.item_)B[h]||this.item_[h].destroy();b&&d.length&&(i=this.add(d));c.setAccumulateState(!1);return i}},clear:function(){var a,b=this.getItems();if(b.length){for(a=b.length;a-- >0;)b[a].removeHandler(this.listen.item,this);this.event_datasetChanged(this,
a={deleted:b});this.memberMap_={}}return a}});c.setAccumulateState=function(){function b(a){var e=a.dataset;h.call(e,e,a)}function e(a,c){var g=a.eventObjectId,d=c.inserted,B=c.deleted,A=y[g];if(d&&B)return A&&(delete y[g],b(A)),h.call(a,a,c);if(A){var z=A[d?"inserted":"deleted"];if(z)return z.push.apply(z,d||B);else b(A)}y[g]=c;c.dataset=a}function c(){d=1;setAccumulateState(!1)}var g=a.prototype,h=g.event_datasetChanged,d=0,i,y={};return function(a){if(a){if(d==0)g.event_datasetChanged=e,i=setTimeout(c,
0);d++}else if(d-=d>0,d==0)clearTimeout(i),g.event_datasetChanged=h,a=y,y={},p(a).forEach(b)}}();var b=k(a,{subscribeTo:l.SOURCE,event_sourcesChanged:m("sourcesChanged","dataset","delta"),sources:null,rule:function(a){return a>0},listen:{source:{datasetChanged:function(a,b){var e=this.memberMap_,c={},g,h;if(b.inserted)for(var d=0;g=b.inserted[d];d++)h=g.eventObjectId,e[h]?e[h].count++:e[h]={count:1,object:g},c[h]=e[h];if(b.deleted)for(d=0;g=b.deleted[d];d++)h=g.eventObjectId,c[h]=e[h],e[h].count--;
this.applyRule(c)},destroy:function(a){this.removeSource(a)}}},init:function(b){a.prototype.init.call(this,b);b=this.sources;this.sources=[];b&&b.forEach(this.addSource,this)},setRule:function(a){if(typeof a!="function")a=b.UNION;if(this.rule!==a)this.rule=a,this.applyRule()},applyRule:function(a){var b=this.memberMap_,e=this.rule,c=this.sources.length,g=[],h=[],d,i,y;a||(a=b);for(var l in a)d=b[l],i=c&&d.count&&e(d.count,c),i!=!!this.item_[l]&&(i?g:h).push(d.object),d.count==0&&delete b[l];(y=o(g,
h))&&this.event_datasetChanged(this,y)},addSource:function(b){if(b instanceof a&&this.sources.add(b)){b.addHandler(this.listen.source,this);var e=this.memberMap_,c;for(c in b.item_)e[c]?e[c].count++:e[c]={count:1,object:b.item_[c]};this.applyRule();this.event_sourcesChanged(this,{inserted:[b]});return!0}},removeSource:function(a){if(this.sources.remove(a)){a.removeHandler(this.listen.source,this);var b=this.memberMap_,e;for(e in a.item_)b[e].count--;this.applyRule();this.event_sourcesChanged(this,
{deleted:[a]});return!0}},setSources:function(b){for(var e=Array.from(this.sources),c=0,g;g=b[c];c++)g instanceof a&&(e.remove(g)||this.addSource(g));e.forEach(this.removeSource,this)},clear:function(){Array.from(this.sources).forEach(this.removeSource,this)},destroy:function(){a.prototype.destroy.call(this);this.sources=null}});b.UNION=b.prototype.rule;b.INTERSECTION=function(a,b){return a==b};b.DIFFERENCE=function(a){return a==1};b.MORE_THAN_ONE_INCLUDE=function(a,b){return b==1||a>1};b.AT_LEAST_ONE_EXCLUDE=
function(a,b){return b==1||a<b};var e=function(a){return!this.has(a)},h=k(a,{minuend:null,subtrahend:null,listen:{minuend:{datasetChanged:function(a,b){if(this.subtrahend){var c=o(b.inserted&&b.inserted.filter(e,this.subtrahend),b.deleted&&b.deleted.filter(this.has,this));c&&this.event_datasetChanged(this,c)}},destroy:function(){this.setOperands(null,this.subtrahend)}},subtrahend:{datasetChanged:function(a,b){if(this.minuend){var c=o(b.deleted&&b.deleted.filter(e,this),b.inserted&&b.inserted.filter(this.has,
this));c&&this.event_datasetChanged(this,c)}},destroy:function(){this.setOperands(this.minuend,null)}}},init:function(b){a.prototype.init.call(this,b);var b=this.minuend,e=this.subtrahend;this.subtrahend=this.minuend=null;(b||e)&&this.setOperands(b,e)},setOperands:function(b,e){var c;b instanceof a==!1&&(b=null);e instanceof a==!1&&(e=null);var g=this.minuend,h=this.subtrahend;if(g!==b)g&&g.removeHandler(this.listen.minuend,this),(this.minuend=b)&&b.addHandler(this.listen.minuend,this);if(h!==e)h&&
h.removeHandler(this.listen.subtrahend,this),(this.subtrahend=e)&&e.addHandler(this.listen.subtrahend,this);if(!b||!e)this.itemCount&&this.event_datasetChanged(this,c={deleted:this.getItems()});else{var g=[],h=[],d;for(d in this.item_)(!b.item_[d]||e.item_[d])&&g.push(this.item_[d]);for(d in b.item_)!this.item_[d]&&!e.item_[d]&&h.push(b.item_[d]);(c=o(h,g))&&this.event_datasetChanged(this,c)}return c},clear:function(){this.setOperands()}}),g=k(a,{source:null,event_sourceChanged:m("sourceChanged",
"dataset","oldSource"),map:v,reduce:t,rule:t,addMemberRef:null,removeMemberRef:null,sourceMap_:null,listen:{sourceObject:{update:function(a){var b=this.map?this.map(a):a;if(b instanceof y==!1||this.reduce(b))b=null;var e=this.sourceMap_[a.eventObjectId],c=e.member;if(c!=b){var g=this.memberMap_,h,d,i;e.member=b;if(c)e=c.eventObjectId,this.removeMemberRef&&this.removeMemberRef(c,a),--g[e]==0&&(delete g[e],i=[c]);if(b)c=b.eventObjectId,this.addMemberRef&&this.addMemberRef(b,a),g[c]?g[c]++:(g[c]=1,d=
[b]);(h=o(d,i))&&this.event_datasetChanged(this,h)}}},source:{datasetChanged:function(a,b){var e=this.sourceMap_,g=this.memberMap_,h=[],d=[],i,l,s;c.setAccumulateState(!0);if(b.inserted)for(var f=0;i=b.inserted[f];f++){s=this.map?this.map(i):i;if(s instanceof y==!1||this.reduce(s))s=null;i.addHandler(this.listen.sourceObject,this);e[i.eventObjectId]={sourceObject:i,member:s};if(s)l=s.eventObjectId,g[l]?g[l]++:(g[l]=1,h.push(s)),this.addMemberRef&&this.addMemberRef(s,i)}if(b.deleted)for(f=0;i=b.deleted[f];f++)if(l=
i.eventObjectId,s=e[l].member,i.removeHandler(this.listen.sourceObject,this),delete e[l],s)l=s.eventObjectId,--g[l]==0&&(delete g[l],d.push(s)),this.removeMemberRef&&this.removeMemberRef(s,i);c.setAccumulateState(!1);(b=o(h,d))&&this.event_datasetChanged(this,b)},destroy:function(){this.setSource()}}},init:function(b){a.prototype.init.call(this,b);this.sourceMap_={};if(b=this.source)this.source=null,this.setSource(b)},setRule:function(a){typeof a!="function"&&(a=r);if(this.rule!==a)return this.rule=
a,this.applyRule()},setMap:function(a){typeof a!="function"&&(a=v);if(this.map!==a)return this.map=a,this.applyRule()},setSource:function(b){b instanceof a==!1&&(b=null);if(this.source!==b){var e=this.source;e&&(e.removeHandler(this.listen.source,this),this.listen.source.datasetChanged.call(this,e,{deleted:e.getItems()}));if(this.source=b)b.addHandler(this.listen.source,this),this.listen.source.datasetChanged.call(this,b,{inserted:b.getItems()});this.event_sourceChanged(this,e)}},applyRule:function(){var a=
this.sourceMap_,b=this.memberMap_,e,c,g,h,d,i=[],l=[],s,f;for(f in a){d=a[f];h=d.sourceObject;e=d.member;c=this.map?this.map(h):h;if(c instanceof y==!1||this.reduce(c))c=null;if(e!=c){d.member=c;if(e)g=e.eventObjectId,this.removeMemberRef&&this.removeMemberRef(e,h),b[g]--;if(c)e=c.eventObjectId,this.addMemberRef&&this.addMemberRef(c,h),e in b?b[e]++:(b[e]=1,i.push(c))}}for(g in this.item_)b[g]==0&&(delete b[g],l.push(this.item_[g]));(s=o(i,l))&&this.event_datasetChanged(this,s);return s},clear:function(){this.setSource()},
destroy:function(){a.prototype.destroy.call(this);this.sourceMap_=null}}),t=k(g,{reduce:function(a){return!this.rule(a)},rule:r}),k=k(g,{map:function(a){return this.keyMap.resolve(a)},rule:r,subsetClass:a,keyMap:null,addMemberRef:function(a,b){a.event_datasetChanged(a,{inserted:[b]})},removeMemberRef:function(a,b){a.event_datasetChanged(a,{deleted:[b]})},init:function(a){if(!this.keyMap||this.keyMap instanceof i==!1)this.keyMap=new i(Object.extend({keyGetter:this.rule,itemClass:this.subsetClass},
this.keyMap));g.prototype.init.call(this,a)},getSubset:function(a,b){return this.keyMap.get(a,b)},destroy:function(){g.prototype.destroy.call(this);this.keyMap.destroy();this.keyMap=null}});Object.extend(c,{Merge:b,Subtract:h,MapReduce:g,Subset:t,Split:k});basis.namespace("basis.data",n).extend({STATE:{UNDEFINED:"undefined",READY:"ready",PROCESSING:"processing",ERROR:"error",DEPRECATED:"deprecated"},Subscription:l,Object:y,DataObject:y,KeyObjectMap:i,AbstractDataset:a,Dataset:c,AggregateDataset:b,
Collection:t,Grouping:k});basis.namespace("basis.data.dataset").extend({Merge:b,Subtract:h,MapReduce:g,Subset:t,Split:k})})();
(function(f){function o(a){return a.sortingValue||0}function n(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return+(a>b)||-(a<b)}function k(a,b){a=a.sortingValue||0;b=b.sortingValue||0;return-(a>b)||+(a<b)}function q(a){return a.childNodes.sort(a.localSortingDesc?k:n)}function p(a,b){a.childNodes=b;a.firstChild=b[0]||null;a.lastChild=b[b.length-1]||null;for(var e=b.length-1;e>=0;e--)b[e].nextSibling=b[e+1]||null,b[e].previousSibling=b[e-1]||null,a.insertBefore(b[e],b[e].nextSibling)}function v(a,
b){var e=a.childFactory||a.document&&a.document.childFactory,c,b=Object.extend({document:a.document,contextSelection:a.selection||a.contextSelection},b);if(e&&(c=e.call(a,b),c instanceof a.childClass))return c;if(!c)throw"basis.dom.wrapper: Child node is null";throw"basis.dom.wrapper: Child node has wrong class (expected "+(a.childClass&&a.childClass.className)+" but "+(c&&c.constructor&&c.constructor.className)+")";}var r=f.Class,t=f.dom,m=f.data,w=f.html.Template,x=m.Subscription,d=m.DataObject,
u=m.AbstractDataset,s=m.Dataset,l=f.Cleaner,y=t.AXIS_DESCENDANT,i=t.AXIS_DESCENDANT_OR_SELF,a=Function.getter,c=Object.complete,b=f.cssom.classList,e=t.axis,h=f.EventObject.createEvent,g=f.EventObject.event;x.regType("DATASOURCE",{dataSourceChanged:function(a,b){this.remove(a,b);this.add(a,a.dataSource)}},function(a,b){a(b,b.dataSource)});var j=r.ExtensibleProperty(),z={ownerChanged:function(){},destroy:function(a){t.replace(a.element,this)}},A=function(){var a=this.key,b=this.config,e=this.owner,
c=typeof b.existsIf!="function"||b.existsIf(e),g=e.satellite[a];if(c){var c="delegate"in b,h="dataSource"in b,j=typeof b.delegate=="function"?b.delegate(e):null,d=typeof b.dataSource=="function"?b.dataSource(e):null;if(g)c&&g.setDelegate(j),h&&g.setDataSource(d);else{var i=e.tmpl[b.replace||a],g={owner:e};if(c)g.delegate=j;if(h)g.dataSource=d;b.config&&Object.complete(g,typeof b.config=="function"?b.config(e):b.config);g=new b.instanceOf(g);e.satellite[a]=g;i&&g instanceof J&&g.element&&(t.replace(i,
g.element),g.addHandler(z,i))}}else if(g)g.destroy(),g.owner=null,delete e.satellite[a]},D=r.CustomExtendProperty({update:!0},function(a,b){for(var e in b)a[e]=b[e]?A:null}),C=r(d,{event_update:function(a,b){d.prototype.event_update.call(this,a,b);var e=this.parentNode;e&&(e.matchFunction&&(this.match(),this.match(e.matchFunction)),e.insertBefore(this,this.nextSibling))},event_childNodesModified:h("childNodesModified","node","delta"),event_dataSourceChanged:h("dataSourceChanged","node","oldDataSource"),
event_localGroupingChanged:h("localGroupingChanged","node","oldGroupingNode"),event_localSortingChanged:h("localSortingChanged","node"),event_ownerChanged:h("ownerChanged","node","oldOwner"),event_satellitesChanged:h("satellitesChanged","node","delta"),subscribeTo:d.prototype.subscribeTo+x.DATASOURCE,listen:{owner:{destroy:function(){this.setOwner()}}},autoDelegateParent:!1,nodeType:"DOMWrapperNode",canHaveChildren:!1,childNodes:null,dataSource:null,colMap_:null,destroyDataSourceMember:!0,document:null,
parentNode:null,nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,localSorting:null,localSortingDesc:!1,localGrouping:null,localGroupingClass:null,groupNode:null,satelliteConfig:j,satellite:null,owner:null,init:function(a){var b=this.dataSource,e=this.childNodes,c=this.localGrouping;if(b)this.dataSource=null;d.prototype.init.call(this,a);if(c)this.localGrouping=null,this.setLocalGrouping(c);if(this.canHaveChildren)this.childNodes=[],b?(this.dataSource=null,this.setDataSource(b)):
e&&this.setChildNodes(e);else{if(e)this.childNodes=null;if(b)this.dataSource=null}if(!this.satellite)this.satellite={};if(this.satelliteConfig!==j)for(var g in this.satelliteConfig)if(a=this.satelliteConfig[g],r.isClass(a)&&(a={instanceOf:a}),typeof a=="object"){b={key:g,owner:this,config:a};a=a.hook?D.__extend__(a.hook):D;for(g in a)if(a[g]===A){this.addHandler(a,b);break}A.call(b)}if(g=this.owner)this.owner=null,this.setOwner(g)},appendChild:function(){},insertBefore:function(){},removeChild:function(){},
replaceChild:function(){},clear:function(){},hasChildNodes:function(){return this.childNodes.length>0},setChildNodes:function(){},setLocalGrouping:function(){},setLocalSorting:function(){},setDataSource:function(){},setOwner:function(a){if(!a||a instanceof C==!1)a=null;if(this.owner!==a){var b=this.owner;b&&b.removeHandler(this.listen.owner,this);(this.owner=a)&&a.addHandler(this.listen.owner,this);this.event_ownerChanged(this,b)}},destroy:function(){d.prototype.destroy.call(this);this.dataSource?
this.setDataSource():this.firstChild&&this.clear();this.parentNode&&this.parentNode.removeChild(this);if(this.localGrouping)this.localGrouping.destroy(),this.localGrouping=null;this.owner&&this.setOwner();if(this.satellite){for(var a in this.satellite){var b=this.satellite[a];b.destroy();b.owner=null}this.satellite=null}this.lastChild=this.firstChild=this.nextSibling=this.previousSibling=this.parentNode=this.childNodes=this.document=null}}),B=r(C,{autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,
init:function(a){this.nodes=[];C.prototype.init.call(this,a)},insert:function(a,b){var e=this.nodes,c=b?e.indexOf(b):e.length;if(c==-1)c=e.length;e.splice(c,0,a);this.first=e[0]||null;this.last=e[e.length-1]||null;a.groupNode=this;this.event_childNodesModified(this,{inserted:[a]})},remove:function(a){var b=this.nodes;if(b.remove(a))this.first=b[0]||null,this.last=b[b.length-1]||null,a.groupNode=null,this.event_childNodesModified(this,{deleted:[a]});!this.first&&this.autoDestroyIfEmpty&&this.destroy()},
clear:function(){if(this.first){for(var a=this.nodes,b=a.length;b-- >0;)a[b].groupNode=null;this.nodes=[];this.last=this.first=null;this.event_childNodesModified(this,{deleted:a});this.autoDestroyIfEmpty&&this.destroy()}},destroy:function(){C.prototype.destroy.call(this);this.last=this.first=this.nodes=null}}),F={canHaveChildren:!0,childClass:C,childFactory:null,listen:{dataSource:{datasetChanged:function(a,b){var e={},c=[];if(b.deleted)if(e.deleted=c,this.childNodes.length==b.deleted.length){c.push.apply(c,
this.childNodes);var g=this.dataSource;this.dataSource=null;this.clear(!0);this.dataSource=g;this.colMap_={}}else for(var g=0,h;h=b.deleted[g];g++){h=h.eventObjectId;var j=this.colMap_[h];delete this.colMap_[h];j.canHaveDelegate=!0;this.removeChild(j);c.push(j)}if(b.inserted){e.inserted=[];for(g=0;h=b.inserted[g];g++)j=v(this,{cascadeDestroy:!1,delegate:h}),j.canHaveDelegate=!1,this.colMap_[h.eventObjectId]=j,e.inserted.push(j),this.firstChild&&this.insertBefore(j)}this.firstChild?this.event_childNodesModified(this,
e):this.setChildNodes(e.inserted);if(this.destroyDataSourceMember&&c.length)for(g=0;h=c[g];g++)h.destroy()},destroy:function(a){this.dataSource===a&&this.setDataSource()}}},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,b){if(!this.canHaveChildren)throw"basis.dom.wrapper: Node can't be inserted at specified point in hierarchy";if(a.firstChild){var c=this;do if(c==a)throw"basis.dom.wrapper: Node can't be inserted at specified point in hierarchy";while(c=c.parentNode)}if(this.dataSource&&
!this.dataSource.has(a.delegate))throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";a instanceof this.childClass==!1&&(a=v(this,a instanceof d?{delegate:a}:a));var g=a.parentNode===this,h=a.groupNode,j=this.localGrouping,c=this.localSorting,i=this.childNodes,B=null,A=-1;if(j){B=j.getGroupNode(a);j=B.nodes;if(g&&a.nextSibling===b&&h===B)return a;c?(c=c(a)||0,A=j.binarySearchPos(c,o,this.localSortingDesc),a.sortingValue=c):A=b&&b.groupNode===B?j.indexOf(b):j.length;
if(A<j.length)b=j[A];else if(B.last)b=B.last.nextSibling;else{c=B;for(b=null;c=c.nextSibling;)if(b=c.first)break}if(a===b||g&&a.nextSibling===b)return h!==B&&(h&&h.remove(a),B.insert(a)),a;A=-1}else if(c){var A=this.localSortingDesc,j=a.nextSibling,l=a.previousSibling,c=c(a)||0;if(g){if(c===a.localSorting)return a;if((!j||(A?j.sortingValue<=c:j.sortingValue>=c))&&(!l||(A?l.sortingValue>=c:l.sortingValue<=c)))return a.sortingValue=c,a}A=i.binarySearchPos(c,o,A);b=i[A];a.sortingValue=c;if(a===b||g&&
j===b)return a}else{if(b&&b.parentNode!==this)throw"basis.dom.wrapper: Node was not found";if(g){if(a.nextSibling===b)return a;if(a===b)throw"basis.dom.wrapper: Node can't be inserted at specified point in hierarchy";}}g?(a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling,a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling,a.previousSibling=null,a.nextSibling=null,A==-1?i.remove(a):(c=i.indexOf(a),i.splice(c,1),c<
A&&A--),h&&h.remove(a)):a.parentNode&&a.parentNode.removeChild(a);h!==B&&B.insert(a,b);if(b){A==-1&&(A=i.indexOf(b));if(A==-1)throw"basis.dom.wrapper: Node was not found";a.nextSibling=b;i.splice(A,0,a)}else A=i.length,i.push(a),b={previousSibling:this.lastChild},this.lastChild=a;a.parentNode=this;a.previousSibling=b.previousSibling;A==0?this.firstChild=a:b.previousSibling.nextSibling=a;b.previousSibling=a;var s=!1,z=!1,f=this.selection||this.contextSelection;if(!a.document&&a.document!==this.document)s=
this.document,a.document=this.document;if(!a.contextSelection&&a.contextSelection!==f)a.contextSelection=f,z=!a.selection,a.selected&&f.add([a]);a.firstChild&&(s||z)&&e(a,y).forEach(function(a){if(s&&!a.document)a.document=s;if(z&&!a.contextSelection)a.selected&&a.unselect(),a.contextSelection=f});g||(a.match&&a.match(this.matchFunction),a.autoDelegateParent&&a.setDelegate(this),this.dataSource||this.event_childNodesModified(this,{inserted:[a]}));return a},removeChild:function(a){if(a==null||a.parentNode!==
this)throw"basis.dom.wrapper: Node was not found";if(a instanceof this.childClass==!1)throw"basis.dom.wrapper: Child node has wrong class";if(this.dataSource&&this.dataSource.has(a))throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";this.childNodes.splice(this.childNodes.indexOf(a),1);a.parentNode=null;a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling;a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:
this.firstChild=a.nextSibling;a.nextSibling=null;a.previousSibling=null;a.document===this.document&&e(a,i).forEach(function(a){if(a.document==this.document)a.document=null},this);if(a.contextSelection){for(var b=a.contextSelection,c=a,g=[];c;){if(c.contextSelection===b)c.selected&&g.push(c),c.contextSelection=null;if(!c.selection&&c.firstChild)c=c.firstChild;else if(c.nextSibling)c=c.nextSibling;else for(;c=c.parentNode;)if(c.nextSibling){c=c.nextSibling;break}}b.remove(g)}a.groupNode&&a.groupNode.remove(a);
this.dataSource||this.event_childNodesModified(this,{deleted:[a]});a.autoDelegateParent&&a.setDelegate();return a},replaceChild:function(a,b){if(this.dataSource)throw"basis.dom.wrapper: Operation is not allowed because node is under dataSource control";if(b==null||b.parentNode!==this)throw"basis.dom.wrapper: Node was not found";this.insertBefore(a,b);return this.removeChild(b)},clear:function(a){if(this.dataSource)this.setDataSource();else if(this.firstChild){var b=this.childNodes;this.lastChild=
this.firstChild=null;this.childNodes=[];this.event_childNodesModified(this,{deleted:b});for(var c=b.length;c-- >0;){var g=b[c];g.parentNode=null;g.groupNode=null;a?((g.selection||g.document)&&e(g,t.AXIS_DESCENDANT_OR_SELF).forEach(function(a){if(this.selection&&a.selection===this.selection)a.selected&&a.selection.remove([a]),a.selection=null;if(a.document===this.document)a.document=null},this),g.nextSibling=null,g.previousSibling=null,g.autoDelegateParent&&g.setDelegate()):g.destroy()}this.localGrouping&&
this.localGrouping.clear()}},setChildNodes:function(a,b){this.dataSource||this.clear(!!b);if(a&&("length"in a==!1&&(a=[a]),a.length)){var e=this.event_childNodesModified;this.event_childNodesModified=Function.$undef;for(var c=0,g=a.length;c<g;c++)this.insertBefore(a[c]);this.event_childNodesModified=e;this.event_childNodesModified(this,{inserted:this.childNodes})}},setDataSource:function(a){if(!a||!this.canHaveChildren||a instanceof u==!1)a=null;if(this.dataSource!==a){var b=this.dataSource;if(b)this.colMap_=
this.dataSource=null,b.removeHandler(this.listen.dataSource,this),b.itemCount&&this.clear();if(a)this.dataSource=a,this.colMap_={},a.addHandler(this.listen.dataSource,this),a.itemCount&&this.listen.dataSource.datasetChanged.call(this,a,{inserted:a.getItems()});this.event_dataSourceChanged(this,b)}},setLocalGrouping:function(b){if(typeof b=="function"||typeof b=="string")b={groupGetter:a(b)};b instanceof G==!1&&(b=b!=null&&typeof b=="object"?new this.localGroupingClass(Object.complete({},b)):null);
if(this.localGrouping!==b){var e=this.localGrouping,c;if(this.localGrouping){if(!b&&this.firstChild){this.localGrouping=null;c=this.localSorting?q(this):this.childNodes;for(var g=c.length;g-- >0;)c[g].groupNode=null;p(this,c)}e.setOwner()}if(b&&(this.localGrouping=b,b.setOwner(this),this.firstChild)){c=this.localSorting?q(this):this.childNodes;for(g=0;b=c[g];g++)b.groupNode=this.localGrouping.getGroupNode(b);for(g=0;b=c[g];g++)b.groupNode.nodes.push(b);c.length=0;for(g=this.localGrouping.nullGroup;g;g=
g.nextSibling)b=g.nodes,g.first=b[0]||null,g.last=b[b.length-1]||null,c.push.apply(c,b),g.event_childNodesModified(g,{inserted:b});p(this,c)}this.event_localGroupingChanged(this,e)}},setLocalSorting:function(b,c){b&&(b=a(b));if(this.localSorting!=b||this.localSortingDesc!=!!c){this.localSortingDesc=!!c;this.localSorting=b||null;if(b&&this.firstChild){var e=[],g;for(g=this.firstChild;g;g=g.nextSibling)g.sortingValue=b(g)||0;if(this.localGrouping)for(var h=this.localGrouping.nullGroup;h;h=h.nextSibling)g=
h.nodes=q({childNodes:h.nodes,localSortingDesc:this.localSortingDesc}),h.first=g[0]||null,h.last=g[g.length-1]||null,e.push.apply(e,g);else e=q(this);p(this,e)}this.event_localSortingChanged(this)}},setMatchFunction:function(a){if(this.matchFunction!=a){this.matchFunction=a;for(var b=this.lastChild;b;b=b.previousSibling)b.match(a)}}},x=r(C,{event_enable:h("enable","node"),event_disable:h("disable","node"),event_select:h("select","node"),event_unselect:h("unselect","node"),event_match:h("match","node"),
event_unmatch:h("unmatch","node"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,init:function(a){if(this.selection&&this.selection instanceof u==!1)this.selection=new L(this.selection);C.prototype.init.call(this,a);this.disabled&&this.event_disable(this);if(this.selected)this.selected=!1,this.select(!0)},setSelection:function(a){if(this.selection==a)return!1;var b=this.selection;e(this,y,function(c){if(c.contextSelection==b)c.selected&&b&&
b.remove([c]),c.contextSelection=a});this.selection=a;return!0},hasOwnSelection:function(){return!!this.selection},select:function(a){var b=this.selected,c=this.contextSelection;if(c)a?b?c.remove([this]):c.add([this]):this.selectable&&c.set([this]);else if(!b&&this.selectable&&!this.isDisabled())this.selected=!0,this.event_select(this);return this.selected!=b},unselect:function(){var a=this.selected;if(a){var b=this.contextSelection;b?b.remove([this]):(this.selected=!1,this.event_unselect(this))}return this.selected!=
a},enable:function(){if(this.disabled)this.disabled=!1,this.event_enable(this)},disable:function(){if(!this.disabled)this.disabled=!0,this.event_disable(this)},isDisabled:function(){return this.disabled||this.document&&this.document.disabled||!!t.findAncestor(this,a("disabled"))},match:function(a){if(typeof a!="function")if(this.matched){if(this.underMatch_)this.underMatch_(this,!0),this.underMatch_=null}else this.matched=!0,this.event_match(this);else if(a(this)){if(this.underMatch_=a,!this.matched)this.matched=
!0,this.event_match(this)}else if(this.underMatch_=null,this.matched)this.matched=!1,this.event_unmatch(this)},setMatchFunction:function(){},destroy:function(){this.hasOwnSelection()&&(this.selection.destroy(),delete this.selection);this.unselect();C.prototype.destroy.call(this)}}),m=r(x,F,{}),G=r(C,F,{event_childNodesModified:function(a,b){g.childNodesModified.call(this,a,b);this.nullGroup.nextSibling=this.firstChild;if(b.inserted&&this.dataSource&&this.nullGroup.first)for(var c=this.owner,e=Array.from(this.nullGroup.nodes),
h=e.length;h-- >0;)c.insertBefore(e[h],e[h].nextSibling)},event_ownerChanged:function(a,b){b&&b.localGrouping===this&&b.setLocalGrouping(null,!0);this.owner&&this.owner.localGrouping!==this&&this.owner.setLocalGrouping(this);g.ownerChanged.call(this,a,b);!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,titleGetter:a("data.title"),groupGetter:Function.$undef,childClass:B,childFactory:function(a){return new this.childClass(c(a,{titleGetter:this.titleGetter,
autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups}))},init:function(a){this.map_={};this.nullGroup=new B({autoDestroyIfEmpty:!1});C.prototype.init.call(this,a)},getGroupNode:function(a){var a=this.groupGetter(a),b=a instanceof d,c=this.map_[b?a.eventObjectId:a];!c&&!this.dataSource&&(c=this.appendChild(b?{delegate:a}:{data:{id:a,title:a}}));return c||this.nullGroup},insertBefore:function(a,b){a=F.insertBefore.call(this,a,b);if("groupId_"in a==!1)a.groupId_=a.delegate?a.delegate.eventObjectId:
a.data.id,this.map_[a.groupId_]=a;if(a.first){var c=this.owner,e=c.childNodes,g=a.first,h=a.last,j,d,i;for(j=a;j=j.previousSibling;)if(i=j.last)break;if(!i)i=this.nullGroup.last;for(j=a;j=j.nextSibling;)if(d=j.first)break;if(g.previousSibling!==i||h.nextSibling!==d){if(g.previousSibling)g.previousSibling.nextSibling=h.nextSibling;if(h.nextSibling)h.nextSibling.previousSibling=g.previousSibling;j=e.splice(e.indexOf(g),a.nodes.length);var B=e.indexOf(d);j.unshift(B!=-1?B:e.length,0);e.splice.apply(e,
j);g.previousSibling=i;h.nextSibling=d;if(i)i.nextSibling=g;if(d)d.previousSibling=h;c.firstChild=e[0];c.lastChild=e[e.length-1]}}return a},removeChild:function(a){F.removeChild.call(this,a);delete this.map_[a.groupId_];return a},clear:function(){F.clear.call(this);this.map_={}},destroy:function(){this.setOwner();C.prototype.destroy.call(this);this.map_=null}});C.prototype.localGroupingClass=G;var M=r.ExtensibleProperty(),H=function(a){return{template:new w("<div/>"),action:M,cssClassName:null,event_update:function(b,
c){a.event_update.call(this,b,c);this.templateUpdate(this.tmpl,"update",c)},event_select:function(c){a.event_select.call(this,c);b(this.tmpl.selected||this.tmpl.content||this.element).add("selected")},event_unselect:function(c){a.event_unselect.call(this,c);b(this.tmpl.selected||this.tmpl.content||this.element).remove("selected")},event_disable:function(c){a.event_disable.call(this,c);b(this.tmpl.disabled||this.element).add("disabled")},event_enable:function(c){a.event_enable.call(this,c);b(this.tmpl.disabled||
this.element).remove("disabled")},event_match:function(b){a.event_match.call(this,b);t.display(this.element,!0)},event_unmatch:function(b){a.event_unmatch.call(this,b);t.display(this.element,!1)},init:function(c){this.tmpl={};if(this.template){this.template.createInstance(this.tmpl,this);this.element=this.tmpl.element;if(this.tmpl.childNodesHere)this.tmpl.childNodesElement=this.tmpl.childNodesHere.parentNode,this.tmpl.childNodesElement.insertPoint=this.tmpl.childNodesHere;this.content&&t.insert(this.tmpl.content||
this.element,this.content)}else this.element=this.tmpl.element=t.createElement();this.childNodesElement=this.tmpl.childNodesElement||this.element;a.init.call(this,c);if(this.id)this.element.id=this.id;if(c=this.cssClassName){typeof c=="string"&&(c={element:c});for(var e in c){var g=this.tmpl[e];if(g)for(var g=b(g),h=String(c[e]).qw(),j=0,d;d=h[j++];)g.add(d)}}this.tmpl&&this.templateUpdate(this.tmpl);this.container&&t.insert(this.container,this.element)},templateAction:function(a,b){this.action[a]&&
this.action[a].call(this,b)},templateUpdate:function(){},destroy:function(){var b=this.element;a.destroy.call(this);b&&b.parentNode&&b.parentNode.removeChild(b);this.template&&this.template.clearInstance(this.tmpl,this);this.childNodesElement=this.tmpl=this.element=null}}},J=r(m,H,{}),H=r(B,H,{titleGetter:a("data.title"),templateUpdate:function(a){if(a.titleText)a.titleText.nodeValue=String(this.titleGetter(this))}}),E=function(a){return{insertBefore:function(b,c){var b=a.insertBefore.call(this,b,
c),e=b.groupNode||this,g=b.nextSibling,e=e.childNodesElement||e.element||this.childNodesElement||this.element,h=b.element,g=(g&&g.element.parentNode==e?g.element:null)||e.insertPoint||null;(h.parentNode!==e||h.nextSibling!==g)&&e.insertBefore(h,g);return b},removeChild:function(b){a.removeChild.call(this,b);var c=b.element,e=c.parentNode;e&&e.removeChild(c);return b},clear:function(b){if(b)for(var c=this.firstChild;c;){var e=c.element;e.parentNode&&e.parentNode.removeChild(e);c=c.nextSibling}a.clear.call(this,
b)},setChildNodes:function(b,c){var e=t.createFragment(),g=this.localGrouping||this,h=g.childNodesElement||g.element;g.childNodesElement=e;a.setChildNodes.call(this,b,c);h.insertBefore(e,h.insertPoint||null);g.childNodesElement=h}}},K=r(G,E,{childClass:H,event_ownerChanged:function(a,b){var c=this,e=this.owner,g=null;e&&(g=e.tmpl&&e.tmpl.groupsElement||e.childNodesElement||e.element);do c.element=c.childNodesElement=g;while(c=c.localGrouping);G.prototype.event_ownerChanged.call(this,a,b)}});K.prototype.localGroupingClass=
K;var I=r(J,E,{childClass:J,childFactory:function(a){return new this.childClass(a)},localGroupingClass:K}),E=r(I,{selection:{},init:function(a){this.document=this;I.prototype.init.call(this,a);l.add(this)},destroy:function(){if(this.selection)this.selection.destroy(),this.selection=null;I.prototype.destroy.call(this);l.remove(this)}}),h=r(u,{autoDestroy:!0,sourceNode:null,listen:{sourceNode:{childNodesModified:function(a,b){var c=this.memberMap_,e={},g=0,h=0,j=b.inserted,d=b.deleted;if(j&&j.length)for(e.inserted=
j;a=j[g];)c[a.eventObjectId]=a,g++;if(d&&d.length)for(e.deleted=d;a=d[h];)delete c[a.eventObjectId],h++;(g||h)&&this.event_datasetChanged(this,e)},destroy:function(){this.autoDestroy?this.destroy():this.setSourceNode()}}},event_sourceNodeChanged:h("sourceNodeChanged")&&function(a,b){g.sourceNodeChanged.call(this,a,b);!this.sourceNode&&this.autoDestroy&&this.destroy()},extendConstructor_:!1,init:function(a,b){u.prototype.init.call(this,b);a&&this.setSourceNode(a)},setSourceNode:function(a){a instanceof
C==!1&&(a=null);if(a!==this.sourceNode){var b=this.sourceNode;b&&(b.removeHandler(this.listen.sourceNode,this),this.listen.sourceNode.childNodesModified.call(this,b,{deleted:b.childNodes}));a&&(a.addHandler(this.listen.sourceNode,this),this.listen.sourceNode.childNodesModified.call(this,a,{inserted:a.childNodes}));this.sourceNode=a;this.event_sourceNodeChanged(this,b)}},destroy:function(){this.setSourceNode();u.prototype.destroy.call(this)}}),L=r(s,{multiple:!1,event_datasetChanged:function(a,b){s.prototype.event_datasetChanged.call(this,
a,b);if(b.inserted)for(var c=0,e;e=b.inserted[c];c++)if(!e.selected)e.selected=!0,e.event_select();if(b.deleted)for(c=0;e=b.deleted[c];c++)if(e.selected)e.selected=!1,e.event_unselect()},add:function(a){if(!this.multiple)if(this.itemCount)return this.set(a);else a.splice(1);for(var b=[],c=0,e;e=a[c];c++)e.contextSelection==this&&e.selectable&&b.push(e);return s.prototype.add.call(this,b)},set:function(a){for(var b=[],c=0,e;e=a[c];c++)e.contextSelection==this&&e.selectable&&b.push(e);this.multiple||
a.splice(1);return s.prototype.set.call(this,b)}}),N=function(a,b){for(var c=a.split(/\{(this_[^}]+)\}/),e=[],g=1;g<c.length;g+=2){var h=c[g].split("|")[0];e.push("this.tmpl."+h+".nodeValue = "+h.replace(/_/g,"."))}return Function("tmpl_","config_","return "+function(a){return Object.extend({template:tmpl_,templateUpdate:function(b,c,e){a.templateUpdate.call(this,b,c,e);_code_()}},config_)}.toString().replace("_code_()",e.join(";\n")))(new w(a),b)};f.namespace("basis.dom.wrapper",N).extend({AbstractNode:C,
InteractiveNode:x,Node:m,GroupingNode:G,PartitionNode:B,Control:E,TmplGroupingNode:K,TmplPartitionNode:H,TmplNode:J,TmplContainer:I,TmplControl:E,simpleTemplate:N,ChildNodesDataset:h,Selection:L})})(basis);
(function(f){function o(d){return!(d%400&&(!(d%100)||d%4))}function n(d,i){return d==1?28+o(i):v[d]}function k(d,i){return i.replace(u,function(a,c){return x[c](d)})}function q(d,i,a,c,b,e,h){return new Date(d,i-1,a,c||0,b||0,e||0,h||0)}var p=Function.getter,v=[31,28,31,30,31,30,31,31,30,31,30,31],r={day:864E5,hour:36E5,minute:6E4,second:1E3},t="year month day hour minute second millisecond".qw(),m={},w={};Object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",
millisecond:"Milliseconds"},function(d,i){m[d]=p("get"+i+"()");w[d]=new Function("d,v","d.set"+i+"(v)")});var x={y:p("getFullYear().toString().substr(2)"),Y:p("getFullYear()"),d:p("getDate()"),D:p("getDate()","{0:02}"),m:p("getMonth() + 1"),M:p("getMonth() + 1","{0:02}"),h:p("getHours()"),H:p("getHours()","{0:02}"),i:p("getHours() % 12 || 12","{0:02}"),p:p("getHours() > 12",{"true":"pm","false":"am"}),P:p("getHours() > 12",{"true":"PM","false":"AM"}),I:p("getMinutes()","{0:02}"),s:p("getSeconds()"),
S:p("getSeconds()","{0:02}"),z:p("getMilliseconds()"),Z:p("getMilliseconds()","{0:03}")},d=/^(\d{1,4})-(\d\d?)-(\d\d?)(?:[T ](\d\d?):(\d\d?):(\d\d?)(?:\.(\d{1,3}))?)?$/,u=/%([ymdhiszp])/ig;Object.extend(Date.prototype,{isLeapYear:function(){return o(this.getFullYear())},getMonthDayCount:function(){return n(this.getMonth(),this.getFullYear())},add:function(d,i){var a=m[d];if(!a)throw Error("Unknown date part: "+d);var c;if(d=="year"||d=="month")c=this.getDate(),c>28&&this.setDate(1);w[d](this,a(this)+
i);c>28&&(a=this.getMonthDayCount(),c>a&&this.setDate(a));return this},diff:function(d,i){if(d=="year"||d=="month"){var a=Number(this)-Number(i)>0?-1:1,c=a>0?this:i,b=a>0?i:this,e=c.getFullYear(),e=b.getFullYear()-e;if(d=="year")return a*e;c=c.getMonth();b=b.getMonth();return a*(e?(e>1?(e-1)*12:0)+(11-c)+(b+1):b-c)}else return a=Math.floor((i-this)/r[d]),a+Number(m[d](new Date(i-a*r[d]))-m[d](this)!=0)},set:function(d,i){var a=w[d];if(!a)throw Error("Unknown date part: "+d);var c;if(d=="year"||d==
"month")c=this.getDate(),c>28&&this.setDate(1);a(this,i);c>28&&(a=this.getMonthDayCount(),c>a&&this.setDate(a));return this},get:function(d){if(m[d])return m[d](this);throw Error("Unknown date part: "+d);},toISODateString:function(){return k(this,"%Y-%M-%D")},toISOTimeString:function(){return k(this,"%H:%I:%S.%Z")},fromDate:function(d){d instanceof Date&&(this.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()),this.setTime(d.getTime()));return this},toFormat:function(d){return k(this,d)}});var s=
Date.prototype.toISOString;if(s&&(new Date).toISOString().match(/Z/i))Date.prototype.toISOString=function(){return s.call(this).replace(/Z/i,"")};Object.complete(Date.prototype,{toISOString:function(){return this.toISODateString()+"T"+this.toISOTimeString()},fromISOString:function(l){var i=String(l).match(d);if(!i)throw Error("Value of date isn't in ISO format: "+l);i[2]-=1;for(var l=0,a;a=t[l];l++)this.set(a,i[l+1]||0);return this}});Object.extend(Date.prototype,{toODBCDate:Date.prototype.toISODateString,
toODBCTime:Date.prototype.toISOTimeString,toODBC:Date.prototype.toISOString,fromODBC:Date.prototype.fromISOString});var l=/\D/;Date.fromISOString=function(d){return d?q.apply(null,String(d).split(l)):null};Date.timer=function(d){var i=d||new Date;i.measure=function(a){return a?((new Date-i)/1E3).toFixed(3):new Date-i};return i};f.namespace("basis.date").extend({isLeapYear:o,getMonthDayCount:n,format:k})})(basis);
(function(f,o){function n(a,b){if(g)try{return parseFloat(v.getComputedStyle(a,null)[b])}catch(c){return 0}else return 0}function k(a,b){return g?n(a,"height"):(x.setStyle(b,{borderTop:a.currentStyle.borderTopWidth+" solid red",borderBottom:a.currentStyle.borderBottomWidth+" solid red",paddingTop:a.currentStyle.paddingTop,paddingBottom:a.currentStyle.paddingBottom,fontSize:0.01,height:0,overflow:"hidden"}),a.offsetHeight-b.offsetHeight)}function q(a,b){if(h)d(a).add("Basis-Layout-OnResizeElement"),
a.onresize=b;else{var c=t.createElement({description:"IFRAME.Basis-Layout-OnResizeFrame",css:{position:"absolute",width:"100%",height:"100%",left:0,zIndex:-1,top:"-2000px"}});t.insert(a,c);c.onload=function(){(c.contentWindow.onresize=b)()}}}for(var p=o.document,v=p.defaultView,r=f.Class,t=f.dom,m=f.ua,w=Object.extend,x=f.cssom,d=f.cssom.classList,u=t.wrapper.TmplContainer,s=m.test("IE"),l=m.test("IE7+"),y=!1,i=t.createElement(""),a=["","-webkit-"],c=0;c<a.length;c++)try{var b=a[c]+"box";i.style.display=
b;if(i.style.display==b){y=a[c];break}}catch(e){}var h=typeof i.onresize!="undefined",g=v&&v.getComputedStyle,i=function(){return t.createElement({css:{position:"absolute",top:0,left:0,width:0,height:0,padding:0,margin:0,border:0}})};i.className="basis.Layout.Helper";var j={top:Number.NaN,left:Number.NaN,bottom:Number.NaN,right:Number.NaN,width:Number.NaN,height:Number.NaN,defined:!1},z=r(null,{init:function(a,b,c){this.reset();this.setElement(a,b,c)},setElement:function(a,b,c){this.element=t.get(a);
this.offsetElement=c;b||this.recalc(this.offsetElement)},copy:function(a){"top,left,bottom,right,height,width,defined".split(",").forEach(function(b){this[b]=a[b]},this)},reset:function(){w(this,j)},set:function(a,b){if(this.defined){switch(a.toLowerCase()){case "left":this.left=b;this.right=this.left+this.width;break;case "right":this.right=b;this.left=this.right-this.width;break;case "width":this.width=b;this.right=this.left+this.width;break;case "top":this.top=b;this.bottom=this.top+this.height;
break;case "bottom":this.bottom=b;this.top=this.bottom-this.height;break;case "height":this.height=b,this.bottom=this.top+this.height}(this.width<=0||this.height<=0)&&this.reset()}return this},recalc:function(a){this.reset();var b=this.element;if(b){var c=b,e=p.documentElement;if(b.getBoundingClientRect)c=b.getBoundingClientRect(),this.top=c.top,this.left=c.left,s&&(l?(this.top+=e.scrollTop-e.clientTop,this.left+=e.scrollLeft-e.clientLeft):b!=p.body&&(this.top-=p.body.clientTop-p.body.scrollTop,this.left-=
p.body.clientLeft-p.body.scrollLeft)),a&&(a=new z(a),this.top-=a.top,this.left-=a.left,a.destroy());else if(p.getBoxObjectFor){var g=p.getBoxObjectFor(e),c=p.getBoxObjectFor(b);this.top=c.screenY-g.screenY;this.left=c.screenX-g.screenX;if(m.test("FF1.5-")){if(c=b.offsetParent)this.top-=c.scrollTop,this.left-=c.scrollLeft;c!=p.body&&(this.top+=e.scrollTop,this.left+=e.scrollLeft)}if(m.test("FF2+")){if(this.top&&(c=e.scrollTop,c>2)){for(var g=0,h=Math.floor(Math.log(c)/Math.LN2);h>=0;h-=3)g+=1<<h;c>
g&&(this.top-=1)}this.left&&(this.left-=e.scrollLeft>1)}a&&(a=new z(a),this.top-=a.top,this.left-=a.left,a.destroy())}else if(b!=a){this.top=b.offsetTop;this.left=b.offsetLeft;this.top-=p.body.clientTop-p.body.scrollTop;for(this.left-=p.body.clientLeft-p.body.scrollLeft;(c=c.offsetParent)&&c!=a;)this.top+=c.offsetTop+c.clientTop-c.scrollTop,this.left+=c.offsetLeft+c.clientLeft-c.scrollLeft}else this.top=this.left=0;this.width=b.offsetWidth;this.height=b.offsetHeight;this.bottom=this.top+this.height;
this.right=this.left+this.width;this.defined=!0}return this.defined},intersection:function(a){if(!this.defined)return!1;a instanceof z==!1&&(a=new z(a));return a.defined&&a.right>this.left&&a.left<this.right&&a.bottom>this.top&&a.top<this.bottom},inside:function(a){if(!this.defined)return!1;a instanceof z==!1&&(a=new z(a));return a.defined&&a.left>=this.left&&a.right<=this.right&&a.bottom>=this.bottom&&a.top<=this.top},point:function(a){if(!this.defined)return!1;var b=a.left||a.x||0,a=a.top||a.y||
0;return b>=this.left&&b<this.right&&a>=this.top&&a<this.bottom},power:function(a){if(!this.defined)return!1;if(a=t.get(a)||this.element)return t.setStyle(a,{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px"}),!0},destroy:function(){delete this.element}}),a=r(z,{init:function(a,b,c){this.setBoxes(a,b,c)},setBoxes:function(a,b,c){this.boxA=a instanceof z?a:new z(a,!0);this.boxB=b instanceof z?b:new z(b,!0);c||this.recalc()},recalc:function(){this.reset();if(!this.boxA.recalc()||
!this.boxB.recalc())return!1;if(this.boxA.intersection(this.boxB))this.top=Math.max(this.boxA.top,this.boxB.top),this.left=Math.max(this.boxA.left,this.boxB.left),this.bottom=Math.min(this.boxA.bottom,this.boxB.bottom),this.right=Math.min(this.boxA.right,this.boxB.right),this.width=this.right-this.left,this.height=this.bottom-this.top,this.width<=0||this.height<=0?this.reset():this.defined=!0;return this.defined}}),c=r(z,{recalc:function(){this.reset();var a=this.element;if(a){var b=a;this.width=
a.clientWidth;this.height=a.clientHeight;if(a.getBoundingClientRect){var c=a.getBoundingClientRect();this.top=c.top;for(this.left=c.left;b=b.offsetParent;)this.top-=b.scrollTop,this.left-=b.scrollLeft}else if(p.getBoxObjectFor){c=p.getBoxObjectFor(a);this.top=c.y;for(this.left=c.x;b=b.offsetParent;)this.top-=b.scrollTop,this.left-=b.scrollLeft}else c=new z(a),this.top=c.top+a.clientTop,this.left=c.left+a.clientLeft;this.bottom=this.top+this.height;this.right=this.left+this.width;this.defined=!0}return this.defined}});
x.cssRule(".Basis-VerticalPanel").setStyle({position:"relative"});b=x.cssRule(".Basis-VerticalPanelStack");b.setStyle({overflow:"hidden"});y!==!1&&(b.setProperty("display",y+"box"),b.setProperty(y+"box-orient","vertical"));b=r(u,{template:'<div class="Basis-VerticalPanel"/>',flex:0,init:function(a){u.prototype.init.call(this,a);this.flex?y!==!1&&x.setStyleProperty(this.element,y+"box-flex",this.flex):y===!1&&q(this.element,function(){this.parentNode&&this.parentNode.realign()}.bind(this))}});r=r(u,
{childClass:b,template:'<div class="Basis-VerticalPanelStack">'+(y?"":'<div{ruller} style="position: absolute; visibility: hidden; top: -1000px; width: 10px;"/>')+"</div>",init:function(a){this.cssRule=x.uniqueRule();this.ruleClassName=this.cssRule.token;this.cssRule.setProperty("overflow","auto");u.prototype.init.call(this,a);y===!1&&(this.realign(),q(this.childNodesElement,function(){this.realign()}.bind(this)))},insertBefore:function(a,b){if(a=u.prototype.insertBefore.call(this,a,b))return a.flex&&
this.cssRule&&d(a.element).add(this.ruleClassName),this.realign(),a},removeChild:function(a){if(u.prototype.removeChild.call(this,a))return a.flex&&this.cssRule&&d(a.element).remove(this.ruleClassName),this.realign(),a},realign:function(){if(y===!1){var a=this.element,b=this.lastChild.element,c=this.tmpl.ruller,e=(new z(b,!1,a)).bottom-n(a,"paddingTop")-n(a,"borderTopWidth")||0,a=k(a,c);if(g)e+=n(b,"marginBottom");else{var h=c.offsetHeight;c.style.height=b.currentStyle.marginBottom;e+=c.offsetHeight-
h}if(e=a-e){for(a=b=0;h=this.childNodes[a];a++)h.flex&&(b++,e+=k(h.element,c));b&&this.cssRule.setProperty("height",Math.max(0,e/b)+"px")}}}});f.namespace("basis.layout").extend({Box:z,Intersection:a,Viewport:c,VerticalPanel:b,VerticalPanelStack:r,Helper:i})})(basis,this);
(function(f){var o=f.Class,n=f.dom.event,k=f.dom,q=Function.getter,p=f.cssom.classList,v=n.addGlobalHandler,r=n.removeGlobalHandler,t=f.EventObject,m=t.createEvent,w=f.layout,x=f.ua,d=f.ua.is("IE9-"),u,s={start:function(d){u&&s.over();u={dde:this,run:!1,event:{initX:n.mouseX(d),initY:n.mouseY(d),deltaX:0,deltaY:0}};v("mousemove",s.move,u);v("mouseup",s.over,u);v("mousedown",s.over,u);n.cancelDefault(d);this.event_prepare(u.event)},move:function(d){var i=u.dde;if(!u.run)u.run=!0,i.draging=!0,i.event_start(u.event);
if(i.axisX)u.event.deltaX=i.axisXproxy(n.mouseX(d)-u.event.initX);if(i.axisY)u.event.deltaY=i.axisYproxy(n.mouseY(d)-u.event.initY);i.event_move(u.event)},over:function(d){var i=u.dde;r("mousemove",s.move,u);r("mouseup",s.over,u);r("mousedown",s.over,u);i.draging=!1;u.run&&i.event_over(u.event);u=null;n.kill(d)}},l=o(t,{containerGetter:q("element"),element:null,trigger:null,baseElement:null,fixTop:!0,fixRight:!0,fixBottom:!0,fixLeft:!0,axisX:!0,axisY:!0,axisXproxy:Function.$self,axisYproxy:Function.$self,
event_prepare:m("prepare"),event_start:m("start"),event_move:m("move"),event_over:m("over"),init:function(d){t.prototype.init.call(this,d);var d=this.element,i=this.trigger;this.trigger=this.element=null;this.setElement(d,i);this.setBase(this.baseElement);f.Cleaner.add(this)},setElement:function(l,i){l=l&&k.get(l);i=i&&k.get(i)||l;if(this.trigger!=i&&(this.trigger&&(n.removeHandler(this.trigger,"mousedown",s.start,this),d&&n.removeHandler(this.trigger,"selectstart",s.start,this)),this.trigger=i))n.addHandler(this.trigger,
"mousedown",s.start,this),d&&n.addHandler(this.trigger,"selectstart",s.start,this);if(this.element!=l)this.element&&p(this.element).remove("Basis-Dragable"),(this.element=l)&&p(this.element).add("Basis-Dragable")},setBase:function(d){this.baseElement=k.get(d)||(x.is("IE7-")?document.body:document.documentElement)},isDraging:function(){return!!(u&&u.dde==this)},start:function(d){this.isDraging()||s.start.call(this,d)},stop:function(){this.isDraging()&&s.over()},destroy:function(){f.Cleaner.remove(this);
this.stop();t.prototype.destroy.call(this);this.setElement();this.setBase()}}),o=o(l,{event_start:function(d){var i=this.containerGetter(this,d.initX,d.initY);if(i){var a=new w.Box(i),c=new w.Viewport(this.baseElement);p(i).add("Basis-DragDrop-DragElement");d.element=i;d.box=a;d.viewport=c}l.prototype.event_start.call(this,d)},event_move:function(d){if(d.element){if(this.axisX){var i=d.box.left+d.deltaX;this.fixLeft&&i<0?i=0:this.fixRight&&i+d.box.width>d.viewport.width&&(i=d.viewport.width-d.box.width);
d.element.style.left=i+"px"}if(this.axisY)i=d.box.top+d.deltaY,this.fixTop&&i<0?i=0:this.fixBottom&&i+d.box.height>d.viewport.height&&(i=d.viewport.height-d.box.height),d.element.style.top=i+"px";l.prototype.event_move.call(this,d)}},event_over:function(d){d.element&&(p(d.element).remove("Basis-DragDrop-DragElement"),l.prototype.event_over.call(this,d))}});f.namespace("basis.dragdrop").extend({DragDropElement:l,MoveableElement:o})})(basis);
(function(){function f(a){if(a instanceof l)return a.set;a=a.nodeType;if(isNaN(a)==!1)return a==1?s:"nodeValue"}var o=basis.Class,n=basis.dom,k=basis.Cleaner,q=Function.getter,p=basis.cssom.classList,v=basis.EventObject,r=basis.TimeEventManager,t=v.createEvent,m=basis.data,w=m.DataObject,x=m.STATE,d=o(w,{event_change:t("change"),locked:!1,lockValue_:null,extendConstructor_:!1,updateCount:0,init:function(a,c,b){w.prototype.init.call(this,{});c&&this.addHandler(c);this.proxy=typeof b=="function"?b:
Function.$self;this.initValue=this.value=this.proxy(a)},set:function(a,c){var b=this.value,e=this.proxy?this.proxy(a):e,h=!1;if(e!==b)this.value=e,h=!0,this.updateCount+=1;!this.locked&&(h||c)&&this.event_change(e,b);return h},lock:function(){if(!this.locked)this.lockValue_=this.value,this.locked=!0},unlock:function(){if(this.locked)this.locked=!1,this.value!==this.lockValue_&&this.event_change(this.value,this.lockValue_)},update:function(a,c){return this.set(a,c)},reset:function(){this.set(this.initValue)},
destroy:function(){w.prototype.destroy.call(this);delete this.initValue;delete this.proxy;delete this.lockValue_;delete this.value}}),u={destroy:function(a){this.removeLink(a)}},s=function(a){n.insert(n.clear(this),a)},l=o(d,{links_:null,event_change:function(a,c){d.prototype.event_change.call(this,a,c);if(this.links_.length&&!k.globalDestroy)for(var b=0,e;e=this.links_[b++];)this.power_(e,c)},init:function(a,c,b){d.prototype.init.call(this,a,c,b);this.links_=[];k.add(this)},addLink:function(a,c,
b){if(typeof a!="object"&&a instanceof Object==!1)throw Error("basis.data.property: Link to undefined object ignored");c==null&&(c=f(a));typeof b!="function"&&(b=q(Function.$self,b));c={object:a,format:b,field:c,isEventObject:a instanceof v};this.links_.push(c);c.isEventObject&&a.addHandler(u,this);this.power_(c);return a},addLinkShortcut:function(a,c,b){return this.addLink(a,l.shortcut[c],b)},removeLink:function(a,c){if(this.links_!=null){var b=arguments.length<2;!b&&c==null&&(c=f(a));for(var e=
0,h=0,g;g=this.links_[h];h++)g.object===a&&(b||c==g.field)?g.isEventObject&&g.object.removeHandler(u,this):this.links_[e++]=g;this.links_.length=e}},clear:function(){for(var a=0,c;c=this.links_[a];a++)c.isEventObject&&c.object.removeHandler(u,this);this.links_.clear()},power_:function(a,c){var b=a.field;if(b!=null){var e=a.format(this.value),h=a.object;typeof b=="function"?b.call(h,e,arguments.length<2?e:a.format(c)):h[b]=e}},destroy:function(){this.clear();d.prototype.destroy.call(this);this.links_=
null;k.remove(this)}});l.shortcut={className:function(a,c){p(this).replace(c,a)},show:function(a){n.display(this,!!a)},hide:function(a){n.display(this,!a)},disable:function(a){this.disabled=!!a},enable:function(a){this.disabled=!a}};var y=[x.READY,x.DEPRECATED,x.UNDEFINED,x.ERROR,x.PROCESSING],i={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(a){this.remove(a)}},o=o(l,{calculateValue:function(){return this.value+1},objects:[],
timer_:null,valueChanged_:!1,stateChanged_:!0,state:x.UNDEFINED,extendConstructor_:!0,init:function(){var a=this.handler;delete this.handler;l.prototype.init.call(this,this.value||0,a,this.proxy);this.objects.length?(a=this.objects,this.objects=[],this.lock(),this.add.apply(this,a),this.unlock()):this.objects=[];this.valueChanged_=this.stateChanged_=!!this.calculateOnInit;this.update();k.add(this)},add:function(){for(var a=0,c=arguments.length;a<c;a++){var b=arguments[a];if(b instanceof w)this.objects.add(b)&&
b.addHandler(i,this);else throw Error("basis.data.property: Instance of DataObject required");}this.fire(!0,!0)},remove:function(a){this.objects.remove(a)&&a.removeHandler(i,this);this.fire(!0,!0)},clear:function(){for(var a=0,c;c=this.objects[a];a++)c.removeHandler(i,this);this.objects.clear();this.fire(!0,!0)},fire:function(a,c){if(!this.locked&&(this.valueChanged_=this.valueChanged_||!!a,this.stateChanged_=this.stateChanged_||!!c,!this.timer_&&(this.valueChanged_||this.stateChanged_)))this.timer_=
!0,r.add(this,"update",Date.now())},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){delete this.timer_;r.remove(this,"update");if(!k.globalDestroy&&(this.valueChanged_&&this.set(this.calculateValue()),this.stateChanged_)){var a=this.objects.length;if(a){for(var c=-2,b,e=0;e<a;e++){var h=this.objects[e],g=y.indexOf(String(h.state));g>c&&(b=h,c=g)}b&&this.setState(b.state,b.state.data)}else this.setState(x.UNDEFINED)}this.stateChanged_=this.valueChanged_=!1},destroy:function(){this.lock();
this.clear();r.remove(this,"update");l.prototype.destroy.call(this)}});basis.namespace("basis.data.property").extend({DataObjectSet:o,AbstractProperty:d,Property:l,PropertySet:o})})();
(function(f){function o(f,m){var k=Date.now()-f;return k>=m?1:k/m}var n=f.Class,k=f.dom,q=f.data.property.Property,p=f.EventObject.createEvent,v=n(q,{duration:1E3,interval:50,startTime:0,timer:null,started:!1,event_start:p("start"),event_finish:p("finish"),event_invert:p("invert"),event_change:function(f,m){f==0&&this.event_start();q.prototype.event_change.call(this,f,m);f==1&&this.event_finish()},extendConstructor_:!0,init:function(f){this.run=this.run.bind(this);q.prototype.init.call(this,f)},start:function(f){this.started?
f&&this.invert():(this.startTime=Date.now(),this.started=!0,this.run())},run:function(){clearTimeout(this.timer);if(this.started){var f=o(this.startTime,this.duration);f>=1?this.stop():(this.set(f),this.timer=setTimeout(this.run,this.interval))}},invert:function(){this.event_invert();if(this.started){var f=o(this.startTime,this.duration);this.startTime=Date.now()-this.duration*(1-f);this.run()}},stop:function(){clearTimeout(this.timer);if(this.started)this.started=!1,this.set(1)},destroy:function(){this.stop();
this.clear();q.prototype.destroy.call()}}),r=n(null,{thread:null,setter:Function.$null,notRevert:!1,timeFunction:Function.$self,init:function(f,m,k,x,d){this.thread=f instanceof v?f:new v(f);this.setRange(k,x);this.setter=m;this.notInvert=d;this.thread.addHandler({start:function(){},invert:function(){this.start+=this.range;this.range*=-1},change:function(d){this.setter(this.start+this.range*this.timeFunction(d))},finish:function(){this.notInvert||(this.start+=this.range,this.range*=-1)},destroy:this.destroy},
this)},setRange:function(f,m){this.start=f;this.range=m-f},destroy:function(){delete this.thread}});f.namespace("basis.animation").extend({Thread:v,Modificator:r,FX:{CSS:{FadeIn:function(f,m){return new r(f,function(f){k.setStyle(m,{opacity:f})},0,1)},FadeOut:function(f,m){return new r(f,function(f){k.setStyle(m,{opacity:f})},1,0)}}}})})(basis);
(function(f){function o(a,e,h){return h?c?a.createElementNS(h,e):a.createNode(1,e,h):a.createElement(e)}function n(a,e,h,g){attr=h?c?a.createAttributeNS(h,e):a.createNode(2,e,h):a.createAttribute(e);attr.nodeValue=g;return attr}function k(a,c){return a.setAttributeNodeNS?a.setAttributeNodeNS(c):a.setAttributeNode(c)}function q(a,c,h){k(a,n(a.ownerDocument,i.PREFIX+(c?":"+c:""),i.NAMESPACE,h))}function p(a,c){return a.createTextNode(String(c))}function v(a,c){var h=a.nodeType,g=a.attributes,j=a.firstChild;
if(j){if(j.nodeType!=x&&j===a.lastChild)return j.nodeValue}else{var d=g&&g[0];if(h==x){if(!d)return"";if(g.length==1&&(d.baseName||d.localName)==y&&d.namespaceURI==s)return null}else if(!d)return null}var h={},d=[],i=0,l,f,B;if(j){do i=d.push(j);while(j=j.nextSibling)}if(g)for(j=0;B=g[j];j++)d.push(B);c||(c={});for(var j=0,m;m=d[j];j++){g=m.nodeName;l=j<i;B=c[g];if(l)l=v(m,c);else{if(g=="xmlns")continue;l=m.nodeValue}for(;B;)if(B.storeName&&(l[B.storeName]=g),B.rename)g=B.rename,B=c[g];else{B.format&&
(l=B.format(l));!h[g]&&B.forceArray&&(l=[l]);break}g in h?(f=h[g])&&f.push?f.push(l):h[g]=[f,l]:h[g]=l}return h}function r(a,c,h,g){if(String(c).charAt(0)=="@")return g==null?g:n(a,c.substr(1),"",String(g));else{c=o(a,c.toString(),g&&g.xmlns||c.namespace||h);if(typeof g=="undefined"||g===null)k(c,n(a,y,s,"true"));else if(typeof g=="string"||typeof g=="number"||typeof g=="function"||typeof g=="boolean"||g.constructor===Date||g.constructor===RegExp)c.appendChild(p(a,g));else{h=g.xmlns||h;g.xmlns&&i.BAD_SUPPORT&&
q(c,"",h);for(var j in g){var l=g[j];if(!(j=="xmlns"||typeof l=="function"))if(l&&Array.isArray(l))for(var f=0;f<l.length;f++)c.appendChild(r(a,j,h,l[f]));else l&&typeof l=="object"&&l.toString!==Object.prototype.toString&&(l=l.toString()),(l=r(a,j,h,l))&&(l.nodeType==d?k(c,l):c.appendChild(l))}}return c}}var t=f.dom,m=f.Class,w=f.ua,x=t.ELEMENT_NODE,d=t.ATTRIBUTE_NODE,m=m(null,{init:function(a,c,h){this.localpart=a;this.namespace=c||"";this.prefix=h||""},toString:function(){return this.prefix?this.prefix+
":"+this.localpart:this.localpart}}),u=String("http://www.w3.org/2001/XMLSchema"),s=String("http://www.w3.org/2001/XMLSchema-instance"),l=String("http://www.w3.org/2000/xmlns/"),y="nil",i={PREFIX:"xmlns",NAMESPACE:l,BAD_SUPPORT:w.test("webkit528.16-")||w.test("opera9-")},a="native",c=!0,w=function(){var b=document.implementation;if(b&&b.createDocument)return function(a,c){var e=b.createDocument(a,c,null);if(e.charset&&e.charset!=document.charset)e.charset=document.charset;return e};if(window.ActiveXObject)for(var e=
["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0"],h=0;h<e.length;h++)try{if(new ActiveXObject(e[h]))return a=e[h],c=!1,function(b,c){var e=new ActiveXObject(a);e.documentElement=o(e,c,b);return e}}catch(g){}throw Error("Browser doesn't support for XML document!");}();f.namespace("basis.xml").extend({NAMESPACE:{XMLShema:u,XMLShemaInstance:s,Namespace:l},XMLNS:i,QName:m,getElementsByTagNameNS:function(a,c,h){if(a.getElementsByTagNameNS)return a.getElementsByTagNameNS(h,c);var g=[];a.ownerDocument.setProperty("SelectionNamespaces",
'xmlns:x="'+h+'"');for(var a=a.selectNodes("//x:"+c),c=0,j;j=a[c++];)j.namespaceURI==h&&g.push(j);return g},addNamespace:q,createDocument:w,createElementNS:o,createAttributeNS:n,setAttributeNodeNS:k,createText:p,createCDATA:function(a,c){return a.createCDATASection(c)},XML2Object:v,XML2String:function(a){if(typeof XMLSerializer!="undefined")return(new XMLSerializer).serializeToString(a);if(typeof a.xml=="string")return a.xml;if(a.nodeType==t.DOCUMENT_NODE)a=a.documentElement;return t.outerHTML(a)},
Object2XML:r})})(basis);
(function(f){function o(d,f){return d<<f|d>>>32-f}function n(d){var f=[];do f.push((d&15).toString(16)),d>>=4;while(d);f.length&1&&f.push("0");return f.reverse().join("")}function k(d){if(typeof d=="number")return n(d);var f=[],f=Array.isArray(d)?d.map(k):String(d).toArray().map(function(d){return n(d.charCodeAt(0))});return f.join("")}f.namespace("basis.crypt",function(d){w=d||"";return x});var q=Array.create(255,function(d){return String.fromCharCode(d)}),p=function(){function d(d){for(var l="",
f=d.length,i=0;i<f;i++){var a=d.charCodeAt(i);l+=a<128?q[a]:a<2048?q[a>>6|192]+q[a&63|128]:q[a>>12|224]+q[a>>6&63|128]+q[a&63|128]}return l}function m(d){for(var l="",f=d.length,i,a,c,b=0;b<f;)i=d.charCodeAt(b++),i<128?l+=q[i]:(a=d.charCodeAt(b++),i&32?(c=d.charCodeAt(b++),l+=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)):l+=String.fromCharCode((i&31)<<6|a&63));return l}return f.namespace("basis.crypt.UTF16").extend({toBytes:function(d){for(var l=[],f=d.length,i=0;i<f;i++){var a=d.charCodeAt(i);
l.push(a&255,a>>8)}return l},fromBytes:function(d){for(var l="",f=d.length,i,a,c=0;c<f;)i=d[c++]||0,a=d[c++]||0,l+=String.fromCharCode(a<<8|i);return l},toUTF8:d,fromUTF8:m,toUTF8Bytes:function(f){return v.toBytes(d(f))},fromUTF8Bytes:function(d){return m(v.fromBytes(d))}})}(),v=function(){return f.namespace("basis.crypt.UTF8").extend({toBytes:function(d){for(var f=d.length,s=Array(f),l=0;l<f;l++)s[l]=d.charCodeAt(l);return s},fromBytes:function(d){for(var f=d.length,s="",l=0;l<f;l++)s+=q[d[l]];return s},
toUTF16:function(d){return p.fromUTF8(d)},fromUTF16:function(d){return p.toUTF8(d)},toUTF16Bytes:function(d){return p.toBytes(p.fromUTF8(d))},fromUTF16Bytes:function(d){return p.toUTF8(p.fromBytes(d))}})}(),r=function(){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".toArray(),m={};d.forEach(function(d,l){m[d]=l});return f.namespace("basis.crypt.Base64").extend({encode:function(f,l){f.constructor!=Array&&(f=l?p.toUTF8Bytes(f):p.toBytes(f));for(var m=f.length,i=0,a="",c,b,
e,h,g,j;i<m;)c=f[i++],b=f[i++],e=f[i++],h=c>>2,c=(c&3)<<4|b>>4,g=(b&15)<<2|e>>6,j=e&63,b==void 0?g=j=64:e==void 0&&(j=64),a+=d[h]+d[c]+d[g]+d[j];return a},decode:function(d,f){for(var k=[],i,a,c,b,e,h=0,d=d.replace(/[^a-z0-9\+\/]/ig,""),g=d.length;h<g;)i=m[d.charAt(h++)],a=m[d.charAt(h++)],b=m[d.charAt(h++)],e=m[d.charAt(h++)],i=i<<2|a>>4,a=(a&15)<<4|b>>2,c=(b&3)<<6|e,k.push(i,a,c);(b==null||b==64)&&k.pop();(e==null||e==64)&&k.pop();return f?p.fromUTF8Bytes(k):p.fromBytes(k)}})}(),t=function(){function d(d){for(var f=
[],i=3;i>=0;i--)f.push(d>>i*8&255);return f}var f=[1518500249,1859775393,2400959708,3395469782],m=[function(d,f,i){return i^d&(f^i)},function(d,f,i){return d^f^i},function(d,f,i){return d&f|i&(d|f)},function(d,f,i){return f^d^i}];return function(l,k){l.constructor!=Array&&(l=k?p.toUTF8Bytes(l):p.toBytes(l));for(var i=l.length,a=[],c=0;c<i;c++)a[c>>2]|=l[c]<<(3-(c&3)<<3);i&3?a[i>>2]|=Math.pow(2,(4-(i&3)<<3)-1):a[i>>2]=2147483648;a.push.apply(a,Array.create(((a.length&15)>14?30:14)-(a.length&15),0));
a.push(i>>>29);a.push(i<<3&4294967295);a.reverse();for(var i=[1732584193,4023233417,2562383102,271733878,3285377520],b=Array.from(i),e,h=a.length>>4,g=Array(80);h--;){for(c=0;c<16;c++)g[c]=a.pop();for(c=16;c<80;c++)g[c]=o(g[c-3]^g[c-8]^g[c-14]^g[c-16],1);for(c=0;c<80;c++)e=Math.floor(c/20),i[4]=o(i[0],5)+m[e](i[1],i[2],i[3])+i[4]+g[c]+f[e]&4294967295,i[1]=o(i[1],30),i.unshift(i.pop());for(c=0;c<5;c++)i[c]=b[c]=i[c]+b[c]&4294967295}return i.map(d).flatten()}}(),m=function(){function d(a){for(var b=
arguments,e=b.length,h=a&65535,g=a>>16,d=1;d<e;d++){var i=b[d];h+=i&65535;g+=(i>>16)+(h>>16);h&=65535}return g<<16|h&65535}function f(a){for(var b=[],e=0;e<4;e++)b.push(a>>e*8&255);return b}var m=Math.pow(2,32),l,k=[],i=[],a=[function(a,b,e){return e^a&(b^e)},function(a,b,e){return b^e&(b^a)},function(a,b,e){return a^b^e},function(a,b,e){return b^(a|~e)}];return function(c,b){if(!l){l=[[7,12,17,22].repeat(4),[5,9,14,20].repeat(4),[4,11,16,23].repeat(4),[6,10,15,21].repeat(4)].flatten();for(var e=
0;e<64;e++)switch(k[e]=Math.floor(Math.abs(Math.sin(e+1))*m),e>>4){case 0:i[e]=e;break;case 1:i[e]=e*5+1&15;break;case 2:i[e]=e*3+5&15;break;case 3:i[e]=e*7&15}}c.constructor!=Array&&(c=b?p.toUTF8Bytes(c):p.toBytes(c));for(var e=[],h=c.length,g=0;g<h;g++)e[g>>2]|=c[g]<<((g&3)<<3);e[h>>2]|=128<<((h&3)<<3);e.push.apply(e,Array(((e.length&15)>14?30:14)-(e.length&15)));e.push(h<<3&4294967295);e.push(h>>>29);for(var h=[1732584193,4023233417,2562383102,271733878],j=Array.from(h),z=e.length>>4;z--;){for(g=
0;g<64;g++)h[0]=d(o(d(h[0],a[g>>4](h[1],h[2],h[3]),e[i[g]],k[g]),l[g]),h[1]),h.unshift(h.pop());for(g=0;g<4;g++)h[g]=j[g]=d(h[g],j[g])}return h.map(f).flatten()}}(),w="",x={};Object.iterate({sha1:function(d){return t(this,d)},sha1hex:function(d){return k(t(this,d))},md5:function(d){return m(this,d)},md5hex:function(d){return k(m(this,d))},base64:function(d){return r.encode(this,d)},base64decode:function(d){return r.encode(this,d)},hex:function(){return k(this)}},function(d,f){x[d]=function(d){d=f.call(w,
d);return w=Object.extend(typeof d!="object"?Object(d):d,x)}});f.namespace("basis.crypt").extend({HEX:k,SHA1:t,MD5:m})})(basis);
(function(f){function o(a,b){if(!a.length)return 0;var c,e,h=0,d=a.length-1;do if(c=h+d>>1,e=a[c]||0,b<e)d=c-1;else if(b>e)h=c+1;else return b==e?c:0;while(h<=d);return c+(e<b)}function n(a,b){if(!a.length)return 0;var c,e,h,d=0,i=a.length-1;do if(c=d+i>>1,h=a[c].value||0,h===e?(h=a[c].object.eventObjectId,e=b.object.eventObjectId):e=b.value||0,e<h)i=c-1;else if(e>h)d=c+1;else return e==h?c:0;while(d<=i);return c+(h<e)}function k(){for(var a=Object.slice(this.item_),b=this.index_.slice(this.offset,
this.offset+this.limit),c=[],e,h=0,d;d=b[h];h++){var i=d.object.eventObjectId;a[i]?delete a[i]:c.push(d.object)}(e=getDelta(c,values(a)))&&AggregateDataset.prototype.event_datasetChanged.call(this,this,e)}function q(a,b){var a=Function.getter(a),c=b+"_"+a.getterIdx_,e=s[c];if(!e)e=s[c]=this,this.indexType=b,this.indexClass=u[b],this.getter=a,this.key=c,this.createInstance=function(a){if(a instanceof x){var b=a.indexes&&a.indexes[this.key];if(!b)b=new this.indexClass(this.getter),b.addHandler(h,a),
b.key=this.key;return b}};return e}function p(a,b,c){var e=a.indexCache_;a.lock();if(b)for(var h=0,d;d=b[h++];){var i=a.valueGetter(d);e[d.eventObjectId]=i;a.add(d,i)}if(c)for(h=0;d=c[h++];)a.remove(d,e[d.eventObjectId]),delete e[d.eventObjectId];a.unlock()}var v=f.Class,r=f.TimeEventManager,t=f.data,m=t.KeyObjectMap,w=t.property.Property,x=t.AbstractDataset,d=t.Dataset.MapReduce,t=v(x,{valueGetter:Function.$true,index_:null,offset:0,limit:10,event_datasetChanged:function(a,b){var c;if(c=b.inserted)for(var e=
0;e<c.length;e++){var h=c[e],h={value:this.valueGetter(h),object:h},d=n(this.index_,h);this.index_.splice(d,0,h)}if(c=b.deleted)for(e=0;e<c.length;e++)h=c[e],h={value:this.valueGetter(h),object:h},d=n(this.index_,h),this.index_.splice(d,1);k.call(this)},init:function(a){this.index_=[];AggregateDataset.prototype.init.call(this,a)},setRange:function(a,b){this.offset=a;this.limit=b;k.call(this)}}),u=v(w,{autoDestroy:!0,valueGetter:Function.$null,dataSource:null,init:function(a){w.prototype.init.call(this,
this.value||0);this.indexCache_={};this.valueGetter=a},add:function(){},remove:function(){},upd:function(){}});u.Sum=v(u,{add:function(a,b){this.value+=b},remove:function(a,b){this.value-=b},upd:function(a,b,c){this.set(this.value+b-c)}});u.Avg=v(u,{sum_:0,count_:0,add:function(a,b){this.sum_+=b;this.count_+=1;this.value=this.sum_/this.count_},remove:function(a,b){this.sum_-=b;this.count_-=1;this.value=this.count_?this.sum_/this.count_:0},upd:function(a,b,c){this.sum_+=b-c;this.set(this.sum_/this.count_)}});
u.Count=v(u,{valueGetter:Function.$true,add:function(a,b){b&&(this.value+=1)},remove:function(a,b){b&&(this.value-=1)},upd:function(a,b){this.set(this.value+(b?1:-1))}});u.Max=v(u,{init:function(a,b){this.stack=[];u.prototype.init.call(this,a,b)},add:function(a,b){this.stack.splice(o(this.stack,b),0,b);this.value=this.stack[this.stack.length-1]},remove:function(a,b){this.stack.remove(b);this.value=this.stack[this.stack.length-1]},upd:function(a,b,c){this.stack.splice(o(this.stack,c),1);this.stack.splice(o(this.stack,
b),0,b);this.set(this.stack[this.stack.length-1])}});u.Min=v(u,{init:function(a,b){this.stack=[];u.prototype.init.call(this,a,b)},add:function(a,b){this.stack.splice(o(this.stack,b),0,b);this.value=this.stack[0]},remove:function(a,b){this.stack.remove(b);this.value=this.stack[0]},upd:function(a,b,c){this.stack.splice(o(this.stack,c),1);this.stack.splice(o(this.stack,b),0,b);this.set(this.stack[0])}});var s={},l=function(a){return function(b){return new q(b,a)}},y=l("Sum"),i=l("Avg"),a=l("Count"),
c=l("Min"),l=l("Max"),b={update:function(a){var b,c,e,h=a.eventObjectId,d;for(d in this.indexes)e=this.indexes[d],b=e.indexCache_[h],c=e.valueGetter(a),c!==b&&(e.upd(a,c,b),e.indexCache_[h]=c)}},e={datasetChanged:function(a,c){if(c.inserted)for(var e=0;a=c.inserted[e++];)a.addHandler(b,this);if(c.deleted)for(e=0;a=c.deleted[e++];)a.removeHandler(b,this);for(var h in this.indexes)p(this.indexes[h],c.inserted,c.deleted)},destroy:function(){for(var a in this.indexes)this.indexes[a].destroy()}},h={destroy:function(a){this.removeIndex(a)}};
x.prototype.createIndex=function(a){if(a instanceof q!=!1){if(!this.indexes)this.indexes={},this.addHandler(e),e.datasetChanged.call(this,this,{inserted:this.getItems()});var b=a.key;this.indexes[b]||(a=a.createInstance(this),this.indexes[b]=a,p(a,this.getItems()));return this.indexes[b]}};x.prototype.removeIndex=function(a){if(this.indexes&&this.indexes[a.key]){delete this.indexes[a.key];a.destroy();for(var b in this.indexes)return;this.removeHandler(e);delete this.indexes}};v=v(d,{calcs:null,indexes:null,
indexes_:null,timer_:null,indexUpdated:null,memberSourceMap:null,keyMap:null,event_sourceChanged:function(a,b){d.prototype.event_sourceChanged.call(this,a,b);var c,e;for(e in this.indexes_)c=this.indexes_[e],b&&(this.removeIndex(e),b.removeIndex(this.indexes[e])),this.source&&this.addIndex(e,this.source.createIndex(c))},listen:{sourceObject:{update:function(a,b){d.prototype.listen.sourceObject.update.call(this,a,b);this.stat.sourceObjectUpdate++;this.sourceMap_[a.eventObjectId].updated=!0;this.fireUpdate()}},
index:{change:function(a){this.context.indexValues[this.key]=a;this.context.stat.indexUpdate++;this.context.indexUpdated=!0;this.context.fireUpdate()}},member:{subscribersChanged:function(a,b){this.stat.subscribersChanged++;a.subscriberCount>0&&b==0&&(this.stat.subscribersChangedSucc++,this.calcMember(a))}}},map:function(a){return this.keyMap.get(a,!0)},addMemberRef:function(a,b){this.memberSourceMap[a.eventObjectId]=b.eventObjectId;a.addHandler(this.listen.member,this);this.sourceMap_[b.eventObjectId].updated=
!0;a.subscriberCount>0&&this.calcMember(a)},removeMemberRef:function(a){delete this.memberSourceMap[a.eventObjectId];a.removeHandler(this.listen.member,this)},init:function(a){this.indexUpdated=!1;this.indexesBind_={};this.memberSourceMap={};var b=this.indexes;this.indexes={};this.indexes_={};this.calcs=this.calcs||{};this.indexValues={};if(!this.keyMap||this.keyMap instanceof m==!1)this.keyMap=new m(Object.complete({create:function(a,b){return new this.itemClass(b)}},this.keyMap));this.stat={applyCount:0,
indexUpdate:0,tryCalcMember:0,tryUpdateMember:0,calcCount:0,updateMember:0,fireUpdate:0,fireUpdateSucc:0,subscribersChanged:0,subscribersChangedSucc:0,update:0,sourceObjectUpdate:0};d.prototype.init.call(this,a);Object.iterate(b,this.addIndex,this)},addIndex:function(a,b){if(!this.indexes[a]){if(b instanceof q)if(this.indexes_[a])return;else this.indexes_[a]=b,b=this.source&&this.source.createIndex(b);if(b instanceof u)this.indexValues[a]=b.value,this.indexes[a]=b,this.indexesBind_[a]={key:a,context:this},
b.addHandler(this.listen.index,this.indexesBind_[a]),this.listen.index.change.call(this.indexesBind_[a],b.value)}},removeIndex:function(a){if(this.indexes_[a]||this.indexes[a])this.indexes[a]&&this.indexes[a].removeHandler(this.listen.index,this.indexesBind_[a]),delete this.indexValues[a],delete this.indexesBind_[a],delete this.indexes[a],delete this.indexes_[a]},addCalc:function(a,b){this.calcs[a]=b;this.fireUpdate()},removeCalc:function(){delete this.calcs[name]},fireUpdate:function(){this.stat.fireUpdate++;
if(!this.timer_)this.stat.fireUpdateSucc++,this.timer_=!0,r.add(this,"apply",Date.now())},apply:function(){this.stat.applyCount++;for(var a in this.item_)this.calcMember(this.item_[a]);this.timer_=this.indexUpdated=!1},calcMember:function(a){this.stat.tryCalcMember++;var b=this.sourceMap_[this.memberSourceMap[a.eventObjectId]];if(a.subscriberCount&&(b.updated||this.indexUpdated)){this.stat.tryUpdateMember++;b.updated=!1;var c={},e,h,d;for(d in this.calcs)if(this.stat.calcCount++,e=this.calcs[d](b.sourceObject.data,
this.indexValues),a.data[d]!==e&&(!isNaN(e)||!isNaN(a.data[d])))c[d]=e,h=!0;h&&(this.stat.updateMember++,a.update(c))}},getMember:function(a){return this.keyMap.get(a,!0)},destroy:function(){this.indexesBind_=this.memberSourceMap=this.indexUpdated=this.calcs=this.timer_=null;this.keyMap.destroy();this.keyMap=null;for(var a in this.indexes)this.removeIndexConstructor(a);d.prototype.destroy.call(this)}});f.namespace("basis.data.index").extend({IndexedDataset:t,IndexConstructor:q,Index:u,Sum:y,Avg:i,
Count:a,Max:l,Min:c,IndexMap:v})})(basis);
(function(f){function o(a){g[a]=g[a]||0;return a+g[a]++}function n(){var a=Array.from(arguments),b=a.pop();typeof b!="function"&&console.warn("Last argument for calculate field constructor must be a function");for(var c=[],e=[],h=0,g;h<a.length;h++)g=a[h].quote('"'),c.push(g+" in delta"),e.push("data["+g+"]");b=(new Function("calc","return function(delta, data, oldValue){"+(c.length?"if ("+c.join(" || ")+")":"")+"return calc("+e.join(", ")+");"+(c.length?"return oldValue;":"")+"}"))(b);b.args=a;b.isCalcField=
!0;return b}function k(){return n.apply(null,Array.from(arguments).concat(function(){for(var a=[],b=arguments.length;b-- >0;){if(arguments[b]==null)return null;a.push(arguments[b])}return a.join("-")}))}var q=f.Class,p=f.Cleaner,v=Object.extend,r=Function.$self,t=Function.getter,m=f.data,w=f.EventObject,x=m.Dataset,d=m.Collection,u=m.Grouping,s=m.DataObject,l=m.STATE,y={},i={string:1,number:1},a=[],c=function(a){return isNaN(a)?null:Number(a)},b=function(a){return isNaN(a)?null:Number(a)},e=function(a){return isNaN(a)?
null:parseInt(a)},h=function(a){return a==null?null:String(a)},g={},j=f.Class(null,{init:function(a){var b=this.index={};this.normalize=a;this.valueWrapper=function(c,e){var h=a(c,e);return h!==e&&b[h]?e:h};this.calcWrapper=function(c,e){var h=a(c,e);if(h!==e&&b[h])throw"Duplicate value for index "+e+" => "+c;return h};p.add(this)},get:function(a,b){var c=this.index[a];if(c&&(!b||c instanceof b))return c},add:function(a,b){var c=this.index[a];if(b&&(!c||c===b))return this.index[a]=b,!0},remove:function(a,
b){if(this.index[a]===b)return delete this.index[a],!0},destroy:function(){this.index=null}}),m=function(a,b){return function(c){return a.prototype[b].call(this,c&&c.map(this.wrapper))}},z=function(a,b){return function(c){if(!this.name)this.name=o(b);a.prototype.init.call(this,c)}},A=function(a){return function(b,c){x.setAccumulateState(!0);b=(b||[]).map(this.wrapper);x.setAccumulateState(!1);return a.prototype.sync.call(this,b,c)}},D=q(x,{wrapper:Function.$self,init:z(x,"EntitySet"),sync:A(x),set:m(x,
"set"),add:m(x,"add"),remove:m(x,"remove"),destroy:function(){x.prototype.destroy.call(this);delete this.wrapper}}),C=q(D,{set:Function.$false,add:Function.$false,remove:Function.$false,clear:Function.$false}),B=q(d,{init:z(d,"EntityCollection"),sync:A(d)});B.sourceHandler=d.sourceHandler;var F=q(u,{subsetClass:C,init:z(u,"EntityGrouping"),sync:A(u),getSubset:function(a,b){var c=u.prototype.getSubset.call(this,a,b);if(c)c.wrapper=this.wrapper;return c}}),G=function(a){if(this instanceof G){var b=
new M(a||r);return function(a,c){return a!=null?(c instanceof D||(c=b.createEntitySet()),c.set(a instanceof x?a.getItems():Array.from(a)),c):null}}};G.className="basis.entity.EntitySetWrapper";var M=q(null,{init:function(a){this.wrapper=a},createEntitySet:function(){return new D({wrapper:this.wrapper,name:"Set of "+((this.wrapper.entityType||this.wrapper).name||"").quote("{")})}}),H=function(a){if(this instanceof H){var b=function(a,b){if(a!=null){if(a===b||a.entityType===c)return a;var d,j=c.idField;
if(i[typeof a]){if(!j)return;d=a;a={};a[j]=d}else if(c.compositeKey)d=c.compositeKey(a,a);else if(j)d=a[j];else if(g&&(b=c.singleton,!b))return c.singleton=new h(a);d!=null&&e&&(b=e.get(d,c.entityClass));b&&b.entityType===c?b.update(a):b=new h(a);return b}else return c.singleton},c=new K(a||{},b),e=c.index__,h=c.entityClass,g=c.isSingleton;v(b,{toString:function(){return this.typeName+"()"},entityType:c,type:b,typeName:c.name,index:e,reader:function(a){return c.reader(a)},get:function(a){return c.get(a)},
addField:function(a,b){c.addField(a,b)},all:c.all,createCollection:function(a,e,h){var g=c.collection_[a];return!g&&e?c.collection_[a]=new B({wrapper:b,source:h||c.all,rule:e}):g},getCollection:function(a){return c.collection_[a]},createGrouping:function(a,e,h){var g=c.grouping_[a];return!g&&e?c.grouping_[a]=new F({wrapper:b,source:h||c.all,rule:e}):g},getGrouping:function(a){return c.grouping_[a]},getSlot:function(a,b){return c.getSlot(a,b)}});return b}};H.className="basis.entity.EntityTypeWrapper";
var J=t("singleton"),E={};q(s,{});var K=q(null,{name:"UntitledEntityType",defaults:null,fields:null,extensible:!1,index__:null,slot_:null,init:function(b,c){this.name=b.name||o(this.name);this.index__=b.index;this.idFields={};a.push(this);this.isSingleton=b.isSingleton;this.wrapper=c;this.all=new C(Object.extend(b.all||{},{wrapper:c}));this.slot_={};if(b.extensible)this.extensible=!0;this.fields={};this.defaults={};this.aliases={};this.getters={};Object.iterate(b.fields,this.addField,this);b.constrains&&
b.constrains.forEach(function(a){this.addCalcField(null,a)},this);if(this.isSingleton)this.get=J;b.aliases&&Object.iterate(b.aliases,this.addAlias,this);this.collection_={};if(b.collections)for(var e in b.collections)this.collection_[e]=new B({name:e,wrapper:c,source:this.all,rule:b.collections[e]||Function.$true});this.grouping_={};if(b.groupings)for(e in b.groupings)this.grouping_[e]=new F({name:e,wrapper:c,source:this.all,rule:b.groupings[e]||Function.$true});this.entityClass=L(this,this.all,this.index__,
this.slot_,this.fields,this.defaults,this.getters).extend({entityType:this,type:c,typeName:this.name,getId:function(){return this.__id__}})},reader:function(a){var b={};if(i[typeof a])return this.idField?(b[this.idField]=a,b):null;if(!a||a==null)return null;for(var c in a){var e=c in this.aliases?this.aliases[c]:"";e&&e in this.fields&&(b[e]=this.fields[e].reader?this.fields[e].reader(a[c]):a[c])}return b},addAlias:function(a,b){b in this.fields&&a in this.aliases==!1&&(this.aliases[a]=b)},addField:function(a,
g){if(!this.all.itemCount){this.aliases[a]=a;typeof g=="function"&&(g={type:g});if("type"in g&&typeof g.type!="function")g.type=r;var d=g.type||r;if([c,b,e,h].has(d))g.id=!0;if(g.id){if(!this.index__)this.index__=new j(String);this.idFields[a]=!0;this.idField||this.compositeKey?(this.idField=null,this.compositeKey=k.apply(null,Object.keys(this.idFields))):this.idField=a}g.calc?this.addCalcField(a,g.calc,void 0):this.fields[a]=d;this.defaults[a]="defValue"in g?g.defValue:d();this.getters["get_"+a]=
function(){return this.data[a]};E[a]||(E[a]={destroy:function(){this.set(a,null)}})}},addCalcField:function(a,b,c){if(!a||!this.fields[a]){if(!this.calcs)this.calcs=[];for(var e={args:b.args,wrapper:!c?b:function(a,e,h){return c(b(a,e,h))}},h=this.calcs.length,g=0,d=0;d<this.calcs.length;d++)b.args.has(this.calcs[d].key)&&(g=d+1);if(a){e.key=a;for(d=0;d<this.calcs.length;d++)if(this.calcs[d].args.has(a)){h=d;break}if(g>h)return;if(this.idField&&a==this.idField)this.compositeKey=b;this.fields[a]=function(a,
b){typeof console!="undefined"&&console.log("Calculate fields are readonly");return b}}else h=g;this.calcs.splice(Math.min(h,g),0,e)}},get:function(a){a=this.getId(a);if(a!=null)return this.index__.get(a,this.entityClass)},getId:function(a){if((this.idField||this.compositeKey)&&a!=null){if(i[typeof a])return a;if(a&&a.entityType===this)return a.__id__;if(a instanceof s)a=a.data;return this.compositeKey?this.compositeKey(a,a):a[this.idField]}},getSlot:function(a){var b=this.getId(a);if(b!=null){var c=
this.slot_[b];c||(i[typeof a]&&(c={},this.idField&&!this.compositeKey&&(c[this.idField]=a),a=c),c=this.slot_[b]=new s({delegate:this.get(b),data:a}));return c}}}),I=q(s,{init:w.prototype.init,event_rollbackUpdate:w.createEvent("rollbackUpdate")}),L=function(a,b,c,e,h,g,d){function j(b,c,e){var h=!1,g=a.calcs,d=b.__id__,l=b.data;try{if(g)for(var B=0,m;m=g[B++];){var s=m.key;if(s){var k=l[s];l[s]=m.wrapper(c,l,l[s]);l[s]!==k&&(c[s]=k,h=!0)}else m.wrapper(c,l)}if(a.compositeKey)b.__id__=a.compositeKey(c,
l,b.__id__);else if(f&&f in c)b.__id__=l[f];b.__id__!==d&&a.index__.calcWrapper(b.__id__)}catch(u){b.__id__=d;for(var x in c)b.data[x]=c[x];if(e)for(x in e)if(!b.modified)b.modified=e;h=!1}b.__id__!==d&&i(b,d,b.__id__);return h}function i(a,b,h){b!=null&&(c.remove(b,a),e[b]&&e[b].setDelegate());h!=null&&(c.add(h,a),e[h]&&e[h].setDelegate(a))}var f=a.idField;return q(I,d,{canHaveDelegate:!1,modified:null,isTarget:!0,extendConstructor_:!1,init:function(a){I.prototype.init.call(this);this.fieldHandlers_=
{};this.data={};this.root=this;this.target=this;var c,e={},d;for(d in h)d in a?(e[d]=g[d],c=h[d](a[d])):c=g[d],c&&c!==this&&c instanceof w&&c.addHandler(E[d],this)&&(this.fieldHandlers_[d]=!0),this.data[d]=c;j(this,e);b.event_datasetChanged(b,{inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},get:function(a){return this.data[a]},set:function(b,c,e,g){var d=h[b];if(!d){if(!a.extensible)return;d=r}var i,l=this.modified,c=d(c,this.data[b]),
d=this.data[b];if(c!==d&&(!c||!d||c.constructor!==Date||d.constructor!==Date||+c!==+d))a:{i={};if(b!=f)if(e){if(!l)this.modified=l={};if(b in l===!1)i.rollback={key:b,value:void 0},l[b]=d;else if(l[b]===c&&(i.rollback={key:b,value:c},delete l[b],!Object.keys(l).length))this.modified=null}else if(l&&b in l)if(l[b]!==c){i.rollback={key:b,value:l[b]};l[b]=c;break a}else return!1;this.data[b]=c;this.fieldHandlers_[b]&&(d.removeHandler(E[b],this),this.fieldHandlers_[b]=!1);c&&c!==this&&c instanceof w&&
c.addHandler(E[b],this)&&(this.fieldHandlers_[b]=!0);i.key=b;i.value=d;i.delta={};i.delta[b]=d}else if(!e&&l&&b in l&&(i={rollback:{key:b,value:l[b]}},delete l[b],!Object.keys(l).length))this.modified=null;if(!g&&i){var e=i.key,b=i.delta||{},B;if(i.rollback)B={},B[i.rollback.key]=i.rollback.value;j(this,b,B)&&(e=!0);if(e)this.event_update(this,b),i.delta=b;B&&this.event_rollbackUpdate(this,B)}return i||!1},update:function(a,b){if(a){var c,e={},h,g={},d,i;for(i in a)if(d=this.set(i,a[i],b,!0)){if(d.key)c=
!0,e[d.key]=d.value;if(d.rollback)h=!0,g[d.rollback.key]=d.rollback.value}j(this,e,g)&&(c=!0);c&&this.event_update(this,e);h&&this.event_rollbackUpdate(this,g)}return c?e:!1},reset:function(){this.update(g)},clear:function(){var a={},b;for(b in this.data)a[b]=void 0;return this.update(a)},commit:function(a){if(this.modified){var b=this.modified;this.modified=null}this.update(a);b&&this.event_rollbackUpdate(this,b)},rollback:function(){if(this.state!=l.PROCESSING){if(this.modified){var a=this.modified;
this.modified=null;this.update(a);this.event_rollbackUpdate(this,a)}this.setState(l.READY)}},destroy:function(){for(var a in this.fieldHandlers_)this.data[a].removeHandler(E[a],this);this.fieldHandlers_=y;this.__id__&&i(this,this.__id__,null);s.prototype.destroy.call(this);b.event_datasetChanged(b,{deleted:[this]});this.data=y;this.modified=null}})};f.namespace("basis.entity").extend({isEntity:function(a){return a&&a instanceof L},NumericId:c,NumberId:b,IntId:e,StringId:h,Index:j,CalculateField:n,
EntityType:H,Entity:L,BaseEntity:I,EntitySetType:G,EntitySet:D,ReadOnlyEntitySet:C,Collection:B,Grouping:F})})(basis);
(function(f){var o=f.Class,n=Object.extend,k=f.EventObject,q=k.createEvent;f.ua.Cookies.get("DEBUG_MODE");var p,v,r=!1,t={},m=Date.now,w=n(new k,{event_sessionOpen:q("sessionOpen"),event_sessionClose:q("sessionClose"),event_sessionFreeze:q("sessionFreeze"),event_sessionUnfreeze:q("sessionUnfreeze"),isOpened:function(){return!!p},getTimestamp:function(){if(p)return v},open:function(d,f){var s;t[d]||(t[d]=new x(d));s=t[d];p===s?r&&this.unfreeze():(this.close(),p=s,v=m(),f&&n(s.data,f),this.event_sessionOpen(this))},
close:function(){p&&(r&&this.unfreeze(),this.event_sessionClose(this),v=p=null)},freeze:function(){p&&!r&&(this.event_sessionFreeze(this),r=!0,v=null)},unfreeze:function(){p&&r&&(r=!1,v=m(),this.event_sessionUnfreeze(this))},storeData:function(d,f){if(p)return p.storeData(d,f);else throw Error("No opened session");},getData:function(d){if(p)return p.getData(d);else throw Error("No opened session");},destroy:function(){for(var d=Object.keys(t),f;f=d.pop();)t[f].destroy();k.prototype.destroy.call(this)}}),
x=o(k,{event_destroy:function(){p==this&&w.close();delete t[this.key]},extendConstructor_:!1,init:function(d){k.prototype.init.call(this);this.key=d;this.data={}},storeData:function(d,f){if(r)throw Error("Session is frozen");return this.data[d]=f},getData:function(d){if(r)throw Error("Session is frozen");return this.data[d]},destroy:function(){k.prototype.destroy.call(this);for(var d=Object.keys(this.data),f;f=d.pop();){var m=this.data[f];m!=null&&typeof m.destroy=="function"&&m.destroy();delete this.data[f]}}});
f.namespace("basis.session").extend({SessionManager:w})})(basis);
(function(f){function o(d){var a=f.EventObject.createEvent(d),c=[d];return function(){y.dispatch.apply(this,c.concat(arguments));a.apply(this,arguments)}}function n(d,a){var c={"JS-Framework":"Basis"};u.test(a.method)?(c["Content-Type"]=a.contentType+(a.encoding?";charset="+a.encoding:""),r.test("gecko")&&(c.Connection="close")):r.test("ie")&&(c["If-Modified-Since"]=(new Date(0)).toGMTString());Object.iterate(Object.extend(c,a.headers),function(a,c){c!=null&&this.setRequestHeader(a,c)},d)}function k(i){var a=
this.transport;if(a){if(typeof i!="number")i=a.readyState;if(i!=this.prevReadyState_)if(this.prevReadyState_=i,this.event_readyStateChanged(i),i==4){m.remove(this,"timeoutAbort");var i=d.UNDEFINED,c;this.progress=!1;a.onreadystatechange=Function.$undef;if(this.aborted){var b=this.abortedByTimeout_;b&&this.event_timeout();this.event_abort(b)}else i=this.responseIsSuccess(),this.update({text:a.responseText,xml:a.responseXML}),i?(this.event_success(a),i=d.READY):(this.event_failure(a),i=d.ERROR,c=this.getRequestError(a)),
this.event_httpStatus(a,a.status);this.event_complete(a);this.setState(i,c)}else this.setState(d.PROCESSING)}}function q(d){m.remove(this,"timeoutAbort");this.abortedByTimeout_=this.aborted=this.progress=!1;this.prevReadyState_=-1;if(r.test("gecko1.8.1-")&&d.asynchronous)this.transport=l();var a=this.transport;this.asynchronous?a.onreadystatechange=k.bind(this):k.call(this,0);a.open(d.method,d.location,d.asynchronous);this.progress=!0;this.abortedByTimeout_=this.aborted=!1;n(a,d);this.event_start();
if(this.aborted)k.call(this,4);else if(!this.aborted&&this.progress){this.requestStartTime=Date.now();m.add(this,"timeoutAbort",this.requestStartTime+this.timeout);var c=d.postBody;if(d.method=="POST"&&r.test("ie9-"))if(typeof c=="object"&&typeof c.documentElement!="undefined"&&typeof c.xml=="string")c=c.xml;else if(typeof c=="string")c=c.replace(/\r/g,"");else if(c==null||c=="")c="[empty request]";a.send(c);return!0}}var p=f.Class,v=f.dom.event,r=f.ua,t=f.Cleaner,m=f.TimeEventManager,w=f.data,x=
w.DataObject,d=w.STATE,u=/POST/i,w=f.ua.Cookies.get("DEBUG_AJAX");(function(){for(var d=192;d<=255;d++)d.toHex(),String.fromCharCode(d+848),(d+848).toHex(),d.toHex()})();var s="native",l=function(){if(window.XMLHttpRequest)return function(){return new XMLHttpRequest};var d=window.ActiveXObject;if(d)for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;s=a[c];c++)try{if(new d(s))return function(){return new d(s)}}catch(b){}throw Error(s="Browser doesn't support for XMLHttpRequest!");
}(),y=function(){var d=[],a=[{handler:{start:function(){d.add(this)},complete:function(){d.remove(this)}}}];v.onUnload(function(){a.clear()});return{addHandler:function(c,b){for(var e=0,h;h=a[e];e++)if(h.handler===c&&h.thisObject===b)return!1;a.push({handler:c,thisObject:b});return!0},removeHandler:function(c,b){for(var e=0,h;h=a[e];e++)if(h.handler===c&&h.thisObject===b)return a.splice(e,1),!0;return!1},dispatch:function(c){if(a.length)for(var b=Array.prototype.slice.call(arguments,1),e,h,g=a.length-
1;e=a[g];g--)h=e.handler[c],typeof h=="function"&&h.apply(e.thisObject||this,b)},abort:function(){for(var a=Array.from(d),b=0;b<a.length;b++)a[b].abort();return a}}}(),p=p(x,{state:d.UNDEFINED,event_start:o("start"),event_readyStateChanged:o("readyStateChanged"),event_timeout:o("timeout"),event_abort:o("abort"),event_success:o("success"),event_failure:o("failure"),event_httpStatus:o("httpStatus"),event_complete:o("complete"),event_stateChanged:function(d,a){x.prototype.event_stateChanged.call(this,
d,a);for(var c=0;c<this.influence.length;c++)this.influence[c].setState(this.state,this.state.data)},influence:null,debug:w,progress:!1,aborted:!1,abortedByTimeout_:!1,abortCalled:!1,timeout:3E4,requestStartTime:0,requestData_:null,asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,init:function(d){var a=this.influence;this.transport=l();this.requestHeaders={};this.influence=[];this.params={};a&&this.setInfluence.apply(this,a);t.add(this);x.prototype.init.call(this,
d);this.callback&&this.addHandler(this.callback,this)},setInfluence:function(){for(var d=Array.from(arguments),a=0;a<d.length;a++)d[a].setState(this.state,this.state.data);this.influence.set(d)},clearInfluence:function(){this.influence.clear()},setParam:function(d,a){this.params[d]=a},setParams:function(d){this.clearParams();for(var a in d)this.setParam(a,d[a])},removeParam:function(d){delete this.params[d]},clearParams:function(){for(var d in this.params)delete this.params[d]},timeoutAbort:function(){this.abortedByTimeout_=
!0;this.abort()},abort:function(){this.aborted=!0;if(this.progress)m.remove(this,"timeoutAbort"),this.progress=!1,this.transport.abort(),this.asynchronous&&this.transport.onreadystatechange&&this.transport.onreadystatechange!==Function.$undef&&k.call(this,4)},request:function(d){var d=d||this.url,a=this.method.toUpperCase(),c,b;if(!this.transport)throw Error("Transport is not allowed");if(!d)throw Error("URL is not defined");this.abort();delete this.requestData_;this.update({responseText:"",responseXml:null});
this.abortedByTimeout_=this.aborted=this.progress=!1;c=Object.iterate(this.params,function(a,b){return b==null||b&&typeof b.toString=="function"&&b.toString()==null?null:a+"="+String(b.toString()).replace(/[\%\=\&\<\>\s\+]/g,function(a){a=a.charCodeAt(0).toHex();return"%"+(a.length<2?"0":"")+a})}).filter(Function.$isNotNull).join("&");u.test(a)?b=this.postBody||c||"":c&&(d+=(d.indexOf("?")==-1?"?":"&")+c);this.requestData_={method:a,location:d,contentType:this.contentType,encoding:this.encoding,asynchronous:this.asynchronous,
headers:Object.extend({},this.requestHeaders),postBody:b};return q.call(this,this.requestData_)},repeat:function(){if(this.requestData_)return this.abort(),q.call(this,this.requestData_)},get:function(){this.request.apply(this,arguments)},responseIsSuccess:function(){try{if(!this.aborted){var d=this.transport.status;return d==void 0||d==0||d>=200&&this.transport.status<300}}catch(a){}return!1},getRequestError:function(d){return{code:"SERVER_ERROR",msg:d.responseText}},destroy:function(){this.destroy=
Function.$undef;delete this.requestData_;this.transport.onreadystatechange=Function.$undef;this.transport.abort();this.clearInfluence();x.prototype.destroy.call(this);delete this.transport;t.remove(this)}});f.namespace("basis.net.ajax").extend({Transport:p,TransportDispatcher:y,createEvent:o})})(basis);
(function(f){var o=f.Class,n=f.dom,k=f.net.ajax,q=f.xml,p=k.Transport,v=q.QName,r=q.addNamespace,t=q.XML2Object,m=q.Object2XML,w=q.createElementNS,x=q.NAMESPACE,d=String("http://schemas.xmlsoap.org/soap/envelope/"),u=String("http://schemas.xmlsoap.org/soap/encoding/"),s=o(null,{url:null,namespace:null,init:function(a,c){this.url=a;this.namespace=c},call:function(a,c){a=this.createMethodCall(a,c,!1);a.transport.abort();a.invoke(c.header,c.body,c.callback,c.mapping)},createMethodCall:function(a,c,d){return new l(this,
new v(a,this.namespace),c,d)}}),l=o(null,{service:null,transport:null,method:null,envelope:null,body:null,init:function(a,c,d,g){d=d||{};this.method=c;this.envelope=new i;this.url=a.url;this.transport=new y(c,d.callback);this.transport.requestHeaders={SOAPAction:c.namespace+(!/\/$/.test(c.namespace)?"/":"")+c};this.transport.requestEnvelope=this.envelope;this.transport.postBody=this.envelope.document;this.transport.url={toString:function(){return a.url}};d.mapping&&this.transport.setMapping(d.mapping);
d.callback&&this.transport.setCallback(d.callback);if(g)this.body=d.body||{}},repeatCall:function(){this.transport.get()},call:function(a){return this.invoke(null,a||this.body)},invoke:function(a,c,d,g){this.transport.abort();this.envelope.getBody(!0).setValue(this.method,c);a&&this.envelope.getHeader(!0).setValue(a,this.method.namespace);d&&this.transport.setCallback(d);g&&this.transport.setMapping(g);this.transport.get()},destroy:function(){this.destroy=Function.$undef;this.transport.destroy();
this.envelope.destroy();this.contructor.prototype.destroy.call(this)}}),y=o(p,{callback:{},mapping:null,method:"POST",contentType:"text/xml",encoding:"utf-8",event_success:function(a){var c=a.responseXML;if(c===void 0||c.documentElement===void 0)this.event_failure(this);else{var d=Array.from(arguments);c.xml&&DOMParser&&(c=(new DOMParser).parseFromString(c.xml,"text/xml"));this.responseEnvelope=new i(c.documentElement);d.push(this.getResponseData(),this.getRequestData());p.prototype.event_success.apply(this,
d)}},event_failure:function(a){var c=Array.from(arguments),d=this.state.data||this.getRequestError(a);d.isSoapFailure&&this.event_soapfailure(a,d.code,d.msg);c.push(d.code,d.msg);p.prototype.event_failure.apply(this,c)},event_soapfailure:k.createEvent("soapfailure"),requestDataGetter:Function.$self,responseDataGetter:Function.$self,errorCodeGetter:function(a){return n.tag(a,"code")[0]},errorMessageGetter:function(a){return n.tag(a,"message")[0]},extendConstructor_:!1,init:function(a){p.prototype.init.call(this);
this.soapMethod=a},setCallback:function(a){typeof a=="object"&&this.addHandler(a)},setMapping:function(a){this.mapping=a},getRequestData:function(){return this.requestDataGetter(this.requestEnvelope.getBody().getValue())},getResponseData:function(){var a=this.responseEnvelope&&this.responseEnvelope.getBody();if(a)return this.responseDataGetter(a.getValue(this.mapping))},getRequestError:function(a){var c,d,g=!1,a=a.responseXML;if(a!=void 0&&a.documentElement!=void 0)c=a.documentElement,g=this.errorCodeGetter(c),
d=this.errorMessageGetter(c),this.responseEnvelope=new i(c),c=g?g.firstChild.nodeValue:"UNKNOWN_ERROR",d=d?d.firstChild.nodeValue:"Unknown error",console.log("SoapError:",c.quote("("),d),g=!0;return{code:c||"TRANSPORT_ERROR",msg:d,isSoapFailure:g}}}),i=o(null,{header:null,body:null,init:function(a){if(!a)a=q.createDocument(d,"soap:Envelope").documentElement,r(a,"xsd",x.XMLShema),r(a,"xsi",x.XMLShemaInstance),q.XMLNS.BAD_SUPPORT&&r(a,"soap",d);this.document=a.ownerDocument;this.element=a;this.body=
this.getBody(!0)},getElementByName:function(a){return q.getElementsByTagNameNS(this.element,a,d)[0]},getHeader:function(b){var c=this.header;if(!c){var d=this.getElementByName("Header");if(d||b)c=this.header=new a(d,this.document),d||this.element.insertBefore(c.element,this.element.firstChild)}return c},setHeaderSection:function(a,c){this.getHeader(!0).setSection(a,c)},getBody:function(a){var e=this.body;if(!e){var d=this.getElementByName("Body");if(d||a)e=this.body=new c(d,this.document),d||this.element.appendChild(e.element)}return e},
destroy:function(){this.header&&(this.header.destroy(),delete this.header);this.body&&(this.body.destroy(),delete this.body);delete this.element;delete this.document}}),a=o(null,{init:function(a,c){this.element=a||w(c,"Header",d)},getValue:function(){return t(this.element)},setValue:function(a,c){n.clear(this.element);this.appendChild(a,c)},appendChild:function(a,c){if(a)for(var d in a){var g=this.element.appendChild(m(this.element.ownerDocument,d,c,a[d]));q.XMLNS.BAD_SUPPORT&&r(g,"",c)}},setSection:function(a,
c){var d=q.getElementsByTagNameNS(this.element,a,a.namespace)[0];d&&n.remove(d);this.appendChild(Function.wrapper(a)(c),a.namespace)}}),c=o(null,{init:function(a,c){this.element=a||w(c,"Body",d)},getValue:function(a){return t(this.element,a)},setValue:function(a,c,d){n.clear(this.element);this.appendChild(a,c,d)},appendChild:function(a,c,d){c=m(this.element.ownerDocument,a,a.namespace,Function.$defined(c)?c:{});this.element.appendChild(c);q.XMLNS.BAD_SUPPORT&&r(c.element,"",a.namespace);d&&q.setAttributeNodeNS(c,
q.createAttributeNS(document,"encodingStyle",u,d))}});f.namespace("basis.net.soap").extend({Service:s,ServiceCall:l,ServiceCallTransport:y,Envelope:i,EnvelopeHeader:a,EnvelopeBody:c})})(basis);
(function(f){var o=f.Class,n=f.dom,k=Function.getter,q=f.dom.wrapper,p=q.TmplNode,v=q.TmplControl,q=o(p,{captionGetter:k("caption"),caption:"[no caption]",groupId:0,name:null,template:'<button{buttonElement} class="Basis-Button" event-click="click"><span class="Basis-Button-Back"/><div class="Basis-Button-Caption">{captionText}</div></button>',action:{click:function(){this.isDisabled()||this.click()}},click:function(){},event_select:function(){p.prototype.event_select.call(this);n.focus(this.element)},
event_disable:function(){p.prototype.event_disable.call(this);this.tmpl.buttonElement.disabled=!0},event_enable:function(){p.prototype.event_enable.call(this);this.tmpl.buttonElement.disabled=!1},init:function(f){p.prototype.init.call(this,f);this.setCaption(this.caption)},setCaption:function(f){this.caption=f;this.tmpl.captionText.nodeValue=this.captionGetter(this)}}),o=o(v,{template:'<div class="Basis-ButtonPanel"><div{childNodesElement|content} class="Basis-ButtonPanel-Content"/></div>',childClass:q,
getButtonByName:function(f){return this.childNodes.search(f,k("name"))},localGrouping:{},localGroupingClass:{groupGetter:function(f){return f.groupId||-f.eventObjectId},childClass:{template:'<div class="Basis-ButtonGroup"/>'}}});f.namespace("basis.ui.button").extend({Button:q,ButtonPanel:o})})(basis);
(function(f){var o=f.Class,n=f.dom,k=f.html.Template,q=Function.getter,p=f.EventObject.createEvent,v=f.data.STATE,r=f.dom.wrapper.TmplNode,t=new k('<div{element|content} class="Basis-Label-State"/>'),m=new k('<div{element|content} class="Basis-Label-Processing"/>'),w=new k('<div{element|content} class="Basis-Label-Error"/>'),x=o(r,{cascadeDestroy:!0,show_:!1,visible_:!1,visibilityGetter:Function.$false,insertPoint:n.INSERT_END,content:"[no text]",event_delegateChanged:function(a,b){(b?b.element==
this.container:!this.container)&&this.setContainer(this.delegate&&this.delegate.element)},event_visibilityChanged:p("visibilityChanged"),init:function(a){var b=this.container;this.container=null;r.prototype.init.call(this,a);if(b)this.container=b;this.traceChanges_();return a},traceChanges_:function(){this.container&&this.visible_?this.container!=this.element.parentNode&&n.insert(this.container,this.tmpl.element,this.insertPoint):n.remove(this.element)},setContainer:function(a){if(this.container!=
a)this.container=a,this.traceChanges_()},setVisibility:function(a){if(this.visible_!=a)this.visible_=a,this.traceChanges_(),this.event_visibilityChanged(this.visible_)},destroy:function(){delete this.container;r.prototype.destroy.call(this)}}),d=o(x,{template:t,init:function(a){if(this.visibleStates&&!this.visibilityGetter){for(var b={},e,d=0;e=this.visibleStates[d++];)b[e]=!0;this.visibilityGetter=q(Function.$self,b)}x.prototype.init.call(this,a)}}),p=o(d,{event_stateChanged:function(a,b){d.prototype.event_stateChanged.call(a,
b);this.setVisibility(this.visibilityGetter(this.state,b))}}),u=o(p,{visibilityGetter:function(a){return a==v.PROCESSING},content:"Processing...",template:m}),w=o(p,{visibilityGetter:function(a){return a==v.ERROR},content:"Error",template:w}),s={stateChanged:function(a,b){this.setVisibility(this.visibilityGetter(a.state,b))}},l={dataSourceChanged:function(a,b){b&&b.removeHandler(s,this);a.dataSource&&(a.dataSource.addHandler(s,this),s.stateChanged.call(this,a.dataSource,a.dataSource.state))}},t=o(d,
{event_delegateChanged:function(a,b){d.prototype.event_delegateChanged.call(this,a,b);b&&b.removeHandler(l,this);this.delegate&&(this.delegate.addHandler(l,this),l.dataSourceChanged.call(this,this.delegate,b&&b.dataSource))},template:t}),m=o(t,{visibilityGetter:function(a){return a==v.PROCESSING},content:"Processing...",template:m}),y=function(){this.setVisibility(this.visibilityGetter(this.delegate?this.delegate.childNodes.length:0,this.delegate))},i={stateChanged:function(a){this.setVisibility(this.visibilityGetter(a.itemCount,
this.delegate))}},a={childNodesModified:y,dataSourceStateChanged:y,stateChanged:y,dataSourceChanged:function(a,b){b&&b.removeHandler(i,this);a.dataSource&&(a.dataSource.addHandler(i,this),i.stateChanged.call(this,a.dataSource,a.dataSource.state))}},k=o(x,{event_delegateChanged:function(c,b){x.prototype.event_delegateChanged.call(this,c,b);b&&b.removeHandler(a,this);this.delegate&&(this.delegate.addHandler(a,this),a.dataSourceChanged.call(this,this.delegate));y.call(this)},template:new k('<div{element|content} class="Basis-CountLabel"/>')}),
o=o(k,{visibilityGetter:function(a,b){var e=b.dataSource?b.dataSource.state:b.state;return!a&&e==v.READY},content:"Empty"});f.namespace("basis.ui.label").extend({NodeLabel:x,State:d,ObjectState:p,Processing:u,Error:w,DataSourceState:t,DataSourceProcessing:m,ChildCount:k,IsEmpty:o})})(basis);
(function(f){function o(d){typeof d.expand=="function"&&d.expand()}function n(d){typeof d.collapse=="function"&&d.collapse()}var k=f.Class,q=f.dom.event,p=f.cssom.classList,v=Function.getter,r=f.dom.wrapper,t=r.TmplContainer,m=r.Control,w=f.EventObject.createEvent,x={expandAll:function(){dom.axis(this,dom.AXIS_DESCENDANT_OR_SELF,o)},collapseAll:function(){dom.axis(this,dom.AXIS_DESCENDANT_OR_SELF,n)},expand:Function(),collapse:Function(),toggle:Function()},d=k(r.TmplPartitionNode,{template:'<li{element} class="Basis-TreePartitionNode"><div class="Basis-TreePartitionNode-Title"><span>{titleText}</span></div><ul{childNodesElement} class="Basis-TreePartitionNode-Content"/></li>'}),
r=k(r.TmplGroupingNode,{childClass:d}),u=k(t,x,{canHaveChildren:!1,childFactory:null,event_collapse:w("collapse"),event_expand:w("expand"),template:'<li{element} class="Basis-TreeNode"><div{content} class="Basis-TreeNode-Title"><span{title} class="Basis-TreeNode-Caption" event-click="select">{titleText}</span></div></li>',templateUpdate:function(d){d.titleText.nodeValue=String(this.titleGetter(this))||"[no title]"},action:{select:function(d){this.isDisabled()||this.select(q(d).ctrlKey)},toggle:function(){this.toggle()}},
titleGetter:v("data.title")}),v=k(u,{canHaveChildren:!0,childClass:u,localGroupingClass:r,event_expand:function(){u.prototype.event_expand.call(this);p(this.element).remove("collapsed")},event_collapse:function(){u.prototype.event_collapse.call(this);p(this.element).add("collapsed")},template:'<li{element} class="Basis-TreeNode"><div{content} class="Basis-TreeNode-Title Basis-TreeNode-CanHaveChildren"><div{expander} class="Basis-TreeNode-Expander" event-click="toggle"/><span{title} class="Basis-TreeNode-Caption" event-click="select">{titleText}</span></div><ul{childNodesElement} class="Basis-TreeNode-Content"/></li>',
collapsable:!0,collapsed:!1,init:function(d){u.prototype.init.call(this,d);this.collapsed&&this.collapsable&&this.event_collapse()},expand:function(){if(this.collapsed)return this.collapsed=!1,this.event_expand(),!0},collapse:function(){if(!this.collapsed&&this.collapsable)return this.collapsed=!0,this.event_collapse(),!0},toggle:function(){this.collapsed?this.expand():this.collapse()}}),k=k(m,x,{childClass:u,localGroupingClass:r,template:'<ul class="Basis-Tree"/>'});f.namespace("basis.ui").extend({Tree:k});
f.namespace("basis.ui.tree").extend({Tree:k,Node:u,Folder:v,GroupingNode:r,PartitionNode:d})})(basis);
(function(){var f=basis.Class,o=basis.dom,n=basis.dom.event,k=basis.cssom,q=Function.getter,p=basis.cssom.classList,v=basis.Cleaner,r=basis.dom.wrapper,t=basis.layout,m=basis.EventObject.createEvent,w=r.TmplNode,x=r.TmplContainer,d=r.TmplControl,u={VERTICAL:"V",HORIZONTAL:"H"},s=String("LTRTRBLBLCCTRCCBCCCCCCCC"),l={L:"LEFT",R:"RIGHT",T:"TOP",B:"BOTTOM",C:"CENTER"},y={LEFT:"RIGHT",RIGHT:"LEFT",TOP:"BOTTOM",BOTTOM:"TOP",CENTER:"CENTER"},i={finish:function(){this.visible||(o.remove(this.element),this.event_cleanup(this))}},
m=f(x,{template:'<div{element|selected} class="Basis-Popup"><div{closeButton} class="Basis-Popup-CloseButton"><span>Close</span></div><div{content|childNodesElement} class="Basis-Popup-Content"/></div>',event_beforeShow:m("beforeShow"),event_show:m("show"),event_hide:m("hide"),event_realign:m("realign"),event_cleanup:m("cleanup"),event_layoutChanged:m("layoutChanged","oldOrientation","oldDir")&&function(a,b){var c=(a+"-"+b.qw().slice(2,4).join("-")).toLowerCase(),e=(this.orientation+"-"+this.dir.qw().slice(2,
4).join("-")).toLowerCase();p(this.element).replace(c,e,this.cssLayoutPrefix)},visible:!1,autorotate:!1,dir:"",defaultDir:"RIGHT BOTTOM RIGHT TOP",orientation:u.VERTICAL,hideOnAnyClick:!0,hideOnKey:!1,ignoreClickFor:[],cssLayoutPrefix:"popup-",init:function(a){x.prototype.init.call(this,a);this.cssRule=k.uniqueRule(this.element);this.ignoreClickFor=Array.from(this.ignoreClickFor);if(this.dir)this.defaultDir=this.dir.toUpperCase();this.setLayout(this.defaultDir,this.orientation);this.thread&&this.thread.addHandler(i,
this);v.add(this)},setLayout:function(a,b,c){var e=this.dir,d=this.orientation;if(typeof a=="string")this.dir=a.toUpperCase();if(typeof b=="string")this.orientation=b;if(e!=this.dir||d!=this.orientation)this.event_layoutChanged(d,e),c||this.realign()},flip:function(a){var b=this.dir.qw(),a=a==u.VERTICAL;b[0+a]=y[b[0+a]];b[2+a]=y[b[2+a]];this.setLayout(b.join(" "))},rotate:function(a){var b=this.dir.qw(),a=(a%4+4)%4,c=[];if(!a)return b;var e=b[0].charAt(0),d=b[1].charAt(0),f=s.indexOf(e+d)>>1,e=(f&
252)+((f&3)+a&3)<<1;c.push(l[s.charAt(e)],l[s.charAt(e+1)]);e=b[2].charAt(0);d=b[3].charAt(0);f=s.indexOf(e+d)>>1;a=e!="C"&&d!="C"&&b[0]==b[2]!=(b[1]==b[3])?-a+4:a;e=(f&252)+((f&3)+a&3)<<1;c.push(l[s.charAt(e)],l[s.charAt(e+1)]);return c},isFitToViewport:function(a){if(this.visible&&this.relElement){var b=new t.Box(this.relElement,!1,this.element.offsetParent),c=new t.Viewport(this.element.offsetParent),e=this.element.offsetWidth,d=this.element.offsetHeight,a=String(a||this.dir).toUpperCase().qw(),
f=a[0]=="CENTER"?b.left+(b.width>>1):b[a[0].toLowerCase()],b=a[1]=="CENTER"?b.top+(b.height>>1):b[a[1].toLowerCase()];return(a[2]!="LEFT")*(f<e>>(a[2]=="CENTER"))||(a[2]!="RIGHT")*(c.width-f<e>>(a[2]=="CENTER"))?!1:(a[3]!="TOP")*(b<d>>(a[3]=="CENTER"))||(a[3]!="BOTTOM")*(c.height-b<d>>(a[3]=="CENTER"))?!1:{x:f,y:b}}},realign:function(){if(this.visible&&this.relElement){for(var a=this.dir.qw(),b,c=0,e=a,d=a[2],f=a[3],i=typeof this.autorotate=="number"||!this.autorotate.length?3:this.autorotate.length;this.autorotate&&
c<=i;){if(b=this.isFitToViewport(e.join(" "))){d=e[2];f=e[3];this.setLayout(e.join(" "),null,!0);break}if(c==i)break;Array.isArray(this.autorotate)?(e=this.autorotate[c++],e=typeof e=="string"?e.toUpperCase().split(" "):this.rotate(e)):e=this.rotate(++c*this.autorotate)}b||(b=new t.Box(this.relElement,!1,this.element.offsetParent),b={x:a[0]=="CENTER"?b.left+(b.width>>1):b[a[0].toLowerCase()],y:a[1]=="CENTER"?b.top+(b.height>>1):b[a[1].toLowerCase()]});a=new t.Box(this.element.offsetParent);c={left:"auto",
right:"auto",top:"auto",bottom:"auto"};switch(d){case "LEFT":c.left=b.x+"px";break;case "CENTER":c.left=Math.round(b.x-this.element.offsetWidth/2)+"px";break;case "RIGHT":c.right=a.width-b.x+"px"}switch(f){case "TOP":c.top=b.y+"px";break;case "CENTER":c.top=Math.round(b.y-this.element.offsetHeight/2)+"px";break;case "BOTTOM":c.bottom=a.height-b.y+"px"}this.cssRule.setStyle(c);this.event_realign()}},show:function(a,b,c){this.relElement=o.get(a)||this.relElement;this.setLayout(b||this.defaultDir,c);
if(this.visible)this.realign();else if(this.relElement)p(this.element).remove("pre-transition"),o.visibility(this.element,!1),e.appendChild(this),this.event_beforeShow(),this.visible=!0,this.realign(),this.thread&&this.thread.start(1),o.visibility(this.element,!0),p(this.element).add("pre-transition"),this.event_show()},hide:function(){if(this.visible)o.parentOf(document.body,this.element)&&(this.thread?this.thread.start(1):(o.remove(this.element),this.event_cleanup(this))),this.visible=!1,this.parentNode&&
e.removeChild(this),this.event_hide()},hideAll:function(){e.clear()},destroy:function(){if(this.thread)this.thread.removeHandler(i,this),this.thread=null;this.hide();x.prototype.destroy.call(this);this.cssRule.destroy();this.cssRule=null;v.remove(this)}}),a=f(m,{cssLayoutPrefix:"mode-",template:'<div{element|selected} class="Basis-Balloon" event-click="click"><div class="Basis-Balloon-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/><div class="tail"/></div><div class="Basis-Balloon-Layout"><div{closeButton} class="Basis-Balloon-CloseButton"><span>Close</span></div><div{content|childNodesElement} class="Basis-Balloon-Content"/></div></div>'}),
c=f(x,{template:'<div{element} class="Basis-Menu-Item" event-click="click"><a{content|selected} href="#"><span>{captionText}</span></a></div>',action:{click:function(a){this.click();n.kill(a)}},event_childNodesModified:function(){p(this.element).bool("hasSubItems",this.hasChildNodes())},groupId:0,caption:"[untitled]",captionGetter:q("caption"),handler:null,defaultHandler:function(a){this.parentNode&&this.parentNode.defaultHandler(a)},init:function(a){x.prototype.init.call(this,a);this.setCaption(this.caption)},
setCaption:function(a){this.caption=a;if(this.tmpl.captionText)this.tmpl.captionText.nodeValue=this.captionGetter(this)},click:function(){!this.isDisabled()&&!(this instanceof b)&&(this.handler?this.handler(this):this.defaultHandler(this))}});c.prototype.childClass=c;var b=f(c,{event_childNodesModified:w.prototype.event_childNodesModified,template:'<div class="Basis-Menu-ItemSet"/>'}),w=f(r.TmplPartitionNode,{template:'<div{element} class="Basis-Menu-ItemGroup"><div{childNodesElement|content} class="Basis-Menu-ItemGroup-Content"></div></div>'}),
r=f(r.TmplGroupingNode,{childClass:w}),q=f(m,{childClass:c,defaultDir:"LEFT BOTTOM LEFT TOP",subMenu:null,localGroupingClass:r,localGrouping:q("groupId"),defaultHandler:function(){this.hide()},template:'<div{element|selected} class="Basis-Menu"><div{closeButton} class="Basis-Menu-CloseButton"><span>Close</span></div><div{content|childNodesElement} class="Basis-Menu-Content"/></div>'}),e=new (f(d,{handheldMode:!1,childClass:m,event_childNodesModified:function(a,b){if(b.deleted)for(var c=b.deleted.length-
1,e;e=b.deleted[c];c--)e.hide();if(b.inserted&&!b.deleted&&this.childNodes.length==b.inserted.length)p(this.element).add("IsNotEmpty"),document.body.className=document.body.className,n.addGlobalHandler("click",this.hideByClick,this),n.addGlobalHandler("keydown",this.hideByKey,this),n.addGlobalHandler("scroll",this.hideByScroll,this),n.addHandler(window,"resize",this.realignAll,this);this.lastChild?this.lastChild.select():(p(this.element).remove("IsNotEmpty"),document.body.className=document.body.className,
n.removeGlobalHandler("click",this.hideByClick,this),n.removeGlobalHandler("keydown",this.hideByKey,this),n.removeGlobalHandler("scroll",this.hideByScroll,this),n.removeHandler(window,"resize",this.realignAll,this))},insertBefore:function(a,b){var c=document.documentElement.scrollTop,e=document.body.scrollTop;if(d.prototype.insertBefore.call(this,a,b)){a.documentST_=c;a.bodyST_=e;if(this.handheldMode)document.documentElement.scrollTop=0,document.body.scrollTop=0;a.element.style.zIndex=basis.ui.Window?
basis.ui.Window.getWindowTopZIndex():2001}},removeChild:function(a){if(a&&(a.hideOnAnyClick&&a.nextSibling&&this.removeChild(a.nextSibling),d.prototype.removeChild.call(this,a),this.handheldMode))document.documentElement.scrollTop=a.documentST_,document.body.scrollTop=a.bodyST_},realignAll:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.realign()},clear:function(){this.firstChild&&this.removeChild(this.firstChild)},hideByClick:function(a){for(var a=n.sender(a),b,c=this.childNodes.filter(Function.getter("hideOnAnyClick")).reverse(),
e=0,d;d=c[e];e++){if(a===d.tmpl.closeButton||o.parentOf(d.tmpl.closeButton,a)){this.removeChild(d);return}b||(b=o.axis(a,o.AXIS_ANCESTOR_OR_SELF));if(b.has(d.element)||b.some(Array.prototype.has,d.ignoreClickFor)){this.removeChild(c[e-1]);return}}this.removeChild(c.pop())},hideByKey:function(a){var a=n.key(a),b=this.lastChild;if(b&&b.hideOnKey){var c=!1;typeof b.hideOnKey=="function"?c=b.hideOnKey(a):Array.isArray(b.hideOnKey)&&(c=b.hideOnKey.has(a));c&&b.hide()}},hideByScroll:function(a){a=n.sender(a);
if(!o.parentOf(a,this.element))for(var b=this.lastChild;b;){var c=b.previousSibling;b.relElement&&b.offsetParent!==a&&o.parentOf(a,b.relElement)&&b.hide();b=c}}}))({id:"Basis-PopupStack"});n.onLoad(function(){o.insert(document.body,e.element,o.INSERT_BEGIN);e.realignAll()});basis.namespace("basis.ui.popup").extend({ORIENTATION:u,setHandheldMode:function(a){e.handheldMode=!!a},Popup:m,Balloon:a,Menu:q,MenuGroupControl:r,MenuPartitionNode:w,MenuItem:c,MenuItemSet:b})})(basis);
(function(f){var o=f.Class,n=f.dom.event,k=f.dom,q=f.html.Template,p=f.cssom.classList,v=f.dom.wrapper,r=v.TmplNode,t=v.TmplContainer,m=v.TmplControl,w=v.TmplPartitionNode,x=v.TmplGroupingNode,d=v.GroupingNode,u=v.PartitionNode,s=f.Class(v.TmplNode,{template:new q('<th{element|selected} class="Basis-Table-Header-Cell"><div class="Basis-Table-Sort-Direction"></div><div class="Basis-Table-Header-Cell-Content"><span{content} class="Basis-Table-Header-Cell-Title">{titleText}</span></div></th>'),templateUpdate:function(a){a.titleText.nodeValue=
this.titleGetter(this)}}),l=f.Class(d,{event_ownerChanged:function(a,c){c&&k.remove(this.headerRow);if(this.owner&&this.owner.element){var h=this,g=this.owner.element;do k.insert(g,h.headerRow,k.INSERT_BEGIN);while(h=h.localGrouping)}d.prototype.event_ownerChanged.call(this,a,c)},childClass:{init:function(a){u.prototype.init.call(this,a);this.cell=new s({titleGetter:this.titleGetter,delegate:this})},event_childNodesModified:function(){var a=0;if(this.nodes[0]&&this.nodes[0]instanceof this.constructor)for(var c=
0,d;d=this.nodes[c];c++)a+=d.cell.element.colSpan;else a=this.nodes.length;this.cell.element.colSpan=a;this.groupNode&&this.groupNode.event_childNodesModified.call(this.groupNode,this.groupNode,{})},destroy:function(){u.prototype.destroy.call(this);this.cell.destroy()}},init:function(a){d.prototype.init.call(this,a);this.element=this.childNodesElement=this.headerRow=k.createElement("tr.Basis-Table-Header-GroupContent")},insertBefore:function(a,c){a=d.prototype.insertBefore.call(this,a,c);k.insert(this.headerRow,
a.cell.element,k.INSERT_BEFORE,a.nextSibling&&a.nextSibling.cell.element);return a},removeChild:function(a){k.remove(a.cell.element);d.prototype.removeChild.call(a)},destroy:function(){d.prototype.destroy.call(this);this.headerRow=null}});l.prototype.localGroupingClass=l;var v=o(r,{sorting:null,defaultOrder:!1,groupId:0,template:new q('<th{element|selected} class="Basis-Table-Header-Cell" event-click="click"><div class="Basis-Table-Sort-Direction"/><div class="Basis-Table-Header-Cell-Content"><span{content} class="Basis-Table-Header-Cell-Title"/></div></th>'),
action:{click:function(){if(this.selected){var a=this.parentNode&&this.parentNode.owner;a&&a.setLocalSorting(a.localSorting,!a.localSortingDesc)}else this.select()}},init:function(a){r.prototype.init.call(this,a);this.selectable=!!this.sorting;if(this.sorting)this.sorting=Function.getter(this.sorting),this.defaultOrder=this.defaultOrder=="desc",p(this.element).add("sortable")},select:function(){if(!this.selected)this.order=this.defaultOrder;r.prototype.select.call(this)}}),y=o(t,{childClass:v,localGroupingClass:l,
template:new q('<thead{element} class="Basis-Table-Header"><tr{groupsElement} class="Basis-Table-Header-GroupContent" /><tr{childNodesElement|content} /></thead>'),listen:{owner:{localSortingChanged:function(a){var c=this.childNodes.search(a.localSorting,"sorting");c?(c.select(),c.order=a.localSortingDesc,p(this.tmpl.content).bool("sort-order-desc",c.order)):this.selection.clear()}}},init:function(a){this.selection={owner:this,handlerContext:this,handler:{datasetChanged:function(a){(a=a.pick())&&
this.owner&&this.owner.setLocalSorting(a.sorting,a.order)}}};t.prototype.init.call(this,a);this.applyConfig_(this.structure)},applyConfig_:function(a){a&&this.setChildNodes(a.map(function(a){var b=a.header,c=Object.slice(a,["sorting","defaultOrder","groupId"]);c.content=(b==null||typeof b!="object"?b:b.content)||String.Entity.nbsp;if(typeof c.content=="function")c.content=c.content.call(this);c.cssClassName=(b.cssClassName||"")+" "+(a.cssClassName||"");return c},this))}}),i=o(r,{colSpan:1,template:new q('<td{element} class="Basis-Table-Footer-Cell"><div{content}>\u00a0</div></td>'),
setColSpan:function(a){this.element.colSpan=this.colSpan=a||1}}),a=o(t,{childClass:i,childFactory:function(a){return new this.childClass(a)},template:new q('<tfoot{element} class="Basis-Table-Footer"><tr{content|childNodesElement}></tr></tfoot>'),init:function(a){t.prototype.init.call(this,a);this.applyConfig_(this.structure);this.useFooter&&k.insert(this.container||this.owner.element,this.element,1)},applyConfig_:function(a){if(a){var c=null;this.clear();this.useFooter=!1;for(var d=0;d<a.length;d++){var g=
a[d],j;g.footer?(j=g.footer.content,typeof j=="function"&&(j=j.call(this)),this.useFooter=!0,j=this.appendChild({cssClassName:(g.cssClassName||"")+" "+(g.footer.cssClassName||""),content:j,template:g.footer.template||i.prototype.template})):c?c.setColSpan(c.colSpan+1):j=this.appendChild({});j&&(c=j)}}}}),c=o(r,{canHaveChildren:!1,repaintCount:0,getters:[],classNames:[],template:'<tr class="Basis-Table-Row" event-click="select"><\!--{cells}--\></tr>',action:{select:function(a){this.select(n(a).ctrlKey)}},
templateUpdate:function(){this.repaintCount+=1;for(var a=0,c;c=this.updaters[a];a++){var d=this.element.childNodes[c.cellIndex];c=c.getter.call(this,this,d);if(this.repaintCount>1)d.innerHTML="";if(!c||!Array.isArray(c))c=[c];for(var g=0;g<c.length;g++){var j=c[g];d.appendChild(j&&j.nodeType?j:k.createText(j!=null&&(typeof j!="string"||j!="")?j:" "))}}}}),w=o(w,{template:'<tbody class="Basis-Table-Body" event-click="click"><tr class="Basis-Table-GroupHeader"><td{content} colspan="100"><span class="expander"/>{titleText}</td></tr><\!-- {childNodesHere} --\></tbody>',
action:{click:function(){p(this.element).toggle("collapsed")}}}),o=o(m,{canHaveChildren:!0,childClass:c,localGroupingClass:o(x,{childClass:w}),template:new q('<table{element|groupsElement} class="Basis-Table" cellspacing="0" event-click="click"><\!-- {headerElement} --\><tbody{content|childNodesElement} class="Basis-Table-Body"></tbody><\!-- {footerElement} --\></table>'),templateAction:function(a,c){m.prototype.templateAction.call(this,a,c)},init:function(b){this.applyConfig_(this.structure);m.prototype.init.call(this,
b);this.headerConfig=this.header;this.footerConfig=this.footer;this.header=new y(Object.extend({owner:this,structure:this.structure},this.header));this.footer=new a(Object.extend({owner:this,structure:this.structure},this.footer));k.replace(this.tmpl.headerElement,this.header.element);!this.localSorting&&this.structure&&this.structure.search(!0,function(a){return a.sorting&&"autosorting"in a})&&(b=this.structure[Array.lastSearchIndex],this.setLocalSorting(b.sorting,b.defaultOrder=="desc"))},applyConfig_:function(a){if(a){var e=
[],d="";this.firstChild&&this.clear();for(var g=0;g<a.length;g++){var j=a[g],f=j.body||{};if(typeof f=="function"||typeof f=="string")f={content:f};var j=[j.cssClassName||"",f.cssClassName||""].join(" ").trim(),i=f.content;d+="<td"+(f.templateRef?f.templateRef.quote("{"):"")+(j?' class="'+j+'"':"")+">"+(typeof i=="string"?f.content:"")+"</td>";typeof i=="function"&&e.push({cellIndex:g,getter:i})}this.childClass=this.childClass.subclass({satelliteConfig:this.rowSatellite,template:new q(this.childClass.prototype.template.source.replace("<\!--{cells}--\>",
d)),updaters:e});if(this.rowBehaviour){var l=this.rowBehaviour,m;for(m in l)this.childClass.prototype[m]=function(){l[m].apply(this,arguments);c.prototype[m].apply(this,arguments)}}}},loadData:function(a){this.setChildNodes(a.map(Function.wrapper("data")))},destroy:function(){m.prototype.destroy.call(this);this.header.destroy();this.header=null;this.footer.destroy();this.footer=null}});f.namespace("basis.ui.table").extend({Table:o,Body:w,Header:y,HeaderCell:v,Row:c,Footer:a});f.namespace("basis.ui").extend({Table:o})})(basis);
(function(f){var o=f.Class,n=f.dom,k=f.dom.event,q=f.cssom,p=f.cssom.classList,v=f.Cleaner,r=f.dom.wrapper,t=f.ui.button,m=f.EventObject.createEvent,w=r.TmplNode,x=r.TmplContainer,d=o(w,{captureElement:null,template:'<div class="Basis-Blocker"><div{content} class="Basis-Blocker-Mate"/></div>',init:function(d){w.prototype.init.call(this,d);n.setStyle(this.element,{display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%"});v.add(this)},capture:function(d,f){if(this.captureElement=
n.get(d||document.body))n.insert(this.captureElement,this.element),this.element.style.zIndex=f||1E3,n.show(this.element)},release:function(){if(this.captureElement)this.element.parentNode==this.captureElement&&n.remove(this.element),this.captureElement=null,n.hide(this.element)},destroy:function(){this.release();w.prototype.destroy.call(this);v.remove(this)}}),o=o(x,{template:'<div class="Basis-Window" event-mousedown="mousedown" event-keypress="keypress"><div class="Basis-Window-Canvas"><div class="corner-left-top"/><div class="corner-right-top"/><div class="side-top"/><div class="side-left"/><div class="side-right"/><div class="content"/><div class="corner-left-bottom"/><div class="corner-right-bottom"/><div class="side-bottom"/></div><div class="Basis-Window-Layout"><div{ddtrigger} class="Basis-Window-Title"><div{title} class="Basis-Window-TitleCaption"/></div><div{content} class="Basis-Window-Content"><\!-- {childNodesHere} --\></div></div></div>',
action:{close:function(){this.close()},mousedown:function(){this.activate()},keypress:function(d){var f=k.key(d);f==k.KEY.ESCAPE?this.closeOnEscape&&this.close(0):f==k.KEY.ENTER&&k.sender(d).tagName!="TEXTAREA"&&k.kill(d)}},event_beforeShow:m("beforeShow"),event_open:m("open"),event_close:m("close"),event_active:m("active"),closeOnEscape:!0,autocenter:!0,autocenter_:!1,modal:!1,closed:!0,moveable:!0,title:"[no title]",init:function(d){x.prototype.init.call(this,d);n.hide(this.element);d=this.tmpl.title.parentNode;
this.setTitle(this.title);this.cssRule=q.uniqueRule(this.element);if(this.moveable&&f.DragDrop)this.dde=new f.DragDrop.MoveableElement({element:this.element,trigger:this.tmpl.ddtrigger||d,fixRight:!1,fixBottom:!1}),this.dde.addHandler({move:function(){this.autocenter=!1;this.element.style.margin=0},over:function(){this.cssRule.setStyle(Object.slice(this.element.style,"left top".qw()));n.setStyle(this.element,{top:"",left:""})}},this);var m=Array.from(this.buttons).map(function(a){return Object.complete({click:(a.click||
this.close).bind(this)},a)},this),i=Object.slice(this,["buttonOk","buttonCancel"]),a;for(a in i){var c=i[a];m.push({name:a=="buttonOk"?"ok":"cancel",caption:c.caption||c.title||c,click:(c.click||this.close).bind(this)})}if(m.length)this.buttonPanel=new t.ButtonPanel({cssClassName:"Basis-Window-ButtonPlace",container:this.tmpl.content,childNodes:m});if(!this.titleButton||this.titleButton.close!==!1)p(d).add("Basis-Window-Title-ButtonPlace-Close"),n.insert(d,n.createElement("SPAN.Basis-Window-Title-ButtonPlace",
n.createElement('A[href=#].Basis-Window-Title-CloseButton[event-click="close"]',n.createElement("SPAN","Close"))),n.INSERT_BEGIN);if(this.autocenter!==!1)this.autocenter=this.autocenter_=!0;this.thread&&this.thread.addHandler({finish:function(){this.closed&&n.remove(this.element)}},this);v.add(this)},setTitle:function(d){n.insert(n.clear(this.tmpl.title),d)},realign:function(){if(this.autocenter)this.element.style.margin="",this.cssRule.setStyle(this.element.offsetWidth?{left:"50%",top:"50%",marginLeft:-this.element.offsetWidth/
2+"px",marginTop:-this.element.offsetHeight/2+"px"}:{left:0,top:0})},activate:function(){this.select()},open:function(d){this.closed?(n.visibility(this.element,!1),n.show(this.element),s.appendChild(this),this.closed=!1,this.realign(),this.thread&&this.thread.start(!0),this.event_beforeShow(d),n.visibility(this.element,!0),this.buttonPanel&&this.buttonPanel.firstChild&&this.buttonPanel.firstChild.select(),this.event_open(d),this.event_active(d)):this.realign()},close:function(d){if(!this.closed)this.thread?
this.thread.start(1):n.remove(this.element),s.removeChild(this),this.autocenter=this.autocenter_,this.closed=!0,this.event_close(d)},destroy:function(){this.dde&&(this.dde.destroy(),delete this.dde);x.prototype.destroy.call(this);this.cssRule.destroy();this.cssRule=null;v.remove(this)}}),u=new d,s=new r.Control({id:"Basis-WindowStack",childClass:o});s.addHandler({childNodesModified:function(){p(this.element).bool("IsNotEmpty",this.firstChild);var d=-1;if(this.lastChild){for(var f=0,i;i=this.childNodes[f];f++)i.element.style.zIndex=
2001+f*2,i.modal&&(d=f);this.lastChild.select()}d!=-1?u.capture(this.element,2E3+d*2):u.release()}});s.selection.addHandler({datasetChanged:function(){var d=this.pick(),f=s.lastChild;d?d.parentNode==s&&d!=f&&(s.insertBefore(d),s.event_childNodesModified({})):f&&this.add([f])}});k.onLoad(function(){n.insert(document.body,s.element,n.INSERT_BEGIN);for(var d=s.firstChild;d;d=d.nextSibling)d.realign()});f.namespace("basis.ui.window").extend({Window:o,Blocker:d,getWindowTopZIndex:function(){return s.childNodes.length*
2+2001}})})(basis);
(function(f){function o(d){this.selection&&!this.selection.itemCount&&d.select()}function n(){if(this.selection&&!this.selection.itemCount){var d=this.childNodes.search(!1,"disabled");d&&d.select()}}var k=f.Class,q=f.dom,p=f.cssom.classList,v=Function.getter,r=f.dom.wrapper,t=r.TmplNode,m=r.TmplContainer,w=f.EventObject.createEvent,w=k(r.TmplControl,{canHaveChildren:!0,childClass:t,event_childEnabled:w("childEnabled")&&o,event_childDisabled:w("childDisabled")&&n,event_childNodesModified:n,item:function(d){d=
isNaN(d)?this.indexOf(d):parseInt(d);return d.between(0,this.childNodes.length-1)?this.childNodes[d]:null},indexOf:function(d){return d instanceof this.childClass?this.childNodes.indexOf(d):this.childNodes.search(d,"name")?Array.lastSearchIndex:-1}}),x=k(m,{canHaveChildren:!1,event_disable:function(){m.prototype.event_disable.call(this);this.unselect();this.document&&this.document.event_childDisabled(this.document,this)},event_enable:function(){m.prototype.event_enable.call(this);this.document&&this.document.event_childEnabled(this.document,
this)},event_update:function(d,f){m.prototype.event_update.call(this,d,f);var k=this.tmpl.titleText,i=this.titleGetter(this);k.nodeValue=i==null||String(i)==""?"[no title]":i},template:'<div{element|selected} class="Basis-Tab" event-click="select"><span class="Basis-Tab-Start"/><span class="Basis-Tab-Content"><span class="Basis-Tab-Caption">{titleText}</span></span><span class="Basis-Tab-End"/></div><div{content}/>',action:{select:function(){this.isDisabled()||this.select()}},titleGetter:v("data.title"),
groupId:0}),v=k(r.TmplGroupingNode,{childClass:k(r.TmplPartitionNode,{template:'<div class="Basis-TabControl-TabGroup"/>'})}),d=k(w,{childClass:x,localGroupingClass:v,template:'<div{element} class="Basis-TabControl"><div class="Basis-TabControl-Start"/><div{content|childNodesElement} class="Basis-TabControl-Content"/><div class="Basis-TabControl-End"/></div>'}),v=k(m,{event_select:function(){p(this.element).remove("Basis-Page-Hidden");m.prototype.event_select.call(this)},event_unselect:function(){p(this.element).add("Basis-Page-Hidden");
m.prototype.event_unselect.call(this)},template:'<div{element|selected} class="Basis-Page Basis-Page-Hidden"><div{content|childNodesElement} class="Basis-Page-Content"/></div>'}),r=k(w,{childClass:v,template:'<div class="Basis-PageControl"/>'}),t=k(x,{canHaveChildren:!0,childClass:t,event_select:function(){x.prototype.event_select.call(this);p(this.tmpl.pageElement).remove("Basis-Page-Hidden")},event_unselect:function(){x.prototype.event_unselect.call(this);p(this.tmpl.pageElement).add("Basis-Page-Hidden")},
template:'<div{element|selected} class="Basis-TabSheet" event-click="select"><div{tabElement} class="Basis-Tab"><span class="Basis-Tab-Start"/><span class="Basis-Tab-Content"><span class="Basis-Tab-Caption">{titleText}</span></span><span class="Basis-Tab-End"/></div><div{pageElement} class="Basis-Page Basis-Page-Hidden"><div{content|pageContent|childNodesElement} class="Basis-Page-Content"/></div></div>',destroy:function(){q.remove(this.tmpl.pageElement);x.prototype.destroy.call(this)}}),u=k(d,{childClass:t,
template:'<div{element} class="Basis-AccordionControl"><div{content|childNodesElement} class="Basis-AccordionControl-Content"/></div>'}),k=k(d,{childClass:t,template:'<div{element} class="Basis-TabSheetControl"><div{tabsElement} class="Basis-TabControl"><div class="Basis-TabControl-Start"/><div{content|childNodesElement} class="Basis-TabControl-Content"/><div class="Basis-TabControl-End"/></div><div{pagesElement} class="Basis-PageControl"/></div>',insertBefore:function(f,l){if(f=d.prototype.insertBefore.call(this,
f,l))return this.tmpl.pagesElement&&this.tmpl.pagesElement.insertBefore(f.tmpl.pageElement,this.nextSibling?this.nextSibling.tmpl.pageElement:null),f},removeChild:function(f){if(f=d.prototype.removeChild.call(this,f))return this.tmpl.pagesElement&&f.element.appendChild(f.tmpl.pageElement),f},clear:function(){this.childNodes.forEach(function(d){d.element.appendChild(d.tmpl.pageElement)});d.prototype.clear.call(this)}});f.namespace("basis.ui.tabs").extend({AbstractTabsControl:w,TabControl:d,Tab:x,PageControl:r,
Page:v,AccordionControl:u,TabSheetControl:k,TabSheet:t})})(basis);
(function(f){function o(a){return{hour:a.getHours(),day:a.getDate()-1,month:a.getMonth(),year:a.getFullYear()}}function n(a,c){var d={},g=i[a];if(g){var f=c.getFullYear(),l=c.getMonth(),m=c.getDate();f-=f%g[1];l=g[2]?l-l%g[2]:0;m=g[3]?m:1;d.periodStart=new Date(f,l,m);d.periodEnd=new Date(new Date(f+g[4],l+g[5],m+g[6])-1)}else d.periodStart=new Date(d.periodEnd=new Date(c));return d}var k=f.Class,q=f.dom,p=f.dom.event,v=f.dom.wrapper,r=Function.getter,t=f.cssom.classList,m=f.html.Template,w=f.data.property.Property,
x=v.TmplNode,d=v.TmplContainer,u=v.TmplControl,s=function(a){var c=f.Locale["Controls.Calendar"];return c?c[a]:a},l={};(function(){for(var a=32,c=2147483647;--a;)l[a]=c,c>>=1})();var y={century:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},decade:function(a){return a.periodStart.getFullYear()+" - "+a.periodEnd.getFullYear()},year:function(a){return a.periodStart.getFullYear()},quarter:function(a){return s("QUARTER").toLowerCase().format(1+a.periodStart.getMonth().base(3)/
3)},month:function(a){return s("MONTH").SHORT[a.periodStart.getMonth()].toLowerCase()},day:function(a){return a.periodStart.getDate()}},i={century:["year",100,0,0,100,0,0],decade:["year",10,0,0,10,0,0],year:["year",1,0,0,1,0,0],quarter:["month",1,3,0,0,3,0],month:["month",1,1,0,0,1,0],day:["day",1,1,1,0,0,1]},a=k(x,{canHaveChildren:!1,template:new m('<a{element} class="Basis-Calendar-Node" event-click="click">{title|-}</a>'),templateAction:function(a,c){a=="click"?this.document.templateAction(a,c,
this):x.prototype.templateAction.call(this,a,c)},event_select:function(){x.prototype.event_select.call(this);q.focus(this.element)},event_update:function(a,c){x.prototype.event_update.call(this,a,c);if("periodStart"in c||"periodEnd"in c)if(this.tmpl.title.nodeValue=this.titleGetter(this.data),this.parentNode){var d=t(this.element);d.bool("before",this.data.periodStart<this.parentNode.data.periodStart);d.bool("after",this.data.periodEnd>this.parentNode.data.periodEnd)}}}),c=k(d,{childClass:a,template:new m('<div{element|selected} class="Basis-Calendar-Section"><div class="Basis-Calendar-SectionTitle">{titleText}</div><div{content|childNodesElement} class="Basis-Calendar-SectionContent"/></div><div{tabElement} class="Basis-Calendar-SectionTab" event-click="select">{tabTitleText}</div>'),
event_select:function(){d.prototype.event_select.call(this);t(this.tmpl.tabElement).add("selected")},event_unselect:function(){d.prototype.event_unselect.call(this);t(this.tmpl.tabElement).remove("selected")},event_update:function(a,c){d.prototype.event_update.call(this,a,c);var h=this.data,g;if("periodStart"in c||"periodEnd"in c){this.tmpl.titleText.nodeValue=this.getTitle(h.periodStart)||"-";this.firstChild||(g=[]);for(var f=n(this.nodePeriodName,(new Date(h.periodStart)).add(this.nodePeriodUnit,
-this.nodePeriodUnitCount*(this.getInitOffset(h.periodStart)||0))),i=0;i<this.nodeCount;i++)g?g.push({cssClassName:this.nodePeriodName,titleGetter:y[this.nodePeriodName],data:f}):this.childNodes[i].update(f),f=n(this.nodePeriodName,(new Date(f.periodStart)).add(this.nodePeriodUnit,this.nodePeriodUnitCount));g&&this.setChildNodes(g);this.minDate=this.firstChild.periodStart;this.maxDate=this.lastChild.periodEnd}this.tmpl.tabTitleText.nodeValue=this.getTabTitle(h.selectedDate)||"-";(g=this.getNodeByDate(h.selectedDate))?
g.select():h.selectedDate&&this.minDate<=h.selectedDate&&h.selectedDate<=this.maxDate?this.setViewDate(h.selectedDate):this.selection.clear()},minDate:new Date,maxDate:new Date,isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,selection:{},init:function(a){d.prototype.init.call(this,a);t(this.element).add("Basis-Calendar-Section-"+this.sectionName);p.addHandler(this.tmpl.tabElement,"click",this.select.bind(this,
!1))},getTitle:function(){},getTabTitle:function(){},getNodeByDate:function(a){if(a&&this.data.periodStart<=a&&a<=this.data.periodEnd){a:{var c=this.childNodes;if(c.length){var d,g,f=0,i=c.length,l;do if(g=c[d=f+i>>1],a<(l=g.data.periodStart))i=d-1;else if(a>(g=g.data.periodEnd))f=d+1;else{a=a>=l&&a<=g?d:-1;break a}while(f<=i)}a=-1}if(a!=-1)return this.childNodes[a]}return null},prevPeriod:function(){this.isPrevPeriodEnabled&&this.update(n(this.periodName,new Date(+this.data.periodStart-1)))},nextPeriod:function(){this.isNextPeriodEnabled&&
this.update(n(this.periodName,new Date(+this.data.periodEnd+1)))},setViewDate:function(a){this.update(n(this.periodName,a))},getInitOffset:Function.$null});c.Month=k(c,{sectionName:"Month",periodName:"month",template:new m(Function.lazyInit(function(){return'<div{element|selected} class="Basis-Calendar-Section"><div class="Basis-Calendar-SectionTitle">{titleText}</div><div{content|childNodesElement} class="Basis-Calendar-SectionContent"><div class="Basis-Calendar-MonthWeekDays">'+s("DAY").SHORT2.map(String.format,
'<span class="Basis-Calendar-MonthWeekDays-Day">{0}</span>').join("")+'</div></div></div><div{tabElement} class="Basis-Calendar-SectionTab" event-click="select">{tabTitleText}</div>'})),nodeCount:42,nodePeriodName:"day",nodePeriodUnit:"day",getTabTitle:r("getDate()"),getTitle:function(a){return s("MONTH").FULL[a.getMonth()]+" "+a.getFullYear()},getInitOffset:function(a){return 1+((new Date(a)).set("day",1).getDay()+5)%7}});c.Year=k(c,{sectionName:"Year",periodName:"year",nodePeriodName:"month",nodePeriodUnit:"month",
getTabTitle:r("getMonth()",function(a){return s("MONTH").FULL[a]}),getTitle:r("getFullYear()")});c.YearDecade=k(c,{sectionName:"YearDecade",periodName:"decade",nodePeriodName:"year",nodePeriodUnit:"year",getInitOffset:function(){return 1},getTabTitle:r("getFullYear()"),getTitle:function(a){return a.getFullYear()+" - "+this.data.periodEnd.getFullYear()}});c.Century=k(c,{sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:"year",nodePeriodUnitCount:10,getTabTitle:function(a){if(a)return a=
a.getFullYear(),a-=a%10,a+"-"+(Number(a.toString().substr(-2))+9).lead(2)},getInitOffset:function(){return 1}});c.YearQuarters=k(c,{sectionName:"YearQuarter",periodName:"year",nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:"month",nodePeriodUnitCount:3});c.Quarter=k(c,{sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:"month",nodePeriodUnit:"month",getTitle:function(a){return[Math.floor(1+a.getMonth().base(3)/3),s("QUARTER").toLowerCase(),a.getFullYear()].join(" ")}});k=k(u,
{childClass:c,childFactory:Function(),template:new m(Function.lazyInit(function(){return'<div{element} class="Basis-Calendar"><div class="Basis-Calendar-Header"><div{sectionTabs} class="Basis-Calendar-SectionTabs" /></div><div class="Basis-Calendar-Body"><span event-click="move_prev" class="Basis-Calendar-ButtonPrevPeriod"><span>\u2039</span><span class="over"></span></span><span event-click="move_next" class="Basis-Calendar-ButtonNextPeriod"><span>\u203a</span><span class="over"></span></span><div{content|childNodesElement} class="Basis-Calendar-Content"/></div><div class="Basis-Calendar-Footer"><div class="Basis-Calendar-Footer-Date"><span class="Basis-Calendar-Footer-Label">'+
s("TODAY")+':</span><span event-click="select_today" class="Basis-Calendar-Footer-Value">{todayText}</span></div></div></div>'})),event_change:f.EventObject.createEvent("change"),event_childNodesModified:function(a,c){if(c.inserted)for(var d=0,g;g=c.inserted[d++];)g.setViewDate(this.date.value),g.update({selectedDate:this.selectedDate.value});u.prototype.event_childNodesModified.call(this,a,c);q.insert(q.clear(this.tmpl.sectionTabs),this.childNodes.map(r("tmpl.tabElement")));!this.selection.itemCount&&
this.firstChild&&this.firstChild.select()},templateAction:function(b,c,d){u.prototype.templateAction.call(this,b,c);if(d instanceof a)b=d.data.periodStart,c=this.selection.pick(),this.selectedDate.set((new Date(this.selectedDate.value)).add(c.nodePeriodUnit,this.selectedDate.value.diff(c.nodePeriodUnit,b))),this.nextSection(!1);else if(!t(p.sender(c)).contains("disabled"))switch(b){case "select_today":this.selectedDate.set(new Date);break;case "select_current":this.selectDate(this.date.value);break;
case "move_prev":this.selection.pick().prevPeriod();break;case "move_next":this.selection.pick().nextPeriod();break;case "move_up":this.nextSection(!0)}},date:null,minDate:null,maxDate:null,map:null,periodEnableByDefault:!0,sections:["Month","Year","YearDecade"],init:function(a){this.todayDate=new w(new Date);this.selectedDate=new w(new Date(this.date||new Date));this.date=new w(new Date(this.date||new Date));this.selection={selectedDate:this.selectedDate,event_datasetChanged:function(a,b){this.constructor.prototype.event_datasetChanged.call(this,
a,b);var c=this.pick();c&&c.update({selectedDate:this.selectedDate.value})}};u.prototype.init.call(this,a);this.selectedDate.addHandler({change:function(a){for(var b=this.firstChild;b;b=b.nextSibling)b.update({selectedDate:a})}},this);this.todayDate.addLink(this.tmpl.todayText,null,r("toFormat('%D.%M.%Y')"));this.sections&&q.insert(this,this.sections.map(function(a){return new c[a]},this))},setSection:function(a){(a=this.childNodes.search("sectionName",a))&&a.select()},nextSection:function(a){var c=
this.selection.pick();(c=a?c.nextSibling:c.previousSibling)?(c.select(),c.setViewDate(this.selectedDate.value)):a||this.event_change()},selectDate:function(a){a-this.date.value!=0&&this.date.set(a)},getNextPeriod:function(a,c){if(!this.isNextPeriodEnabled(a,c))return!1;if(this.map){var d=c?1:-1,g=c?"start":"till",f=c?"till":"start",i=(new Date(a)).add("millisecond",d),m=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(m){var k=n("year",i);for(k.periodEnd.getFullYear()==i.getFullYear()&&
(k[g]=i);!this.isPeriodEnabled(k.periodStart,k.periodEnd);)k=n("year",i.add("year",d));for(k[f]=n("month",k[g])[f];!this.isPeriodEnabled(k.periodStart,k.periodEnd);)k=n("month",i.add("month",d));var x=o(k[g]),f=o(k[f]);if(m=m[f.year]&&m[f.year][f.month]){this.periodEnableByDefault&&(g=l[k.periodEnd.getMonthDayCount()],m=m&g^g);for(g=x.day;g!=f.day+d;g+=d)if(m>>g&1){i=new Date(x.year,x.month,g+1);break}}else return n("day",k[g])}}return n("day",i)},isNextPeriodEnabled:function(a,c){if(!c&&this.minDate&&
this.minDate>a)return!1;if(c&&this.maxDate&&this.maxDate<a)return!1;if(this.map)if(this.periodEnableByDefault){if(!c&&this.minDate)return this.isPeriodEnabled(this.minDate,a);if(c&&this.maxDate)return this.isPeriodEnabled(a,this.maxDate)}else{var d=c?1:-1,g=a.getFullYear(),f=(new Date(a)).add("millisecond",d),i=f.getFullYear(),l=Object.keys(this.map.enable).filter(function(a){return d*a>=d*i}),m=l.length;if(m)for(var l=l.sort(function(a,b){return d*(a>b)||-d*(a<b)}),k=0;k<m;k++){var B=n("year",new Date(l[k],
0));if(this.isPeriodEnabled(c&&l[k]==g?f:B.periodStart,!c&&l[k]==g?f:B.periodEnd))return!0}return!1}return!0},isPeriodEnabled:function(a,c){if(this.minDate&&this.minDate>c)return!1;if(this.maxDate&&this.maxDate<a)return!1;var d=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(d){var g=o(a),f=o(c),i,m,k,x=g.month,B=new Date(g.year,g.month),n=11-g.month,u=n+1+(f.year-g.year-1)*12+(f.month+1)-1;if(this.periodEnableByDefault){if(u==0)return!(i=d[g.year])||!(m=i[g.month])||(m^2147483647)>>
g.day&l[f.day-g.day+1];for(var s=0;s<=u;s++){if(!s||n==s%12)if(i=d[B.getFullYear()],!i)return!0;m=i[x=B.getMonth()];if(!m)return!0;k=l[B.getMonthDayCount()];if(s/u?s/u==1?(m&k^k)&l[f.day+1]:m&k^k:(m&k^k)>>g.day)return!0;B.setMonth(x+1)}}else{if(u==0)return(i=d[g.year])&&(m=i[g.month])&&m>>g.day&l[f.day-g.day+1];for(s=0;s<=u;s++){if(!s||n==s%12||!i)if(i=d[B.getFullYear()],!i){s+=12;B.setMonth(x+12);continue}if((m=i[x=B.getMonth()])&&(s/u?s/u==1?m&l[f.day+1]:m:m>>g.day))return!0;B.setMonth(x+1)}}return!1}return!0},
destroy:function(){u.prototype.destroy.call(this);this.date.destroy();this.todayDate.destroy()}});f.namespace("basis.ui.calendar").extend({Calendar:k,CalendarSection:c})})(basis);
(function(f){function o(a,b){return new p(a.source.replace("<\!-- {fieldPlace} --\>",b))}var n=f.Class,k=f.dom.event,q=f.dom,p=f.html.Template,v=f.Cleaner,r=Object.complete,t=Function.getter,m=f.cssom.classList,w=f.dom.wrapper,x=w.Selection,d=f.data.property.Property,u=f.EventObject,s=w.Control,l=w.TmplNode,y=w.TmplContainer,w=u.createEvent,i=new p('<div{element|selected|sampleContainer} class="Basis-Field"><div class="Basis-Field-Title"><label><span{title}>{titleText}</span></label></div><div{content} class="Basis-Field-Container"><\!-- {fieldPlace} --\></div></div>'),
a=n(l,{canHaveChildren:!1,template:i,nextFieldOnEnter:!0,serializable:!0,event_select:function(){q.focus(this.tmpl.field,!0);l.prototype.event_select.call(this)},event_enable:function(){this.tmpl.field.removeAttribute("disabled");l.prototype.event_enable.call(this)},event_disable:function(){this.tmpl.field.setAttribute("disabled","disabled");l.prototype.event_disable.call(this)},event_input:w("input"),event_change:w("change"),event_keydown:w("keydown"),event_keypress:w("keypress"),event_keyup:w("keyup")&&
function(a){if(this.nextFieldOnEnter){var b=k.key(a);b==k.KEY.ENTER||b==k.KEY.CTRL_ENTER?(k.cancelDefault(a),this.nextFieldFocus()):this.setValid()}u.event.keyup.call(this,a)},event_focus:w("focus")&&function(a){this.valid&&this.setValid();u.event.focus.call(this,a)},event_blur:w("blur")&&function(a){this.validate(!0);u.event.blur.call(this,a)},init:function(a){l.prototype.init.call(this,a);this.name=this.name||"";if(this.tmpl.titleText)this.tmpl.titleText.nodeValue=this.title||"";if(this.tmpl.field){k.addHandler(this.tmpl.field,
"keydown",this.keydown,this);k.addHandler(this.tmpl.field,"keyup",this.keyup,this);k.addHandler(this.tmpl.field,"keypress",this.keypress,this);k.addHandler(this.tmpl.field,"blur",this.blur,this);k.addHandler(this.tmpl.field,"focus",this.focus,this);k.addHandler(this.tmpl.field,"change",this.change,this);k.addHandler(this.tmpl.field,"input",this.input,this);if(this.name)this.tmpl.field.name=this.name;if(this.size)this.tmpl.field.size=this.size}if(!this.validators)this.validators=[];this.setSample(this.sample);
this.minLength&&this.setMinLength(this.minLength);this.maxLength&&this.setMaxLength(this.maxLength);this.readOnly&&this.setReadOnly(this.readOnly);if(this.defaultValue!==this.value)this.defaultValue=this.value,this.setDefaultValue()},setReadOnly:function(a){a?this.tmpl.field.setAttribute("readonly","readonly",0):this.tmpl.field.removeAttribute("readonly",0)},setDefaultValue:function(){this.setValue(this.defaultValue);this.setValid()},setSample:function(a){if(this.tmpl.sampleContainer&&a)this.sampleElement?
q.insert(q.clear(this.sampleElement),a):q.insert(this.tmpl.sampleContainer,this.sampleElement=q.createElement("SPAN.Basis-Field-Sample",a));else if(this.sampleElement)q.remove(this.sampleElement),this.sampleElement=null},getValue:function(){return this.tmpl.field.value},setValue:function(a){a=a||"";if(this.tmpl.field.value!=a)this.tmpl.field.value=a,this.event_change()},setMaxLength:function(a){this.maxLength=a},setMinLength:function(a){this.minLength=a},attachValidator:function(a,b){this.validators.add(a)&&
b&&this.validate()},detachValidator:function(a,b){this.validators.remove(a)&&b&&this.validate()},change:function(a){this.event_change(a)},input:function(a){this.event_input(a)},keydown:function(a){this.event_keydown(a)},keyup:function(a){this.event_keyup(a)},keypress:function(a){this.event_keypress(a)},blur:function(a){this.event_blur(a)},focus:function(a){this.event_focus(a)},select:function(){this.unselect();l.prototype.select.apply(this,arguments)},setValid:function(a,b){var c=m(this.element);
typeof a=="boolean"?(c.bool("invalid",!a),c.bool("valid",a),b?this.element.title=b:this.element.removeAttribute("title")):(c.remove("invalid"),c.remove("valid"),this.element.removeAttribute("title"));this.valid=a},validate:function(a){var b;this.setValid();for(var c=0;c<this.validators.length;c++)if(b=this.validators[c](this))return a||this.setValid(!1,b.message),b;this.getValue()!=""&&this.setValid(!0)},nextFieldFocus:function(){var a=q.axis(this,q.AXIS_FOLLOWING_SIBLING).search(!0,"selectable");
a?a.select():this.parentNode&&this.parentNode.submit&&this.parentNode.submit()},destroy:function(){k.clearHandlers(this.element);k.clearHandlers(this.tmpl.field);this.button&&(k.clearHandlers(this.button),delete this.button);this.validators.clear();l.prototype.destroy.call(this);delete this.sampleElement;delete this.sampleContainer;delete this.defaultValue}});a.create=function(b,c){b={radiogroup:"RadioGroup",checkgroup:"CheckGroup"}[b.toLowerCase()]||b.capitalize();if(a[b])return new a[b](c);else throw Error("Wrong field type `{0}`".format(b));
};a.Hidden=n(a,{selectable:!1,template:new p('<input{element|field} type="hidden"/>')});a.Text=n(a,{template:o(i,'<input{field} type="text"/>'),init:function(b){a.prototype.init.call(this,b);this.minLength&&this.attachValidator(z.MinLength)},setMaxLength:function(b){this.tmpl.field.setAttribute("maxlength",b,0);a.prototype.setMaxLength.call(this,b)}});a.Password=n(a.Text,{template:o(i,'<input{field} type="password"/>')});a.File=n(a,{template:o(i,'<input{field} type="file"/>')});a.Textarea=n(a,{nextFieldOnEnter:!1,
template:o(i,"<textarea{field}/>"),init:function(b){this.counter=q.createElement(".counter",a.LOCALE.Textarea.SYMBOLS_LEFT+": ",q.createText(0));a.prototype.init.call(this,b);this.minLength&&this.attachValidator(z.MinLength);this.maxLength&&this.attachValidator(z.MaxLength);k.addHandler(this.tmpl.field,"keyup",this.updateCounter,this);k.addHandler(this.tmpl.field,"input",this.updateCounter,this);window.opera&&k.addHandler(this.tmpl.field,"focus",function(){this.contentEditable=!0;this.contentEditable=
!1})},updateCounter:function(){var a=this.maxLength-this.getValue().length;this.counter.lastChild.nodeValue=a>=0?a:0},setValue:function(b){a.prototype.setValue.call(this,b);this.updateCounter()},setMaxLength:function(b){a.prototype.setMaxLength.call(this,b);b?(this.updateCounter(),q.insert(this.tmpl.sampleContainer,this.counter)):q.remove(this.counter)},destroy:function(){delete this.counter;a.prototype.destroy.call(this)}});a.Checkbox=n(a,{value:!1,template:new p('<div{element} class="Basis-Field Basis-Field-Checkbox"><div{content} class="Basis-Field-Container"><label><input{field} type="checkbox"/><span>{titleText}</span></label></div></div>'),
invert:function(){this.setValue(!this.getValue())},setValue:function(a){var b=this.tmpl.field.checked;this.tmpl.field.checked=!!a;b!=this.tmpl.field.checked&&this.event_change()},getValue:function(){return this.tmpl.field.checked}});a.Label=n(a,{cssClassName:"Basis-Field-Label",template:o(i,"<label{field}>{fieldValueText}</label>"),setValue:function(b){a.prototype.setValue.call(this,b);this.tmpl.fieldValueText.nodeValue=this.tmpl.field.value}});var c=n(l,{canHaveChildren:!1,titleGetter:function(a){return a.title||
a.getValue()},valueGetter:t("value"),getTitle:function(){return this.titleGetter(this)},getValue:function(){return this.valueGetter(this)}}),b={datasetChanged:function(){this.event_change()}},e=n(a,y,{template:a.prototype.template,multipleSelect:!1,init:function(c){this.selection=new x({multiple:!!this.multipleSelect});this.selection.addHandler(b,this);a.prototype.init.call(this,c);v.add(this)},getValue:function(){var a=this.selection.getItems().map(t("getValue()"));return!this.selection.multiple?
a[0]:a},setValue:function(a){var b={};(this.multipleSelect?Array.from(a):[a]).forEach(function(a){b[a]=!0});for(var a=[],c=this.firstChild;c;c=c.nextSibling)b[c.getValue()]&&a.push(c);this.selection.set(a)},destroy:function(){a.prototype.destroy.call(this);v.remove(this)}});e.Item=c;y=n(c,{event_select:function(){this.tmpl.field.checked=!0;c.prototype.event_select.call(this)},event_unselect:function(){this.tmpl.field.checked=!1;c.prototype.event_unselect.call(this)},template:new p('<label{element} class="Basis-RadioGroup-Item" event-click="select"><input{field} type="radio" class="radio"/><span{content}>{titleText}</span></label>'),
templateUpdate:function(a,b,d){c.prototype.templateUpdate.call(this,a,b,d);a.field.value=this.getValue();a.titleText.nodeValue=this.getTitle()},templateAction:function(a,b){a=="select"&&!this.isDisabled()&&this.select();c.prototype.templateAction.call(this,a,b)}});a.RadioGroup=n(e,{childClass:y,template:o(i,'<div{field|childNodesElement} class="Basis-RadioGroup"></div>'),childFactory:function(a){a=e.prototype.childFactory.call(this,a);if(this.name)a.tmpl.field.name=this.name;return a}});a.RadioGroup.Item=
y;y=n(c,{event_select:function(){this.tmpl.field.checked=!0;c.prototype.event_select.call(this)},event_unselect:function(){this.tmpl.field.checked=!1;c.prototype.event_unselect.call(this)},template:new p('<label{element} event-click="click"><input{field} type="checkbox"/><span{content}>{titleText}</span></label>'),templateUpdate:function(a,b,d){c.prototype.templateUpdate.call(this,a,b,d);this.tmpl.field.value=this.getValue();this.tmpl.titleText.nodeValue=this.getTitle()},templateAction:function(a,
b){a=="click"&&!this.isDisabled()&&(this.select(this.parentNode.multipleSelect),k.sender(b).tagName!="INPUT"&&k.kill(b));c.prototype.templateAction.call(this,a,b)}});a.CheckGroup=n(e,{childClass:y,multipleSelect:!0,template:o(i,'<div{field|childNodesElement} class="Basis-CheckGroup"></div>')});a.CheckGroup.Item=y;y=n(c,{event_select:function(){this.parentNode&&this.parentNode.setValue(this.getValue())},event_unselect:function(){this.parentNode&&this.parentNode.setValue()},template:new p("<option{element|field}>{titleText}</option>"),
templateUpdate:function(a,b,d){c.prototype.templateUpdate.call(this,a,b,d);a.field.value=this.getValue();a.field.text=this.getTitle()}});a.Select=n(e,{childClass:y,template:o(i,"<select{field|childNodesElement}/>"),event_keyup:function(a,b){this.change();e.prototype.event_keyup.call(this,a,b)},setValue:function(a){(a=this.childNodes.search(a,"getValue()"))?this.selection.set([a]):this.selection.clear()}});a.Select.Item=y;var h={show:function(){m(this.tmpl.field).add("Basis-DropdownList-Opened")},
hide:function(){m(this.tmpl.field).remove("Basis-DropdownList-Opened")}},y=n(c,{template:new p('<div{element} class="Basis-Combobox-Item" event-click="click">{titleText}</div>'),templateUpdate:function(a,b,d){c.prototype.templateUpdate.call(this,a,b,d);a.titleText.nodeValue=this.getTitle()},templateAction:function(a,b){a=="click"&&!this.isDisabled()&&(this.select(),this.parentNode.hide(),k.kill(b));c.prototype.templateAction.call(this,a,b)}}),g={keyup:function(a){var b=k.key(a),c=this.selection.pick();
switch(b){case k.KEY.DOWN:if(a.altKey)return this.popup.visible?this.hide():!this.isDisabled()?this.show():null;c=q.axis(c?c:this.firstChild,q.AXIS_FOLLOWING_SIBLING).search(!1,"disabled");break;case k.KEY.UP:if(a.altKey)return this.popup.visible?this.hide():!this.isDisabled()?this.show():null;c=c?q.axis(c,q.AXIS_PRESCENDING_SIBLING).search(!1,"disabled"):this.firstChild}c&&(c.select(),q.focus(this.tmpl.field))},keydown:function(a){var b=k.key(a);b==k.KEY.DOWN||b==k.KEY.UP?k.kill(a):b==k.KEY.ENTER&&
(this.popup.visible&&this.hide(),k.kill(a))}};a.Combobox=n(e,{childClass:y,event_enable:function(){this.delegate&&this.delegate.select&&this.delegate.select();e.prototype.event_enable.call(this)},event_change:function(){e.prototype.event_change.call(this);var a=this.getValue();this.property&&this.property.set(a);if(this.hidden)this.hidden.value=a;this.satellite&&this.satellite.captionItem.setDelegate(this.selection.pick())},caption:null,popup:null,property:null,template:o(i,'<span{field} class="Basis-DropdownList" event-click="click" tabindex="0"><span class="Basis-DropdownList-Caption"><\!--{captionItem}--\></span><span class="Basis-DropdownList-Trigger"/></span><div{content|childNodesElement} class="Basis-DropdownList-PopupContent"/>'),
templateAction:function(a,b){a=="click"&&(this.isDisabled()||this.popup.visible?this.hide():this.show({}),k.kill(b));e.prototype.templateAction.call(this,a,b)},init:function(a){if(!f.ui.popup)throw Error("basis.ui.popup required for DropDownList");if(this.property)this.value=this.property.value;this.satelliteConfig={captionItem:{instanceOf:this.childClass,delegate:Function.getter("selection.pick()"),config:{getTitle:function(){return this.delegate&&this.delegate.getTitle()},getValue:function(){return this.delegate&&
this.delegate.getValue()},handler:{delegateChanged:function(){this.event_update(this,{})}}}}};e.prototype.init.call(this,a);this.satellite.captionItem.setDelegate(this.selection.pick());k.addHandlers(this.tmpl.field,g,this);if(this.name)q.insert(this.tmpl.field,this.hidden=q.createElement("INPUT[type=hidden][name={0}]".format(String(this.name).quote())));this.popup=new f.ui.popup.Popup(r({cssClassName:"Basis-DropdownList-Popup",autorotate:1,ignoreClickFor:[this.tmpl.field],thread:this.thread,content:this.childNodesElement,
handler:h,handlerContext:this},this.popup));this.property&&this.property.addLink(this,this.setValue)},show:function(){this.popup.show(this.tmpl.field);this.select()},hide:function(){this.popup.hide()},getTitle:function(){var a=this.selection.pick();return a&&a.getTitle()},getValue:function(){var a=this.selection.pick();return a&&a.getValue()},setValue:function(a){this.getValue()!=a&&((a=this.childNodes.search(a,"getValue()"))&&!a.isDisabled()?this.selection.set([a]):this.selection.clear())},destroy:function(){if(this.property)this.property.removeLink(this),
this.property=null;this.popup.destroy();this.popup=null;e.prototype.destroy.call(this)}});a.Combobox.Item=y;var j=n(null,{init:function(a,b){this.field=a;this.message=b}}),z={NO_LOCALE:"There is no locale for this error",RegExp:function(a){a.constructor!=RegExp&&(a=RegExp(a));return function(b){var c=b.getValue();if(c!=""&&!c.match(a))return new j(b,z.LOCALE.RegExp.WRONG_FORMAT||z.NO_LOCALE)}},Required:function(a){var b=a.getValue();if(Function.$isNull(b)||b=="")return new j(a,z.LOCALE.Required.MUST_BE_FILLED||
z.NO_LOCALE)},Number:function(a){var b=a.getValue();if(isNaN(b))return new j(a,z.LOCALE.Number.WRONG_FORMAT||z.NO_LOCALE)},Currency:function(a){var b=a.getValue();if(isNaN(b))return new j(a,z.LOCALE.Currency.WRONG_FORMAT||z.NO_LOCALE);if(b<=0)return new j(a,z.LOCALE.Currency.MUST_BE_GREATER_ZERO||z.NO_LOCALE)},Email:function(a){var b=a.getValue();if(b!=""&&!b.match(/\s*^[a-z0-9\.\-\_]+\@(([a-z][a-z0-9\-]*\.)+[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})\s*$/i))return new j(a,z.LOCALE.Email.WRONG_FORMAT||z.NO_LOCALE)},
Url:function(a){var b=a.getValue();if(b!=""&&!b.match(/^\s*(https?\:\/\/)?((\d{1,3}\.){3}\d{1,3}|([a-zA-Z][a-zA-Z\d\-]+\.)+[a-zA-Z]{2,6})(:\d+)?(\/[^\?]*(\?\S(\=\S*))*(\#\S*)?)?\s*$/i))return new j(a,z.LOCALE.Url.WRONG_FORMAT||z.NO_LOCALE)},MinLength:function(a){var b=a.getValue();if((Function.$isNotNull(b.length)?b.length:String(b).length)<a.minLength)return new j(a,(z.LOCALE.MinLength.MUST_BE_LONGER_THAN||z.NO_LOCALE).format(a.minLength))},MaxLength:function(a){var b=a.getValue();if((Function.$isNotNull(b.length)?
b.length:String(b).length)>a.maxLength)return new j(a,(z.LOCALE.MaxLength.MUST_BE_SHORTER_THAN||z.NO_LOCALE).format(a.maxLength))}},w=n(s,{canHaveChildren:!0,childClass:a,childFactory:function(b){return a.create(b.type||"text",b)},onSubmit:Function.$false,event_reset:w("reset"),event_disable:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.disabled||a.event_disable();s.prototype.event_disable.call(this)},event_enable:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.disabled||a.event_enable();
s.prototype.event_enable.call(this)},template:new p('<div{element} class="Basis-FormContent"/>'),getFieldByName:function(a){return this.childNodes.search(a,"name")},getFieldById:function(a){return this.childNodes.search(a,"id")},serialize:function(){for(var a={},b=this.firstChild;b;b=b.nextSibling)b.serializable&&b.name&&(a[b.name]=b.getValue());return a},setData:function(a,b){this.loadData(a,b)},loadData:function(a,b){for(var c=Object.keys(a),d=this.firstChild;d;d=d.nextSibling)c.indexOf(d.name)!=
-1?d.setValue(a[d.name]):d.setDefaultValue(),d.setValid();b||this.validate()},setDefaultState:function(){this.reset()},reset:function(){for(var a=this.firstChild;a;a=a.nextSibling)a.setDefaultValue();this.event_reset()},validate:function(){for(var a,b=[],c=this.firstChild;c;c=c.nextSibling)(a=c.validate())&&b.push(a);return b.length?(b[0].field.select(),b):!0},submit:function(){if(this.validate()===!0&&this.onSubmit)this.onSubmit(this.serialize())}});n(w,{template:new p('<form{element|formElement} class="Basis-Form"><div{content|childNodesElement} class="Basis-FormContent"/></form>'),
method:"POST",init:function(a){this.selection=!1;s.prototype.init.call(this,a);if(this.target)this.formElement.target=this.target;if(this.action)this.formElement.action=this.action;if(this.enctype)this.formElement.enctype=this.enctype;k.addHandler(this.formElement,"submit",this.submit,this);this.formElement.onsubmit=this.submit;this.setMethod(this.method)},setMethod:function(a){this.formElement.method=a?a.toUpperCase():"POST"},submit:function(){if(this.validate()===!0&&!this.onSubmit())if(this.tagName==
"FORM")return!1;else this.formElement.submit();return!0}});var A=n(d,{matchFunction:function(a,b){if(!b){var c=a._m||this.textNodeGetter(a);c.constructor!=Array&&(c=[c]);for(var d=!1,e=0;e<c.length;e++){var g=c[e];if(g){var h=!1,f=g.nodeValue.split(this.rx);if(f.length>1){if(!a._x)a._x=[];if(!a._m)a._m=[];q.replace(a._x[e]||g,a._x[e]=q.createElement("SPAN.matched",q.wrap(f,this.map)));a._m[e]=g;h=d=!0}a._x&&a._x[e]&&!h&&(q.replace(a._x[e],a._m[e]),a._x[e]=a._m[e])}}return d}if(a._x){for(e=0;e<a._x.length;e++)a._x[e]&&
q.replace(a._x[e],a._m[e]);delete a._x;delete a._m}return!1},event_change:function(a){this.rx=this.regexpGetter(a);d.prototype.event_change.call(this,a)},extendConstructor_:!0,init:function(){var a=this.startPoints||"";this.textNodeGetter=t(this.textNodeGetter||"tmpl.titleText");if(typeof this.regexpGetter!="function")this.regexpGetter=function(b){return RegExp("("+a+")("+b.forRegExp()+")","i")};this.map={};this.map[this.wrapElement||"SPAN.match"]=function(a,b){return b%3==2};d.prototype.init.call(this,
"",this.handlers,String.trim)}}),D={childNodesModified:function(a,b){if(b.inserted)for(var c=0,d;d=b.inserted[c];c++)this.matchFunction(d,this.value=="")}},y=n(A,{event_change:function(a){A.prototype.event_change.call(this,a);this.match()},init:function(a){A.prototype.init.call(this,a);this.node.addHandler(D,this)},match:function(){for(var a=this.node.firstChild;a;a=a.nextSibling)this.matchFunction(a,this.value=="")}}),C=n(A,{event_change:function(a){A.prototype.event_change.call(this,a);this.node.setMatchFunction(a?
this.matchFunction.bind(this):null)}}),n=n(a.Text,{cssClassName:"Basis-MatchInput",matchFilterClass:C,event_keyup:function(b){this.matchFilter.set(this.tmpl.field.value);a.Text.prototype.event_keyup.call(this,b)},event_change:function(b){this.matchFilter.set(this.tmpl.field.value);a.Text.prototype.event_change.call(this,b)},init:function(b){a.Text.prototype.init.call(this,b);this.matchFilter=new this.matchFilterClass(this.matchFilter)}});f.namespace("basis.ui.form").extend({createFieldTemplate:function(a){return o(i,
a)},FormContent:w,Field:a,Validator:z,ValidatorError:j,RadioGroup:a.RadioGroup,CheckGroup:a.CheckGroup,Combobox:a.Combobox,ComplexField:e,Matcher:y,MatchFilter:C,MatchInput:n})})(basis);
(function(f){function o(d,f){if(window[d])return window[d];for(var d=d.charAt(0).toUpperCase()+d.substr(1),k=0,l;l=m[k++];)if(window[l+d])return window[l+d];return f}var n=f.dom,k=f.dom.event,q=f.EventObject,p=f.Class,v=!1,r=!1,t;(function(){function d(d,f){for(var m;m=f.shift();)if(typeof d.style[m]!="undefined")return m;return!1}var f=n.createElement("");(t=d(f,["transform","WebkitTransform","msTransform","MozTransform","OTransform"]))&&(v=!0);if(v&&(d(f,["perspectiveProperty","WebkitPerspective",
"MozPerspective","OPerspective","msPerspective"])||"webkitPerspective"in document.documentElement.style))r=!0})();var m=["webkit","moz","o","ms"],w=o("requestAnimationFrame",function(d){return window.setTimeout(d,15)}),x=o("cancelRequestAnimFrame",clearInterval),p=p(q,{minScrollDelta:0,preventScrollX:!1,preventScrollY:!1,scrollPropertyType:"style",event_start:q.createEvent("start","scrollerObject"),event_finish:q.createEvent("finish","scrollerObject"),event_startInertia:q.createEvent("startInertia",
"scrollerObject"),event_updatePosition:q.createEvent("updatePosition","scrollerObject","scrollPosition"),init:function(d){this.startTime=this.lastUpdateTime=this.lastMotionUpdateTime=this.updateFrameHandle=this.lastViewportTargetY=this.lastViewportTargetX=this.viewportTargetY=this.viewportTargetX=this.viewportY=this.viewportX=this.maxPositionY=this.maxPositionX=this.minPositionY=this.minPositionX=this.currentDirectionY=this.currentDirectionX=this.currentVelocityY=this.currentVelocityX=this.lastMouseY=
this.lastMouseX=0;this.panningActive=this.processInertia=!1;q.prototype.init.call(this,d);this.targetElement&&(k.addHandler(this.targetElement,"mousedown",this.onMouseDown,this),k.addHandler(this.targetElement,"touchstart",this.onMouseDown,this));this.onUpdateHandler=this.onUpdate.bind(this);this.scrollPropertyType=="scroll"?(n.setStyle(this.targetElement,{overflow:"hidden"}),this.updateElementPosition=this.updatePosition_scrollTopLeft,this.calcDimentions=this.calcDimentions_scrollTopLeft):(n.setStyle(this.targetElement,
{position:"relative"}),this.updateElementPosition=v?this.updatePosition_styleTransform:this.updatePosition_styleTopLeft,this.calcDimentions=this.calcDimentions_styleTopLeft);if(this.minScrollDelta==0)this.minScrollDeltaXReached=this.minScrollDeltaYReached=!0},updatePosition_scrollTopLeft:function(){if(this.scrollX)this.targetElement.scrollLeft=this.viewportX;if(this.scrollY)this.targetElement.scrollTop=this.viewportY},updatePosition_styleTopLeft:function(){if(this.scrollX)this.targetElement.style.left=
-this.viewportX+"px";if(this.scrollY)this.targetElement.style.top=-this.viewportY+"px"},updatePosition_styleTransform:function(){var d=Math.round(-this.viewportX)+"px",f=Math.round(-this.viewportY)+"px",m={};v&&(m[t]="translate("+d+", "+f+")"+(r?" translateZ(0)":""));n.setStyle(this.targetElement,m)},calcDimentions_scrollTopLeft:function(){this.minPositionX=0;this.maxPositionX=this.targetElement.scrollWidth-this.targetElement.offsetWidth;this.scrollX=!this.preventScrollX&&this.maxPositionX>0;this.minPositionY=
0;this.maxPositionY=this.targetElement.scrollHeight-this.targetElement.offsetHeight;this.scrollY=!this.preventScrollY&&this.maxPositionY>0},calcDimentions_styleTopLeft:function(){this.minPositionY=this.minPositionX=0;var d=this.targetElement.offsetParent;this.maxPositionX=this.targetElement.scrollWidth-d.offsetWidth;this.scrollX=!this.preventScrollX&&this.maxPositionX>0;this.maxPositionY=this.targetElement.scrollHeight-d.offsetHeight;this.scrollY=!this.preventScrollY&&this.maxPositionY>0},resetVariables:function(){this.viewportTargetX=
this.viewportX;this.viewportTargetY=this.viewportY;this.lastViewportTargetX=this.viewportTargetX;this.lastViewportTargetY=this.viewportTargetY;this.currentDirectionY=this.currentDirectionX=this.currentVelocityY=this.currentVelocityX=0;this.processInertia=this.minScrollDeltaYReached=this.minScrollDeltaXReached=!1},startUpdate:function(){if(!this.isUpdating)this.targetElement.offsetWidth&&this.calcDimentions(),this.startViewportX=this.viewportX,this.startViewportY=this.viewportY,this.isUpdating=!0,
this.updateFrameHandle=this.nextFrame(),this.startTime=this.lastUpdateTime=Date.now(),this.event_start(this)},stopUpdate:function(){if(this.isUpdating)this.resetVariables(),this.isUpdating=!1,x(this.updateFrameHandle),this.updateElementPosition(),this.event_finish(this)},onMouseDown:function(d){this.stopUpdate();this.panningActive=!0;this.lastMouseX=k.mouseX(d);this.lastMouseY=k.mouseY(d);k.addHandler(document,"mousemove",this.onMouseMove,this);k.addHandler(document,"touchmove",this.onMouseMove,this);
k.addHandler(document,"mouseup",this.onMouseUp,this);k.addHandler(document,"touchend",this.onMouseUp,this);k.cancelDefault(d)},onMouseMove:function(d){(this.minScrollDelta==0||this.minScrollDeltaYReached||this.minScrollDeltaXReached)&&this.startUpdate();var f=Date.now(),m=f-this.lastMotionUpdateTime;this.lastMotionUpdateTime=f;if(this.minScrollDeltaXReached||!this.minScrollDeltaYReached){var f=k.mouseX(d),l=this.lastMouseX-f;this.lastMouseX=f;this.viewportTargetX+=l;this.currentVelocityX=Math.abs(l)/
m;this.currentDirectionX=l==0?0:l<0?-1:1}if(this.minScrollDeltaYReached||!this.minScrollDeltaXReached)d=k.mouseY(d),f=this.lastMouseY-d,this.lastMouseY=d,this.viewportTargetY+=f,this.currentVelocityY=Math.abs(f)/m,this.currentDirectionY=f==0?0:f<0?-1:1;if(this.minScrollDelta>0&&!this.minScrollDeltaXReached&&!this.minScrollDeltaYReached){if(Math.abs(this.viewportTargetX-this.viewportX)>this.minScrollDelta)this.minScrollDeltaXReached=!0;if(Math.abs(this.viewportTargetY-this.viewportY)>this.minScrollDelta)this.minScrollDeltaYReached=
!0;if(this.minScrollDeltaYReached)this.viewportTargetX=this.viewportX,this.currentDirectionX=0;if(this.minScrollDeltaXReached)this.viewportTargetY=this.viewportY,this.currentDirectionY=0}},onMouseUp:function(){this.panningActive=!1;this.processInertia=!0;var d=Date.now()-this.lastMotionUpdateTime,d=Math.max(10,d);this.lastMotionUpdateTime=0;this.scrollX&&(this.currentVelocityX*=1-Math.min(1,Math.max(0,d/100)));this.scrollY&&(this.currentVelocityY*=1-Math.min(1,Math.max(0,d/100)));k.removeHandler(document,
"mousemove",this.onMouseMove,this);k.removeHandler(document,"touchmove",this.onMouseMove,this);k.removeHandler(document,"mouseup",this.onMouseUp,this);k.removeHandler(document,"touchend",this.onMouseUp,this);this.event_startInertia(this)},onUpdate:function(d){d||(d=Date.now());var f=d-this.lastUpdateTime;this.lastUpdateTime=d;if(f){if(this.processInertia){if(this.scrollX&&(this.viewportTargetX+=this.currentDirectionX*this.currentVelocityX*f,this.currentVelocityX*=0.94,this.currentVelocityX<0.0010||
this.viewportX<this.minPositionX||this.viewportX>this.maxPositionX))this.viewportTargetX=Math.min(this.maxPositionX,Math.max(this.minPositionX,this.viewportTargetX)),this.currentVelocityX=0;if(this.scrollY&&(this.viewportTargetY+=this.currentDirectionY*this.currentVelocityY*f,this.currentVelocityY*=0.94,this.currentVelocityY<0.0010||this.viewportY<this.minPositionY||this.viewportY>this.maxPositionY))this.viewportTargetY=Math.min(this.maxPositionY,Math.max(this.minPositionY,this.viewportTargetY)),
this.currentVelocityY=0;if(this.currentVelocityX==0&&this.currentVelocityY==0)this.processInertia=!1}var m=0,f=0;this.scrollX&&(m=this.viewportTargetX-this.viewportX,this.viewportX+=m*(this.panningActive||this.currentVelocityX>0?1:0.12));this.scrollY&&(f=this.viewportTargetY-this.viewportY,this.viewportY+=f*(this.panningActive||this.currentVelocityY>0?1:0.12));m=!this.scrollX||this.currentVelocityX<0.0010&&Math.abs(m)<0.1;f=!this.scrollY||this.currentVelocityY<0.0010&&Math.abs(f)<0.1;if(!this.panningActive&&
m&&f){if(this.scrollX)this.viewportX=this.viewportTargetX;if(this.scrollY)this.viewportY=this.viewportTargetY;this.stopUpdate()}this.updateElementPosition();this.event_updatePosition(this,d,this.viewportX,this.viewportY)}this.nextFrame()},nextFrame:function(){if(this.isUpdating)this.updateFrameHandle=w(this.onUpdateHandler,this.targetElement)},setPosition:function(d,f){this.viewportX=d;this.viewportY=f;this.isUpdating?this.stopUpdate():(this.resetVariables(),this.updateElementPosition())},setTargetPosition:function(d,
f){this.viewportTargetX=d||0;this.viewportTargetY=f||0;this.startUpdate();this.processInertia=!0},calcExpectedPosition:function(d){var f=0,m=d=="x"?this.currentVelocityX:this.currentVelocityY,l=d=="x"?this.currentDirectionX:this.currentDirectionY,k=d=="x"?this.viewportTargetX:this.viewportTargetY,i=d=="x"?this.minPositionX:this.minPositionY,d=d=="x"?this.maxPositionX:this.maxPositionY;if(m)for(var a=Math.log(0.0010/m)/Math.log(0.94),c=0;c<a;c++)f+=l*m*15,m*=0.94;return Math.max(i,Math.min(d,k+f))},
calcExpectedPositionX:function(){return this.calcExpectedPosition("x")},calcExpectedPositionY:function(){return this.calcExpectedPosition("y")}});f.namespace("basis.ui.scroller").extend({Scroller:p})})(basis);
(function(f){var o=f.Class,n=f.dom,k=f.dom.event,q=f.html.Template,p=f.cssom,v=f.dom.wrapper,r=o(v.TmplNode,{template:new q('<div{element} class="TocControl-Item-Header"><span>{titleText}</span></div>'),titleGetter:Function.getter("data.title"),behaviour:{update:function(f,d){this.inherit(f,d);this.titleText.nodeValue=this.titleGetter(this)||"[no title]"}},init:function(f){this.inherit(f);k.addHandler(this.element,"click",function(){this.owner&&this.owner.parentNode&&this.owner.parentNode.scrollToNode(this.owner)},
this)}}),t=o(v.TmplContainer,{template:new q('<div{element} class="TocControl-Item"><span{header}/><div{content|childNodesElement} class="TocControl-Item-Content"/></div>'),satelliteConfig:{header:{delegate:Function.$self,instanceOf:r}}}),m=!0,w=o(v.TmplContainer,{behaviour:{click:function(f,d){d&&d.delegate.parentNode.scrollToNode(d.delegate)}},init:function(f){this.inherit(f);this.document=this;m&&k.addHandler(this.element,"mousewheel",function(d){try{this.owner.content.dispatchEvent(d)}catch(f){m=
!1,k.removeHandler(this.element,"mousewheel")}},this);this.addEventListener("click")}}),o=o(v.Control,{childClass:t,template:new q('<div{element} class="TocControl"><div{content|childNodesElement} class="TocControl-Content"/></div>'),behaviour:{childNodesModified:function(){this.recalc()}},clientHeight_:-1,scrollHeight_:-1,scrollTop_:-1,lastTopPoint:-1,lastBottomPoint:-1,isFit:!0,init:function(m){this.inherit(Object.complete({childNodes:null},m));var d=this.childClass.prototype.satelliteConfig.header.instanceOf;
this.meterHeader=new d({container:this.element,data:{title:"meter"}});this.meterElement=this.meterHeader.element;p.setStyle(this.meterElement,{position:"absolute",visibility:"hidden"});this.childNodesDataset=new v.ChildNodesDataset(this);this.header=new w({container:this.element,childClass:d,collection:this.childNodesDataset,cssClassName:"TocControlHeader"});this.footer=new w({container:this.element,childClass:d,collection:this.childNodesDataset,cssClassName:"TocControlFooter"});n.hide(this.header.element);
n.hide(this.footer.element);this.header.owner=this;this.footer.owner=this;this.thread=new f.Animation.Thread({duration:400,interval:15});var o=this;this.modificator=new f.Animation.Modificator(this.thread,function(d){o.content.scrollTop=parseInt(d);o.recalc()},0,0,!0);this.modificator.timeFunction=function(d){return Math.sin(Math.acos(1-d))};k.addHandler(this.content,"scroll",this.recalc,this);k.addHandler(window,"resize",this.recalc,this);this.addEventListener("click","click",!0);m.childNodes&&this.setChildNodes(m.childNodes);
this.timer_=setInterval(function(){o.recalc()},500)},scrollToNode:function(f){if(f&&f.parentNode===this)if(f=Math.min(this.content.scrollHeight-this.content.clientHeight,this.topPoints[n.index(f)]),this.thread){var d=this.content.scrollTop;this.modificator.setRange(d,d);this.thread.stop();this.modificator.setRange(d,f);this.thread.start()}else this.content.scrollTop=f},recalc:function(){var f=this.content,d=f.clientHeight,m=f.scrollHeight,f=f.scrollTop,k=d==m;if(this.clientHeight_!=d||this.scrollHeight_!=
m){this.clientHeight_=d;this.scrollHeight_=m;var m=[],l=[];if(!k)for(var o=this.meterElement.offsetHeight,i=0,d=o*this.childNodes.length-d,a,c=0;a=this.childNodes[c];c++)a=a.element.offsetTop,m.push(a?a-i:m[c-1]||0),l.push(a?a+d:l[c-1]||d),i+=o,d-=o;this.topPoints=m;this.bottomPoints=l;this.lastBottomPoint=this.lastTopPoint=this.scrollTop_=-1}if(this.isFit!=k)this.isFit=k,n.display(this.header.element,!k),n.display(this.footer.element,!k);if(!k&&this.scrollTop_!=f)if(this.scrollTop_=f,k)this.lastTopPoint=
0,this.lastBottomPoint=this.childNodes.length;else{var b=this.topPoints.binarySearchPos(f),e=this.bottomPoints.binarySearchPos(f);if(this.lastTopPoint!=b)this.lastTopPoint=b,this.header.childNodes.forEach(function(a,c){a.element.style.display=c>=b?"none":""});if(this.lastBottomPoint!=e)this.lastBottomPoint=e,this.footer.childNodes.forEach(function(a,b){a.element.style.display=b<e?"none":""})}},destroy:function(){clearInterval(this.timer_);this.thread.destroy();this.modificator.destroy();this.header.destroy();
this.footer.destroy();this.childNodesDataset.destroy();k.removeHandler(this.content,"scroll",this.recalc,this);k.removeHandler(window,"resize",this.recalc,this);this.inherit()}});f.namespace("basis.ui.toc").extend({Control:o,ControlItem:t,ControlItemHeader:r,ControlHeaderList:w})})(basis);
(function(f){var o=f.dom,n=f.dom.event,k=f.EventObject.createEvent,q=f.cssom.classList,p=f.dom.wrapper,v=f.dragdrop.DragDropElement,r=f.layout.Box,t=p.TmplNode.subclass({pos:0,caption:String.Entity.nbsp,template:'<div class="Basis-Slider-Mark"><span class="Basis-Slider-Mark-CaptionWrapper"><span class="Basis-Slider-Mark-Caption">{text}</span></span></div>',init:function(f){p.TmplNode.prototype.init.call(this,f);o.setStyle(this.element,{left:100*this.pos+"%",width:100*this.width+"%"});this.tmpl.text.nodeValue=
this.caption;this.isLast&&q(this.element).add("last");this.isRange&&q(this.element).add("range")}}),m=p.TmplContainer.subclass({template:'<div class="Basis-Slider-MarkLayer"/>',childClass:t,captionGetter:Function.$self,count:0,marks:null,init:function(f){p.TmplContainer.prototype.init.call(this,f);this.apply()},apply:function(){var f=this.marks||[];if(this.count>0){var d=this;f.push.apply(f,Array.create(this.count,function(f){var m=this.closest((f+1)/d.count);return{pos:(m-this.min)/this.range_,caption:d.captionFormat(m),
isLast:d.count==f+1}},this.owner_))}var m=0,f=f.filter(Function.$isNotNull).sortAsObject("pos").map(function(d){var f=d.pos;d.width=d.pos-m;d.pos=m;m=f;return d},this);m!=1&&f.push({pos:m,width:1-m,isLast:!0});this.setChildNodes(f)}}),w={move:function(){var f=this.tmpl.scrollbar;this.setValue_((n.mouseX(event)-(new r(f)).left)/f.offsetWidth*this.count_)}},k=p.TmplNode.subclass({event_change:k("change"),captionFormat:function(f){return Math.round(Number(f))},min:0,max:100,step:1,value:NaN,value_:NaN,
template:'<div{element} class="Basis-Slider Basis-Slider-MinMaxInside" event-mousewheel="step" event-keyup="step" event-mousedown="focus" tabindex="0"><div class="Basis-Slider-MinLabel"><span class="caption">{minValue}</span></div><div class="Basis-Slider-MaxLabel"><span class="caption">{maxValue}</span></div><div{scrollbarContainer} class="Basis-Slider-ScrollbarContainer" event-click="jumpTo"><div{marks} class="Basis-Slider-MarkLayers"/><div{scrollbar} class="Basis-Slider-Scrollbar"><div{scrollTrumb} class="Basis-Slider-ScrollbarSlider"></div></div></div></div>',
action:{jumpTo:function(f){var d=this.tmpl.scrollbar;this.setValue_((n.mouseX(f)-(new r(d)).left)/d.offsetWidth*this.count_)},focus:function(){o.focus(this.element)},step:function(f){var d=n.wheelDelta(f);if(d)o.focus(this.element),d<0?this.stepDown():this.stepUp();else switch(n.key(f)){case n.KEY.DOWN:case n.KEY.LEFT:case 189:case 109:this.stepDown();break;case n.KEY.UP:case n.KEY.RIGHT:case 187:case 107:this.stepUp();break;case n.KEY.PAGEDOWN:this.stepDown(10);break;case n.KEY.PAGEUP:this.stepUp(10);
break;case n.KEY.HOME:this.setValue(this.min);break;case n.KEY.END:this.setValue(this.max)}}},satelliteConfig:{marks:{instanceOf:p.TmplContainer.subclass({template:'<div class="Basis-Slider-MarkLayers"/>',childClass:m})}},marks:"auto",init:function(f){var d=this.step,m=this.value;this.step=0;this.value=this.min;this.value_=0;p.TmplNode.prototype.init.call(this,f);this.setProperties(this.min,this.max,d);this.setValue(isNaN(m)?this.min:m);this.scrollbarDD=new v({element:this.tmpl.scrollTrumb,handler:w,
handlerContext:this})},setProperties:function(f,d,m){if(f>d)var k=f,f=d,d=k;m=m||1;f=f||0;if(this.min!=f||this.max!=d||this.step!=m)this.count_=Math.ceil((d-f)/m),this.step=m,this.min=f,this.max=this.min+this.count_*this.step,this.range_=this.max-this.min,this.tmpl.minValue.nodeValue=this.captionFormat(this.min),this.tmpl.maxValue.nodeValue=this.captionFormat(this.max),q(this.element).bool("NoMax",this.max==this.min),this.marks&&this.satellite.marks.setChildNodes((Array.isArray(this.marks)?this.marks:
[this.marks]).map(function(d){typeof d!="object"&&(d={count:d});d=Object.extend({captionFormat:this.captionFormat,owner_:this},d);if(d.count=="auto")d.count=Math.min(this.count_,20);return d},this)),this.setValue(this.value||this.min)},closest:function(f){return this.normalize(this.min+this.range_*f.fit(0,1)+this.step/2)},normalize:function(f){if(f<this.min)f=this.min;else if(f>this.max)f=this.max;return this.min+Math.floor(1.0E-5+(f-this.min)/this.step)*this.step},stepUp:function(f){this.setValue_(this.value_+
parseInt(f||1))},stepDown:function(f){this.setValue_(this.value_-parseInt(f||1))},setValue_:function(f){f=Math.round(f).fit(0,this.count_);if(this.value_!=f){this.value_=f;var d=this.value;this.value=this.normalize(this.min+f*this.step);this.tmpl.scrollTrumb.style.left=(100*(f/this.count_)).toFixed(4)+"%";this.event_change(this,d)}},setValue:function(f){this.setValue_((f-this.min)/this.step)},destroy:function(){this.scrollbarDD.destroy();this.scrollbarDD=null;p.TmplNode.prototype.destroy.call(this)}});
Object.extend(k,{MarkLayer:m,Mark:t});f.namespace("basis.ui.slider").extend({Slider:k})})(basis);
(function(f){function o(f,m){if(window.getComputedStyle){var k=document.defaultView.getComputedStyle(f,null);if(k)return k.getPropertyValue(m)}else if(f.currentStyle)return f.currentStyle[m]}var n=f.dom,k=f.cssom.classList,q=f.dragdrop.DragDropElement,p=f.cssom.cssRule("IFRAME"),v={width:"deltaX",height:"deltaY"},r={width:{"-1":"w-resize",1:"e-resize"},height:{"-1":"n-resize",1:"s-resize"}},q=q.subclass(function(f){return{factor:NaN,property:"width",event_prepare:function(){v[this.property]?p.setProperty("pointerEvents",
"none"):(typeof console!="undefined"&&console.warn("Property to change `"+this.property+"` is unsupported"),this.stop())},event_start:function(m){f.event_start.call(this,m);m.delta=v[this.property];m.factor=this.factor;var n=this.element.parentNode,p=o(this.element,"float"),d=o(this.element,"position");if(m.delta=="deltaY"){if(n=n.clientHeight-parseFloat(o(n,"padding-top"))-parseFloat(o(n,"padding-bottom")),m.offsetStart=this.element.offsetHeight,isNaN(m.factor))m.factor=d!="static"&&o(this.element,
"bottom")!="auto"?-1:1}else if(n=n.clientWidth-parseFloat(o(n,"padding-left"))-parseFloat(o(n,"padding-right")),m.offsetStart=this.element.offsetWidth,isNaN(m.factor))m.factor=p=="right"||d!="static"&&o(this.element,"right")!="auto"?-1:1;m.offsetStartInPercent=100/n;k(this.resizer).add("selected")},event_move:function(m){f.event_move.call(this,m);this.element.style[this.property]=m.offsetStartInPercent*(m.offsetStart+m.factor*m[m.delta])+"%"},event_over:function(m){f.event_over.call(this,m);k(this.resizer).remove("selected");
p.setProperty("pointerEvents","auto")},init:function(m){this.resizer=n.createElement(".Basis-Resizer");this.resizer.style.cursor=r[this.property][1];f.init.call(this,m)},setElement:function(m){var k=this.element;f.setElement.call(this,m,this.resizer);k!==this.element&&(k&&n.remove(this.resizer),this.element&&n.insert(this.element,this.resizer))}}});f.namespace("basis.ui.resizer").extend({Resizer:q})})(basis);
(function(f){function o(f){return(100*f).toFixed(4)+"%"}function n(f){var k=f.childNodes.search(f.activePage_,"data.pageNumber");k?k.select():f.selection.clear()}var k=f.dom.event,q=f.EventObject.createEvent,p=f.cssom.classList,v=f.dom.wrapper,r=v.TmplNode.subclass({pageGetter:Function.getter("data.pageNumber"),urlGetter:Function.$self,template:'<td{element} class="Basis-PaginatorNode"><span><a{link|selected} event-click="click" href="#">{pageNumber}</a></span></td>',action:{click:function(f){k.kill(f);
this.isDisabled()||this.click()}},click:function(){this.parentNode&&this.parentNode.setActivePage(this.pageGetter(this))},event_update:function(f,k){v.TmplNode.prototype.event_update.call(this,f,k);var n=this.pageGetter(this);this.tmpl.pageNumber.nodeValue=n+1;this.tmpl.link.href=this.urlGetter(n)}}),t={start:function(){this.initOffset=this.tmpl.scrollTrumb.offsetLeft},move:function(f){f=((this.initOffset+f.deltaX)/this.tmpl.scrollTrumbWrapper.offsetWidth).fit(0,1);this.setSpanStartPage(Math.round(f*
(this.pageCount_-this.pageSpan_)));this.tmpl.scrollTrumb.style.left=o(f)},over:function(){this.setSpanStartPage(this.spanStartPage_)}},q=v.Control.subclass({childClass:r,template:'<div{element} class="Basis-Paginator" event-mousewheel="scroll"><table><tbody><tr{childNodesElement}/></tbody></table><div{scrollbarContainer} class="Basis-Paginator-ScrollbarContainer"><div{scrollbar} class="Basis-Paginator-Scrollbar" event-click="jumpTo"><div{activePageMarkWrapper}><div{activePageMark} class="Basis-Paginator-ActivePageMark"><div/></div></div><div{scrollTrumbWrapper}><div{scrollTrumb} class="Basis-Paginator-ScrollbarSlider"><div{scrollTrumbElement}><span/></div></div></div></div></div></div>',
action:{jumpTo:function(m,n){var o=this.tmpl.scrollbar,o=(k.mouseX(n)-(new f.Layout.Box(o)).left)/o.offsetWidth;this.setSpanStartPage(Math.floor(o*this.pageCount_)-Math.floor(this.pageSpan_/2))},scroll:function(f){(f=k.wheelDelta(f))&&this.setSpanStartPage(this.spanStartPage_+f)}},event_activePageChanged:q("activePageChanged"),event_pageCountChanged:q("pageCountChanged"),pageSpan_:0,pageCount_:0,activePage_:0,spanStartPage_:-1,init:function(m){v.Control.prototype.init.call(this,m);this.setProperties(m.pageCount||
0,m.pageSpan);this.setActivePage(Math.max(m.activePage-1,0),!0);this.scrollbarDD=new f.DragDrop.DragDropElement({element:this.tmpl.scrollTrumb,handler:t,handlerContext:this})},setProperties:function(f,k,n){f=f||1;k=Math.min(k||10,f);if(k!=this.pageSpan_)this.pageSpan_=k,this.setChildNodes(Array.create(k,function(d){return{data:{pageNumber:d}}}));if(this.pageCount_!=f){this.pageCount_=f;var d=1/f;this.tmpl.activePageMark.style.width=o(d/(1-d));this.tmpl.activePageMarkWrapper.style.width=o(1-d);this.event_pageCountChanged(this.pageCount_)}var d=
k/f,q=d/(1-d);this.tmpl.scrollTrumbWrapper.style.width=o(1-d);this.tmpl.scrollTrumb.style.width=o(q);p(this.element).bool("Basis-Paginator-WithNoScroll",k>=f);this.setSpanStartPage(this.spanStartPage_);this.setActivePage(arguments.length==3?n:this.activePage_)},setActivePage:function(f,k){f=f.fit(0,this.pageCount_-1);if(f!=this.activePage_)this.activePage_=Number(f),n(this),this.event_activePageChanged(f);this.tmpl.activePageMark.style.left=o(f/Math.max(this.pageCount_-1,1));k&&this.spotlightPage(this.activePage_)},
spotlightPage:function(f){this.setSpanStartPage(f-Math.round(this.pageSpan_/2)+1)},setSpanStartPage:function(f){f=f.fit(0,this.pageCount_-this.pageSpan_);if(f!=this.spanStartPage_){this.spanStartPage_=f;for(var k=this.childNodes.length;k-- >0;)this.childNodes[k].update({pageNumber:f+k});n(this)}this.tmpl.scrollTrumb.style.left=o((f/Math.max(this.pageCount_-this.pageSpan_,1)).fit(0,1))},destroy:function(){this.scrollbarDD.destroy();this.scrollbarDD=null;v.Control.prototype.destroy.call(this)}});f.namespace("basis.ui.paginator").extend({Paginator:q})})(basis);
(function(f){var o=f.dom,n=f.Class,k=f.cssom,q=f.ui.scroller.Scroller,p=f.cssom.classList,n=n(f.ui.tabs.PageControl,{template:'<div class="Basis-PageControl Basis-PageSlider"><div/></div>',event_childNodesModified:function(){this.constructor.superClass_.prototype.event_childNodesModified.apply(this,arguments);for(var f=0,k;k=this.childNodes[f];f++)o.setStyle(k.element,{left:100*f+"%"})},init:function(f){var n="gerericRule_"+this.eventObjectId;this.pageSliderCssRule=k.cssRule("."+n+" > .Basis-Page");
this.constructor.superClass_.prototype.init.call(this,f);p(this.element).add(n);this.scroller=new q({targetElement:this.element,preventScrollY:!1,minScrollDelta:10,handler:{startInertia:function(f){var k=this.selection.pick();if(k){var n=k;f.currentDirectionX==0||f.currentDirectionX==1&&f.viewportX<k.element.offsetLeft||f.currentDirectionX==-1&&f.viewportX>k.element.offsetLeft?(f.minScrollDeltaXReached=!0,n=this.childNodes[Math.round(f.viewportX/k.element.offsetWidth)]):n=f.currentDirectionX==1?k.nextSibling:
k.previousSibling;n||(n=k);n==k?this.slideToPage(k):n.select()}f.currentVelocityX=0}},handlerContext:this});this.selection.addHandler({datasetChanged:function(){var f=this.pick();f&&f.parentNode.slideToPage(f)}});if(this.selection.itemCount){var o=this;setTimeout(function(){o.slideToPage(o.selection.pick())},0)}},slideToPage:function(f){this.scroller.setTargetPosition(f.element.offsetLeft)},destroy:function(){this.constructor.superClass_.prototype.init.call(this,config);k.getStyleSheet().removeCssRule(this.pageSliderCssRule.rule);
this.pageSliderCssRule=null;this.scroller.destroy();this.scroller=null}});f.namespace("basis.ui.pageslider").extend({PageSlider:n})})(basis);
(function(){function f(f,o){for(var p=function(f){function k(d,i,a,c){q!=i&&o.push(f.substring(q,i).replace(n,'<span class="token-keyword">$1</span>'));q=a+1;o.push('<span class="token-'+d+'">'+f.substring(i,a+1)+"</span>"+(c||""))}for(var o=[],d=f.toArray(),p,q=0,l=0;l<d.length;l++)if(d[l]=="'")for(p=l;++l<d.length;){if(d[l]=="'"){k("string",p,l);break}if(d[l]=="\n")break;d[l]=="\\"&&(l++,d[l]=="\n"&&(k("string",p,l-1),p=l+1))}else if(d[l]=='"')for(p=l;++l<d.length;){if(d[l]=='"'){k("string",p,l);
break}if(d[l]=="\n")break;d[l]=="\\"&&(l++,d[l]=="\n"&&(k("string",p,l-1),p=l))}else if(d[l]=="/"){p=l;l++;if(d[l]=="/"){for(;++l<d.length;)if(d[l]=="\n")break;k("comment",p,l-1)}if(d[l]=="*")for(;++l<d.length;)if(d[l]=="*"&&d[l+1]=="/"){k("comment",p,++l);break}else d[l]=="\n"&&(k("comment",p,l-1,"\n"),q=p=l+1)}o.push(f.substr(q).replace(n,'<span class="token-keyword">$1</span>'));return o}(function(f){f=f.trimRight().replace(/\r\n|\n\r|\r/g,"\n");o||(f=f.replace(/^(?:\s*[\n]+)+?([ \t]*)/,"$1"));
f=f.replace(/\n[ \t]+/g,function(d){return d.replace(/\t/g,"  ")}).replace(/\n[ \t]+\n/g,"\n\n");if(!o){for(var k=1E3,n=f.split(/\n+/),d=Number(f.match(/^function/)!=null);d<n.length;d++){var p=n[d].match(/^\s*/);if(p[0].length<k)k=p[0].length;if(k==0)break}k>0&&(f=f.replace(RegExp("(^|\\n) {"+k+"}","g"),"$1"))}return f=f.replace(RegExp("(^|\\n)( +)","g"),function(d,f,k){return f+"\u00a0".repeat(k.length)})}(f).replace(/</g,"&lt;")).join("").split("\n"),v=String(p.length>>1).length,r=[],t=0;t<p.length;t++)r.push('<div class="line '+
(t%2?"odd":"even")+'"><span class="lineContent"><input class="lineNumber" value="'+(t+1).lead(v)+'" type="none" unselectable="on" readonly="readonly" tabindex="-1" /><span class="over"></span>'+(p[t]+"\r\n")+"</span></div>");return r.join("")}var o=basis.dom.wrapper.TmplNode,n=RegExp("\\b("+"break case catch continue default delete do else false for function if in instanceof new null return super switch this throw true try typeof var while with".qw().join("|")+")\\b","g"),o=basis.Class(o,{template:'<pre{element|codeElement} class="Basis-SyntaxHighlight"/>',
codeGetter:Function.getter("data.code"),normalize:!0,templateUpdate:function(){var k=this.codeGetter(this);if(k!=this.code_)this.code_=k,this.tmpl.codeElement.innerHTML=f(k,!this.normalize)}});basis.namespace("basis.format.highlight").extend({highlight:f,SourceCodeNode:o})})();
