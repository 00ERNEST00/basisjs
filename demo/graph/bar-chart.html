<!doctype html>

<html>

<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />

  <title>Basis Demos: Bar Chart</title>

  <style type="text/css" id="demo-css">
    BODY, HTML
    {
      font-size: small;
      font-family: Tahoma, Verdana, Arial, sans-serif;
    }
  </style>

  <script type="text/javascript" src="../../basis-all.js"></script>
  <script type="text/javascript" src="../../src/basis/ui/graph.js"></script>

  <script type="text/javascript" src="../seedrandom.js"></script>
  <script type="text/javascript" src="../demo.js"></script>
</head>

<body>
  <h1>Basis Demos: Bar Chart</h1>
  
  <p id="demo-summary">
    ..
  </p>
  <div id="demo-description">
    ..
  </div>

  <div id="demo-container"></div>

  <script type="text/javascript" id="demo-javascript">

    var DOM = basis.dom;
    var nsEntity = basis.entity;
    var BarChart = basis.ui.graph.BarChart;
    var Graph = basis.ui.graph.Graph;

    //
    // Example
    //

    var countries = ['Russia', 'United States', 'China', 'UK', 'Germany']

    var data = [];
    var lastValue;
    var value;

    Math.seedrandom("barchart");

    for (var i = 0, countries; country = countries[i]; i++)
    {
      var row = {
        Country: country
      }
      
      lastValue = (50000 - 10000) * Math.random() + 10000; // 10 000 - 50 000
      for (var year = 2010; year <= 2012; year++)
      {
        lastValue = row[year] = lastValue + 0.2 * lastValue * (2 * Math.random() - 1); // +/- 20% from last value;
      }

      data.push(row);
    }
    data = basis.data(data);

    new BarChart({
      container: DOM.get('demo-container'),
      width: 800,
      height: 450,

      propGetter: Function.getter('data.Country'),

      childNodes: [
        {
          legend: '2010',
          valueGetter: Function.getter('data[2010]'),
          childNodes: data
        },
        {
          legend: '2011',
          valueGetter: Function.getter('data[2011]'),
          childNodes: data
        },
        {
          legend: '2012',
          valueGetter: Function.getter('data[2012]'),
          childNodes: data
        }
      ]
    });

  </script>
</body>

</html>